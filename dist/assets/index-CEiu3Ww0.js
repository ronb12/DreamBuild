function ZD(n,e){for(var t=0;t<e.length;t++){const r=e[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in n)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(n,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function RC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ov={exports:{}},wd={},Mv={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bE;function eO(){if(bE)return Ge;bE=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),y=Symbol.iterator;function x(U){return U===null||typeof U!="object"?null:(U=y&&U[y]||U["@@iterator"],typeof U=="function"?U:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,k={};function I(U,te,Ne){this.props=U,this.context=te,this.refs=k,this.updater=Ne||S}I.prototype.isReactComponent={},I.prototype.setState=function(U,te){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,te,"setState")},I.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function M(){}M.prototype=I.prototype;function j(U,te,Ne){this.props=U,this.context=te,this.refs=k,this.updater=Ne||S}var C=j.prototype=new M;C.constructor=j,E(C,I.prototype),C.isPureReactComponent=!0;var F=Array.isArray,G=Object.prototype.hasOwnProperty,q={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function _(U,te,Ne){var Pe,Ve={},Be=null,Xe=null;if(te!=null)for(Pe in te.ref!==void 0&&(Xe=te.ref),te.key!==void 0&&(Be=""+te.key),te)G.call(te,Pe)&&!N.hasOwnProperty(Pe)&&(Ve[Pe]=te[Pe]);var ne=arguments.length-2;if(ne===1)Ve.children=Ne;else if(1<ne){for(var ye=Array(ne),fe=0;fe<ne;fe++)ye[fe]=arguments[fe+2];Ve.children=ye}if(U&&U.defaultProps)for(Pe in ne=U.defaultProps,ne)Ve[Pe]===void 0&&(Ve[Pe]=ne[Pe]);return{$$typeof:n,type:U,key:Be,ref:Xe,props:Ve,_owner:q.current}}function R(U,te){return{$$typeof:n,type:U.type,key:te,ref:U.ref,props:U.props,_owner:U._owner}}function O(U){return typeof U=="object"&&U!==null&&U.$$typeof===n}function B(U){var te={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Ne){return te[Ne]})}var z=/\/+/g;function L(U,te){return typeof U=="object"&&U!==null&&U.key!=null?B(""+U.key):te.toString(36)}function Te(U,te,Ne,Pe,Ve){var Be=typeof U;(Be==="undefined"||Be==="boolean")&&(U=null);var Xe=!1;if(U===null)Xe=!0;else switch(Be){case"string":case"number":Xe=!0;break;case"object":switch(U.$$typeof){case n:case e:Xe=!0}}if(Xe)return Xe=U,Ve=Ve(Xe),U=Pe===""?"."+L(Xe,0):Pe,F(Ve)?(Ne="",U!=null&&(Ne=U.replace(z,"$&/")+"/"),Te(Ve,te,Ne,"",function(fe){return fe})):Ve!=null&&(O(Ve)&&(Ve=R(Ve,Ne+(!Ve.key||Xe&&Xe.key===Ve.key?"":(""+Ve.key).replace(z,"$&/")+"/")+U)),te.push(Ve)),1;if(Xe=0,Pe=Pe===""?".":Pe+":",F(U))for(var ne=0;ne<U.length;ne++){Be=U[ne];var ye=Pe+L(Be,ne);Xe+=Te(Be,te,Ne,ye,Ve)}else if(ye=x(U),typeof ye=="function")for(U=ye.call(U),ne=0;!(Be=U.next()).done;)Be=Be.value,ye=Pe+L(Be,ne++),Xe+=Te(Be,te,Ne,ye,Ve);else if(Be==="object")throw te=String(U),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.");return Xe}function Ce(U,te,Ne){if(U==null)return U;var Pe=[],Ve=0;return Te(U,Pe,"","",function(Be){return te.call(Ne,Be,Ve++)}),Pe}function we(U){if(U._status===-1){var te=U._result;te=te(),te.then(function(Ne){(U._status===0||U._status===-1)&&(U._status=1,U._result=Ne)},function(Ne){(U._status===0||U._status===-1)&&(U._status=2,U._result=Ne)}),U._status===-1&&(U._status=0,U._result=te)}if(U._status===1)return U._result.default;throw U._result}var $e={current:null},le={transition:null},ie={ReactCurrentDispatcher:$e,ReactCurrentBatchConfig:le,ReactCurrentOwner:q};function se(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:Ce,forEach:function(U,te,Ne){Ce(U,function(){te.apply(this,arguments)},Ne)},count:function(U){var te=0;return Ce(U,function(){te++}),te},toArray:function(U){return Ce(U,function(te){return te})||[]},only:function(U){if(!O(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ge.Component=I,Ge.Fragment=t,Ge.Profiler=s,Ge.PureComponent=j,Ge.StrictMode=r,Ge.Suspense=d,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,Ge.act=se,Ge.cloneElement=function(U,te,Ne){if(U==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+U+".");var Pe=E({},U.props),Ve=U.key,Be=U.ref,Xe=U._owner;if(te!=null){if(te.ref!==void 0&&(Be=te.ref,Xe=q.current),te.key!==void 0&&(Ve=""+te.key),U.type&&U.type.defaultProps)var ne=U.type.defaultProps;for(ye in te)G.call(te,ye)&&!N.hasOwnProperty(ye)&&(Pe[ye]=te[ye]===void 0&&ne!==void 0?ne[ye]:te[ye])}var ye=arguments.length-2;if(ye===1)Pe.children=Ne;else if(1<ye){ne=Array(ye);for(var fe=0;fe<ye;fe++)ne[fe]=arguments[fe+2];Pe.children=ne}return{$$typeof:n,type:U.type,key:Ve,ref:Be,props:Pe,_owner:Xe}},Ge.createContext=function(U){return U={$$typeof:o,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},U.Provider={$$typeof:i,_context:U},U.Consumer=U},Ge.createElement=_,Ge.createFactory=function(U){var te=_.bind(null,U);return te.type=U,te},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(U){return{$$typeof:u,render:U}},Ge.isValidElement=O,Ge.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:we}},Ge.memo=function(U,te){return{$$typeof:p,type:U,compare:te===void 0?null:te}},Ge.startTransition=function(U){var te=le.transition;le.transition={};try{U()}finally{le.transition=te}},Ge.unstable_act=se,Ge.useCallback=function(U,te){return $e.current.useCallback(U,te)},Ge.useContext=function(U){return $e.current.useContext(U)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(U){return $e.current.useDeferredValue(U)},Ge.useEffect=function(U,te){return $e.current.useEffect(U,te)},Ge.useId=function(){return $e.current.useId()},Ge.useImperativeHandle=function(U,te,Ne){return $e.current.useImperativeHandle(U,te,Ne)},Ge.useInsertionEffect=function(U,te){return $e.current.useInsertionEffect(U,te)},Ge.useLayoutEffect=function(U,te){return $e.current.useLayoutEffect(U,te)},Ge.useMemo=function(U,te){return $e.current.useMemo(U,te)},Ge.useReducer=function(U,te,Ne){return $e.current.useReducer(U,te,Ne)},Ge.useRef=function(U){return $e.current.useRef(U)},Ge.useState=function(U){return $e.current.useState(U)},Ge.useSyncExternalStore=function(U,te,Ne){return $e.current.useSyncExternalStore(U,te,Ne)},Ge.useTransition=function(){return $e.current.useTransition()},Ge.version="18.3.1",Ge}var wE;function Qb(){return wE||(wE=1,Mv.exports=eO()),Mv.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function tO(){if(SE)return wd;SE=1;var n=Qb(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(u,d,p){var f,y={},x=null,S=null;p!==void 0&&(x=""+p),d.key!==void 0&&(x=""+d.key),d.ref!==void 0&&(S=d.ref);for(f in d)r.call(d,f)&&!i.hasOwnProperty(f)&&(y[f]=d[f]);if(u&&u.defaultProps)for(f in d=u.defaultProps,d)y[f]===void 0&&(y[f]=d[f]);return{$$typeof:e,type:u,key:x,ref:S,props:y,_owner:s.current}}return wd.Fragment=t,wd.jsx=o,wd.jsxs=o,wd}var _E;function nO(){return _E||(_E=1,Ov.exports=tO()),Ov.exports}var c=nO(),A=Qb();const Cr=RC(A),rO=ZD({__proto__:null,default:Cr},[A]);var km={},Lv={exports:{}},Ln={},Fv={exports:{}},Vv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE;function sO(){return EE||(EE=1,(function(n){function e(le,ie){var se=le.length;le.push(ie);e:for(;0<se;){var U=se-1>>>1,te=le[U];if(0<s(te,ie))le[U]=ie,le[se]=te,se=U;else break e}}function t(le){return le.length===0?null:le[0]}function r(le){if(le.length===0)return null;var ie=le[0],se=le.pop();if(se!==ie){le[0]=se;e:for(var U=0,te=le.length,Ne=te>>>1;U<Ne;){var Pe=2*(U+1)-1,Ve=le[Pe],Be=Pe+1,Xe=le[Be];if(0>s(Ve,se))Be<te&&0>s(Xe,Ve)?(le[U]=Xe,le[Be]=se,U=Be):(le[U]=Ve,le[Pe]=se,U=Pe);else if(Be<te&&0>s(Xe,se))le[U]=Xe,le[Be]=se,U=Be;else break e}}return ie}function s(le,ie){var se=le.sortIndex-ie.sortIndex;return se!==0?se:le.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();n.unstable_now=function(){return o.now()-u}}var d=[],p=[],f=1,y=null,x=3,S=!1,E=!1,k=!1,I=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(le){for(var ie=t(p);ie!==null;){if(ie.callback===null)r(p);else if(ie.startTime<=le)r(p),ie.sortIndex=ie.expirationTime,e(d,ie);else break;ie=t(p)}}function F(le){if(k=!1,C(le),!E)if(t(d)!==null)E=!0,we(G);else{var ie=t(p);ie!==null&&$e(F,ie.startTime-le)}}function G(le,ie){E=!1,k&&(k=!1,M(_),_=-1),S=!0;var se=x;try{for(C(ie),y=t(d);y!==null&&(!(y.expirationTime>ie)||le&&!B());){var U=y.callback;if(typeof U=="function"){y.callback=null,x=y.priorityLevel;var te=U(y.expirationTime<=ie);ie=n.unstable_now(),typeof te=="function"?y.callback=te:y===t(d)&&r(d),C(ie)}else r(d);y=t(d)}if(y!==null)var Ne=!0;else{var Pe=t(p);Pe!==null&&$e(F,Pe.startTime-ie),Ne=!1}return Ne}finally{y=null,x=se,S=!1}}var q=!1,N=null,_=-1,R=5,O=-1;function B(){return!(n.unstable_now()-O<R)}function z(){if(N!==null){var le=n.unstable_now();O=le;var ie=!0;try{ie=N(!0,le)}finally{ie?L():(q=!1,N=null)}}else q=!1}var L;if(typeof j=="function")L=function(){j(z)};else if(typeof MessageChannel<"u"){var Te=new MessageChannel,Ce=Te.port2;Te.port1.onmessage=z,L=function(){Ce.postMessage(null)}}else L=function(){I(z,0)};function we(le){N=le,q||(q=!0,L())}function $e(le,ie){_=I(function(){le(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(le){le.callback=null},n.unstable_continueExecution=function(){E||S||(E=!0,we(G))},n.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<le?Math.floor(1e3/le):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(d)},n.unstable_next=function(le){switch(x){case 1:case 2:case 3:var ie=3;break;default:ie=x}var se=x;x=ie;try{return le()}finally{x=se}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(le,ie){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var se=x;x=le;try{return ie()}finally{x=se}},n.unstable_scheduleCallback=function(le,ie,se){var U=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?U+se:U):se=U,le){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=se+te,le={id:f++,callback:ie,priorityLevel:le,startTime:se,expirationTime:te,sortIndex:-1},se>U?(le.sortIndex=se,e(p,le),t(d)===null&&le===t(p)&&(k?(M(_),_=-1):k=!0,$e(F,se-U))):(le.sortIndex=te,e(d,le),E||S||(E=!0,we(G))),le},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(le){var ie=x;return function(){var se=x;x=ie;try{return le.apply(this,arguments)}finally{x=se}}}})(Vv)),Vv}var TE;function iO(){return TE||(TE=1,Fv.exports=sO()),Fv.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IE;function oO(){if(IE)return Ln;IE=1;var n=Qb(),e=iO();function t(a){for(var l="https://reactjs.org/docs/error-decoder.html?invariant="+a,h=1;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+a+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function i(a,l){o(a,l),o(a+"Capture",l)}function o(a,l){for(s[a]=l,a=0;a<l.length;a++)r.add(l[a])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},y={};function x(a){return d.call(y,a)?!0:d.call(f,a)?!1:p.test(a)?y[a]=!0:(f[a]=!0,!1)}function S(a,l,h,g){if(h!==null&&h.type===0)return!1;switch(typeof l){case"function":case"symbol":return!0;case"boolean":return g?!1:h!==null?!h.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function E(a,l,h,g){if(l===null||typeof l>"u"||S(a,l,h,g))return!0;if(g)return!1;if(h!==null)switch(h.type){case 3:return!l;case 4:return l===!1;case 5:return isNaN(l);case 6:return isNaN(l)||1>l}return!1}function k(a,l,h,g,v,b,P){this.acceptsBooleans=l===2||l===3||l===4,this.attributeName=g,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=a,this.type=l,this.sanitizeURL=b,this.removeEmptyString=P}var I={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){I[a]=new k(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var l=a[0];I[l]=new k(l,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){I[a]=new k(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){I[a]=new k(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){I[a]=new k(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){I[a]=new k(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){I[a]=new k(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){I[a]=new k(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){I[a]=new k(a,5,!1,a.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function j(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var l=a.replace(M,j);I[l]=new k(l,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var l=a.replace(M,j);I[l]=new k(l,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var l=a.replace(M,j);I[l]=new k(l,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){I[a]=new k(a,1,!1,a.toLowerCase(),null,!1,!1)}),I.xlinkHref=new k("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){I[a]=new k(a,1,!1,a.toLowerCase(),null,!0,!0)});function C(a,l,h,g){var v=I.hasOwnProperty(l)?I[l]:null;(v!==null?v.type!==0:g||!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(E(l,h,v,g)&&(h=null),g||v===null?x(l)&&(h===null?a.removeAttribute(l):a.setAttribute(l,""+h)):v.mustUseProperty?a[v.propertyName]=h===null?v.type===3?!1:"":h:(l=v.attributeName,g=v.attributeNamespace,h===null?a.removeAttribute(l):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,g?a.setAttributeNS(g,l,h):a.setAttribute(l,h))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,G=Symbol.for("react.element"),q=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),B=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Ce=Symbol.for("react.memo"),we=Symbol.for("react.lazy"),$e=Symbol.for("react.offscreen"),le=Symbol.iterator;function ie(a){return a===null||typeof a!="object"?null:(a=le&&a[le]||a["@@iterator"],typeof a=="function"?a:null)}var se=Object.assign,U;function te(a){if(U===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);U=l&&l[1]||""}return`
`+U+a}var Ne=!1;function Pe(a,l){if(!a||Ne)return"";Ne=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(l)if(l=function(){throw Error()},Object.defineProperty(l.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(l,[])}catch(X){var g=X}Reflect.construct(a,[],l)}else{try{l.call()}catch(X){g=X}a.call(l.prototype)}else{try{throw Error()}catch(X){g=X}a()}}catch(X){if(X&&g&&typeof X.stack=="string"){for(var v=X.stack.split(`
`),b=g.stack.split(`
`),P=v.length-1,V=b.length-1;1<=P&&0<=V&&v[P]!==b[V];)V--;for(;1<=P&&0<=V;P--,V--)if(v[P]!==b[V]){if(P!==1||V!==1)do if(P--,V--,0>V||v[P]!==b[V]){var $=`
`+v[P].replace(" at new "," at ");return a.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",a.displayName)),$}while(1<=P&&0<=V);break}}}finally{Ne=!1,Error.prepareStackTrace=h}return(a=a?a.displayName||a.name:"")?te(a):""}function Ve(a){switch(a.tag){case 5:return te(a.type);case 16:return te("Lazy");case 13:return te("Suspense");case 19:return te("SuspenseList");case 0:case 2:case 15:return a=Pe(a.type,!1),a;case 11:return a=Pe(a.type.render,!1),a;case 1:return a=Pe(a.type,!0),a;default:return""}}function Be(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case N:return"Fragment";case q:return"Portal";case R:return"Profiler";case _:return"StrictMode";case L:return"Suspense";case Te:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case B:return(a.displayName||"Context")+".Consumer";case O:return(a._context.displayName||"Context")+".Provider";case z:var l=a.render;return a=a.displayName,a||(a=l.displayName||l.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case Ce:return l=a.displayName||null,l!==null?l:Be(a.type)||"Memo";case we:l=a._payload,a=a._init;try{return Be(a(l))}catch{}}return null}function Xe(a){var l=a.type;switch(a.tag){case 24:return"Cache";case 9:return(l.displayName||"Context")+".Consumer";case 10:return(l._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=l.render,a=a.displayName||a.name||"",l.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return l;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(l);case 8:return l===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof l=="function")return l.displayName||l.name||null;if(typeof l=="string")return l}return null}function ne(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ye(a){var l=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function fe(a){var l=ye(a)?"checked":"value",h=Object.getOwnPropertyDescriptor(a.constructor.prototype,l),g=""+a[l];if(!a.hasOwnProperty(l)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,b=h.set;return Object.defineProperty(a,l,{configurable:!0,get:function(){return v.call(this)},set:function(P){g=""+P,b.call(this,P)}}),Object.defineProperty(a,l,{enumerable:h.enumerable}),{getValue:function(){return g},setValue:function(P){g=""+P},stopTracking:function(){a._valueTracker=null,delete a[l]}}}}function ot(a){a._valueTracker||(a._valueTracker=fe(a))}function dr(a){if(!a)return!1;var l=a._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return a&&(g=ye(a)?a.checked?"true":"false":a.value),a=g,a!==h?(l.setValue(a),!0):!1}function wi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function El(a,l){var h=l.checked;return se({},l,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??a._wrapperState.initialChecked})}function pp(a,l){var h=l.defaultValue==null?"":l.defaultValue,g=l.checked!=null?l.checked:l.defaultChecked;h=ne(l.value!=null?l.value:h),a._wrapperState={initialChecked:g,initialValue:h,controlled:l.type==="checkbox"||l.type==="radio"?l.checked!=null:l.value!=null}}function Tl(a,l){l=l.checked,l!=null&&C(a,"checked",l,!1)}function Yo(a,l){Tl(a,l);var h=ne(l.value),g=l.type;if(h!=null)g==="number"?(h===0&&a.value===""||a.value!=h)&&(a.value=""+h):a.value!==""+h&&(a.value=""+h);else if(g==="submit"||g==="reset"){a.removeAttribute("value");return}l.hasOwnProperty("value")?$t(a,l.type,h):l.hasOwnProperty("defaultValue")&&$t(a,l.type,ne(l.defaultValue)),l.checked==null&&l.defaultChecked!=null&&(a.defaultChecked=!!l.defaultChecked)}function ku(a,l,h){if(l.hasOwnProperty("value")||l.hasOwnProperty("defaultValue")){var g=l.type;if(!(g!=="submit"&&g!=="reset"||l.value!==void 0&&l.value!==null))return;l=""+a._wrapperState.initialValue,h||l===a.value||(a.value=l),a.defaultValue=l}h=a.name,h!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,h!==""&&(a.name=h)}function $t(a,l,h){(l!=="number"||wi(a.ownerDocument)!==a)&&(h==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+h&&(a.defaultValue=""+h))}var Mt=Array.isArray;function Pr(a,l,h,g){if(a=a.options,l){l={};for(var v=0;v<h.length;v++)l["$"+h[v]]=!0;for(h=0;h<a.length;h++)v=l.hasOwnProperty("$"+a[h].value),a[h].selected!==v&&(a[h].selected=v),v&&g&&(a[h].defaultSelected=!0)}else{for(h=""+ne(h),l=null,v=0;v<a.length;v++){if(a[v].value===h){a[v].selected=!0,g&&(a[v].defaultSelected=!0);return}l!==null||a[v].disabled||(l=a[v])}l!==null&&(l.selected=!0)}}function Au(a,l){if(l.dangerouslySetInnerHTML!=null)throw Error(t(91));return se({},l,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function Pu(a,l){var h=l.value;if(h==null){if(h=l.children,l=l.defaultValue,h!=null){if(l!=null)throw Error(t(92));if(Mt(h)){if(1<h.length)throw Error(t(93));h=h[0]}l=h}l==null&&(l=""),h=l}a._wrapperState={initialValue:ne(h)}}function mp(a,l){var h=ne(l.value),g=ne(l.defaultValue);h!=null&&(h=""+h,h!==a.value&&(a.value=h),l.defaultValue==null&&a.defaultValue!==h&&(a.defaultValue=h)),g!=null&&(a.defaultValue=""+g)}function Si(a){var l=a.textContent;l===a._wrapperState.initialValue&&l!==""&&l!==null&&(a.value=l)}function Nu(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Il(a,l){return a==null||a==="http://www.w3.org/1999/xhtml"?Nu(l):a==="http://www.w3.org/2000/svg"&&l==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var _i,fp=(function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(l,h,g,v){MSApp.execUnsafeLocalFunction(function(){return a(l,h,g,v)})}:a})(function(a,l){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=l;else{for(_i=_i||document.createElement("div"),_i.innerHTML="<svg>"+l.valueOf().toString()+"</svg>",l=_i.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}});function Xo(a,l){if(l){var h=a.firstChild;if(h&&h===a.lastChild&&h.nodeType===3){h.nodeValue=l;return}}a.textContent=l}var Ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gp=["Webkit","ms","Moz","O"];Object.keys(Ei).forEach(function(a){gp.forEach(function(l){l=l+a.charAt(0).toUpperCase()+a.substring(1),Ei[l]=Ei[a]})});function Ti(a,l,h){return l==null||typeof l=="boolean"||l===""?"":h||typeof l!="number"||l===0||Ei.hasOwnProperty(a)&&Ei[a]?(""+l).trim():l+"px"}function Cl(a,l){a=a.style;for(var h in l)if(l.hasOwnProperty(h)){var g=h.indexOf("--")===0,v=Ti(h,l[h],g);h==="float"&&(h="cssFloat"),g?a.setProperty(h,v):a[h]=v}}var ju=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nr(a,l){if(l){if(ju[a]&&(l.children!=null||l.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(l.dangerouslySetInnerHTML!=null){if(l.children!=null)throw Error(t(60));if(typeof l.dangerouslySetInnerHTML!="object"||!("__html"in l.dangerouslySetInnerHTML))throw Error(t(61))}if(l.style!=null&&typeof l.style!="object")throw Error(t(62))}}function kl(a,l){if(a.indexOf("-")===-1)return typeof l.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function Al(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ds=null,Os=null,Nt=null;function Ru(a){if(a=od(a)){if(typeof Ds!="function")throw Error(t(280));var l=a.stateNode;l&&(l=zp(l),Ds(a.stateNode,a.type,l))}}function Ci(a){Os?Nt?Nt.push(a):Nt=[a]:Os=a}function ki(){if(Os){var a=Os,l=Nt;if(Nt=Os=null,Ru(a),l)for(a=0;a<l.length;a++)Ru(l[a])}}function yp(a,l){return a(l)}function vp(){}var Xr=!1;function xp(a,l,h){if(Xr)return a(l,h);Xr=!0;try{return yp(a,l,h)}finally{Xr=!1,(Os!==null||Nt!==null)&&(vp(),ki())}}function Zo(a,l){var h=a.stateNode;if(h===null)return null;var g=zp(h);if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(h&&typeof h!="function")throw Error(t(231,l,typeof h));return h}var Ai=!1;if(u)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Ai=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Ai=!1}function bp(a,l,h,g,v,b,P,V,$){var X=Array.prototype.slice.call(arguments,3);try{l.apply(h,X)}catch(ce){this.onError(ce)}}var Ms=!1,Zr=null,Pl=!1,hr=null,wp={onError:function(a){Ms=!0,Zr=a}};function Sp(a,l,h,g,v,b,P,V,$){Ms=!1,Zr=null,bp.apply(wp,arguments)}function Du(a,l,h,g,v,b,P,V,$){if(Sp.apply(this,arguments),Ms){if(Ms){var X=Zr;Ms=!1,Zr=null}else throw Error(t(198));Pl||(Pl=!0,hr=X)}}function jr(a){var l=a,h=a;if(a.alternate)for(;l.return;)l=l.return;else{a=l;do l=a,(l.flags&4098)!==0&&(h=l.return),a=l.return;while(a)}return l.tag===3?h:null}function Ou(a){if(a.tag===13){var l=a.memoizedState;if(l===null&&(a=a.alternate,a!==null&&(l=a.memoizedState)),l!==null)return l.dehydrated}return null}function _p(a){if(jr(a)!==a)throw Error(t(188))}function Ep(a){var l=a.alternate;if(!l){if(l=jr(a),l===null)throw Error(t(188));return l!==a?null:a}for(var h=a,g=l;;){var v=h.return;if(v===null)break;var b=v.alternate;if(b===null){if(g=v.return,g!==null){h=g;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===h)return _p(v),a;if(b===g)return _p(v),l;b=b.sibling}throw Error(t(188))}if(h.return!==g.return)h=v,g=b;else{for(var P=!1,V=v.child;V;){if(V===h){P=!0,h=v,g=b;break}if(V===g){P=!0,g=v,h=b;break}V=V.sibling}if(!P){for(V=b.child;V;){if(V===h){P=!0,h=b,g=v;break}if(V===g){P=!0,g=b,h=v;break}V=V.sibling}if(!P)throw Error(t(189))}}if(h.alternate!==g)throw Error(t(190))}if(h.tag!==3)throw Error(t(188));return h.stateNode.current===h?a:l}function Tp(a){return a=Ep(a),a!==null?ea(a):null}function ea(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var l=ea(a);if(l!==null)return l;a=a.sibling}return null}var Mu=e.unstable_scheduleCallback,Nl=e.unstable_cancelCallback,ta=e.unstable_shouldYield,Ls=e.unstable_requestPaint,yt=e.unstable_now,hy=e.unstable_getCurrentPriorityLevel,jl=e.unstable_ImmediatePriority,Lu=e.unstable_UserBlockingPriority,na=e.unstable_NormalPriority,Fu=e.unstable_LowPriority,Rl=e.unstable_IdlePriority,ra=null,Jn=null;function Ip(a){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(ra,a,void 0,(a.current.flags&128)===128)}catch{}}var Qn=Math.clz32?Math.clz32:sa,es=Math.log,pr=Math.LN2;function sa(a){return a>>>=0,a===0?32:31-(es(a)/pr|0)|0}var ts=64,Ni=4194304;function rt(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function Fs(a,l){var h=a.pendingLanes;if(h===0)return 0;var g=0,v=a.suspendedLanes,b=a.pingedLanes,P=h&268435455;if(P!==0){var V=P&~v;V!==0?g=rt(V):(b&=P,b!==0&&(g=rt(b)))}else P=h&~v,P!==0?g=rt(P):b!==0&&(g=rt(b));if(g===0)return 0;if(l!==0&&l!==g&&(l&v)===0&&(v=g&-g,b=l&-l,v>=b||v===16&&(b&4194240)!==0))return l;if((g&4)!==0&&(g|=h&16),l=a.entangledLanes,l!==0)for(a=a.entanglements,l&=g;0<l;)h=31-Qn(l),v=1<<h,g|=a[h],l&=~v;return g}function ia(a,l){switch(a){case 1:case 2:case 4:return l+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oa(a,l){for(var h=a.suspendedLanes,g=a.pingedLanes,v=a.expirationTimes,b=a.pendingLanes;0<b;){var P=31-Qn(b),V=1<<P,$=v[P];$===-1?((V&h)===0||(V&g)!==0)&&(v[P]=ia(V,l)):$<=l&&(a.expiredLanes|=V),b&=~V}}function Vu(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function Bu(){var a=ts;return ts<<=1,(ts&4194240)===0&&(ts=64),a}function Uu(a){for(var l=[],h=0;31>h;h++)l.push(a);return l}function aa(a,l,h){a.pendingLanes|=l,l!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,l=31-Qn(l),a[l]=h}function py(a,l){var h=a.pendingLanes&~l;a.pendingLanes=l,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=l,a.mutableReadLanes&=l,a.entangledLanes&=l,l=a.entanglements;var g=a.eventTimes;for(a=a.expirationTimes;0<h;){var v=31-Qn(h),b=1<<v;l[v]=0,g[v]=-1,a[v]=-1,h&=~b}}function $u(a,l){var h=a.entangledLanes|=l;for(a=a.entanglements;h;){var g=31-Qn(h),v=1<<g;v&l|a[g]&l&&(a[g]|=l),h&=~v}}var Ze=0;function ns(a){return a&=-a,1<a?4<a?(a&268435455)!==0?16:536870912:4:1}var zu,Dl,Hu,qu,Gu,rs=!1,Ol=[],ss=null,is=null,cn=null,la=new Map,Vs=new Map,Yn=[],Cp="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ji(a,l){switch(a){case"focusin":case"focusout":ss=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":la.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(l.pointerId)}}function Rr(a,l,h,g,v,b){return a===null||a.nativeEvent!==b?(a={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:b,targetContainers:[v]},l!==null&&(l=od(l),l!==null&&Dl(l)),a):(a.eventSystemFlags|=g,l=a.targetContainers,v!==null&&l.indexOf(v)===-1&&l.push(v),a)}function kp(a,l,h,g,v){switch(l){case"focusin":return ss=Rr(ss,a,l,h,g,v),!0;case"dragenter":return is=Rr(is,a,l,h,g,v),!0;case"mouseover":return cn=Rr(cn,a,l,h,g,v),!0;case"pointerover":var b=v.pointerId;return la.set(b,Rr(la.get(b)||null,a,l,h,g,v)),!0;case"gotpointercapture":return b=v.pointerId,Vs.set(b,Rr(Vs.get(b)||null,a,l,h,g,v)),!0}return!1}function Ml(a){var l=ha(a.target);if(l!==null){var h=jr(l);if(h!==null){if(l=h.tag,l===13){if(l=Ou(h),l!==null){a.blockedOn=l,Gu(a.priority,function(){Hu(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){a.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ht(a){if(a.blockedOn!==null)return!1;for(var l=a.targetContainers;0<l.length;){var h=Ll(a.domEventName,a.eventSystemFlags,l[0],a.nativeEvent);if(h===null){h=a.nativeEvent;var g=new h.constructor(h.type,h);Ii=g,h.target.dispatchEvent(g),Ii=null}else return l=od(h),l!==null&&Dl(l),a.blockedOn=h,!1;l.shift()}return!0}function Ap(a,l,h){ht(a)&&h.delete(l)}function my(){rs=!1,ss!==null&&ht(ss)&&(ss=null),is!==null&&ht(is)&&(is=null),cn!==null&&ht(cn)&&(cn=null),la.forEach(Ap),Vs.forEach(Ap)}function Ri(a,l){a.blockedOn===l&&(a.blockedOn=null,rs||(rs=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,my)))}function Di(a){function l(v){return Ri(v,a)}if(0<Ol.length){Ri(Ol[0],a);for(var h=1;h<Ol.length;h++){var g=Ol[h];g.blockedOn===a&&(g.blockedOn=null)}}for(ss!==null&&Ri(ss,a),is!==null&&Ri(is,a),cn!==null&&Ri(cn,a),la.forEach(l),Vs.forEach(l),h=0;h<Yn.length;h++)g=Yn[h],g.blockedOn===a&&(g.blockedOn=null);for(;0<Yn.length&&(h=Yn[0],h.blockedOn===null);)Ml(h),h.blockedOn===null&&Yn.shift()}var Bs=F.ReactCurrentBatchConfig,Us=!0;function os(a,l,h,g){var v=Ze,b=Bs.transition;Bs.transition=null;try{Ze=1,Wu(a,l,h,g)}finally{Ze=v,Bs.transition=b}}function Pp(a,l,h,g){var v=Ze,b=Bs.transition;Bs.transition=null;try{Ze=4,Wu(a,l,h,g)}finally{Ze=v,Bs.transition=b}}function Wu(a,l,h,g){if(Us){var v=Ll(a,l,h,g);if(v===null)Ty(a,l,g,as,h),ji(a,g);else if(kp(v,a,l,h,g))g.stopPropagation();else if(ji(a,g),l&4&&-1<Cp.indexOf(a)){for(;v!==null;){var b=od(v);if(b!==null&&zu(b),b=Ll(a,l,h,g),b===null&&Ty(a,l,g,as,h),b===v)break;v=b}v!==null&&g.stopPropagation()}else Ty(a,l,g,null,h)}}var as=null;function Ll(a,l,h,g){if(as=null,a=Al(g),a=ha(a),a!==null)if(l=jr(a),l===null)a=null;else if(h=l.tag,h===13){if(a=Ou(l),a!==null)return a;a=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;a=null}else l!==a&&(a=null);return as=a,null}function Fl(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hy()){case jl:return 1;case Lu:return 4;case na:case Fu:return 16;case Rl:return 536870912;default:return 16}default:return 16}}var Xn=null,Vl=null,$s=null;function Np(){if($s)return $s;var a,l=Vl,h=l.length,g,v="value"in Xn?Xn.value:Xn.textContent,b=v.length;for(a=0;a<h&&l[a]===v[a];a++);var P=h-a;for(g=1;g<=P&&l[h-g]===v[b-g];g++);return $s=v.slice(a,1<g?1-g:void 0)}function ca(a){var l=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&l===13&&(a=13)):a=l,a===10&&(a=13),32<=a||a===13?a:0}function ls(){return!0}function Ku(){return!1}function fn(a){function l(h,g,v,b,P){this._reactName=h,this._targetInst=v,this.type=g,this.nativeEvent=b,this.target=P,this.currentTarget=null;for(var V in a)a.hasOwnProperty(V)&&(h=a[V],this[V]=h?h(b):b[V]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?ls:Ku,this.isPropagationStopped=Ku,this}return se(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),l}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=fn(cs),Oi=se({},cs,{view:0,detail:0}),Bl=fn(Oi),Ul,$l,Zn,da=se({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ue,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Zn&&(Zn&&a.type==="mousemove"?(Ul=a.screenX-Zn.screenX,$l=a.screenY-Zn.screenY):$l=Ul=0,Zn=a),Ul)},movementY:function(a){return"movementY"in a?a.movementY:$l}}),Ju=fn(da),jp=se({},da,{dataTransfer:0}),Rp=fn(jp),zl=se({},Oi,{relatedTarget:0}),un=fn(zl),Dp=se({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Op=fn(Dp),Mi=se({},cs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),m=fn(Mi),w=se({},cs,{data:0}),T=fn(w),D={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},J={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(a){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(a):(a=Z[a])?!!l[a]:!1}function Ue(){return pe}var Lt=se({},Oi,{key:function(a){if(a.key){var l=D[a.key]||a.key;if(l!=="Unidentified")return l}return a.type==="keypress"?(a=ca(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?J[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ue,charCode:function(a){return a.type==="keypress"?ca(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ca(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),at=fn(Lt),zt=se({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),er=fn(zt),zs=se({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ue}),us=fn(zs),ds=se({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Hl=fn(ds),Qu=se({},da,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),WR=fn(Qu),KR=[9,13,27,32],fy=u&&"CompositionEvent"in window,Yu=null;u&&"documentMode"in document&&(Yu=document.documentMode);var JR=u&&"TextEvent"in window&&!Yu,hS=u&&(!fy||Yu&&8<Yu&&11>=Yu),pS=" ",mS=!1;function fS(a,l){switch(a){case"keyup":return KR.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gS(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ql=!1;function QR(a,l){switch(a){case"compositionend":return gS(l);case"keypress":return l.which!==32?null:(mS=!0,pS);case"textInput":return a=l.data,a===pS&&mS?null:a;default:return null}}function YR(a,l){if(ql)return a==="compositionend"||!fy&&fS(a,l)?(a=Np(),$s=Vl=Xn=null,ql=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return hS&&l.locale!=="ko"?null:l.data;default:return null}}var XR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yS(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l==="input"?!!XR[a.type]:l==="textarea"}function vS(a,l,h,g){Ci(g),l=Bp(l,"onChange"),0<l.length&&(h=new ua("onChange","change",null,h,g),a.push({event:h,listeners:l}))}var Xu=null,Zu=null;function ZR(a){MS(a,0)}function Mp(a){var l=Ql(a);if(dr(l))return a}function eD(a,l){if(a==="change")return l}var xS=!1;if(u){var gy;if(u){var yy="oninput"in document;if(!yy){var bS=document.createElement("div");bS.setAttribute("oninput","return;"),yy=typeof bS.oninput=="function"}gy=yy}else gy=!1;xS=gy&&(!document.documentMode||9<document.documentMode)}function wS(){Xu&&(Xu.detachEvent("onpropertychange",SS),Zu=Xu=null)}function SS(a){if(a.propertyName==="value"&&Mp(Zu)){var l=[];vS(l,Zu,a,Al(a)),xp(ZR,l)}}function tD(a,l,h){a==="focusin"?(wS(),Xu=l,Zu=h,Xu.attachEvent("onpropertychange",SS)):a==="focusout"&&wS()}function nD(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Mp(Zu)}function rD(a,l){if(a==="click")return Mp(l)}function sD(a,l){if(a==="input"||a==="change")return Mp(l)}function iD(a,l){return a===l&&(a!==0||1/a===1/l)||a!==a&&l!==l}var Dr=typeof Object.is=="function"?Object.is:iD;function ed(a,l){if(Dr(a,l))return!0;if(typeof a!="object"||a===null||typeof l!="object"||l===null)return!1;var h=Object.keys(a),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var v=h[g];if(!d.call(l,v)||!Dr(a[v],l[v]))return!1}return!0}function _S(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ES(a,l){var h=_S(a);a=0;for(var g;h;){if(h.nodeType===3){if(g=a+h.textContent.length,a<=l&&g>=l)return{node:h,offset:l-a};a=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=_S(h)}}function TS(a,l){return a&&l?a===l?!0:a&&a.nodeType===3?!1:l&&l.nodeType===3?TS(a,l.parentNode):"contains"in a?a.contains(l):a.compareDocumentPosition?!!(a.compareDocumentPosition(l)&16):!1:!1}function IS(){for(var a=window,l=wi();l instanceof a.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)a=l.contentWindow;else break;l=wi(a.document)}return l}function vy(a){var l=a&&a.nodeName&&a.nodeName.toLowerCase();return l&&(l==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||l==="textarea"||a.contentEditable==="true")}function oD(a){var l=IS(),h=a.focusedElem,g=a.selectionRange;if(l!==h&&h&&h.ownerDocument&&TS(h.ownerDocument.documentElement,h)){if(g!==null&&vy(h)){if(l=g.start,a=g.end,a===void 0&&(a=l),"selectionStart"in h)h.selectionStart=l,h.selectionEnd=Math.min(a,h.value.length);else if(a=(l=h.ownerDocument||document)&&l.defaultView||window,a.getSelection){a=a.getSelection();var v=h.textContent.length,b=Math.min(g.start,v);g=g.end===void 0?b:Math.min(g.end,v),!a.extend&&b>g&&(v=g,g=b,b=v),v=ES(h,b);var P=ES(h,g);v&&P&&(a.rangeCount!==1||a.anchorNode!==v.node||a.anchorOffset!==v.offset||a.focusNode!==P.node||a.focusOffset!==P.offset)&&(l=l.createRange(),l.setStart(v.node,v.offset),a.removeAllRanges(),b>g?(a.addRange(l),a.extend(P.node,P.offset)):(l.setEnd(P.node,P.offset),a.addRange(l)))}}for(l=[],a=h;a=a.parentNode;)a.nodeType===1&&l.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<l.length;h++)a=l[h],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var aD=u&&"documentMode"in document&&11>=document.documentMode,Gl=null,xy=null,td=null,by=!1;function CS(a,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;by||Gl==null||Gl!==wi(g)||(g=Gl,"selectionStart"in g&&vy(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),td&&ed(td,g)||(td=g,g=Bp(xy,"onSelect"),0<g.length&&(l=new ua("onSelect","select",null,l,h),a.push({event:l,listeners:g}),l.target=Gl)))}function Lp(a,l){var h={};return h[a.toLowerCase()]=l.toLowerCase(),h["Webkit"+a]="webkit"+l,h["Moz"+a]="moz"+l,h}var Wl={animationend:Lp("Animation","AnimationEnd"),animationiteration:Lp("Animation","AnimationIteration"),animationstart:Lp("Animation","AnimationStart"),transitionend:Lp("Transition","TransitionEnd")},wy={},kS={};u&&(kS=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function Fp(a){if(wy[a])return wy[a];if(!Wl[a])return a;var l=Wl[a],h;for(h in l)if(l.hasOwnProperty(h)&&h in kS)return wy[a]=l[h];return a}var AS=Fp("animationend"),PS=Fp("animationiteration"),NS=Fp("animationstart"),jS=Fp("transitionend"),RS=new Map,DS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Li(a,l){RS.set(a,l),i(l,[a])}for(var Sy=0;Sy<DS.length;Sy++){var _y=DS[Sy],lD=_y.toLowerCase(),cD=_y[0].toUpperCase()+_y.slice(1);Li(lD,"on"+cD)}Li(AS,"onAnimationEnd"),Li(PS,"onAnimationIteration"),Li(NS,"onAnimationStart"),Li("dblclick","onDoubleClick"),Li("focusin","onFocus"),Li("focusout","onBlur"),Li(jS,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),uD=new Set("cancel close invalid load scroll toggle".split(" ").concat(nd));function OS(a,l,h){var g=a.type||"unknown-event";a.currentTarget=h,Du(g,l,void 0,a),a.currentTarget=null}function MS(a,l){l=(l&4)!==0;for(var h=0;h<a.length;h++){var g=a[h],v=g.event;g=g.listeners;e:{var b=void 0;if(l)for(var P=g.length-1;0<=P;P--){var V=g[P],$=V.instance,X=V.currentTarget;if(V=V.listener,$!==b&&v.isPropagationStopped())break e;OS(v,V,X),b=$}else for(P=0;P<g.length;P++){if(V=g[P],$=V.instance,X=V.currentTarget,V=V.listener,$!==b&&v.isPropagationStopped())break e;OS(v,V,X),b=$}}}if(Pl)throw a=hr,Pl=!1,hr=null,a}function vt(a,l){var h=l[Ny];h===void 0&&(h=l[Ny]=new Set);var g=a+"__bubble";h.has(g)||(LS(l,a,2,!1),h.add(g))}function Ey(a,l,h){var g=0;l&&(g|=4),LS(h,a,g,l)}var Vp="_reactListening"+Math.random().toString(36).slice(2);function rd(a){if(!a[Vp]){a[Vp]=!0,r.forEach(function(h){h!=="selectionchange"&&(uD.has(h)||Ey(h,!1,a),Ey(h,!0,a))});var l=a.nodeType===9?a:a.ownerDocument;l===null||l[Vp]||(l[Vp]=!0,Ey("selectionchange",!1,l))}}function LS(a,l,h,g){switch(Fl(l)){case 1:var v=os;break;case 4:v=Pp;break;default:v=Wu}h=v.bind(null,l,h,a),v=void 0,!Ai||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(v=!0),g?v!==void 0?a.addEventListener(l,h,{capture:!0,passive:v}):a.addEventListener(l,h,!0):v!==void 0?a.addEventListener(l,h,{passive:v}):a.addEventListener(l,h,!1)}function Ty(a,l,h,g,v){var b=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var P=g.tag;if(P===3||P===4){var V=g.stateNode.containerInfo;if(V===v||V.nodeType===8&&V.parentNode===v)break;if(P===4)for(P=g.return;P!==null;){var $=P.tag;if(($===3||$===4)&&($=P.stateNode.containerInfo,$===v||$.nodeType===8&&$.parentNode===v))return;P=P.return}for(;V!==null;){if(P=ha(V),P===null)return;if($=P.tag,$===5||$===6){g=b=P;continue e}V=V.parentNode}}g=g.return}xp(function(){var X=b,ce=Al(h),ue=[];e:{var ae=RS.get(a);if(ae!==void 0){var be=ua,_e=a;switch(a){case"keypress":if(ca(h)===0)break e;case"keydown":case"keyup":be=at;break;case"focusin":_e="focus",be=un;break;case"focusout":_e="blur",be=un;break;case"beforeblur":case"afterblur":be=un;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=Ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=Rp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=us;break;case AS:case PS:case NS:be=Op;break;case jS:be=Hl;break;case"scroll":be=Bl;break;case"wheel":be=WR;break;case"copy":case"cut":case"paste":be=m;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=er}var Ie=(l&4)!==0,Ft=!Ie&&a==="scroll",K=Ie?ae!==null?ae+"Capture":null:ae;Ie=[];for(var H=X,Y;H!==null;){Y=H;var de=Y.stateNode;if(Y.tag===5&&de!==null&&(Y=de,K!==null&&(de=Zo(H,K),de!=null&&Ie.push(sd(H,de,Y)))),Ft)break;H=H.return}0<Ie.length&&(ae=new be(ae,_e,null,h,ce),ue.push({event:ae,listeners:Ie}))}}if((l&7)===0){e:{if(ae=a==="mouseover"||a==="pointerover",be=a==="mouseout"||a==="pointerout",ae&&h!==Ii&&(_e=h.relatedTarget||h.fromElement)&&(ha(_e)||_e[Hs]))break e;if((be||ae)&&(ae=ce.window===ce?ce:(ae=ce.ownerDocument)?ae.defaultView||ae.parentWindow:window,be?(_e=h.relatedTarget||h.toElement,be=X,_e=_e?ha(_e):null,_e!==null&&(Ft=jr(_e),_e!==Ft||_e.tag!==5&&_e.tag!==6)&&(_e=null)):(be=null,_e=X),be!==_e)){if(Ie=Ju,de="onMouseLeave",K="onMouseEnter",H="mouse",(a==="pointerout"||a==="pointerover")&&(Ie=er,de="onPointerLeave",K="onPointerEnter",H="pointer"),Ft=be==null?ae:Ql(be),Y=_e==null?ae:Ql(_e),ae=new Ie(de,H+"leave",be,h,ce),ae.target=Ft,ae.relatedTarget=Y,de=null,ha(ce)===X&&(Ie=new Ie(K,H+"enter",_e,h,ce),Ie.target=Y,Ie.relatedTarget=Ft,de=Ie),Ft=de,be&&_e)t:{for(Ie=be,K=_e,H=0,Y=Ie;Y;Y=Kl(Y))H++;for(Y=0,de=K;de;de=Kl(de))Y++;for(;0<H-Y;)Ie=Kl(Ie),H--;for(;0<Y-H;)K=Kl(K),Y--;for(;H--;){if(Ie===K||K!==null&&Ie===K.alternate)break t;Ie=Kl(Ie),K=Kl(K)}Ie=null}else Ie=null;be!==null&&FS(ue,ae,be,Ie,!1),_e!==null&&Ft!==null&&FS(ue,Ft,_e,Ie,!0)}}e:{if(ae=X?Ql(X):window,be=ae.nodeName&&ae.nodeName.toLowerCase(),be==="select"||be==="input"&&ae.type==="file")var ke=eD;else if(yS(ae))if(xS)ke=sD;else{ke=nD;var je=tD}else(be=ae.nodeName)&&be.toLowerCase()==="input"&&(ae.type==="checkbox"||ae.type==="radio")&&(ke=rD);if(ke&&(ke=ke(a,X))){vS(ue,ke,h,ce);break e}je&&je(a,ae,X),a==="focusout"&&(je=ae._wrapperState)&&je.controlled&&ae.type==="number"&&$t(ae,"number",ae.value)}switch(je=X?Ql(X):window,a){case"focusin":(yS(je)||je.contentEditable==="true")&&(Gl=je,xy=X,td=null);break;case"focusout":td=xy=Gl=null;break;case"mousedown":by=!0;break;case"contextmenu":case"mouseup":case"dragend":by=!1,CS(ue,h,ce);break;case"selectionchange":if(aD)break;case"keydown":case"keyup":CS(ue,h,ce)}var Re;if(fy)e:{switch(a){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else ql?fS(a,h)&&(Le="onCompositionEnd"):a==="keydown"&&h.keyCode===229&&(Le="onCompositionStart");Le&&(hS&&h.locale!=="ko"&&(ql||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&ql&&(Re=Np()):(Xn=ce,Vl="value"in Xn?Xn.value:Xn.textContent,ql=!0)),je=Bp(X,Le),0<je.length&&(Le=new T(Le,a,null,h,ce),ue.push({event:Le,listeners:je}),Re?Le.data=Re:(Re=gS(h),Re!==null&&(Le.data=Re)))),(Re=JR?QR(a,h):YR(a,h))&&(X=Bp(X,"onBeforeInput"),0<X.length&&(ce=new T("onBeforeInput","beforeinput",null,h,ce),ue.push({event:ce,listeners:X}),ce.data=Re))}MS(ue,l)})}function sd(a,l,h){return{instance:a,listener:l,currentTarget:h}}function Bp(a,l){for(var h=l+"Capture",g=[];a!==null;){var v=a,b=v.stateNode;v.tag===5&&b!==null&&(v=b,b=Zo(a,h),b!=null&&g.unshift(sd(a,b,v)),b=Zo(a,l),b!=null&&g.push(sd(a,b,v))),a=a.return}return g}function Kl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function FS(a,l,h,g,v){for(var b=l._reactName,P=[];h!==null&&h!==g;){var V=h,$=V.alternate,X=V.stateNode;if($!==null&&$===g)break;V.tag===5&&X!==null&&(V=X,v?($=Zo(h,b),$!=null&&P.unshift(sd(h,$,V))):v||($=Zo(h,b),$!=null&&P.push(sd(h,$,V)))),h=h.return}P.length!==0&&a.push({event:l,listeners:P})}var dD=/\r\n?/g,hD=/\u0000|\uFFFD/g;function VS(a){return(typeof a=="string"?a:""+a).replace(dD,`
`).replace(hD,"")}function Up(a,l,h){if(l=VS(l),VS(a)!==l&&h)throw Error(t(425))}function $p(){}var Iy=null,Cy=null;function ky(a,l){return a==="textarea"||a==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var Ay=typeof setTimeout=="function"?setTimeout:void 0,pD=typeof clearTimeout=="function"?clearTimeout:void 0,BS=typeof Promise=="function"?Promise:void 0,mD=typeof queueMicrotask=="function"?queueMicrotask:typeof BS<"u"?function(a){return BS.resolve(null).then(a).catch(fD)}:Ay;function fD(a){setTimeout(function(){throw a})}function Py(a,l){var h=l,g=0;do{var v=h.nextSibling;if(a.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(g===0){a.removeChild(v),Di(l);return}g--}else h!=="$"&&h!=="$?"&&h!=="$!"||g++;h=v}while(h);Di(l)}function Fi(a){for(;a!=null;a=a.nextSibling){var l=a.nodeType;if(l===1||l===3)break;if(l===8){if(l=a.data,l==="$"||l==="$!"||l==="$?")break;if(l==="/$")return null}}return a}function US(a){a=a.previousSibling;for(var l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="$"||h==="$!"||h==="$?"){if(l===0)return a;l--}else h==="/$"&&l++}a=a.previousSibling}return null}var Jl=Math.random().toString(36).slice(2),hs="__reactFiber$"+Jl,id="__reactProps$"+Jl,Hs="__reactContainer$"+Jl,Ny="__reactEvents$"+Jl,gD="__reactListeners$"+Jl,yD="__reactHandles$"+Jl;function ha(a){var l=a[hs];if(l)return l;for(var h=a.parentNode;h;){if(l=h[Hs]||h[hs]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(a=US(a);a!==null;){if(h=a[hs])return h;a=US(a)}return l}a=h,h=a.parentNode}return null}function od(a){return a=a[hs]||a[Hs],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Ql(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function zp(a){return a[id]||null}var jy=[],Yl=-1;function Vi(a){return{current:a}}function xt(a){0>Yl||(a.current=jy[Yl],jy[Yl]=null,Yl--)}function mt(a,l){Yl++,jy[Yl]=a.current,a.current=l}var Bi={},gn=Vi(Bi),jn=Vi(!1),pa=Bi;function Xl(a,l){var h=a.type.contextTypes;if(!h)return Bi;var g=a.stateNode;if(g&&g.__reactInternalMemoizedUnmaskedChildContext===l)return g.__reactInternalMemoizedMaskedChildContext;var v={},b;for(b in h)v[b]=l[b];return g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=l,a.__reactInternalMemoizedMaskedChildContext=v),v}function Rn(a){return a=a.childContextTypes,a!=null}function Hp(){xt(jn),xt(gn)}function $S(a,l,h){if(gn.current!==Bi)throw Error(t(168));mt(gn,l),mt(jn,h)}function zS(a,l,h){var g=a.stateNode;if(l=l.childContextTypes,typeof g.getChildContext!="function")return h;g=g.getChildContext();for(var v in g)if(!(v in l))throw Error(t(108,Xe(a)||"Unknown",v));return se({},h,g)}function qp(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Bi,pa=gn.current,mt(gn,a),mt(jn,jn.current),!0}function HS(a,l,h){var g=a.stateNode;if(!g)throw Error(t(169));h?(a=zS(a,l,pa),g.__reactInternalMemoizedMergedChildContext=a,xt(jn),xt(gn),mt(gn,a)):xt(jn),mt(jn,h)}var qs=null,Gp=!1,Ry=!1;function qS(a){qs===null?qs=[a]:qs.push(a)}function vD(a){Gp=!0,qS(a)}function Ui(){if(!Ry&&qs!==null){Ry=!0;var a=0,l=Ze;try{var h=qs;for(Ze=1;a<h.length;a++){var g=h[a];do g=g(!0);while(g!==null)}qs=null,Gp=!1}catch(v){throw qs!==null&&(qs=qs.slice(a+1)),Mu(jl,Ui),v}finally{Ze=l,Ry=!1}}return null}var Zl=[],ec=0,Wp=null,Kp=0,mr=[],fr=0,ma=null,Gs=1,Ws="";function fa(a,l){Zl[ec++]=Kp,Zl[ec++]=Wp,Wp=a,Kp=l}function GS(a,l,h){mr[fr++]=Gs,mr[fr++]=Ws,mr[fr++]=ma,ma=a;var g=Gs;a=Ws;var v=32-Qn(g)-1;g&=~(1<<v),h+=1;var b=32-Qn(l)+v;if(30<b){var P=v-v%5;b=(g&(1<<P)-1).toString(32),g>>=P,v-=P,Gs=1<<32-Qn(l)+v|h<<v|g,Ws=b+a}else Gs=1<<b|h<<v|g,Ws=a}function Dy(a){a.return!==null&&(fa(a,1),GS(a,1,0))}function Oy(a){for(;a===Wp;)Wp=Zl[--ec],Zl[ec]=null,Kp=Zl[--ec],Zl[ec]=null;for(;a===ma;)ma=mr[--fr],mr[fr]=null,Ws=mr[--fr],mr[fr]=null,Gs=mr[--fr],mr[fr]=null}var tr=null,nr=null,St=!1,Or=null;function WS(a,l){var h=xr(5,null,null,0);h.elementType="DELETED",h.stateNode=l,h.return=a,l=a.deletions,l===null?(a.deletions=[h],a.flags|=16):l.push(h)}function KS(a,l){switch(a.tag){case 5:var h=a.type;return l=l.nodeType!==1||h.toLowerCase()!==l.nodeName.toLowerCase()?null:l,l!==null?(a.stateNode=l,tr=a,nr=Fi(l.firstChild),!0):!1;case 6:return l=a.pendingProps===""||l.nodeType!==3?null:l,l!==null?(a.stateNode=l,tr=a,nr=null,!0):!1;case 13:return l=l.nodeType!==8?null:l,l!==null?(h=ma!==null?{id:Gs,overflow:Ws}:null,a.memoizedState={dehydrated:l,treeContext:h,retryLane:1073741824},h=xr(18,null,null,0),h.stateNode=l,h.return=a,a.child=h,tr=a,nr=null,!0):!1;default:return!1}}function My(a){return(a.mode&1)!==0&&(a.flags&128)===0}function Ly(a){if(St){var l=nr;if(l){var h=l;if(!KS(a,l)){if(My(a))throw Error(t(418));l=Fi(h.nextSibling);var g=tr;l&&KS(a,l)?WS(g,h):(a.flags=a.flags&-4097|2,St=!1,tr=a)}}else{if(My(a))throw Error(t(418));a.flags=a.flags&-4097|2,St=!1,tr=a}}}function JS(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;tr=a}function Jp(a){if(a!==tr)return!1;if(!St)return JS(a),St=!0,!1;var l;if((l=a.tag!==3)&&!(l=a.tag!==5)&&(l=a.type,l=l!=="head"&&l!=="body"&&!ky(a.type,a.memoizedProps)),l&&(l=nr)){if(My(a))throw QS(),Error(t(418));for(;l;)WS(a,l),l=Fi(l.nextSibling)}if(JS(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,l=0;a;){if(a.nodeType===8){var h=a.data;if(h==="/$"){if(l===0){nr=Fi(a.nextSibling);break e}l--}else h!=="$"&&h!=="$!"&&h!=="$?"||l++}a=a.nextSibling}nr=null}}else nr=tr?Fi(a.stateNode.nextSibling):null;return!0}function QS(){for(var a=nr;a;)a=Fi(a.nextSibling)}function tc(){nr=tr=null,St=!1}function Fy(a){Or===null?Or=[a]:Or.push(a)}var xD=F.ReactCurrentBatchConfig;function ad(a,l,h){if(a=h.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(t(309));var g=h.stateNode}if(!g)throw Error(t(147,a));var v=g,b=""+a;return l!==null&&l.ref!==null&&typeof l.ref=="function"&&l.ref._stringRef===b?l.ref:(l=function(P){var V=v.refs;P===null?delete V[b]:V[b]=P},l._stringRef=b,l)}if(typeof a!="string")throw Error(t(284));if(!h._owner)throw Error(t(290,a))}return a}function Qp(a,l){throw a=Object.prototype.toString.call(l),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":a))}function YS(a){var l=a._init;return l(a._payload)}function XS(a){function l(K,H){if(a){var Y=K.deletions;Y===null?(K.deletions=[H],K.flags|=16):Y.push(H)}}function h(K,H){if(!a)return null;for(;H!==null;)l(K,H),H=H.sibling;return null}function g(K,H){for(K=new Map;H!==null;)H.key!==null?K.set(H.key,H):K.set(H.index,H),H=H.sibling;return K}function v(K,H){return K=Ji(K,H),K.index=0,K.sibling=null,K}function b(K,H,Y){return K.index=Y,a?(Y=K.alternate,Y!==null?(Y=Y.index,Y<H?(K.flags|=2,H):Y):(K.flags|=2,H)):(K.flags|=1048576,H)}function P(K){return a&&K.alternate===null&&(K.flags|=2),K}function V(K,H,Y,de){return H===null||H.tag!==6?(H=Av(Y,K.mode,de),H.return=K,H):(H=v(H,Y),H.return=K,H)}function $(K,H,Y,de){var ke=Y.type;return ke===N?ce(K,H,Y.props.children,de,Y.key):H!==null&&(H.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===we&&YS(ke)===H.type)?(de=v(H,Y.props),de.ref=ad(K,H,Y),de.return=K,de):(de=bm(Y.type,Y.key,Y.props,null,K.mode,de),de.ref=ad(K,H,Y),de.return=K,de)}function X(K,H,Y,de){return H===null||H.tag!==4||H.stateNode.containerInfo!==Y.containerInfo||H.stateNode.implementation!==Y.implementation?(H=Pv(Y,K.mode,de),H.return=K,H):(H=v(H,Y.children||[]),H.return=K,H)}function ce(K,H,Y,de,ke){return H===null||H.tag!==7?(H=_a(Y,K.mode,de,ke),H.return=K,H):(H=v(H,Y),H.return=K,H)}function ue(K,H,Y){if(typeof H=="string"&&H!==""||typeof H=="number")return H=Av(""+H,K.mode,Y),H.return=K,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case G:return Y=bm(H.type,H.key,H.props,null,K.mode,Y),Y.ref=ad(K,null,H),Y.return=K,Y;case q:return H=Pv(H,K.mode,Y),H.return=K,H;case we:var de=H._init;return ue(K,de(H._payload),Y)}if(Mt(H)||ie(H))return H=_a(H,K.mode,Y,null),H.return=K,H;Qp(K,H)}return null}function ae(K,H,Y,de){var ke=H!==null?H.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return ke!==null?null:V(K,H,""+Y,de);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:return Y.key===ke?$(K,H,Y,de):null;case q:return Y.key===ke?X(K,H,Y,de):null;case we:return ke=Y._init,ae(K,H,ke(Y._payload),de)}if(Mt(Y)||ie(Y))return ke!==null?null:ce(K,H,Y,de,null);Qp(K,Y)}return null}function be(K,H,Y,de,ke){if(typeof de=="string"&&de!==""||typeof de=="number")return K=K.get(Y)||null,V(H,K,""+de,ke);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case G:return K=K.get(de.key===null?Y:de.key)||null,$(H,K,de,ke);case q:return K=K.get(de.key===null?Y:de.key)||null,X(H,K,de,ke);case we:var je=de._init;return be(K,H,Y,je(de._payload),ke)}if(Mt(de)||ie(de))return K=K.get(Y)||null,ce(H,K,de,ke,null);Qp(H,de)}return null}function _e(K,H,Y,de){for(var ke=null,je=null,Re=H,Le=H=0,rn=null;Re!==null&&Le<Y.length;Le++){Re.index>Le?(rn=Re,Re=null):rn=Re.sibling;var nt=ae(K,Re,Y[Le],de);if(nt===null){Re===null&&(Re=rn);break}a&&Re&&nt.alternate===null&&l(K,Re),H=b(nt,H,Le),je===null?ke=nt:je.sibling=nt,je=nt,Re=rn}if(Le===Y.length)return h(K,Re),St&&fa(K,Le),ke;if(Re===null){for(;Le<Y.length;Le++)Re=ue(K,Y[Le],de),Re!==null&&(H=b(Re,H,Le),je===null?ke=Re:je.sibling=Re,je=Re);return St&&fa(K,Le),ke}for(Re=g(K,Re);Le<Y.length;Le++)rn=be(Re,K,Le,Y[Le],de),rn!==null&&(a&&rn.alternate!==null&&Re.delete(rn.key===null?Le:rn.key),H=b(rn,H,Le),je===null?ke=rn:je.sibling=rn,je=rn);return a&&Re.forEach(function(Qi){return l(K,Qi)}),St&&fa(K,Le),ke}function Ie(K,H,Y,de){var ke=ie(Y);if(typeof ke!="function")throw Error(t(150));if(Y=ke.call(Y),Y==null)throw Error(t(151));for(var je=ke=null,Re=H,Le=H=0,rn=null,nt=Y.next();Re!==null&&!nt.done;Le++,nt=Y.next()){Re.index>Le?(rn=Re,Re=null):rn=Re.sibling;var Qi=ae(K,Re,nt.value,de);if(Qi===null){Re===null&&(Re=rn);break}a&&Re&&Qi.alternate===null&&l(K,Re),H=b(Qi,H,Le),je===null?ke=Qi:je.sibling=Qi,je=Qi,Re=rn}if(nt.done)return h(K,Re),St&&fa(K,Le),ke;if(Re===null){for(;!nt.done;Le++,nt=Y.next())nt=ue(K,nt.value,de),nt!==null&&(H=b(nt,H,Le),je===null?ke=nt:je.sibling=nt,je=nt);return St&&fa(K,Le),ke}for(Re=g(K,Re);!nt.done;Le++,nt=Y.next())nt=be(Re,K,Le,nt.value,de),nt!==null&&(a&&nt.alternate!==null&&Re.delete(nt.key===null?Le:nt.key),H=b(nt,H,Le),je===null?ke=nt:je.sibling=nt,je=nt);return a&&Re.forEach(function(XD){return l(K,XD)}),St&&fa(K,Le),ke}function Ft(K,H,Y,de){if(typeof Y=="object"&&Y!==null&&Y.type===N&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case G:e:{for(var ke=Y.key,je=H;je!==null;){if(je.key===ke){if(ke=Y.type,ke===N){if(je.tag===7){h(K,je.sibling),H=v(je,Y.props.children),H.return=K,K=H;break e}}else if(je.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===we&&YS(ke)===je.type){h(K,je.sibling),H=v(je,Y.props),H.ref=ad(K,je,Y),H.return=K,K=H;break e}h(K,je);break}else l(K,je);je=je.sibling}Y.type===N?(H=_a(Y.props.children,K.mode,de,Y.key),H.return=K,K=H):(de=bm(Y.type,Y.key,Y.props,null,K.mode,de),de.ref=ad(K,H,Y),de.return=K,K=de)}return P(K);case q:e:{for(je=Y.key;H!==null;){if(H.key===je)if(H.tag===4&&H.stateNode.containerInfo===Y.containerInfo&&H.stateNode.implementation===Y.implementation){h(K,H.sibling),H=v(H,Y.children||[]),H.return=K,K=H;break e}else{h(K,H);break}else l(K,H);H=H.sibling}H=Pv(Y,K.mode,de),H.return=K,K=H}return P(K);case we:return je=Y._init,Ft(K,H,je(Y._payload),de)}if(Mt(Y))return _e(K,H,Y,de);if(ie(Y))return Ie(K,H,Y,de);Qp(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,H!==null&&H.tag===6?(h(K,H.sibling),H=v(H,Y),H.return=K,K=H):(h(K,H),H=Av(Y,K.mode,de),H.return=K,K=H),P(K)):h(K,H)}return Ft}var nc=XS(!0),ZS=XS(!1),Yp=Vi(null),Xp=null,rc=null,Vy=null;function By(){Vy=rc=Xp=null}function Uy(a){var l=Yp.current;xt(Yp),a._currentValue=l}function $y(a,l,h){for(;a!==null;){var g=a.alternate;if((a.childLanes&l)!==l?(a.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),a===h)break;a=a.return}}function sc(a,l){Xp=a,Vy=rc=null,a=a.dependencies,a!==null&&a.firstContext!==null&&((a.lanes&l)!==0&&(Dn=!0),a.firstContext=null)}function gr(a){var l=a._currentValue;if(Vy!==a)if(a={context:a,memoizedValue:l,next:null},rc===null){if(Xp===null)throw Error(t(308));rc=a,Xp.dependencies={lanes:0,firstContext:a}}else rc=rc.next=a;return l}var ga=null;function zy(a){ga===null?ga=[a]:ga.push(a)}function e_(a,l,h,g){var v=l.interleaved;return v===null?(h.next=h,zy(l)):(h.next=v.next,v.next=h),l.interleaved=h,Ks(a,g)}function Ks(a,l){a.lanes|=l;var h=a.alternate;for(h!==null&&(h.lanes|=l),h=a,a=a.return;a!==null;)a.childLanes|=l,h=a.alternate,h!==null&&(h.childLanes|=l),h=a,a=a.return;return h.tag===3?h.stateNode:null}var $i=!1;function Hy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t_(a,l){a=a.updateQueue,l.updateQueue===a&&(l.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function Js(a,l){return{eventTime:a,lane:l,tag:0,payload:null,callback:null,next:null}}function zi(a,l,h){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(tt&2)!==0){var v=g.pending;return v===null?l.next=l:(l.next=v.next,v.next=l),g.pending=l,Ks(a,h)}return v=g.interleaved,v===null?(l.next=l,zy(g)):(l.next=v.next,v.next=l),g.interleaved=l,Ks(a,h)}function Zp(a,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194240)!==0)){var g=l.lanes;g&=a.pendingLanes,h|=g,l.lanes=h,$u(a,h)}}function n_(a,l){var h=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var v=null,b=null;if(h=h.firstBaseUpdate,h!==null){do{var P={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};b===null?v=b=P:b=b.next=P,h=h.next}while(h!==null);b===null?v=b=l:b=b.next=l}else v=b=l;h={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:g.shared,effects:g.effects},a.updateQueue=h;return}a=h.lastBaseUpdate,a===null?h.firstBaseUpdate=l:a.next=l,h.lastBaseUpdate=l}function em(a,l,h,g){var v=a.updateQueue;$i=!1;var b=v.firstBaseUpdate,P=v.lastBaseUpdate,V=v.shared.pending;if(V!==null){v.shared.pending=null;var $=V,X=$.next;$.next=null,P===null?b=X:P.next=X,P=$;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,V=ce.lastBaseUpdate,V!==P&&(V===null?ce.firstBaseUpdate=X:V.next=X,ce.lastBaseUpdate=$))}if(b!==null){var ue=v.baseState;P=0,ce=X=$=null,V=b;do{var ae=V.lane,be=V.eventTime;if((g&ae)===ae){ce!==null&&(ce=ce.next={eventTime:be,lane:0,tag:V.tag,payload:V.payload,callback:V.callback,next:null});e:{var _e=a,Ie=V;switch(ae=l,be=h,Ie.tag){case 1:if(_e=Ie.payload,typeof _e=="function"){ue=_e.call(be,ue,ae);break e}ue=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ie.payload,ae=typeof _e=="function"?_e.call(be,ue,ae):_e,ae==null)break e;ue=se({},ue,ae);break e;case 2:$i=!0}}V.callback!==null&&V.lane!==0&&(a.flags|=64,ae=v.effects,ae===null?v.effects=[V]:ae.push(V))}else be={eventTime:be,lane:ae,tag:V.tag,payload:V.payload,callback:V.callback,next:null},ce===null?(X=ce=be,$=ue):ce=ce.next=be,P|=ae;if(V=V.next,V===null){if(V=v.shared.pending,V===null)break;ae=V,V=ae.next,ae.next=null,v.lastBaseUpdate=ae,v.shared.pending=null}}while(!0);if(ce===null&&($=ue),v.baseState=$,v.firstBaseUpdate=X,v.lastBaseUpdate=ce,l=v.shared.interleaved,l!==null){v=l;do P|=v.lane,v=v.next;while(v!==l)}else b===null&&(v.shared.lanes=0);xa|=P,a.lanes=P,a.memoizedState=ue}}function r_(a,l,h){if(a=l.effects,l.effects=null,a!==null)for(l=0;l<a.length;l++){var g=a[l],v=g.callback;if(v!==null){if(g.callback=null,g=h,typeof v!="function")throw Error(t(191,v));v.call(g)}}}var ld={},ps=Vi(ld),cd=Vi(ld),ud=Vi(ld);function ya(a){if(a===ld)throw Error(t(174));return a}function qy(a,l){switch(mt(ud,l),mt(cd,a),mt(ps,ld),a=l.nodeType,a){case 9:case 11:l=(l=l.documentElement)?l.namespaceURI:Il(null,"");break;default:a=a===8?l.parentNode:l,l=a.namespaceURI||null,a=a.tagName,l=Il(l,a)}xt(ps),mt(ps,l)}function ic(){xt(ps),xt(cd),xt(ud)}function s_(a){ya(ud.current);var l=ya(ps.current),h=Il(l,a.type);l!==h&&(mt(cd,a),mt(ps,h))}function Gy(a){cd.current===a&&(xt(ps),xt(cd))}var It=Vi(0);function tm(a){for(var l=a;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Wy=[];function Ky(){for(var a=0;a<Wy.length;a++)Wy[a]._workInProgressVersionPrimary=null;Wy.length=0}var nm=F.ReactCurrentDispatcher,Jy=F.ReactCurrentBatchConfig,va=0,Ct=null,Jt=null,tn=null,rm=!1,dd=!1,hd=0,bD=0;function yn(){throw Error(t(321))}function Qy(a,l){if(l===null)return!1;for(var h=0;h<l.length&&h<a.length;h++)if(!Dr(a[h],l[h]))return!1;return!0}function Yy(a,l,h,g,v,b){if(va=b,Ct=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,nm.current=a===null||a.memoizedState===null?ED:TD,a=h(g,v),dd){b=0;do{if(dd=!1,hd=0,25<=b)throw Error(t(301));b+=1,tn=Jt=null,l.updateQueue=null,nm.current=ID,a=h(g,v)}while(dd)}if(nm.current=om,l=Jt!==null&&Jt.next!==null,va=0,tn=Jt=Ct=null,rm=!1,l)throw Error(t(300));return a}function Xy(){var a=hd!==0;return hd=0,a}function ms(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?Ct.memoizedState=tn=a:tn=tn.next=a,tn}function yr(){if(Jt===null){var a=Ct.alternate;a=a!==null?a.memoizedState:null}else a=Jt.next;var l=tn===null?Ct.memoizedState:tn.next;if(l!==null)tn=l,Jt=a;else{if(a===null)throw Error(t(310));Jt=a,a={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},tn===null?Ct.memoizedState=tn=a:tn=tn.next=a}return tn}function pd(a,l){return typeof l=="function"?l(a):l}function Zy(a){var l=yr(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var g=Jt,v=g.baseQueue,b=h.pending;if(b!==null){if(v!==null){var P=v.next;v.next=b.next,b.next=P}g.baseQueue=v=b,h.pending=null}if(v!==null){b=v.next,g=g.baseState;var V=P=null,$=null,X=b;do{var ce=X.lane;if((va&ce)===ce)$!==null&&($=$.next={lane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),g=X.hasEagerState?X.eagerState:a(g,X.action);else{var ue={lane:ce,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null};$===null?(V=$=ue,P=g):$=$.next=ue,Ct.lanes|=ce,xa|=ce}X=X.next}while(X!==null&&X!==b);$===null?P=g:$.next=V,Dr(g,l.memoizedState)||(Dn=!0),l.memoizedState=g,l.baseState=P,l.baseQueue=$,h.lastRenderedState=g}if(a=h.interleaved,a!==null){v=a;do b=v.lane,Ct.lanes|=b,xa|=b,v=v.next;while(v!==a)}else v===null&&(h.lanes=0);return[l.memoizedState,h.dispatch]}function ev(a){var l=yr(),h=l.queue;if(h===null)throw Error(t(311));h.lastRenderedReducer=a;var g=h.dispatch,v=h.pending,b=l.memoizedState;if(v!==null){h.pending=null;var P=v=v.next;do b=a(b,P.action),P=P.next;while(P!==v);Dr(b,l.memoizedState)||(Dn=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),h.lastRenderedState=b}return[b,g]}function i_(){}function o_(a,l){var h=Ct,g=yr(),v=l(),b=!Dr(g.memoizedState,v);if(b&&(g.memoizedState=v,Dn=!0),g=g.queue,tv(c_.bind(null,h,g,a),[a]),g.getSnapshot!==l||b||tn!==null&&tn.memoizedState.tag&1){if(h.flags|=2048,md(9,l_.bind(null,h,g,v,l),void 0,null),nn===null)throw Error(t(349));(va&30)!==0||a_(h,l,v)}return v}function a_(a,l,h){a.flags|=16384,a={getSnapshot:l,value:h},l=Ct.updateQueue,l===null?(l={lastEffect:null,stores:null},Ct.updateQueue=l,l.stores=[a]):(h=l.stores,h===null?l.stores=[a]:h.push(a))}function l_(a,l,h,g){l.value=h,l.getSnapshot=g,u_(l)&&d_(a)}function c_(a,l,h){return h(function(){u_(l)&&d_(a)})}function u_(a){var l=a.getSnapshot;a=a.value;try{var h=l();return!Dr(a,h)}catch{return!0}}function d_(a){var l=Ks(a,1);l!==null&&Vr(l,a,1,-1)}function h_(a){var l=ms();return typeof a=="function"&&(a=a()),l.memoizedState=l.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pd,lastRenderedState:a},l.queue=a,a=a.dispatch=_D.bind(null,Ct,a),[l.memoizedState,a]}function md(a,l,h,g){return a={tag:a,create:l,destroy:h,deps:g,next:null},l=Ct.updateQueue,l===null?(l={lastEffect:null,stores:null},Ct.updateQueue=l,l.lastEffect=a.next=a):(h=l.lastEffect,h===null?l.lastEffect=a.next=a:(g=h.next,h.next=a,a.next=g,l.lastEffect=a)),a}function p_(){return yr().memoizedState}function sm(a,l,h,g){var v=ms();Ct.flags|=a,v.memoizedState=md(1|l,h,void 0,g===void 0?null:g)}function im(a,l,h,g){var v=yr();g=g===void 0?null:g;var b=void 0;if(Jt!==null){var P=Jt.memoizedState;if(b=P.destroy,g!==null&&Qy(g,P.deps)){v.memoizedState=md(l,h,b,g);return}}Ct.flags|=a,v.memoizedState=md(1|l,h,b,g)}function m_(a,l){return sm(8390656,8,a,l)}function tv(a,l){return im(2048,8,a,l)}function f_(a,l){return im(4,2,a,l)}function g_(a,l){return im(4,4,a,l)}function y_(a,l){if(typeof l=="function")return a=a(),l(a),function(){l(null)};if(l!=null)return a=a(),l.current=a,function(){l.current=null}}function v_(a,l,h){return h=h!=null?h.concat([a]):null,im(4,4,y_.bind(null,l,a),h)}function nv(){}function x_(a,l){var h=yr();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&Qy(l,g[1])?g[0]:(h.memoizedState=[a,l],a)}function b_(a,l){var h=yr();l=l===void 0?null:l;var g=h.memoizedState;return g!==null&&l!==null&&Qy(l,g[1])?g[0]:(a=a(),h.memoizedState=[a,l],a)}function w_(a,l,h){return(va&21)===0?(a.baseState&&(a.baseState=!1,Dn=!0),a.memoizedState=h):(Dr(h,l)||(h=Bu(),Ct.lanes|=h,xa|=h,a.baseState=!0),l)}function wD(a,l){var h=Ze;Ze=h!==0&&4>h?h:4,a(!0);var g=Jy.transition;Jy.transition={};try{a(!1),l()}finally{Ze=h,Jy.transition=g}}function S_(){return yr().memoizedState}function SD(a,l,h){var g=Wi(a);if(h={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null},__(a))E_(l,h);else if(h=e_(a,l,h,g),h!==null){var v=Cn();Vr(h,a,g,v),T_(h,l,g)}}function _D(a,l,h){var g=Wi(a),v={lane:g,action:h,hasEagerState:!1,eagerState:null,next:null};if(__(a))E_(l,v);else{var b=a.alternate;if(a.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var P=l.lastRenderedState,V=b(P,h);if(v.hasEagerState=!0,v.eagerState=V,Dr(V,P)){var $=l.interleaved;$===null?(v.next=v,zy(l)):(v.next=$.next,$.next=v),l.interleaved=v;return}}catch{}finally{}h=e_(a,l,v,g),h!==null&&(v=Cn(),Vr(h,a,g,v),T_(h,l,g))}}function __(a){var l=a.alternate;return a===Ct||l!==null&&l===Ct}function E_(a,l){dd=rm=!0;var h=a.pending;h===null?l.next=l:(l.next=h.next,h.next=l),a.pending=l}function T_(a,l,h){if((h&4194240)!==0){var g=l.lanes;g&=a.pendingLanes,h|=g,l.lanes=h,$u(a,h)}}var om={readContext:gr,useCallback:yn,useContext:yn,useEffect:yn,useImperativeHandle:yn,useInsertionEffect:yn,useLayoutEffect:yn,useMemo:yn,useReducer:yn,useRef:yn,useState:yn,useDebugValue:yn,useDeferredValue:yn,useTransition:yn,useMutableSource:yn,useSyncExternalStore:yn,useId:yn,unstable_isNewReconciler:!1},ED={readContext:gr,useCallback:function(a,l){return ms().memoizedState=[a,l===void 0?null:l],a},useContext:gr,useEffect:m_,useImperativeHandle:function(a,l,h){return h=h!=null?h.concat([a]):null,sm(4194308,4,y_.bind(null,l,a),h)},useLayoutEffect:function(a,l){return sm(4194308,4,a,l)},useInsertionEffect:function(a,l){return sm(4,2,a,l)},useMemo:function(a,l){var h=ms();return l=l===void 0?null:l,a=a(),h.memoizedState=[a,l],a},useReducer:function(a,l,h){var g=ms();return l=h!==void 0?h(l):l,g.memoizedState=g.baseState=l,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:l},g.queue=a,a=a.dispatch=SD.bind(null,Ct,a),[g.memoizedState,a]},useRef:function(a){var l=ms();return a={current:a},l.memoizedState=a},useState:h_,useDebugValue:nv,useDeferredValue:function(a){return ms().memoizedState=a},useTransition:function(){var a=h_(!1),l=a[0];return a=wD.bind(null,a[1]),ms().memoizedState=a,[l,a]},useMutableSource:function(){},useSyncExternalStore:function(a,l,h){var g=Ct,v=ms();if(St){if(h===void 0)throw Error(t(407));h=h()}else{if(h=l(),nn===null)throw Error(t(349));(va&30)!==0||a_(g,l,h)}v.memoizedState=h;var b={value:h,getSnapshot:l};return v.queue=b,m_(c_.bind(null,g,b,a),[a]),g.flags|=2048,md(9,l_.bind(null,g,b,h,l),void 0,null),h},useId:function(){var a=ms(),l=nn.identifierPrefix;if(St){var h=Ws,g=Gs;h=(g&~(1<<32-Qn(g)-1)).toString(32)+h,l=":"+l+"R"+h,h=hd++,0<h&&(l+="H"+h.toString(32)),l+=":"}else h=bD++,l=":"+l+"r"+h.toString(32)+":";return a.memoizedState=l},unstable_isNewReconciler:!1},TD={readContext:gr,useCallback:x_,useContext:gr,useEffect:tv,useImperativeHandle:v_,useInsertionEffect:f_,useLayoutEffect:g_,useMemo:b_,useReducer:Zy,useRef:p_,useState:function(){return Zy(pd)},useDebugValue:nv,useDeferredValue:function(a){var l=yr();return w_(l,Jt.memoizedState,a)},useTransition:function(){var a=Zy(pd)[0],l=yr().memoizedState;return[a,l]},useMutableSource:i_,useSyncExternalStore:o_,useId:S_,unstable_isNewReconciler:!1},ID={readContext:gr,useCallback:x_,useContext:gr,useEffect:tv,useImperativeHandle:v_,useInsertionEffect:f_,useLayoutEffect:g_,useMemo:b_,useReducer:ev,useRef:p_,useState:function(){return ev(pd)},useDebugValue:nv,useDeferredValue:function(a){var l=yr();return Jt===null?l.memoizedState=a:w_(l,Jt.memoizedState,a)},useTransition:function(){var a=ev(pd)[0],l=yr().memoizedState;return[a,l]},useMutableSource:i_,useSyncExternalStore:o_,useId:S_,unstable_isNewReconciler:!1};function Mr(a,l){if(a&&a.defaultProps){l=se({},l),a=a.defaultProps;for(var h in a)l[h]===void 0&&(l[h]=a[h]);return l}return l}function rv(a,l,h,g){l=a.memoizedState,h=h(g,l),h=h==null?l:se({},l,h),a.memoizedState=h,a.lanes===0&&(a.updateQueue.baseState=h)}var am={isMounted:function(a){return(a=a._reactInternals)?jr(a)===a:!1},enqueueSetState:function(a,l,h){a=a._reactInternals;var g=Cn(),v=Wi(a),b=Js(g,v);b.payload=l,h!=null&&(b.callback=h),l=zi(a,b,v),l!==null&&(Vr(l,a,v,g),Zp(l,a,v))},enqueueReplaceState:function(a,l,h){a=a._reactInternals;var g=Cn(),v=Wi(a),b=Js(g,v);b.tag=1,b.payload=l,h!=null&&(b.callback=h),l=zi(a,b,v),l!==null&&(Vr(l,a,v,g),Zp(l,a,v))},enqueueForceUpdate:function(a,l){a=a._reactInternals;var h=Cn(),g=Wi(a),v=Js(h,g);v.tag=2,l!=null&&(v.callback=l),l=zi(a,v,g),l!==null&&(Vr(l,a,g,h),Zp(l,a,g))}};function I_(a,l,h,g,v,b,P){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,b,P):l.prototype&&l.prototype.isPureReactComponent?!ed(h,g)||!ed(v,b):!0}function C_(a,l,h){var g=!1,v=Bi,b=l.contextType;return typeof b=="object"&&b!==null?b=gr(b):(v=Rn(l)?pa:gn.current,g=l.contextTypes,b=(g=g!=null)?Xl(a,v):Bi),l=new l(h,b),a.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,l.updater=am,a.stateNode=l,l._reactInternals=a,g&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=v,a.__reactInternalMemoizedMaskedChildContext=b),l}function k_(a,l,h,g){a=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==a&&am.enqueueReplaceState(l,l.state,null)}function sv(a,l,h,g){var v=a.stateNode;v.props=h,v.state=a.memoizedState,v.refs={},Hy(a);var b=l.contextType;typeof b=="object"&&b!==null?v.context=gr(b):(b=Rn(l)?pa:gn.current,v.context=Xl(a,b)),v.state=a.memoizedState,b=l.getDerivedStateFromProps,typeof b=="function"&&(rv(a,l,b,h),v.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(l=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),l!==v.state&&am.enqueueReplaceState(v,v.state,null),em(a,h,v,g),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308)}function oc(a,l){try{var h="",g=l;do h+=Ve(g),g=g.return;while(g);var v=h}catch(b){v=`
Error generating stack: `+b.message+`
`+b.stack}return{value:a,source:l,stack:v,digest:null}}function iv(a,l,h){return{value:a,source:null,stack:h??null,digest:l??null}}function ov(a,l){try{console.error(l.value)}catch(h){setTimeout(function(){throw h})}}var CD=typeof WeakMap=="function"?WeakMap:Map;function A_(a,l,h){h=Js(-1,h),h.tag=3,h.payload={element:null};var g=l.value;return h.callback=function(){mm||(mm=!0,wv=g),ov(a,l)},h}function P_(a,l,h){h=Js(-1,h),h.tag=3;var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var v=l.value;h.payload=function(){return g(v)},h.callback=function(){ov(a,l)}}var b=a.stateNode;return b!==null&&typeof b.componentDidCatch=="function"&&(h.callback=function(){ov(a,l),typeof g!="function"&&(qi===null?qi=new Set([this]):qi.add(this));var P=l.stack;this.componentDidCatch(l.value,{componentStack:P!==null?P:""})}),h}function N_(a,l,h){var g=a.pingCache;if(g===null){g=a.pingCache=new CD;var v=new Set;g.set(l,v)}else v=g.get(l),v===void 0&&(v=new Set,g.set(l,v));v.has(h)||(v.add(h),a=UD.bind(null,a,l,h),l.then(a,a))}function j_(a){do{var l;if((l=a.tag===13)&&(l=a.memoizedState,l=l!==null?l.dehydrated!==null:!0),l)return a;a=a.return}while(a!==null);return null}function R_(a,l,h,g,v){return(a.mode&1)===0?(a===l?a.flags|=65536:(a.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(l=Js(-1,1),l.tag=2,zi(h,l,1))),h.lanes|=1),a):(a.flags|=65536,a.lanes=v,a)}var kD=F.ReactCurrentOwner,Dn=!1;function In(a,l,h,g){l.child=a===null?ZS(l,null,h,g):nc(l,a.child,h,g)}function D_(a,l,h,g,v){h=h.render;var b=l.ref;return sc(l,v),g=Yy(a,l,h,g,b,v),h=Xy(),a!==null&&!Dn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Qs(a,l,v)):(St&&h&&Dy(l),l.flags|=1,In(a,l,g,v),l.child)}function O_(a,l,h,g,v){if(a===null){var b=h.type;return typeof b=="function"&&!kv(b)&&b.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(l.tag=15,l.type=b,M_(a,l,b,g,v)):(a=bm(h.type,null,g,l,l.mode,v),a.ref=l.ref,a.return=l,l.child=a)}if(b=a.child,(a.lanes&v)===0){var P=b.memoizedProps;if(h=h.compare,h=h!==null?h:ed,h(P,g)&&a.ref===l.ref)return Qs(a,l,v)}return l.flags|=1,a=Ji(b,g),a.ref=l.ref,a.return=l,l.child=a}function M_(a,l,h,g,v){if(a!==null){var b=a.memoizedProps;if(ed(b,g)&&a.ref===l.ref)if(Dn=!1,l.pendingProps=g=b,(a.lanes&v)!==0)(a.flags&131072)!==0&&(Dn=!0);else return l.lanes=a.lanes,Qs(a,l,v)}return av(a,l,h,g,v)}function L_(a,l,h){var g=l.pendingProps,v=g.children,b=a!==null?a.memoizedState:null;if(g.mode==="hidden")if((l.mode&1)===0)l.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(lc,rr),rr|=h;else{if((h&1073741824)===0)return a=b!==null?b.baseLanes|h:h,l.lanes=l.childLanes=1073741824,l.memoizedState={baseLanes:a,cachePool:null,transitions:null},l.updateQueue=null,mt(lc,rr),rr|=a,null;l.memoizedState={baseLanes:0,cachePool:null,transitions:null},g=b!==null?b.baseLanes:h,mt(lc,rr),rr|=g}else b!==null?(g=b.baseLanes|h,l.memoizedState=null):g=h,mt(lc,rr),rr|=g;return In(a,l,v,h),l.child}function F_(a,l){var h=l.ref;(a===null&&h!==null||a!==null&&a.ref!==h)&&(l.flags|=512,l.flags|=2097152)}function av(a,l,h,g,v){var b=Rn(h)?pa:gn.current;return b=Xl(l,b),sc(l,v),h=Yy(a,l,h,g,b,v),g=Xy(),a!==null&&!Dn?(l.updateQueue=a.updateQueue,l.flags&=-2053,a.lanes&=~v,Qs(a,l,v)):(St&&g&&Dy(l),l.flags|=1,In(a,l,h,v),l.child)}function V_(a,l,h,g,v){if(Rn(h)){var b=!0;qp(l)}else b=!1;if(sc(l,v),l.stateNode===null)cm(a,l),C_(l,h,g),sv(l,h,g,v),g=!0;else if(a===null){var P=l.stateNode,V=l.memoizedProps;P.props=V;var $=P.context,X=h.contextType;typeof X=="object"&&X!==null?X=gr(X):(X=Rn(h)?pa:gn.current,X=Xl(l,X));var ce=h.getDerivedStateFromProps,ue=typeof ce=="function"||typeof P.getSnapshotBeforeUpdate=="function";ue||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==g||$!==X)&&k_(l,P,g,X),$i=!1;var ae=l.memoizedState;P.state=ae,em(l,g,P,v),$=l.memoizedState,V!==g||ae!==$||jn.current||$i?(typeof ce=="function"&&(rv(l,h,ce,g),$=l.memoizedState),(V=$i||I_(l,h,V,g,ae,$,X))?(ue||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount()),typeof P.componentDidMount=="function"&&(l.flags|=4194308)):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=$),P.props=g,P.state=$,P.context=X,g=V):(typeof P.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{P=l.stateNode,t_(a,l),V=l.memoizedProps,X=l.type===l.elementType?V:Mr(l.type,V),P.props=X,ue=l.pendingProps,ae=P.context,$=h.contextType,typeof $=="object"&&$!==null?$=gr($):($=Rn(h)?pa:gn.current,$=Xl(l,$));var be=h.getDerivedStateFromProps;(ce=typeof be=="function"||typeof P.getSnapshotBeforeUpdate=="function")||typeof P.UNSAFE_componentWillReceiveProps!="function"&&typeof P.componentWillReceiveProps!="function"||(V!==ue||ae!==$)&&k_(l,P,g,$),$i=!1,ae=l.memoizedState,P.state=ae,em(l,g,P,v);var _e=l.memoizedState;V!==ue||ae!==_e||jn.current||$i?(typeof be=="function"&&(rv(l,h,be,g),_e=l.memoizedState),(X=$i||I_(l,h,X,g,ae,_e,$)||!1)?(ce||typeof P.UNSAFE_componentWillUpdate!="function"&&typeof P.componentWillUpdate!="function"||(typeof P.componentWillUpdate=="function"&&P.componentWillUpdate(g,_e,$),typeof P.UNSAFE_componentWillUpdate=="function"&&P.UNSAFE_componentWillUpdate(g,_e,$)),typeof P.componentDidUpdate=="function"&&(l.flags|=4),typeof P.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof P.componentDidUpdate!="function"||V===a.memoizedProps&&ae===a.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&ae===a.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=_e),P.props=g,P.state=_e,P.context=$,g=X):(typeof P.componentDidUpdate!="function"||V===a.memoizedProps&&ae===a.memoizedState||(l.flags|=4),typeof P.getSnapshotBeforeUpdate!="function"||V===a.memoizedProps&&ae===a.memoizedState||(l.flags|=1024),g=!1)}return lv(a,l,h,g,b,v)}function lv(a,l,h,g,v,b){F_(a,l);var P=(l.flags&128)!==0;if(!g&&!P)return v&&HS(l,h,!1),Qs(a,l,b);g=l.stateNode,kD.current=l;var V=P&&typeof h.getDerivedStateFromError!="function"?null:g.render();return l.flags|=1,a!==null&&P?(l.child=nc(l,a.child,null,b),l.child=nc(l,null,V,b)):In(a,l,V,b),l.memoizedState=g.state,v&&HS(l,h,!0),l.child}function B_(a){var l=a.stateNode;l.pendingContext?$S(a,l.pendingContext,l.pendingContext!==l.context):l.context&&$S(a,l.context,!1),qy(a,l.containerInfo)}function U_(a,l,h,g,v){return tc(),Fy(v),l.flags|=256,In(a,l,h,g),l.child}var cv={dehydrated:null,treeContext:null,retryLane:0};function uv(a){return{baseLanes:a,cachePool:null,transitions:null}}function $_(a,l,h){var g=l.pendingProps,v=It.current,b=!1,P=(l.flags&128)!==0,V;if((V=P)||(V=a!==null&&a.memoizedState===null?!1:(v&2)!==0),V?(b=!0,l.flags&=-129):(a===null||a.memoizedState!==null)&&(v|=1),mt(It,v&1),a===null)return Ly(l),a=l.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?((l.mode&1)===0?l.lanes=1:a.data==="$!"?l.lanes=8:l.lanes=1073741824,null):(P=g.children,a=g.fallback,b?(g=l.mode,b=l.child,P={mode:"hidden",children:P},(g&1)===0&&b!==null?(b.childLanes=0,b.pendingProps=P):b=wm(P,g,0,null),a=_a(a,g,h,null),b.return=l,a.return=l,b.sibling=a,l.child=b,l.child.memoizedState=uv(h),l.memoizedState=cv,a):dv(l,P));if(v=a.memoizedState,v!==null&&(V=v.dehydrated,V!==null))return AD(a,l,P,g,V,v,h);if(b){b=g.fallback,P=l.mode,v=a.child,V=v.sibling;var $={mode:"hidden",children:g.children};return(P&1)===0&&l.child!==v?(g=l.child,g.childLanes=0,g.pendingProps=$,l.deletions=null):(g=Ji(v,$),g.subtreeFlags=v.subtreeFlags&14680064),V!==null?b=Ji(V,b):(b=_a(b,P,h,null),b.flags|=2),b.return=l,g.return=l,g.sibling=b,l.child=g,g=b,b=l.child,P=a.child.memoizedState,P=P===null?uv(h):{baseLanes:P.baseLanes|h,cachePool:null,transitions:P.transitions},b.memoizedState=P,b.childLanes=a.childLanes&~h,l.memoizedState=cv,g}return b=a.child,a=b.sibling,g=Ji(b,{mode:"visible",children:g.children}),(l.mode&1)===0&&(g.lanes=h),g.return=l,g.sibling=null,a!==null&&(h=l.deletions,h===null?(l.deletions=[a],l.flags|=16):h.push(a)),l.child=g,l.memoizedState=null,g}function dv(a,l){return l=wm({mode:"visible",children:l},a.mode,0,null),l.return=a,a.child=l}function lm(a,l,h,g){return g!==null&&Fy(g),nc(l,a.child,null,h),a=dv(l,l.pendingProps.children),a.flags|=2,l.memoizedState=null,a}function AD(a,l,h,g,v,b,P){if(h)return l.flags&256?(l.flags&=-257,g=iv(Error(t(422))),lm(a,l,P,g)):l.memoizedState!==null?(l.child=a.child,l.flags|=128,null):(b=g.fallback,v=l.mode,g=wm({mode:"visible",children:g.children},v,0,null),b=_a(b,v,P,null),b.flags|=2,g.return=l,b.return=l,g.sibling=b,l.child=g,(l.mode&1)!==0&&nc(l,a.child,null,P),l.child.memoizedState=uv(P),l.memoizedState=cv,b);if((l.mode&1)===0)return lm(a,l,P,null);if(v.data==="$!"){if(g=v.nextSibling&&v.nextSibling.dataset,g)var V=g.dgst;return g=V,b=Error(t(419)),g=iv(b,g,void 0),lm(a,l,P,g)}if(V=(P&a.childLanes)!==0,Dn||V){if(g=nn,g!==null){switch(P&-P){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(g.suspendedLanes|P))!==0?0:v,v!==0&&v!==b.retryLane&&(b.retryLane=v,Ks(a,v),Vr(g,a,v,-1))}return Cv(),g=iv(Error(t(421))),lm(a,l,P,g)}return v.data==="$?"?(l.flags|=128,l.child=a.child,l=$D.bind(null,a),v._reactRetry=l,null):(a=b.treeContext,nr=Fi(v.nextSibling),tr=l,St=!0,Or=null,a!==null&&(mr[fr++]=Gs,mr[fr++]=Ws,mr[fr++]=ma,Gs=a.id,Ws=a.overflow,ma=l),l=dv(l,g.children),l.flags|=4096,l)}function z_(a,l,h){a.lanes|=l;var g=a.alternate;g!==null&&(g.lanes|=l),$y(a.return,l,h)}function hv(a,l,h,g,v){var b=a.memoizedState;b===null?a.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:v}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=g,b.tail=h,b.tailMode=v)}function H_(a,l,h){var g=l.pendingProps,v=g.revealOrder,b=g.tail;if(In(a,l,g.children,h),g=It.current,(g&2)!==0)g=g&1|2,l.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=l.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&z_(a,h,l);else if(a.tag===19)z_(a,h,l);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===l)break e;for(;a.sibling===null;){if(a.return===null||a.return===l)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}if(mt(It,g),(l.mode&1)===0)l.memoizedState=null;else switch(v){case"forwards":for(h=l.child,v=null;h!==null;)a=h.alternate,a!==null&&tm(a)===null&&(v=h),h=h.sibling;h=v,h===null?(v=l.child,l.child=null):(v=h.sibling,h.sibling=null),hv(l,!1,v,h,b);break;case"backwards":for(h=null,v=l.child,l.child=null;v!==null;){if(a=v.alternate,a!==null&&tm(a)===null){l.child=v;break}a=v.sibling,v.sibling=h,h=v,v=a}hv(l,!0,h,null,b);break;case"together":hv(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function cm(a,l){(l.mode&1)===0&&a!==null&&(a.alternate=null,l.alternate=null,l.flags|=2)}function Qs(a,l,h){if(a!==null&&(l.dependencies=a.dependencies),xa|=l.lanes,(h&l.childLanes)===0)return null;if(a!==null&&l.child!==a.child)throw Error(t(153));if(l.child!==null){for(a=l.child,h=Ji(a,a.pendingProps),l.child=h,h.return=l;a.sibling!==null;)a=a.sibling,h=h.sibling=Ji(a,a.pendingProps),h.return=l;h.sibling=null}return l.child}function PD(a,l,h){switch(l.tag){case 3:B_(l),tc();break;case 5:s_(l);break;case 1:Rn(l.type)&&qp(l);break;case 4:qy(l,l.stateNode.containerInfo);break;case 10:var g=l.type._context,v=l.memoizedProps.value;mt(Yp,g._currentValue),g._currentValue=v;break;case 13:if(g=l.memoizedState,g!==null)return g.dehydrated!==null?(mt(It,It.current&1),l.flags|=128,null):(h&l.child.childLanes)!==0?$_(a,l,h):(mt(It,It.current&1),a=Qs(a,l,h),a!==null?a.sibling:null);mt(It,It.current&1);break;case 19:if(g=(h&l.childLanes)!==0,(a.flags&128)!==0){if(g)return H_(a,l,h);l.flags|=128}if(v=l.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),mt(It,It.current),g)break;return null;case 22:case 23:return l.lanes=0,L_(a,l,h)}return Qs(a,l,h)}var q_,pv,G_,W_;q_=function(a,l){for(var h=l.child;h!==null;){if(h.tag===5||h.tag===6)a.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},pv=function(){},G_=function(a,l,h,g){var v=a.memoizedProps;if(v!==g){a=l.stateNode,ya(ps.current);var b=null;switch(h){case"input":v=El(a,v),g=El(a,g),b=[];break;case"select":v=se({},v,{value:void 0}),g=se({},g,{value:void 0}),b=[];break;case"textarea":v=Au(a,v),g=Au(a,g),b=[];break;default:typeof v.onClick!="function"&&typeof g.onClick=="function"&&(a.onclick=$p)}Nr(h,g);var P;h=null;for(X in v)if(!g.hasOwnProperty(X)&&v.hasOwnProperty(X)&&v[X]!=null)if(X==="style"){var V=v[X];for(P in V)V.hasOwnProperty(P)&&(h||(h={}),h[P]="")}else X!=="dangerouslySetInnerHTML"&&X!=="children"&&X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&X!=="autoFocus"&&(s.hasOwnProperty(X)?b||(b=[]):(b=b||[]).push(X,null));for(X in g){var $=g[X];if(V=v?.[X],g.hasOwnProperty(X)&&$!==V&&($!=null||V!=null))if(X==="style")if(V){for(P in V)!V.hasOwnProperty(P)||$&&$.hasOwnProperty(P)||(h||(h={}),h[P]="");for(P in $)$.hasOwnProperty(P)&&V[P]!==$[P]&&(h||(h={}),h[P]=$[P])}else h||(b||(b=[]),b.push(X,h)),h=$;else X==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,V=V?V.__html:void 0,$!=null&&V!==$&&(b=b||[]).push(X,$)):X==="children"?typeof $!="string"&&typeof $!="number"||(b=b||[]).push(X,""+$):X!=="suppressContentEditableWarning"&&X!=="suppressHydrationWarning"&&(s.hasOwnProperty(X)?($!=null&&X==="onScroll"&&vt("scroll",a),b||V===$||(b=[])):(b=b||[]).push(X,$))}h&&(b=b||[]).push("style",h);var X=b;(l.updateQueue=X)&&(l.flags|=4)}},W_=function(a,l,h,g){h!==g&&(l.flags|=4)};function fd(a,l){if(!St)switch(a.tailMode){case"hidden":l=a.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?a.tail=null:h.sibling=null;break;case"collapsed":h=a.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function vn(a){var l=a.alternate!==null&&a.alternate.child===a.child,h=0,g=0;if(l)for(var v=a.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags&14680064,g|=v.flags&14680064,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)h|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=g,a.childLanes=h,l}function ND(a,l,h){var g=l.pendingProps;switch(Oy(l),l.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(l),null;case 1:return Rn(l.type)&&Hp(),vn(l),null;case 3:return g=l.stateNode,ic(),xt(jn),xt(gn),Ky(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(a===null||a.child===null)&&(Jp(l)?l.flags|=4:a===null||a.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Or!==null&&(Ev(Or),Or=null))),pv(a,l),vn(l),null;case 5:Gy(l);var v=ya(ud.current);if(h=l.type,a!==null&&l.stateNode!=null)G_(a,l,h,g,v),a.ref!==l.ref&&(l.flags|=512,l.flags|=2097152);else{if(!g){if(l.stateNode===null)throw Error(t(166));return vn(l),null}if(a=ya(ps.current),Jp(l)){g=l.stateNode,h=l.type;var b=l.memoizedProps;switch(g[hs]=l,g[id]=b,a=(l.mode&1)!==0,h){case"dialog":vt("cancel",g),vt("close",g);break;case"iframe":case"object":case"embed":vt("load",g);break;case"video":case"audio":for(v=0;v<nd.length;v++)vt(nd[v],g);break;case"source":vt("error",g);break;case"img":case"image":case"link":vt("error",g),vt("load",g);break;case"details":vt("toggle",g);break;case"input":pp(g,b),vt("invalid",g);break;case"select":g._wrapperState={wasMultiple:!!b.multiple},vt("invalid",g);break;case"textarea":Pu(g,b),vt("invalid",g)}Nr(h,b),v=null;for(var P in b)if(b.hasOwnProperty(P)){var V=b[P];P==="children"?typeof V=="string"?g.textContent!==V&&(b.suppressHydrationWarning!==!0&&Up(g.textContent,V,a),v=["children",V]):typeof V=="number"&&g.textContent!==""+V&&(b.suppressHydrationWarning!==!0&&Up(g.textContent,V,a),v=["children",""+V]):s.hasOwnProperty(P)&&V!=null&&P==="onScroll"&&vt("scroll",g)}switch(h){case"input":ot(g),ku(g,b,!0);break;case"textarea":ot(g),Si(g);break;case"select":case"option":break;default:typeof b.onClick=="function"&&(g.onclick=$p)}g=v,l.updateQueue=g,g!==null&&(l.flags|=4)}else{P=v.nodeType===9?v:v.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Nu(h)),a==="http://www.w3.org/1999/xhtml"?h==="script"?(a=P.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof g.is=="string"?a=P.createElement(h,{is:g.is}):(a=P.createElement(h),h==="select"&&(P=a,g.multiple?P.multiple=!0:g.size&&(P.size=g.size))):a=P.createElementNS(a,h),a[hs]=l,a[id]=g,q_(a,l,!1,!1),l.stateNode=a;e:{switch(P=kl(h,g),h){case"dialog":vt("cancel",a),vt("close",a),v=g;break;case"iframe":case"object":case"embed":vt("load",a),v=g;break;case"video":case"audio":for(v=0;v<nd.length;v++)vt(nd[v],a);v=g;break;case"source":vt("error",a),v=g;break;case"img":case"image":case"link":vt("error",a),vt("load",a),v=g;break;case"details":vt("toggle",a),v=g;break;case"input":pp(a,g),v=El(a,g),vt("invalid",a);break;case"option":v=g;break;case"select":a._wrapperState={wasMultiple:!!g.multiple},v=se({},g,{value:void 0}),vt("invalid",a);break;case"textarea":Pu(a,g),v=Au(a,g),vt("invalid",a);break;default:v=g}Nr(h,v),V=v;for(b in V)if(V.hasOwnProperty(b)){var $=V[b];b==="style"?Cl(a,$):b==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&fp(a,$)):b==="children"?typeof $=="string"?(h!=="textarea"||$!=="")&&Xo(a,$):typeof $=="number"&&Xo(a,""+$):b!=="suppressContentEditableWarning"&&b!=="suppressHydrationWarning"&&b!=="autoFocus"&&(s.hasOwnProperty(b)?$!=null&&b==="onScroll"&&vt("scroll",a):$!=null&&C(a,b,$,P))}switch(h){case"input":ot(a),ku(a,g,!1);break;case"textarea":ot(a),Si(a);break;case"option":g.value!=null&&a.setAttribute("value",""+ne(g.value));break;case"select":a.multiple=!!g.multiple,b=g.value,b!=null?Pr(a,!!g.multiple,b,!1):g.defaultValue!=null&&Pr(a,!!g.multiple,g.defaultValue,!0);break;default:typeof v.onClick=="function"&&(a.onclick=$p)}switch(h){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}}g&&(l.flags|=4)}l.ref!==null&&(l.flags|=512,l.flags|=2097152)}return vn(l),null;case 6:if(a&&l.stateNode!=null)W_(a,l,a.memoizedProps,g);else{if(typeof g!="string"&&l.stateNode===null)throw Error(t(166));if(h=ya(ud.current),ya(ps.current),Jp(l)){if(g=l.stateNode,h=l.memoizedProps,g[hs]=l,(b=g.nodeValue!==h)&&(a=tr,a!==null))switch(a.tag){case 3:Up(g.nodeValue,h,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&Up(g.nodeValue,h,(a.mode&1)!==0)}b&&(l.flags|=4)}else g=(h.nodeType===9?h:h.ownerDocument).createTextNode(g),g[hs]=l,l.stateNode=g}return vn(l),null;case 13:if(xt(It),g=l.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(St&&nr!==null&&(l.mode&1)!==0&&(l.flags&128)===0)QS(),tc(),l.flags|=98560,b=!1;else if(b=Jp(l),g!==null&&g.dehydrated!==null){if(a===null){if(!b)throw Error(t(318));if(b=l.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(t(317));b[hs]=l}else tc(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;vn(l),b=!1}else Or!==null&&(Ev(Or),Or=null),b=!0;if(!b)return l.flags&65536?l:null}return(l.flags&128)!==0?(l.lanes=h,l):(g=g!==null,g!==(a!==null&&a.memoizedState!==null)&&g&&(l.child.flags|=8192,(l.mode&1)!==0&&(a===null||(It.current&1)!==0?Qt===0&&(Qt=3):Cv())),l.updateQueue!==null&&(l.flags|=4),vn(l),null);case 4:return ic(),pv(a,l),a===null&&rd(l.stateNode.containerInfo),vn(l),null;case 10:return Uy(l.type._context),vn(l),null;case 17:return Rn(l.type)&&Hp(),vn(l),null;case 19:if(xt(It),b=l.memoizedState,b===null)return vn(l),null;if(g=(l.flags&128)!==0,P=b.rendering,P===null)if(g)fd(b,!1);else{if(Qt!==0||a!==null&&(a.flags&128)!==0)for(a=l.child;a!==null;){if(P=tm(a),P!==null){for(l.flags|=128,fd(b,!1),g=P.updateQueue,g!==null&&(l.updateQueue=g,l.flags|=4),l.subtreeFlags=0,g=h,h=l.child;h!==null;)b=h,a=g,b.flags&=14680066,P=b.alternate,P===null?(b.childLanes=0,b.lanes=a,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=P.childLanes,b.lanes=P.lanes,b.child=P.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=P.memoizedProps,b.memoizedState=P.memoizedState,b.updateQueue=P.updateQueue,b.type=P.type,a=P.dependencies,b.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),h=h.sibling;return mt(It,It.current&1|2),l.child}a=a.sibling}b.tail!==null&&yt()>cc&&(l.flags|=128,g=!0,fd(b,!1),l.lanes=4194304)}else{if(!g)if(a=tm(P),a!==null){if(l.flags|=128,g=!0,h=a.updateQueue,h!==null&&(l.updateQueue=h,l.flags|=4),fd(b,!0),b.tail===null&&b.tailMode==="hidden"&&!P.alternate&&!St)return vn(l),null}else 2*yt()-b.renderingStartTime>cc&&h!==1073741824&&(l.flags|=128,g=!0,fd(b,!1),l.lanes=4194304);b.isBackwards?(P.sibling=l.child,l.child=P):(h=b.last,h!==null?h.sibling=P:l.child=P,b.last=P)}return b.tail!==null?(l=b.tail,b.rendering=l,b.tail=l.sibling,b.renderingStartTime=yt(),l.sibling=null,h=It.current,mt(It,g?h&1|2:h&1),l):(vn(l),null);case 22:case 23:return Iv(),g=l.memoizedState!==null,a!==null&&a.memoizedState!==null!==g&&(l.flags|=8192),g&&(l.mode&1)!==0?(rr&1073741824)!==0&&(vn(l),l.subtreeFlags&6&&(l.flags|=8192)):vn(l),null;case 24:return null;case 25:return null}throw Error(t(156,l.tag))}function jD(a,l){switch(Oy(l),l.tag){case 1:return Rn(l.type)&&Hp(),a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 3:return ic(),xt(jn),xt(gn),Ky(),a=l.flags,(a&65536)!==0&&(a&128)===0?(l.flags=a&-65537|128,l):null;case 5:return Gy(l),null;case 13:if(xt(It),a=l.memoizedState,a!==null&&a.dehydrated!==null){if(l.alternate===null)throw Error(t(340));tc()}return a=l.flags,a&65536?(l.flags=a&-65537|128,l):null;case 19:return xt(It),null;case 4:return ic(),null;case 10:return Uy(l.type._context),null;case 22:case 23:return Iv(),null;case 24:return null;default:return null}}var um=!1,xn=!1,RD=typeof WeakSet=="function"?WeakSet:Set,Se=null;function ac(a,l){var h=a.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(g){jt(a,l,g)}else h.current=null}function mv(a,l,h){try{h()}catch(g){jt(a,l,g)}}var K_=!1;function DD(a,l){if(Iy=Us,a=IS(),vy(a)){if("selectionStart"in a)var h={start:a.selectionStart,end:a.selectionEnd};else e:{h=(h=a.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var v=g.anchorOffset,b=g.focusNode;g=g.focusOffset;try{h.nodeType,b.nodeType}catch{h=null;break e}var P=0,V=-1,$=-1,X=0,ce=0,ue=a,ae=null;t:for(;;){for(var be;ue!==h||v!==0&&ue.nodeType!==3||(V=P+v),ue!==b||g!==0&&ue.nodeType!==3||($=P+g),ue.nodeType===3&&(P+=ue.nodeValue.length),(be=ue.firstChild)!==null;)ae=ue,ue=be;for(;;){if(ue===a)break t;if(ae===h&&++X===v&&(V=P),ae===b&&++ce===g&&($=P),(be=ue.nextSibling)!==null)break;ue=ae,ae=ue.parentNode}ue=be}h=V===-1||$===-1?null:{start:V,end:$}}else h=null}h=h||{start:0,end:0}}else h=null;for(Cy={focusedElem:a,selectionRange:h},Us=!1,Se=l;Se!==null;)if(l=Se,a=l.child,(l.subtreeFlags&1028)!==0&&a!==null)a.return=l,Se=a;else for(;Se!==null;){l=Se;try{var _e=l.alternate;if((l.flags&1024)!==0)switch(l.tag){case 0:case 11:case 15:break;case 1:if(_e!==null){var Ie=_e.memoizedProps,Ft=_e.memoizedState,K=l.stateNode,H=K.getSnapshotBeforeUpdate(l.elementType===l.type?Ie:Mr(l.type,Ie),Ft);K.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Y=l.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){jt(l,l.return,de)}if(a=l.sibling,a!==null){a.return=l.return,Se=a;break}Se=l.return}return _e=K_,K_=!1,_e}function gd(a,l,h){var g=l.updateQueue;if(g=g!==null?g.lastEffect:null,g!==null){var v=g=g.next;do{if((v.tag&a)===a){var b=v.destroy;v.destroy=void 0,b!==void 0&&mv(l,h,b)}v=v.next}while(v!==g)}}function dm(a,l){if(l=l.updateQueue,l=l!==null?l.lastEffect:null,l!==null){var h=l=l.next;do{if((h.tag&a)===a){var g=h.create;h.destroy=g()}h=h.next}while(h!==l)}}function fv(a){var l=a.ref;if(l!==null){var h=a.stateNode;switch(a.tag){case 5:a=h;break;default:a=h}typeof l=="function"?l(a):l.current=a}}function J_(a){var l=a.alternate;l!==null&&(a.alternate=null,J_(l)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(l=a.stateNode,l!==null&&(delete l[hs],delete l[id],delete l[Ny],delete l[gD],delete l[yD])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function Q_(a){return a.tag===5||a.tag===3||a.tag===4}function Y_(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Q_(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function gv(a,l,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?h.nodeType===8?h.parentNode.insertBefore(a,l):h.insertBefore(a,l):(h.nodeType===8?(l=h.parentNode,l.insertBefore(a,h)):(l=h,l.appendChild(a)),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=$p));else if(g!==4&&(a=a.child,a!==null))for(gv(a,l,h),a=a.sibling;a!==null;)gv(a,l,h),a=a.sibling}function yv(a,l,h){var g=a.tag;if(g===5||g===6)a=a.stateNode,l?h.insertBefore(a,l):h.appendChild(a);else if(g!==4&&(a=a.child,a!==null))for(yv(a,l,h),a=a.sibling;a!==null;)yv(a,l,h),a=a.sibling}var dn=null,Lr=!1;function Hi(a,l,h){for(h=h.child;h!==null;)X_(a,l,h),h=h.sibling}function X_(a,l,h){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(ra,h)}catch{}switch(h.tag){case 5:xn||ac(h,l);case 6:var g=dn,v=Lr;dn=null,Hi(a,l,h),dn=g,Lr=v,dn!==null&&(Lr?(a=dn,h=h.stateNode,a.nodeType===8?a.parentNode.removeChild(h):a.removeChild(h)):dn.removeChild(h.stateNode));break;case 18:dn!==null&&(Lr?(a=dn,h=h.stateNode,a.nodeType===8?Py(a.parentNode,h):a.nodeType===1&&Py(a,h),Di(a)):Py(dn,h.stateNode));break;case 4:g=dn,v=Lr,dn=h.stateNode.containerInfo,Lr=!0,Hi(a,l,h),dn=g,Lr=v;break;case 0:case 11:case 14:case 15:if(!xn&&(g=h.updateQueue,g!==null&&(g=g.lastEffect,g!==null))){v=g=g.next;do{var b=v,P=b.destroy;b=b.tag,P!==void 0&&((b&2)!==0||(b&4)!==0)&&mv(h,l,P),v=v.next}while(v!==g)}Hi(a,l,h);break;case 1:if(!xn&&(ac(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"))try{g.props=h.memoizedProps,g.state=h.memoizedState,g.componentWillUnmount()}catch(V){jt(h,l,V)}Hi(a,l,h);break;case 21:Hi(a,l,h);break;case 22:h.mode&1?(xn=(g=xn)||h.memoizedState!==null,Hi(a,l,h),xn=g):Hi(a,l,h);break;default:Hi(a,l,h)}}function Z_(a){var l=a.updateQueue;if(l!==null){a.updateQueue=null;var h=a.stateNode;h===null&&(h=a.stateNode=new RD),l.forEach(function(g){var v=zD.bind(null,a,g);h.has(g)||(h.add(g),g.then(v,v))})}}function Fr(a,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var v=h[g];try{var b=a,P=l,V=P;e:for(;V!==null;){switch(V.tag){case 5:dn=V.stateNode,Lr=!1;break e;case 3:dn=V.stateNode.containerInfo,Lr=!0;break e;case 4:dn=V.stateNode.containerInfo,Lr=!0;break e}V=V.return}if(dn===null)throw Error(t(160));X_(b,P,v),dn=null,Lr=!1;var $=v.alternate;$!==null&&($.return=null),v.return=null}catch(X){jt(v,l,X)}}if(l.subtreeFlags&12854)for(l=l.child;l!==null;)eE(l,a),l=l.sibling}function eE(a,l){var h=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Fr(l,a),fs(a),g&4){try{gd(3,a,a.return),dm(3,a)}catch(Ie){jt(a,a.return,Ie)}try{gd(5,a,a.return)}catch(Ie){jt(a,a.return,Ie)}}break;case 1:Fr(l,a),fs(a),g&512&&h!==null&&ac(h,h.return);break;case 5:if(Fr(l,a),fs(a),g&512&&h!==null&&ac(h,h.return),a.flags&32){var v=a.stateNode;try{Xo(v,"")}catch(Ie){jt(a,a.return,Ie)}}if(g&4&&(v=a.stateNode,v!=null)){var b=a.memoizedProps,P=h!==null?h.memoizedProps:b,V=a.type,$=a.updateQueue;if(a.updateQueue=null,$!==null)try{V==="input"&&b.type==="radio"&&b.name!=null&&Tl(v,b),kl(V,P);var X=kl(V,b);for(P=0;P<$.length;P+=2){var ce=$[P],ue=$[P+1];ce==="style"?Cl(v,ue):ce==="dangerouslySetInnerHTML"?fp(v,ue):ce==="children"?Xo(v,ue):C(v,ce,ue,X)}switch(V){case"input":Yo(v,b);break;case"textarea":mp(v,b);break;case"select":var ae=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!b.multiple;var be=b.value;be!=null?Pr(v,!!b.multiple,be,!1):ae!==!!b.multiple&&(b.defaultValue!=null?Pr(v,!!b.multiple,b.defaultValue,!0):Pr(v,!!b.multiple,b.multiple?[]:"",!1))}v[id]=b}catch(Ie){jt(a,a.return,Ie)}}break;case 6:if(Fr(l,a),fs(a),g&4){if(a.stateNode===null)throw Error(t(162));v=a.stateNode,b=a.memoizedProps;try{v.nodeValue=b}catch(Ie){jt(a,a.return,Ie)}}break;case 3:if(Fr(l,a),fs(a),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Di(l.containerInfo)}catch(Ie){jt(a,a.return,Ie)}break;case 4:Fr(l,a),fs(a);break;case 13:Fr(l,a),fs(a),v=a.child,v.flags&8192&&(b=v.memoizedState!==null,v.stateNode.isHidden=b,!b||v.alternate!==null&&v.alternate.memoizedState!==null||(bv=yt())),g&4&&Z_(a);break;case 22:if(ce=h!==null&&h.memoizedState!==null,a.mode&1?(xn=(X=xn)||ce,Fr(l,a),xn=X):Fr(l,a),fs(a),g&8192){if(X=a.memoizedState!==null,(a.stateNode.isHidden=X)&&!ce&&(a.mode&1)!==0)for(Se=a,ce=a.child;ce!==null;){for(ue=Se=ce;Se!==null;){switch(ae=Se,be=ae.child,ae.tag){case 0:case 11:case 14:case 15:gd(4,ae,ae.return);break;case 1:ac(ae,ae.return);var _e=ae.stateNode;if(typeof _e.componentWillUnmount=="function"){g=ae,h=ae.return;try{l=g,_e.props=l.memoizedProps,_e.state=l.memoizedState,_e.componentWillUnmount()}catch(Ie){jt(g,h,Ie)}}break;case 5:ac(ae,ae.return);break;case 22:if(ae.memoizedState!==null){rE(ue);continue}}be!==null?(be.return=ae,Se=be):rE(ue)}ce=ce.sibling}e:for(ce=null,ue=a;;){if(ue.tag===5){if(ce===null){ce=ue;try{v=ue.stateNode,X?(b=v.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none"):(V=ue.stateNode,$=ue.memoizedProps.style,P=$!=null&&$.hasOwnProperty("display")?$.display:null,V.style.display=Ti("display",P))}catch(Ie){jt(a,a.return,Ie)}}}else if(ue.tag===6){if(ce===null)try{ue.stateNode.nodeValue=X?"":ue.memoizedProps}catch(Ie){jt(a,a.return,Ie)}}else if((ue.tag!==22&&ue.tag!==23||ue.memoizedState===null||ue===a)&&ue.child!==null){ue.child.return=ue,ue=ue.child;continue}if(ue===a)break e;for(;ue.sibling===null;){if(ue.return===null||ue.return===a)break e;ce===ue&&(ce=null),ue=ue.return}ce===ue&&(ce=null),ue.sibling.return=ue.return,ue=ue.sibling}}break;case 19:Fr(l,a),fs(a),g&4&&Z_(a);break;case 21:break;default:Fr(l,a),fs(a)}}function fs(a){var l=a.flags;if(l&2){try{e:{for(var h=a.return;h!==null;){if(Q_(h)){var g=h;break e}h=h.return}throw Error(t(160))}switch(g.tag){case 5:var v=g.stateNode;g.flags&32&&(Xo(v,""),g.flags&=-33);var b=Y_(a);yv(a,b,v);break;case 3:case 4:var P=g.stateNode.containerInfo,V=Y_(a);gv(a,V,P);break;default:throw Error(t(161))}}catch($){jt(a,a.return,$)}a.flags&=-3}l&4096&&(a.flags&=-4097)}function OD(a,l,h){Se=a,tE(a)}function tE(a,l,h){for(var g=(a.mode&1)!==0;Se!==null;){var v=Se,b=v.child;if(v.tag===22&&g){var P=v.memoizedState!==null||um;if(!P){var V=v.alternate,$=V!==null&&V.memoizedState!==null||xn;V=um;var X=xn;if(um=P,(xn=$)&&!X)for(Se=v;Se!==null;)P=Se,$=P.child,P.tag===22&&P.memoizedState!==null?sE(v):$!==null?($.return=P,Se=$):sE(v);for(;b!==null;)Se=b,tE(b),b=b.sibling;Se=v,um=V,xn=X}nE(a)}else(v.subtreeFlags&8772)!==0&&b!==null?(b.return=v,Se=b):nE(a)}}function nE(a){for(;Se!==null;){var l=Se;if((l.flags&8772)!==0){var h=l.alternate;try{if((l.flags&8772)!==0)switch(l.tag){case 0:case 11:case 15:xn||dm(5,l);break;case 1:var g=l.stateNode;if(l.flags&4&&!xn)if(h===null)g.componentDidMount();else{var v=l.elementType===l.type?h.memoizedProps:Mr(l.type,h.memoizedProps);g.componentDidUpdate(v,h.memoizedState,g.__reactInternalSnapshotBeforeUpdate)}var b=l.updateQueue;b!==null&&r_(l,b,g);break;case 3:var P=l.updateQueue;if(P!==null){if(h=null,l.child!==null)switch(l.child.tag){case 5:h=l.child.stateNode;break;case 1:h=l.child.stateNode}r_(l,P,h)}break;case 5:var V=l.stateNode;if(h===null&&l.flags&4){h=V;var $=l.memoizedProps;switch(l.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&h.focus();break;case"img":$.src&&(h.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(l.memoizedState===null){var X=l.alternate;if(X!==null){var ce=X.memoizedState;if(ce!==null){var ue=ce.dehydrated;ue!==null&&Di(ue)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}xn||l.flags&512&&fv(l)}catch(ae){jt(l,l.return,ae)}}if(l===a){Se=null;break}if(h=l.sibling,h!==null){h.return=l.return,Se=h;break}Se=l.return}}function rE(a){for(;Se!==null;){var l=Se;if(l===a){Se=null;break}var h=l.sibling;if(h!==null){h.return=l.return,Se=h;break}Se=l.return}}function sE(a){for(;Se!==null;){var l=Se;try{switch(l.tag){case 0:case 11:case 15:var h=l.return;try{dm(4,l)}catch($){jt(l,h,$)}break;case 1:var g=l.stateNode;if(typeof g.componentDidMount=="function"){var v=l.return;try{g.componentDidMount()}catch($){jt(l,v,$)}}var b=l.return;try{fv(l)}catch($){jt(l,b,$)}break;case 5:var P=l.return;try{fv(l)}catch($){jt(l,P,$)}}}catch($){jt(l,l.return,$)}if(l===a){Se=null;break}var V=l.sibling;if(V!==null){V.return=l.return,Se=V;break}Se=l.return}}var MD=Math.ceil,hm=F.ReactCurrentDispatcher,vv=F.ReactCurrentOwner,vr=F.ReactCurrentBatchConfig,tt=0,nn=null,Ht=null,hn=0,rr=0,lc=Vi(0),Qt=0,yd=null,xa=0,pm=0,xv=0,vd=null,On=null,bv=0,cc=1/0,Ys=null,mm=!1,wv=null,qi=null,fm=!1,Gi=null,gm=0,xd=0,Sv=null,ym=-1,vm=0;function Cn(){return(tt&6)!==0?yt():ym!==-1?ym:ym=yt()}function Wi(a){return(a.mode&1)===0?1:(tt&2)!==0&&hn!==0?hn&-hn:xD.transition!==null?(vm===0&&(vm=Bu()),vm):(a=Ze,a!==0||(a=window.event,a=a===void 0?16:Fl(a.type)),a)}function Vr(a,l,h,g){if(50<xd)throw xd=0,Sv=null,Error(t(185));aa(a,h,g),((tt&2)===0||a!==nn)&&(a===nn&&((tt&2)===0&&(pm|=h),Qt===4&&Ki(a,hn)),Mn(a,g),h===1&&tt===0&&(l.mode&1)===0&&(cc=yt()+500,Gp&&Ui()))}function Mn(a,l){var h=a.callbackNode;oa(a,l);var g=Fs(a,a===nn?hn:0);if(g===0)h!==null&&Nl(h),a.callbackNode=null,a.callbackPriority=0;else if(l=g&-g,a.callbackPriority!==l){if(h!=null&&Nl(h),l===1)a.tag===0?vD(oE.bind(null,a)):qS(oE.bind(null,a)),mD(function(){(tt&6)===0&&Ui()}),h=null;else{switch(ns(g)){case 1:h=jl;break;case 4:h=Lu;break;case 16:h=na;break;case 536870912:h=Rl;break;default:h=na}h=mE(h,iE.bind(null,a))}a.callbackPriority=l,a.callbackNode=h}}function iE(a,l){if(ym=-1,vm=0,(tt&6)!==0)throw Error(t(327));var h=a.callbackNode;if(uc()&&a.callbackNode!==h)return null;var g=Fs(a,a===nn?hn:0);if(g===0)return null;if((g&30)!==0||(g&a.expiredLanes)!==0||l)l=xm(a,g);else{l=g;var v=tt;tt|=2;var b=lE();(nn!==a||hn!==l)&&(Ys=null,cc=yt()+500,wa(a,l));do try{VD();break}catch(V){aE(a,V)}while(!0);By(),hm.current=b,tt=v,Ht!==null?l=0:(nn=null,hn=0,l=Qt)}if(l!==0){if(l===2&&(v=Vu(a),v!==0&&(g=v,l=_v(a,v))),l===1)throw h=yd,wa(a,0),Ki(a,g),Mn(a,yt()),h;if(l===6)Ki(a,g);else{if(v=a.current.alternate,(g&30)===0&&!LD(v)&&(l=xm(a,g),l===2&&(b=Vu(a),b!==0&&(g=b,l=_v(a,b))),l===1))throw h=yd,wa(a,0),Ki(a,g),Mn(a,yt()),h;switch(a.finishedWork=v,a.finishedLanes=g,l){case 0:case 1:throw Error(t(345));case 2:Sa(a,On,Ys);break;case 3:if(Ki(a,g),(g&130023424)===g&&(l=bv+500-yt(),10<l)){if(Fs(a,0)!==0)break;if(v=a.suspendedLanes,(v&g)!==g){Cn(),a.pingedLanes|=a.suspendedLanes&v;break}a.timeoutHandle=Ay(Sa.bind(null,a,On,Ys),l);break}Sa(a,On,Ys);break;case 4:if(Ki(a,g),(g&4194240)===g)break;for(l=a.eventTimes,v=-1;0<g;){var P=31-Qn(g);b=1<<P,P=l[P],P>v&&(v=P),g&=~b}if(g=v,g=yt()-g,g=(120>g?120:480>g?480:1080>g?1080:1920>g?1920:3e3>g?3e3:4320>g?4320:1960*MD(g/1960))-g,10<g){a.timeoutHandle=Ay(Sa.bind(null,a,On,Ys),g);break}Sa(a,On,Ys);break;case 5:Sa(a,On,Ys);break;default:throw Error(t(329))}}}return Mn(a,yt()),a.callbackNode===h?iE.bind(null,a):null}function _v(a,l){var h=vd;return a.current.memoizedState.isDehydrated&&(wa(a,l).flags|=256),a=xm(a,l),a!==2&&(l=On,On=h,l!==null&&Ev(l)),a}function Ev(a){On===null?On=a:On.push.apply(On,a)}function LD(a){for(var l=a;;){if(l.flags&16384){var h=l.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var g=0;g<h.length;g++){var v=h[g],b=v.getSnapshot;v=v.value;try{if(!Dr(b(),v))return!1}catch{return!1}}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===a)break;for(;l.sibling===null;){if(l.return===null||l.return===a)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ki(a,l){for(l&=~xv,l&=~pm,a.suspendedLanes|=l,a.pingedLanes&=~l,a=a.expirationTimes;0<l;){var h=31-Qn(l),g=1<<h;a[h]=-1,l&=~g}}function oE(a){if((tt&6)!==0)throw Error(t(327));uc();var l=Fs(a,0);if((l&1)===0)return Mn(a,yt()),null;var h=xm(a,l);if(a.tag!==0&&h===2){var g=Vu(a);g!==0&&(l=g,h=_v(a,g))}if(h===1)throw h=yd,wa(a,0),Ki(a,l),Mn(a,yt()),h;if(h===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=l,Sa(a,On,Ys),Mn(a,yt()),null}function Tv(a,l){var h=tt;tt|=1;try{return a(l)}finally{tt=h,tt===0&&(cc=yt()+500,Gp&&Ui())}}function ba(a){Gi!==null&&Gi.tag===0&&(tt&6)===0&&uc();var l=tt;tt|=1;var h=vr.transition,g=Ze;try{if(vr.transition=null,Ze=1,a)return a()}finally{Ze=g,vr.transition=h,tt=l,(tt&6)===0&&Ui()}}function Iv(){rr=lc.current,xt(lc)}function wa(a,l){a.finishedWork=null,a.finishedLanes=0;var h=a.timeoutHandle;if(h!==-1&&(a.timeoutHandle=-1,pD(h)),Ht!==null)for(h=Ht.return;h!==null;){var g=h;switch(Oy(g),g.tag){case 1:g=g.type.childContextTypes,g!=null&&Hp();break;case 3:ic(),xt(jn),xt(gn),Ky();break;case 5:Gy(g);break;case 4:ic();break;case 13:xt(It);break;case 19:xt(It);break;case 10:Uy(g.type._context);break;case 22:case 23:Iv()}h=h.return}if(nn=a,Ht=a=Ji(a.current,null),hn=rr=l,Qt=0,yd=null,xv=pm=xa=0,On=vd=null,ga!==null){for(l=0;l<ga.length;l++)if(h=ga[l],g=h.interleaved,g!==null){h.interleaved=null;var v=g.next,b=h.pending;if(b!==null){var P=b.next;b.next=v,g.next=P}h.pending=g}ga=null}return a}function aE(a,l){do{var h=Ht;try{if(By(),nm.current=om,rm){for(var g=Ct.memoizedState;g!==null;){var v=g.queue;v!==null&&(v.pending=null),g=g.next}rm=!1}if(va=0,tn=Jt=Ct=null,dd=!1,hd=0,vv.current=null,h===null||h.return===null){Qt=1,yd=l,Ht=null;break}e:{var b=a,P=h.return,V=h,$=l;if(l=hn,V.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var X=$,ce=V,ue=ce.tag;if((ce.mode&1)===0&&(ue===0||ue===11||ue===15)){var ae=ce.alternate;ae?(ce.updateQueue=ae.updateQueue,ce.memoizedState=ae.memoizedState,ce.lanes=ae.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var be=j_(P);if(be!==null){be.flags&=-257,R_(be,P,V,b,l),be.mode&1&&N_(b,X,l),l=be,$=X;var _e=l.updateQueue;if(_e===null){var Ie=new Set;Ie.add($),l.updateQueue=Ie}else _e.add($);break e}else{if((l&1)===0){N_(b,X,l),Cv();break e}$=Error(t(426))}}else if(St&&V.mode&1){var Ft=j_(P);if(Ft!==null){(Ft.flags&65536)===0&&(Ft.flags|=256),R_(Ft,P,V,b,l),Fy(oc($,V));break e}}b=$=oc($,V),Qt!==4&&(Qt=2),vd===null?vd=[b]:vd.push(b),b=P;do{switch(b.tag){case 3:b.flags|=65536,l&=-l,b.lanes|=l;var K=A_(b,$,l);n_(b,K);break e;case 1:V=$;var H=b.type,Y=b.stateNode;if((b.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(qi===null||!qi.has(Y)))){b.flags|=65536,l&=-l,b.lanes|=l;var de=P_(b,V,l);n_(b,de);break e}}b=b.return}while(b!==null)}uE(h)}catch(ke){l=ke,Ht===h&&h!==null&&(Ht=h=h.return);continue}break}while(!0)}function lE(){var a=hm.current;return hm.current=om,a===null?om:a}function Cv(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),nn===null||(xa&268435455)===0&&(pm&268435455)===0||Ki(nn,hn)}function xm(a,l){var h=tt;tt|=2;var g=lE();(nn!==a||hn!==l)&&(Ys=null,wa(a,l));do try{FD();break}catch(v){aE(a,v)}while(!0);if(By(),tt=h,hm.current=g,Ht!==null)throw Error(t(261));return nn=null,hn=0,Qt}function FD(){for(;Ht!==null;)cE(Ht)}function VD(){for(;Ht!==null&&!ta();)cE(Ht)}function cE(a){var l=pE(a.alternate,a,rr);a.memoizedProps=a.pendingProps,l===null?uE(a):Ht=l,vv.current=null}function uE(a){var l=a;do{var h=l.alternate;if(a=l.return,(l.flags&32768)===0){if(h=ND(h,l,rr),h!==null){Ht=h;return}}else{if(h=jD(h,l),h!==null){h.flags&=32767,Ht=h;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Qt=6,Ht=null;return}}if(l=l.sibling,l!==null){Ht=l;return}Ht=l=a}while(l!==null);Qt===0&&(Qt=5)}function Sa(a,l,h){var g=Ze,v=vr.transition;try{vr.transition=null,Ze=1,BD(a,l,h,g)}finally{vr.transition=v,Ze=g}return null}function BD(a,l,h,g){do uc();while(Gi!==null);if((tt&6)!==0)throw Error(t(327));h=a.finishedWork;var v=a.finishedLanes;if(h===null)return null;if(a.finishedWork=null,a.finishedLanes=0,h===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var b=h.lanes|h.childLanes;if(py(a,b),a===nn&&(Ht=nn=null,hn=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||fm||(fm=!0,mE(na,function(){return uc(),null})),b=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||b){b=vr.transition,vr.transition=null;var P=Ze;Ze=1;var V=tt;tt|=4,vv.current=null,DD(a,h),eE(h,a),oD(Cy),Us=!!Iy,Cy=Iy=null,a.current=h,OD(h),Ls(),tt=V,Ze=P,vr.transition=b}else a.current=h;if(fm&&(fm=!1,Gi=a,gm=v),b=a.pendingLanes,b===0&&(qi=null),Ip(h.stateNode),Mn(a,yt()),l!==null)for(g=a.onRecoverableError,h=0;h<l.length;h++)v=l[h],g(v.value,{componentStack:v.stack,digest:v.digest});if(mm)throw mm=!1,a=wv,wv=null,a;return(gm&1)!==0&&a.tag!==0&&uc(),b=a.pendingLanes,(b&1)!==0?a===Sv?xd++:(xd=0,Sv=a):xd=0,Ui(),null}function uc(){if(Gi!==null){var a=ns(gm),l=vr.transition,h=Ze;try{if(vr.transition=null,Ze=16>a?16:a,Gi===null)var g=!1;else{if(a=Gi,Gi=null,gm=0,(tt&6)!==0)throw Error(t(331));var v=tt;for(tt|=4,Se=a.current;Se!==null;){var b=Se,P=b.child;if((Se.flags&16)!==0){var V=b.deletions;if(V!==null){for(var $=0;$<V.length;$++){var X=V[$];for(Se=X;Se!==null;){var ce=Se;switch(ce.tag){case 0:case 11:case 15:gd(8,ce,b)}var ue=ce.child;if(ue!==null)ue.return=ce,Se=ue;else for(;Se!==null;){ce=Se;var ae=ce.sibling,be=ce.return;if(J_(ce),ce===X){Se=null;break}if(ae!==null){ae.return=be,Se=ae;break}Se=be}}}var _e=b.alternate;if(_e!==null){var Ie=_e.child;if(Ie!==null){_e.child=null;do{var Ft=Ie.sibling;Ie.sibling=null,Ie=Ft}while(Ie!==null)}}Se=b}}if((b.subtreeFlags&2064)!==0&&P!==null)P.return=b,Se=P;else e:for(;Se!==null;){if(b=Se,(b.flags&2048)!==0)switch(b.tag){case 0:case 11:case 15:gd(9,b,b.return)}var K=b.sibling;if(K!==null){K.return=b.return,Se=K;break e}Se=b.return}}var H=a.current;for(Se=H;Se!==null;){P=Se;var Y=P.child;if((P.subtreeFlags&2064)!==0&&Y!==null)Y.return=P,Se=Y;else e:for(P=H;Se!==null;){if(V=Se,(V.flags&2048)!==0)try{switch(V.tag){case 0:case 11:case 15:dm(9,V)}}catch(ke){jt(V,V.return,ke)}if(V===P){Se=null;break e}var de=V.sibling;if(de!==null){de.return=V.return,Se=de;break e}Se=V.return}}if(tt=v,Ui(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(ra,a)}catch{}g=!0}return g}finally{Ze=h,vr.transition=l}}return!1}function dE(a,l,h){l=oc(h,l),l=A_(a,l,1),a=zi(a,l,1),l=Cn(),a!==null&&(aa(a,1,l),Mn(a,l))}function jt(a,l,h){if(a.tag===3)dE(a,a,h);else for(;l!==null;){if(l.tag===3){dE(l,a,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(qi===null||!qi.has(g))){a=oc(h,a),a=P_(l,a,1),l=zi(l,a,1),a=Cn(),l!==null&&(aa(l,1,a),Mn(l,a));break}}l=l.return}}function UD(a,l,h){var g=a.pingCache;g!==null&&g.delete(l),l=Cn(),a.pingedLanes|=a.suspendedLanes&h,nn===a&&(hn&h)===h&&(Qt===4||Qt===3&&(hn&130023424)===hn&&500>yt()-bv?wa(a,0):xv|=h),Mn(a,l)}function hE(a,l){l===0&&((a.mode&1)===0?l=1:(l=Ni,Ni<<=1,(Ni&130023424)===0&&(Ni=4194304)));var h=Cn();a=Ks(a,l),a!==null&&(aa(a,l,h),Mn(a,h))}function $D(a){var l=a.memoizedState,h=0;l!==null&&(h=l.retryLane),hE(a,h)}function zD(a,l){var h=0;switch(a.tag){case 13:var g=a.stateNode,v=a.memoizedState;v!==null&&(h=v.retryLane);break;case 19:g=a.stateNode;break;default:throw Error(t(314))}g!==null&&g.delete(l),hE(a,h)}var pE;pE=function(a,l,h){if(a!==null)if(a.memoizedProps!==l.pendingProps||jn.current)Dn=!0;else{if((a.lanes&h)===0&&(l.flags&128)===0)return Dn=!1,PD(a,l,h);Dn=(a.flags&131072)!==0}else Dn=!1,St&&(l.flags&1048576)!==0&&GS(l,Kp,l.index);switch(l.lanes=0,l.tag){case 2:var g=l.type;cm(a,l),a=l.pendingProps;var v=Xl(l,gn.current);sc(l,h),v=Yy(null,l,g,a,v,h);var b=Xy();return l.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(l.tag=1,l.memoizedState=null,l.updateQueue=null,Rn(g)?(b=!0,qp(l)):b=!1,l.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Hy(l),v.updater=am,l.stateNode=v,v._reactInternals=l,sv(l,g,a,h),l=lv(null,l,g,!0,b,h)):(l.tag=0,St&&b&&Dy(l),In(null,l,v,h),l=l.child),l;case 16:g=l.elementType;e:{switch(cm(a,l),a=l.pendingProps,v=g._init,g=v(g._payload),l.type=g,v=l.tag=qD(g),a=Mr(g,a),v){case 0:l=av(null,l,g,a,h);break e;case 1:l=V_(null,l,g,a,h);break e;case 11:l=D_(null,l,g,a,h);break e;case 14:l=O_(null,l,g,Mr(g.type,a),h);break e}throw Error(t(306,g,""))}return l;case 0:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Mr(g,v),av(a,l,g,v,h);case 1:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Mr(g,v),V_(a,l,g,v,h);case 3:e:{if(B_(l),a===null)throw Error(t(387));g=l.pendingProps,b=l.memoizedState,v=b.element,t_(a,l),em(l,g,null,h);var P=l.memoizedState;if(g=P.element,b.isDehydrated)if(b={element:g,isDehydrated:!1,cache:P.cache,pendingSuspenseBoundaries:P.pendingSuspenseBoundaries,transitions:P.transitions},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){v=oc(Error(t(423)),l),l=U_(a,l,g,h,v);break e}else if(g!==v){v=oc(Error(t(424)),l),l=U_(a,l,g,h,v);break e}else for(nr=Fi(l.stateNode.containerInfo.firstChild),tr=l,St=!0,Or=null,h=ZS(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(tc(),g===v){l=Qs(a,l,h);break e}In(a,l,g,h)}l=l.child}return l;case 5:return s_(l),a===null&&Ly(l),g=l.type,v=l.pendingProps,b=a!==null?a.memoizedProps:null,P=v.children,ky(g,v)?P=null:b!==null&&ky(g,b)&&(l.flags|=32),F_(a,l),In(a,l,P,h),l.child;case 6:return a===null&&Ly(l),null;case 13:return $_(a,l,h);case 4:return qy(l,l.stateNode.containerInfo),g=l.pendingProps,a===null?l.child=nc(l,null,g,h):In(a,l,g,h),l.child;case 11:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Mr(g,v),D_(a,l,g,v,h);case 7:return In(a,l,l.pendingProps,h),l.child;case 8:return In(a,l,l.pendingProps.children,h),l.child;case 12:return In(a,l,l.pendingProps.children,h),l.child;case 10:e:{if(g=l.type._context,v=l.pendingProps,b=l.memoizedProps,P=v.value,mt(Yp,g._currentValue),g._currentValue=P,b!==null)if(Dr(b.value,P)){if(b.children===v.children&&!jn.current){l=Qs(a,l,h);break e}}else for(b=l.child,b!==null&&(b.return=l);b!==null;){var V=b.dependencies;if(V!==null){P=b.child;for(var $=V.firstContext;$!==null;){if($.context===g){if(b.tag===1){$=Js(-1,h&-h),$.tag=2;var X=b.updateQueue;if(X!==null){X=X.shared;var ce=X.pending;ce===null?$.next=$:($.next=ce.next,ce.next=$),X.pending=$}}b.lanes|=h,$=b.alternate,$!==null&&($.lanes|=h),$y(b.return,h,l),V.lanes|=h;break}$=$.next}}else if(b.tag===10)P=b.type===l.type?null:b.child;else if(b.tag===18){if(P=b.return,P===null)throw Error(t(341));P.lanes|=h,V=P.alternate,V!==null&&(V.lanes|=h),$y(P,h,l),P=b.sibling}else P=b.child;if(P!==null)P.return=b;else for(P=b;P!==null;){if(P===l){P=null;break}if(b=P.sibling,b!==null){b.return=P.return,P=b;break}P=P.return}b=P}In(a,l,v.children,h),l=l.child}return l;case 9:return v=l.type,g=l.pendingProps.children,sc(l,h),v=gr(v),g=g(v),l.flags|=1,In(a,l,g,h),l.child;case 14:return g=l.type,v=Mr(g,l.pendingProps),v=Mr(g.type,v),O_(a,l,g,v,h);case 15:return M_(a,l,l.type,l.pendingProps,h);case 17:return g=l.type,v=l.pendingProps,v=l.elementType===g?v:Mr(g,v),cm(a,l),l.tag=1,Rn(g)?(a=!0,qp(l)):a=!1,sc(l,h),C_(l,g,v),sv(l,g,v,h),lv(null,l,g,!0,a,h);case 19:return H_(a,l,h);case 22:return L_(a,l,h)}throw Error(t(156,l.tag))};function mE(a,l){return Mu(a,l)}function HD(a,l,h,g){this.tag=a,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xr(a,l,h,g){return new HD(a,l,h,g)}function kv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function qD(a){if(typeof a=="function")return kv(a)?1:0;if(a!=null){if(a=a.$$typeof,a===z)return 11;if(a===Ce)return 14}return 2}function Ji(a,l){var h=a.alternate;return h===null?(h=xr(a.tag,l,a.key,a.mode),h.elementType=a.elementType,h.type=a.type,h.stateNode=a.stateNode,h.alternate=a,a.alternate=h):(h.pendingProps=l,h.type=a.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=a.flags&14680064,h.childLanes=a.childLanes,h.lanes=a.lanes,h.child=a.child,h.memoizedProps=a.memoizedProps,h.memoizedState=a.memoizedState,h.updateQueue=a.updateQueue,l=a.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=a.sibling,h.index=a.index,h.ref=a.ref,h}function bm(a,l,h,g,v,b){var P=2;if(g=a,typeof a=="function")kv(a)&&(P=1);else if(typeof a=="string")P=5;else e:switch(a){case N:return _a(h.children,v,b,l);case _:P=8,v|=8;break;case R:return a=xr(12,h,l,v|2),a.elementType=R,a.lanes=b,a;case L:return a=xr(13,h,l,v),a.elementType=L,a.lanes=b,a;case Te:return a=xr(19,h,l,v),a.elementType=Te,a.lanes=b,a;case $e:return wm(h,v,b,l);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case O:P=10;break e;case B:P=9;break e;case z:P=11;break e;case Ce:P=14;break e;case we:P=16,g=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return l=xr(P,h,l,v),l.elementType=a,l.type=g,l.lanes=b,l}function _a(a,l,h,g){return a=xr(7,a,g,l),a.lanes=h,a}function wm(a,l,h,g){return a=xr(22,a,g,l),a.elementType=$e,a.lanes=h,a.stateNode={isHidden:!1},a}function Av(a,l,h){return a=xr(6,a,null,l),a.lanes=h,a}function Pv(a,l,h){return l=xr(4,a.children!==null?a.children:[],a.key,l),l.lanes=h,l.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},l}function GD(a,l,h,g,v){this.tag=l,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uu(0),this.expirationTimes=Uu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uu(0),this.identifierPrefix=g,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Nv(a,l,h,g,v,b,P,V,$){return a=new GD(a,l,h,V,$),l===1?(l=1,b===!0&&(l|=8)):l=0,b=xr(3,null,null,l),a.current=b,b.stateNode=a,b.memoizedState={element:g,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hy(b),a}function WD(a,l,h){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:q,key:g==null?null:""+g,children:a,containerInfo:l,implementation:h}}function fE(a){if(!a)return Bi;a=a._reactInternals;e:{if(jr(a)!==a||a.tag!==1)throw Error(t(170));var l=a;do{switch(l.tag){case 3:l=l.stateNode.context;break e;case 1:if(Rn(l.type)){l=l.stateNode.__reactInternalMemoizedMergedChildContext;break e}}l=l.return}while(l!==null);throw Error(t(171))}if(a.tag===1){var h=a.type;if(Rn(h))return zS(a,h,l)}return l}function gE(a,l,h,g,v,b,P,V,$){return a=Nv(h,g,!0,a,v,b,P,V,$),a.context=fE(null),h=a.current,g=Cn(),v=Wi(h),b=Js(g,v),b.callback=l??null,zi(h,b,v),a.current.lanes=v,aa(a,v,g),Mn(a,g),a}function Sm(a,l,h,g){var v=l.current,b=Cn(),P=Wi(v);return h=fE(h),l.context===null?l.context=h:l.pendingContext=h,l=Js(b,P),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=zi(v,l,P),a!==null&&(Vr(a,v,P,b),Zp(a,v,P)),P}function _m(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function yE(a,l){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var h=a.retryLane;a.retryLane=h!==0&&h<l?h:l}}function jv(a,l){yE(a,l),(a=a.alternate)&&yE(a,l)}function KD(){return null}var vE=typeof reportError=="function"?reportError:function(a){console.error(a)};function Rv(a){this._internalRoot=a}Em.prototype.render=Rv.prototype.render=function(a){var l=this._internalRoot;if(l===null)throw Error(t(409));Sm(a,l,null,null)},Em.prototype.unmount=Rv.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var l=a.containerInfo;ba(function(){Sm(null,a,null,null)}),l[Hs]=null}};function Em(a){this._internalRoot=a}Em.prototype.unstable_scheduleHydration=function(a){if(a){var l=qu();a={blockedOn:null,target:a,priority:l};for(var h=0;h<Yn.length&&l!==0&&l<Yn[h].priority;h++);Yn.splice(h,0,a),h===0&&Ml(a)}};function Dv(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Tm(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function xE(){}function JD(a,l,h,g,v){if(v){if(typeof g=="function"){var b=g;g=function(){var X=_m(P);b.call(X)}}var P=gE(l,g,a,0,null,!1,!1,"",xE);return a._reactRootContainer=P,a[Hs]=P.current,rd(a.nodeType===8?a.parentNode:a),ba(),P}for(;v=a.lastChild;)a.removeChild(v);if(typeof g=="function"){var V=g;g=function(){var X=_m($);V.call(X)}}var $=Nv(a,0,!1,null,null,!1,!1,"",xE);return a._reactRootContainer=$,a[Hs]=$.current,rd(a.nodeType===8?a.parentNode:a),ba(function(){Sm(l,$,h,g)}),$}function Im(a,l,h,g,v){var b=h._reactRootContainer;if(b){var P=b;if(typeof v=="function"){var V=v;v=function(){var $=_m(P);V.call($)}}Sm(l,P,a,v)}else P=JD(h,l,a,v,g);return _m(P)}zu=function(a){switch(a.tag){case 3:var l=a.stateNode;if(l.current.memoizedState.isDehydrated){var h=rt(l.pendingLanes);h!==0&&($u(l,h|1),Mn(l,yt()),(tt&6)===0&&(cc=yt()+500,Ui()))}break;case 13:ba(function(){var g=Ks(a,1);if(g!==null){var v=Cn();Vr(g,a,1,v)}}),jv(a,1)}},Dl=function(a){if(a.tag===13){var l=Ks(a,134217728);if(l!==null){var h=Cn();Vr(l,a,134217728,h)}jv(a,134217728)}},Hu=function(a){if(a.tag===13){var l=Wi(a),h=Ks(a,l);if(h!==null){var g=Cn();Vr(h,a,l,g)}jv(a,l)}},qu=function(){return Ze},Gu=function(a,l){var h=Ze;try{return Ze=a,l()}finally{Ze=h}},Ds=function(a,l,h){switch(l){case"input":if(Yo(a,h),l=h.name,h.type==="radio"&&l!=null){for(h=a;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+l)+'][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==a&&g.form===a.form){var v=zp(g);if(!v)throw Error(t(90));dr(g),Yo(g,v)}}}break;case"textarea":mp(a,h);break;case"select":l=h.value,l!=null&&Pr(a,!!h.multiple,l,!1)}},yp=Tv,vp=ba;var QD={usingClientEntryPoint:!1,Events:[od,Ql,zp,Ci,ki,Tv]},bd={findFiberByHostInstance:ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YD={bundleType:bd.bundleType,version:bd.version,rendererPackageName:bd.rendererPackageName,rendererConfig:bd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Tp(a),a===null?null:a.stateNode},findFiberByHostInstance:bd.findFiberByHostInstance||KD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cm.isDisabled&&Cm.supportsFiber)try{ra=Cm.inject(YD),Jn=Cm}catch{}}return Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QD,Ln.createPortal=function(a,l){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dv(l))throw Error(t(200));return WD(a,l,null,h)},Ln.createRoot=function(a,l){if(!Dv(a))throw Error(t(299));var h=!1,g="",v=vE;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onRecoverableError!==void 0&&(v=l.onRecoverableError)),l=Nv(a,1,!1,null,null,h,!1,g,v),a[Hs]=l.current,rd(a.nodeType===8?a.parentNode:a),new Rv(l)},Ln.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var l=a._reactInternals;if(l===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Tp(l),a=a===null?null:a.stateNode,a},Ln.flushSync=function(a){return ba(a)},Ln.hydrate=function(a,l,h){if(!Tm(l))throw Error(t(200));return Im(null,a,l,!0,h)},Ln.hydrateRoot=function(a,l,h){if(!Dv(a))throw Error(t(405));var g=h!=null&&h.hydratedSources||null,v=!1,b="",P=vE;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onRecoverableError!==void 0&&(P=h.onRecoverableError)),l=gE(l,null,a,1,h??null,v,!1,b,P),a[Hs]=l.current,rd(a),g)for(a=0;a<g.length;a++)h=g[a],v=h._getVersion,v=v(h._source),l.mutableSourceEagerHydrationData==null?l.mutableSourceEagerHydrationData=[h,v]:l.mutableSourceEagerHydrationData.push(h,v);return new Em(l)},Ln.render=function(a,l,h){if(!Tm(l))throw Error(t(200));return Im(null,a,l,!1,h)},Ln.unmountComponentAtNode=function(a){if(!Tm(a))throw Error(t(40));return a._reactRootContainer?(ba(function(){Im(null,null,a,!1,function(){a._reactRootContainer=null,a[Hs]=null})}),!0):!1},Ln.unstable_batchedUpdates=Tv,Ln.unstable_renderSubtreeIntoContainer=function(a,l,h,g){if(!Tm(h))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Im(a,l,h,!1,g)},Ln.version="18.3.1-next-f1338f8080-20240426",Ln}var CE;function DC(){if(CE)return Lv.exports;CE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lv.exports=oO(),Lv.exports}var kE;function aO(){if(kE)return km;kE=1;var n=DC();return km.createRoot=n.createRoot,km.hydrateRoot=n.hydrateRoot,km}var lO=aO();DC();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lh(){return lh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lh.apply(this,arguments)}var ho;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ho||(ho={}));const AE="popstate";function cO(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:u}=r.location;return jx("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:Sf(s)}return dO(e,t,null,n)}function Kt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function OC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uO(){return Math.random().toString(36).substr(2,8)}function PE(n,e){return{usr:n.state,key:n.key,idx:e}}function jx(n,e,t,r){return t===void 0&&(t=null),lh({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?uu(e):e,{state:t,key:e&&e.key||r||uO()})}function Sf(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uu(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function dO(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u=ho.Pop,d=null,p=f();p==null&&(p=0,o.replaceState(lh({},o.state,{idx:p}),""));function f(){return(o.state||{idx:null}).idx}function y(){u=ho.Pop;let I=f(),M=I==null?null:I-p;p=I,d&&d({action:u,location:k.location,delta:M})}function x(I,M){u=ho.Push;let j=jx(k.location,I,M);p=f()+1;let C=PE(j,p),F=k.createHref(j);try{o.pushState(C,"",F)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;s.location.assign(F)}i&&d&&d({action:u,location:k.location,delta:1})}function S(I,M){u=ho.Replace;let j=jx(k.location,I,M);p=f();let C=PE(j,p),F=k.createHref(j);o.replaceState(C,"",F),i&&d&&d({action:u,location:k.location,delta:0})}function E(I){let M=s.location.origin!=="null"?s.location.origin:s.location.href,j=typeof I=="string"?I:Sf(I);return j=j.replace(/ $/,"%20"),Kt(M,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,M)}let k={get action(){return u},get location(){return n(s,o)},listen(I){if(d)throw new Error("A history only accepts one active listener");return s.addEventListener(AE,y),d=I,()=>{s.removeEventListener(AE,y),d=null}},createHref(I){return e(s,I)},createURL:E,encodeLocation(I){let M=E(I);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:S,go(I){return o.go(I)}};return k}var NE;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(NE||(NE={}));function hO(n,e,t){return t===void 0&&(t="/"),pO(n,e,t)}function pO(n,e,t,r){let s=typeof e=="string"?uu(e):e,i=Yb(s.pathname||"/",t);if(i==null)return null;let o=MC(n);mO(o);let u=null;for(let d=0;u==null&&d<o.length;++d){let p=IO(i);u=_O(o[d],p)}return u}function MC(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,u)=>{let d={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};d.relativePath.startsWith("/")&&(Kt(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=go([r,d.relativePath]),f=t.concat(d);i.children&&i.children.length>0&&(Kt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),MC(i.children,e,f,p)),!(i.path==null&&!i.index)&&e.push({path:p,score:wO(p,i.index),routesMeta:f})};return n.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let d of LC(i.path))s(i,o,d)}),e}function LC(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=LC(r.join("/")),u=[];return u.push(...o.map(d=>d===""?i:[i,d].join("/"))),s&&u.push(...o),u.map(d=>n.startsWith("/")&&d===""?"/":d)}function mO(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:SO(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const fO=/^:[\w-]+$/,gO=3,yO=2,vO=1,xO=10,bO=-2,jE=n=>n==="*";function wO(n,e){let t=n.split("/"),r=t.length;return t.some(jE)&&(r+=bO),e&&(r+=yO),t.filter(s=>!jE(s)).reduce((s,i)=>s+(fO.test(i)?gO:i===""?vO:xO),r)}function SO(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function _O(n,e,t){let{routesMeta:r}=n,s={},i="/",o=[];for(let u=0;u<r.length;++u){let d=r[u],p=u===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",y=EO({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},f),x=d.route;if(!y)return null;Object.assign(s,y.params),o.push({params:s,pathname:go([i,y.pathname]),pathnameBase:PO(go([i,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(i=go([i,y.pathnameBase]))}return o}function EO(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=TO(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((p,f,y)=>{let{paramName:x,isOptional:S}=f;if(x==="*"){let k=u[y]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const E=u[y];return S&&!E?p[x]=void 0:p[x]=(E||"").replace(/%2F/g,"/"),p},{}),pathname:i,pathnameBase:o,pattern:n}}function TO(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),OC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,d)=>(r.push({paramName:u,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function IO(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return OC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Yb(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function CO(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?uu(n):n;return{pathname:t?t.startsWith("/")?t:kO(t,e):e,search:NO(r),hash:jO(s)}}function kO(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Bv(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AO(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function FC(n,e){let t=AO(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function VC(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=uu(n):(s=lh({},n),Kt(!s.pathname||!s.pathname.includes("?"),Bv("?","pathname","search",s)),Kt(!s.pathname||!s.pathname.includes("#"),Bv("#","pathname","hash",s)),Kt(!s.search||!s.search.includes("#"),Bv("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=t;else{let y=e.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),y-=1;s.pathname=x.join("/")}u=y>=0?e[y]:"/"}let d=CO(s,u),p=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||f)&&(d.pathname+="/"),d}const go=n=>n.join("/").replace(/\/\/+/g,"/"),PO=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),NO=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,jO=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function RO(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const BC=["post","put","patch","delete"];new Set(BC);const DO=["get",...BC];new Set(DO);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ch(){return ch=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ch.apply(this,arguments)}const Xb=A.createContext(null),OO=A.createContext(null),pl=A.createContext(null),ag=A.createContext(null),ml=A.createContext({outlet:null,matches:[],isDataRoute:!1}),UC=A.createContext(null);function MO(n,e){let{relative:t}=e===void 0?{}:e;Dh()||Kt(!1);let{basename:r,navigator:s}=A.useContext(pl),{hash:i,pathname:o,search:u}=zC(n,{relative:t}),d=o;return r!=="/"&&(d=o==="/"?r:go([r,o])),s.createHref({pathname:d,search:u,hash:i})}function Dh(){return A.useContext(ag)!=null}function fl(){return Dh()||Kt(!1),A.useContext(ag).location}function $C(n){A.useContext(pl).static||A.useLayoutEffect(n)}function Zb(){let{isDataRoute:n}=A.useContext(ml);return n?JO():LO()}function LO(){Dh()||Kt(!1);let n=A.useContext(Xb),{basename:e,future:t,navigator:r}=A.useContext(pl),{matches:s}=A.useContext(ml),{pathname:i}=fl(),o=JSON.stringify(FC(s,t.v7_relativeSplatPath)),u=A.useRef(!1);return $C(()=>{u.current=!0}),A.useCallback(function(p,f){if(f===void 0&&(f={}),!u.current)return;if(typeof p=="number"){r.go(p);return}let y=VC(p,JSON.parse(o),i,f.relative==="path");n==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:go([e,y.pathname])),(f.replace?r.replace:r.push)(y,f.state,f)},[e,r,o,i,n])}function zC(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=A.useContext(pl),{matches:s}=A.useContext(ml),{pathname:i}=fl(),o=JSON.stringify(FC(s,r.v7_relativeSplatPath));return A.useMemo(()=>VC(n,JSON.parse(o),i,t==="path"),[n,o,i,t])}function FO(n,e){return VO(n,e)}function VO(n,e,t,r){Dh()||Kt(!1);let{navigator:s}=A.useContext(pl),{matches:i}=A.useContext(ml),o=i[i.length-1],u=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let p=fl(),f;if(e){var y;let I=typeof e=="string"?uu(e):e;d==="/"||(y=I.pathname)!=null&&y.startsWith(d)||Kt(!1),f=I}else f=p;let x=f.pathname||"/",S=x;if(d!=="/"){let I=d.replace(/^\//,"").split("/");S="/"+x.replace(/^\//,"").split("/").slice(I.length).join("/")}let E=hO(n,{pathname:S}),k=HO(E&&E.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:go([d,s.encodeLocation?s.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?d:go([d,s.encodeLocation?s.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),i,t,r);return e&&k?A.createElement(ag.Provider,{value:{location:ch({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ho.Pop}},k):k}function BO(){let n=KO(),e=RO(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:s},t):null,null)}const UO=A.createElement(BO,null);class $O extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(ml.Provider,{value:this.props.routeContext},A.createElement(UC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zO(n){let{routeContext:e,match:t,children:r}=n,s=A.useContext(Xb);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(ml.Provider,{value:e},r)}function HO(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,u=(s=t)==null?void 0:s.errors;if(u!=null){let f=o.findIndex(y=>y.route.id&&u?.[y.route.id]!==void 0);f>=0||Kt(!1),o=o.slice(0,Math.min(o.length,f+1))}let d=!1,p=-1;if(t&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let y=o[f];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=f),y.route.id){let{loaderData:x,errors:S}=t,E=y.route.loader&&x[y.route.id]===void 0&&(!S||S[y.route.id]===void 0);if(y.route.lazy||E){d=!0,p>=0?o=o.slice(0,p+1):o=[o[0]];break}}}return o.reduceRight((f,y,x)=>{let S,E=!1,k=null,I=null;t&&(S=u&&y.route.id?u[y.route.id]:void 0,k=y.route.errorElement||UO,d&&(p<0&&x===0?(QO("route-fallback"),E=!0,I=null):p===x&&(E=!0,I=y.route.hydrateFallbackElement||null)));let M=e.concat(o.slice(0,x+1)),j=()=>{let C;return S?C=k:E?C=I:y.route.Component?C=A.createElement(y.route.Component,null):y.route.element?C=y.route.element:C=f,A.createElement(zO,{match:y,routeContext:{outlet:f,matches:M,isDataRoute:t!=null},children:C})};return t&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?A.createElement($O,{location:t.location,revalidation:t.revalidation,component:k,error:S,children:j(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):j()},null)}var HC=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(HC||{}),qC=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(qC||{});function qO(n){let e=A.useContext(Xb);return e||Kt(!1),e}function GO(n){let e=A.useContext(OO);return e||Kt(!1),e}function WO(n){let e=A.useContext(ml);return e||Kt(!1),e}function GC(n){let e=WO(),t=e.matches[e.matches.length-1];return t.route.id||Kt(!1),t.route.id}function KO(){var n;let e=A.useContext(UC),t=GO(),r=GC();return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function JO(){let{router:n}=qO(HC.UseNavigateStable),e=GC(qC.UseNavigateStable),t=A.useRef(!1);return $C(()=>{t.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,ch({fromRouteId:e},i)))},[n,e])}const RE={};function QO(n,e,t){RE[n]||(RE[n]=!0)}function YO(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function Fn(n){Kt(!1)}function XO(n){let{basename:e="/",children:t=null,location:r,navigationType:s=ho.Pop,navigator:i,static:o=!1,future:u}=n;Dh()&&Kt(!1);let d=e.replace(/^\/*/,"/"),p=A.useMemo(()=>({basename:d,navigator:i,static:o,future:ch({v7_relativeSplatPath:!1},u)}),[d,u,i,o]);typeof r=="string"&&(r=uu(r));let{pathname:f="/",search:y="",hash:x="",state:S=null,key:E="default"}=r,k=A.useMemo(()=>{let I=Yb(f,d);return I==null?null:{location:{pathname:I,search:y,hash:x,state:S,key:E},navigationType:s}},[d,f,y,x,S,E,s]);return k==null?null:A.createElement(pl.Provider,{value:p},A.createElement(ag.Provider,{children:t,value:k}))}function ZO(n){let{children:e,location:t}=n;return FO(Rx(e),t)}new Promise(()=>{});function Rx(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){t.push.apply(t,Rx(r.props.children,i));return}r.type!==Fn&&Kt(!1),!r.props.index||!r.props.children||Kt(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rx(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dx(){return Dx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dx.apply(this,arguments)}function e4(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function t4(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function n4(n,e){return n.button===0&&(!e||e==="_self")&&!t4(n)}const r4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],s4="6";try{window.__reactRouterVersion=s4}catch{}const i4="startTransition",DE=rO[i4];function o4(n){let{basename:e,children:t,future:r,window:s}=n,i=A.useRef();i.current==null&&(i.current=cO({window:s,v5Compat:!0}));let o=i.current,[u,d]=A.useState({action:o.action,location:o.location}),{v7_startTransition:p}=r||{},f=A.useCallback(y=>{p&&DE?DE(()=>d(y)):d(y)},[d,p]);return A.useLayoutEffect(()=>o.listen(f),[o,f]),A.useEffect(()=>YO(r),[r]),A.createElement(XO,{basename:e,children:t,location:u.location,navigationType:u.action,navigator:o,future:r})}const a4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",l4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_r=A.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:u,target:d,to:p,preventScrollReset:f,viewTransition:y}=e,x=e4(e,r4),{basename:S}=A.useContext(pl),E,k=!1;if(typeof p=="string"&&l4.test(p)&&(E=p,a4))try{let C=new URL(window.location.href),F=p.startsWith("//")?new URL(C.protocol+p):new URL(p),G=Yb(F.pathname,S);F.origin===C.origin&&G!=null?p=G+F.search+F.hash:k=!0}catch{}let I=MO(p,{relative:s}),M=c4(p,{replace:o,state:u,target:d,preventScrollReset:f,relative:s,viewTransition:y});function j(C){r&&r(C),C.defaultPrevented||M(C)}return A.createElement("a",Dx({},x,{href:E||I,onClick:k||i?r:j,ref:t,target:d}))});var OE;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(OE||(OE={}));var ME;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(ME||(ME={}));function c4(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,d=Zb(),p=fl(),f=zC(n,{relative:o});return A.useCallback(y=>{if(n4(y,t)){y.preventDefault();let x=r!==void 0?r:Sf(p)===Sf(f);d(n,{replace:x,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[p,d,f,r,s,t,n,i,o,u])}let u4={data:""},d4=n=>typeof window=="object"?((n?n.querySelector("#_goober"):window._goober)||Object.assign((n||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:n||u4,h4=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,p4=/\/\*[^]*?\*\/|  +/g,LE=/\n+/g,ro=(n,e)=>{let t="",r="",s="";for(let i in n){let o=n[i];i[0]=="@"?i[1]=="i"?t=i+" "+o+";":r+=i[1]=="f"?ro(o,i):i+"{"+ro(o,i[1]=="k"?"":e)+"}":typeof o=="object"?r+=ro(o,e?e.replace(/([^,])+/g,u=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,u):u?u+" "+d:d)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ro.p?ro.p(i,o):i+":"+o+";")}return t+(e&&s?e+"{"+s+"}":s)+r},Xs={},WC=n=>{if(typeof n=="object"){let e="";for(let t in n)e+=t+WC(n[t]);return e}return n},m4=(n,e,t,r,s)=>{let i=WC(n),o=Xs[i]||(Xs[i]=(d=>{let p=0,f=11;for(;p<d.length;)f=101*f+d.charCodeAt(p++)>>>0;return"go"+f})(i));if(!Xs[o]){let d=i!==n?n:(p=>{let f,y,x=[{}];for(;f=h4.exec(p.replace(p4,""));)f[4]?x.shift():f[3]?(y=f[3].replace(LE," ").trim(),x.unshift(x[0][y]=x[0][y]||{})):x[0][f[1]]=f[2].replace(LE," ").trim();return x[0]})(n);Xs[o]=ro(s?{["@keyframes "+o]:d}:d,t?"":"."+o)}let u=t&&Xs.g?Xs.g:null;return t&&(Xs.g=Xs[o]),((d,p,f,y)=>{y?p.data=p.data.replace(y,d):p.data.indexOf(d)===-1&&(p.data=f?d+p.data:p.data+d)})(Xs[o],e,r,u),o},f4=(n,e,t)=>n.reduce((r,s,i)=>{let o=e[i];if(o&&o.call){let u=o(t),d=u&&u.props&&u.props.className||/^go/.test(u)&&u;o=d?"."+d:u&&typeof u=="object"?u.props?"":ro(u,""):u===!1?"":u}return r+s+(o??"")},"");function lg(n){let e=this||{},t=n.call?n(e.p):n;return m4(t.unshift?t.raw?f4(t,[].slice.call(arguments,1),e.p):t.reduce((r,s)=>Object.assign(r,s&&s.call?s(e.p):s),{}):t,d4(e.target),e.g,e.o,e.k)}let KC,Ox,Mx;lg.bind({g:1});let ui=lg.bind({k:1});function g4(n,e,t,r){ro.p=e,KC=n,Ox=t,Mx=r}function Vo(n,e){let t=this||{};return function(){let r=arguments;function s(i,o){let u=Object.assign({},i),d=u.className||s.className;t.p=Object.assign({theme:Ox&&Ox()},u),t.o=/ *go\d+/.test(d),u.className=lg.apply(t,r)+(d?" "+d:"");let p=n;return n[0]&&(p=u.as||n,delete u.as),Mx&&p[0]&&Mx(u),KC(p,u)}return s}}var y4=n=>typeof n=="function",_f=(n,e)=>y4(n)?n(e):n,v4=(()=>{let n=0;return()=>(++n).toString()})(),JC=(()=>{let n;return()=>{if(n===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");n=!e||e.matches}return n}})(),x4=20,e0="default",QC=(n,e)=>{let{toastLimit:t}=n.settings;switch(e.type){case 0:return{...n,toasts:[e.toast,...n.toasts].slice(0,t)};case 1:return{...n,toasts:n.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:r}=e;return QC(n,{type:n.toasts.find(o=>o.id===r.id)?1:0,toast:r});case 3:let{toastId:s}=e;return{...n,toasts:n.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...n,toasts:[]}:{...n,toasts:n.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...n,pausedAt:e.time};case 6:let i=e.time-(n.pausedAt||0);return{...n,pausedAt:void 0,toasts:n.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Ym=[],YC={toasts:[],pausedAt:void 0,settings:{toastLimit:x4}},bs={},XC=(n,e=e0)=>{bs[e]=QC(bs[e]||YC,n),Ym.forEach(([t,r])=>{t===e&&r(bs[e])})},ZC=n=>Object.keys(bs).forEach(e=>XC(n,e)),b4=n=>Object.keys(bs).find(e=>bs[e].toasts.some(t=>t.id===n)),cg=(n=e0)=>e=>{XC(e,n)},w4={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},S4=(n={},e=e0)=>{let[t,r]=A.useState(bs[e]||YC),s=A.useRef(bs[e]);A.useEffect(()=>(s.current!==bs[e]&&r(bs[e]),Ym.push([e,r]),()=>{let o=Ym.findIndex(([u])=>u===e);o>-1&&Ym.splice(o,1)}),[e]);let i=t.toasts.map(o=>{var u,d,p;return{...n,...n[o.type],...o,removeDelay:o.removeDelay||((u=n[o.type])==null?void 0:u.removeDelay)||n?.removeDelay,duration:o.duration||((d=n[o.type])==null?void 0:d.duration)||n?.duration||w4[o.type],style:{...n.style,...(p=n[o.type])==null?void 0:p.style,...o.style}}});return{...t,toasts:i}},_4=(n,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:n,pauseDuration:0,...t,id:t?.id||v4()}),Oh=n=>(e,t)=>{let r=_4(e,n,t);return cg(r.toasterId||b4(r.id))({type:2,toast:r}),r.id},Yt=(n,e)=>Oh("blank")(n,e);Yt.error=Oh("error");Yt.success=Oh("success");Yt.loading=Oh("loading");Yt.custom=Oh("custom");Yt.dismiss=(n,e)=>{let t={type:3,toastId:n};e?cg(e)(t):ZC(t)};Yt.dismissAll=n=>Yt.dismiss(void 0,n);Yt.remove=(n,e)=>{let t={type:4,toastId:n};e?cg(e)(t):ZC(t)};Yt.removeAll=n=>Yt.remove(void 0,n);Yt.promise=(n,e,t)=>{let r=Yt.loading(e.loading,{...t,...t?.loading});return typeof n=="function"&&(n=n()),n.then(s=>{let i=e.success?_f(e.success,s):void 0;return i?Yt.success(i,{id:r,...t,...t?.success}):Yt.dismiss(r),s}).catch(s=>{let i=e.error?_f(e.error,s):void 0;i?Yt.error(i,{id:r,...t,...t?.error}):Yt.dismiss(r)}),n};var E4=1e3,T4=(n,e="default")=>{let{toasts:t,pausedAt:r}=S4(n,e),s=A.useRef(new Map).current,i=A.useCallback((y,x=E4)=>{if(s.has(y))return;let S=setTimeout(()=>{s.delete(y),o({type:4,toastId:y})},x);s.set(y,S)},[]);A.useEffect(()=>{if(r)return;let y=Date.now(),x=t.map(S=>{if(S.duration===1/0)return;let E=(S.duration||0)+S.pauseDuration-(y-S.createdAt);if(E<0){S.visible&&Yt.dismiss(S.id);return}return setTimeout(()=>Yt.dismiss(S.id,e),E)});return()=>{x.forEach(S=>S&&clearTimeout(S))}},[t,r,e]);let o=A.useCallback(cg(e),[e]),u=A.useCallback(()=>{o({type:5,time:Date.now()})},[o]),d=A.useCallback((y,x)=>{o({type:1,toast:{id:y,height:x}})},[o]),p=A.useCallback(()=>{r&&o({type:6,time:Date.now()})},[r,o]),f=A.useCallback((y,x)=>{let{reverseOrder:S=!1,gutter:E=8,defaultPosition:k}=x||{},I=t.filter(C=>(C.position||k)===(y.position||k)&&C.height),M=I.findIndex(C=>C.id===y.id),j=I.filter((C,F)=>F<M&&C.visible).length;return I.filter(C=>C.visible).slice(...S?[j+1]:[0,j]).reduce((C,F)=>C+(F.height||0)+E,0)},[t]);return A.useEffect(()=>{t.forEach(y=>{if(y.dismissed)i(y.id,y.removeDelay);else{let x=s.get(y.id);x&&(clearTimeout(x),s.delete(y.id))}})},[t,i]),{toasts:t,handlers:{updateHeight:d,startPause:u,endPause:p,calculateOffset:f}}},I4=ui`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,C4=ui`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,k4=ui`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,A4=Vo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${I4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${C4} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${n=>n.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${k4} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,P4=ui`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,N4=Vo("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${n=>n.secondary||"#e0e0e0"};
  border-right-color: ${n=>n.primary||"#616161"};
  animation: ${P4} 1s linear infinite;
`,j4=ui`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,R4=ui`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,D4=Vo("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${n=>n.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${j4} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${R4} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${n=>n.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,O4=Vo("div")`
  position: absolute;
`,M4=Vo("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,L4=ui`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,F4=Vo("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${L4} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,V4=({toast:n})=>{let{icon:e,type:t,iconTheme:r}=n;return e!==void 0?typeof e=="string"?A.createElement(F4,null,e):e:t==="blank"?null:A.createElement(M4,null,A.createElement(N4,{...r}),t!=="loading"&&A.createElement(O4,null,t==="error"?A.createElement(A4,{...r}):A.createElement(D4,{...r})))},B4=n=>`
0% {transform: translate3d(0,${n*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,U4=n=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${n*-150}%,-1px) scale(.6); opacity:0;}
`,$4="0%{opacity:0;} 100%{opacity:1;}",z4="0%{opacity:1;} 100%{opacity:0;}",H4=Vo("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,q4=Vo("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,G4=(n,e)=>{let t=n.includes("top")?1:-1,[r,s]=JC()?[$4,z4]:[B4(t),U4(t)];return{animation:e?`${ui(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${ui(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},W4=A.memo(({toast:n,position:e,style:t,children:r})=>{let s=n.height?G4(n.position||e||"top-center",n.visible):{opacity:0},i=A.createElement(V4,{toast:n}),o=A.createElement(q4,{...n.ariaProps},_f(n.message,n));return A.createElement(H4,{className:n.className,style:{...s,...t,...n.style}},typeof r=="function"?r({icon:i,message:o}):A.createElement(A.Fragment,null,i,o))});g4(A.createElement);var K4=({id:n,className:e,style:t,onHeightUpdate:r,children:s})=>{let i=A.useCallback(o=>{if(o){let u=()=>{let d=o.getBoundingClientRect().height;r(n,d)};u(),new MutationObserver(u).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[n,r]);return A.createElement("div",{ref:i,className:e,style:t},s)},J4=(n,e)=>{let t=n.includes("top"),r=t?{top:0}:{bottom:0},s=n.includes("center")?{justifyContent:"center"}:n.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:JC()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...r,...s}},Q4=lg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Am=16,Y4=({reverseOrder:n,position:e="top-center",toastOptions:t,gutter:r,children:s,toasterId:i,containerStyle:o,containerClassName:u})=>{let{toasts:d,handlers:p}=T4(t,i);return A.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:Am,left:Am,right:Am,bottom:Am,pointerEvents:"none",...o},className:u,onMouseEnter:p.startPause,onMouseLeave:p.endPause},d.map(f=>{let y=f.position||e,x=p.calculateOffset(f,{reverseOrder:n,gutter:r,defaultPosition:e}),S=J4(y,x);return A.createElement(K4,{id:f.id,key:f.id,onHeightUpdate:p.updateHeight,className:f.visible?Q4:"",style:S},f.type==="custom"?_f(f.message,f):s?s(f):A.createElement(W4,{toast:f,position:y}))}))},Me=Yt;const ek=A.createContext();function t0(){return A.useContext(ek)}const FE={light:{name:"Light Theme",cssVars:{"--primary":"#2563eb","--primary-foreground":"#ffffff","--background":"#ffffff","--foreground":"#0f172a","--card":"#ffffff","--muted":"#f8fafc","--border":"#e2e8f0"},isDark:!1},dark:{name:"Dark Theme",cssVars:{"--primary":"#3b82f6","--primary-foreground":"#ffffff","--background":"#0f172a","--foreground":"#f8fafc","--card":"#1e293b","--muted":"#1e293b","--border":"#334155"},isDark:!0},blue:{name:"Blue Theme",cssVars:{"--primary":"#1e40af","--primary-foreground":"#ffffff","--background":"#f0f9ff","--foreground":"#0c4a6e","--card":"#e0f2fe","--muted":"#e0f2fe","--border":"#7dd3fc"},isDark:!1},purple:{name:"Purple Theme",cssVars:{"--primary":"#7c3aed","--primary-foreground":"#ffffff","--background":"#faf5ff","--foreground":"#581c87","--card":"#f3e8ff","--muted":"#f3e8ff","--border":"#c4b5fd"},isDark:!1},green:{name:"Green Theme",cssVars:{"--primary":"#059669","--primary-foreground":"#ffffff","--background":"#f0fdf4","--foreground":"#064e3b","--card":"#dcfce7","--muted":"#dcfce7","--border":"#86efac"},isDark:!1},orange:{name:"Orange Theme",cssVars:{"--primary":"#ea580c","--primary-foreground":"#ffffff","--background":"#fff7ed","--foreground":"#9a3412","--card":"#fed7aa","--muted":"#fed7aa","--border":"#fdba74"},isDark:!1},red:{name:"Red Theme",cssVars:{"--primary":"#dc2626","--primary-foreground":"#ffffff","--background":"#fef2f2","--foreground":"#991b1b","--card":"#fecaca","--muted":"#fecaca","--border":"#fca5a5"},isDark:!1},pink:{name:"Pink Theme",cssVars:{"--primary":"#db2777","--primary-foreground":"#ffffff","--background":"#fdf2f8","--foreground":"#9d174d","--card":"#fce7f3","--muted":"#fce7f3","--border":"#f9a8d4"},isDark:!1},cyan:{name:"Cyan Theme",cssVars:{"--primary":"#0891b2","--primary-foreground":"#ffffff","--background":"#ecfeff","--foreground":"#164e63","--card":"#cffafe","--muted":"#cffafe","--border":"#67e8f9"},isDark:!1},amber:{name:"Amber Theme",cssVars:{"--primary":"#d97706","--primary-foreground":"#ffffff","--background":"#fffbeb","--foreground":"#92400e","--card":"#fef3c7","--muted":"#fef3c7","--border":"#fde68a"},isDark:!1},emerald:{name:"Emerald Theme",cssVars:{"--primary":"#10b981","--primary-foreground":"#ffffff","--background":"#ecfdf5","--foreground":"#064e3b","--card":"#d1fae5","--muted":"#d1fae5","--border":"#6ee7b7"},isDark:!1}};function X4({children:n}){const[e,t]=A.useState("light");A.useEffect(()=>{const o=localStorage.getItem("theme")||"light";t(o),r(o)},[]);const r=o=>{const u=FE[o];u&&(Object.entries(u.cssVars).forEach(([d,p])=>{document.documentElement.style.setProperty(d,p)}),document.documentElement.classList.toggle("dark",u.isDark))},s=o=>{t(o),localStorage.setItem("theme",o),r(o)},i=()=>{s(e==="light"?"dark":"light")};return c.jsx(ek.Provider,{value:{theme:e,setTheme:s,toggleTheme:i,themes:FE},children:n})}const Z4=()=>{};var VE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},eM=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],u=n[t++],d=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},nk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,u=o?n[s+1]:0,d=s+2<n.length,p=d?n[s+2]:0,f=i>>2,y=(i&3)<<4|u>>4;let x=(u&15)<<2|p>>6,S=p&63;d||(S=64,o||(x=64)),r.push(t[f],t[y],t[x],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tk(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):eM(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],u=s<n.length?t[n.charAt(s)]:0;++s;const p=s<n.length?t[n.charAt(s)]:64;++s;const y=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||u==null||p==null||y==null)throw new tM;const x=i<<2|u>>4;if(r.push(x),p!==64){const S=u<<4&240|p>>2;if(r.push(S),y!==64){const E=p<<6&192|y;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class tM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nM=function(n){const e=tk(n);return nk.encodeByteArray(e,!0)},Ef=function(n){return nM(n).replace(/\./g,"")},n0=function(n){try{return nk.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=()=>rk().__FIREBASE_DEFAULTS__,sM=()=>{if(typeof process>"u"||typeof VE>"u")return;const n=VE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&n0(n[1]);return e&&JSON.parse(e)},ug=()=>{try{return Z4()||rM()||sM()||iM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},sk=n=>ug()?.emulatorHosts?.[n],ik=n=>{const e=sk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},r0=()=>ug()?.config,ok=n=>ug()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dg(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ef(JSON.stringify(t)),Ef(JSON.stringify(o)),""].join(".")}const Vd={};function aM(){const n={prod:[],emulator:[]};for(const e of Object.keys(Vd))Vd[e]?n.emulator.push(e):n.prod.push(e);return n}function lM(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let BE=!1;function s0(n,e){if(typeof window>"u"||typeof document>"u"||!gi(window.location.host)||Vd[n]===e||Vd[n]||BE)return;Vd[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",i=aM().prod.length>0;function o(){const x=document.getElementById(r);x&&x.remove()}function u(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function d(x,S){x.setAttribute("width","24"),x.setAttribute("id",S),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{BE=!0,o()},x}function f(x,S){x.setAttribute("id",S),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function y(){const x=lM(r),S=t("text"),E=document.getElementById(S)||document.createElement("span"),k=t("learnmore"),I=document.getElementById(k)||document.createElement("a"),M=t("preprendIcon"),j=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const C=x.element;u(C),f(I,k);const F=p();d(j,M),C.append(j,E,I,F),document.body.appendChild(C)}i?(E.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",y):y()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xt())}function lk(){const n=ug()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uM(){return typeof window<"u"||ck()}function ck(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function dM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hM(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mM(){const n=Xt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function uk(){return!lk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dk(){return!lk()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function hk(){try{return typeof indexedDB=="object"}catch{return!1}}function fM(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="FirebaseError";class Qr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=gM,Object.setPrototypeOf(this,Qr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Mh.prototype.create)}}class Mh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?yM(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new Qr(s,u,r)}}function yM(n,e){return n.replace(vM,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vM=/\{\$([^}]+)}/g;function xM(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wr(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(UE(i)&&UE(o)){if(!Wr(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function UE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bM(n,e){const t=new wM(n,e);return t.subscribe.bind(t)}class wM{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");SM(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Uv),s.error===void 0&&(s.error=Uv),s.complete===void 0&&(s.complete=Uv);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SM(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Uv(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(n){return n&&n._delegate?n._delegate:n}class To{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _M{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new oM;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TM(e))try{this.getOrInitializeService({instanceIdentifier:Ia})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ia){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ia){return this.instances.has(e)}getOptions(e=Ia){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:EM(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ia){return this.component?this.component.multipleInstances?e:Ia:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EM(n){return n===Ia?void 0:n}function TM(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _M(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=[];var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const mk={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},IM=Je.INFO,CM={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},kM=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=CM[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class o0{constructor(e){this.name=e,this._logLevel=IM,this._logHandler=kM,this._userLogHandler=null,i0.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}function AM(n){i0.forEach(e=>{e.setLogLevel(n)})}function PM(n,e){for(const t of i0){let r=null;e&&e.level&&(r=mk[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(s,i,...o)=>{const u=o.map(d=>{if(d==null)return null;if(typeof d=="string")return d;if(typeof d=="number"||typeof d=="boolean")return d.toString();if(d instanceof Error)return d.message;try{return JSON.stringify(d)}catch{return null}}).filter(d=>d).join(" ");i>=(r??s.logLevel)&&n({level:Je[i].toLowerCase(),message:u,args:o,type:s.name})}}}const NM=(n,e)=>e.some(t=>n instanceof t);let $E,zE;function jM(){return $E||($E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RM(){return zE||(zE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fk=new WeakMap,Lx=new WeakMap,gk=new WeakMap,$v=new WeakMap,a0=new WeakMap;function DM(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(yo(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&fk.set(t,n)}).catch(()=>{}),a0.set(e,n),e}function OM(n){if(Lx.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Lx.set(n,e)}let Fx={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lx.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gk.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function MM(n){Fx=n(Fx)}function LM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(zv(this),e,...t);return gk.set(r,e.sort?e.sort():[e]),yo(r)}:RM().includes(n)?function(...e){return n.apply(zv(this),e),yo(fk.get(this))}:function(...e){return yo(n.apply(zv(this),e))}}function FM(n){return typeof n=="function"?LM(n):(n instanceof IDBTransaction&&OM(n),NM(n,jM())?new Proxy(n,Fx):n)}function yo(n){if(n instanceof IDBRequest)return DM(n);if($v.has(n))return $v.get(n);const e=FM(n);return e!==n&&($v.set(n,e),a0.set(e,n)),e}const zv=n=>a0.get(n);function VM(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),u=yo(o);return r&&o.addEventListener("upgradeneeded",d=>{r(yo(o.result),d.oldVersion,d.newVersion,yo(o.transaction),d)}),t&&o.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),s&&d.addEventListener("versionchange",p=>s(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const BM=["get","getKey","getAll","getAllKeys","count"],UM=["put","add","delete","clear"],Hv=new Map;function HE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Hv.get(e))return Hv.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=UM.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BM.includes(t)))return;const i=async function(o,...u){const d=this.transaction(o,s?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[t](...u),s&&d.done]))[0]};return Hv.set(e,i),i}MM(n=>({...n,get:(e,t,r)=>HE(e,t)||n.get(e,t,r),has:(e,t)=>!!HE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(zM(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function zM(n){return n.getComponent()?.type==="VERSION"}const Tf="@firebase/app",Vx="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di=new o0("@firebase/app"),HM="@firebase/app-compat",qM="@firebase/analytics-compat",GM="@firebase/analytics",WM="@firebase/app-check-compat",KM="@firebase/app-check",JM="@firebase/auth",QM="@firebase/auth-compat",YM="@firebase/database",XM="@firebase/data-connect",ZM="@firebase/database-compat",eL="@firebase/functions",tL="@firebase/functions-compat",nL="@firebase/installations",rL="@firebase/installations-compat",sL="@firebase/messaging",iL="@firebase/messaging-compat",oL="@firebase/performance",aL="@firebase/performance-compat",lL="@firebase/remote-config",cL="@firebase/remote-config-compat",uL="@firebase/storage",dL="@firebase/storage-compat",hL="@firebase/firestore",pL="@firebase/ai",mL="@firebase/firestore-compat",fL="firebase",gL="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="[DEFAULT]",yL={[Tf]:"fire-core",[HM]:"fire-core-compat",[GM]:"fire-analytics",[qM]:"fire-analytics-compat",[KM]:"fire-app-check",[WM]:"fire-app-check-compat",[JM]:"fire-auth",[QM]:"fire-auth-compat",[YM]:"fire-rtdb",[XM]:"fire-data-connect",[ZM]:"fire-rtdb-compat",[eL]:"fire-fn",[tL]:"fire-fn-compat",[nL]:"fire-iid",[rL]:"fire-iid-compat",[sL]:"fire-fcm",[iL]:"fire-fcm-compat",[oL]:"fire-perf",[aL]:"fire-perf-compat",[lL]:"fire-rc",[cL]:"fire-rc-compat",[uL]:"fire-gcs",[dL]:"fire-gcs-compat",[hL]:"fire-fst",[mL]:"fire-fst-compat",[pL]:"fire-vertex","fire-js":"fire-js",[fL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new Map,Fc=new Map,Vc=new Map;function Bx(n,e){try{n.container.addComponent(e)}catch(t){di.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function vL(n,e){n.container.addOrOverwriteComponent(e)}function Co(n){const e=n.name;if(Vc.has(e))return di.debug(`There were multiple attempts to register component ${e}.`),!1;Vc.set(e,n);for(const t of Io.values())Bx(t,n);for(const t of Fc.values())Bx(t,n);return!0}function gl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yk(n,e,t=uh){gl(n,e).clearInstance(t)}function l0(n){return n.options!==void 0}function vk(n){return l0(n)?!1:"authIdToken"in n||"appCheckToken"in n||"releaseOnDeref"in n||"automaticDataCollectionEnabled"in n}function Vn(n){return n==null?!1:n.settings!==void 0}function xL(){Vc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ar=new Mh("app","Firebase",bL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new To("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(n,e){const t=n0(n.split(".")[1]);if(t===null){console.error(`FirebaseServerApp ${e} is invalid: second part could not be parsed.`);return}if(JSON.parse(t).exp===void 0){console.error(`FirebaseServerApp ${e} is invalid: expiration claim could not be parsed`);return}const s=JSON.parse(t).exp*1e3,i=new Date().getTime();s-i<=0&&console.error(`FirebaseServerApp ${e} is invalid: the token has expired.`)}class wL extends xk{constructor(e,t,r,s){const i=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!0,o={name:r,automaticDataCollectionEnabled:i};if(e.apiKey!==void 0)super(e,o,s);else{const u=e;super(u.options,o,s)}this._serverConfig={automaticDataCollectionEnabled:i,...t},this._serverConfig.authIdToken&&qE(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&qE(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,kr(Tf,Vx,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){bk(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ar.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo=gL;function po(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:uh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ar.create("bad-app-name",{appName:String(s)});if(t||(t=r0()),!t)throw ar.create("no-options");const i=Io.get(s);if(i){if(Wr(t,i.options)&&Wr(r,i.config))return i;throw ar.create("duplicate-app",{appName:s})}const o=new pk(s);for(const d of Vc.values())o.addComponent(d);const u=new xk(t,r,o);return Io.set(s,u),u}function SL(n,e={}){if(uM()&&!ck())throw ar.create("invalid-server-app-environment");let t,r=e||{};if(n&&(l0(n)?t=n.options:vk(n)?r=n:t=n),r.automaticDataCollectionEnabled===void 0&&(r.automaticDataCollectionEnabled=!0),t||(t=r0()),!t)throw ar.create("no-options");const s={...r,...t};s.releaseOnDeref!==void 0&&delete s.releaseOnDeref;const i=f=>[...f].reduce((y,x)=>Math.imul(31,y)+x.charCodeAt(0)|0,0);if(r.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw ar.create("finalization-registry-not-supported",{});const o=""+i(JSON.stringify(s)),u=Fc.get(o);if(u)return u.incRefCount(r.releaseOnDeref),u;const d=new pk(o);for(const f of Vc.values())d.addComponent(f);const p=new wL(t,r,o,d);return Fc.set(o,p),p}function hg(n=uh){const e=Io.get(n);if(!e&&n===uh&&r0())return po();if(!e)throw ar.create("no-app",{appName:n});return e}function _L(){return Array.from(Io.values())}async function bk(n){let e=!1;const t=n.name;Io.has(t)?(e=!0,Io.delete(t)):Fc.has(t)&&n.decRefCount()<=0&&(Fc.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function kr(n,e,t){let r=yL[n]??n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),di.warn(o.join(" "));return}Co(new To(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}function EL(n,e){if(n!==null&&typeof n!="function")throw ar.create("invalid-log-argument");PM(n,e)}function TL(n){AM(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL="firebase-heartbeat-database",CL=1,dh="firebase-heartbeat-store";let qv=null;function wk(){return qv||(qv=VM(IL,CL,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(dh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ar.create("idb-open",{originalErrorMessage:n.message})})),qv}async function kL(n){try{const t=(await wk()).transaction(dh),r=await t.objectStore(dh).get(Sk(n));return await t.done,r}catch(e){if(e instanceof Qr)di.warn(e.message);else{const t=ar.create("idb-get",{originalErrorMessage:e?.message});di.warn(t.message)}}}async function GE(n,e){try{const r=(await wk()).transaction(dh,"readwrite");await r.objectStore(dh).put(e,Sk(n)),await r.done}catch(t){if(t instanceof Qr)di.warn(t.message);else{const r=ar.create("idb-set",{originalErrorMessage:t?.message});di.warn(r.message)}}}function Sk(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=1024,PL=30;class NL{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new RL(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=WE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>PL){const s=DL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){di.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=WE(),{heartbeatsToSend:t,unsentEntries:r}=jL(this._heartbeatsCache.heartbeats),s=Ef(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return di.warn(e),""}}}function WE(){return new Date().toISOString().substring(0,10)}function jL(n,e=AL){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),KE(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),KE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class RL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hk()?fM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kL(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return GE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function KE(n){return Ef(JSON.stringify({version:2,heartbeats:n})).length}function DL(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OL(n){Co(new To("platform-logger",e=>new $M(e),"PRIVATE")),Co(new To("heartbeat",e=>new NL(e),"PRIVATE")),kr(Tf,Vx,n),kr(Tf,Vx,"esm2020"),kr("fire-js","")}OL("");function _k(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ML=_k,Ek=new Mh("auth","Firebase",_k());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If=new o0("@firebase/auth");function LL(n,...e){If.logLevel<=Je.WARN&&If.warn(`Auth (${Bo}): ${n}`,...e)}function Xm(n,...e){If.logLevel<=Je.ERROR&&If.error(`Auth (${Bo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n,...e){throw u0(n,...e)}function Hr(n,...e){return u0(n,...e)}function c0(n,e,t){const r={...ML(),[e]:t};return new Mh("auth","Firebase",r).create(e,{appName:n.name})}function vo(n){return c0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FL(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ps(n,"argument-error"),c0(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function u0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Ek.create(n,...e)}function Fe(n,e,...t){if(!n)throw u0(e,...t)}function ni(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Xm(e),new Error(e)}function hi(n,e){n||ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(){return typeof self<"u"&&self.location?.href||""}function VL(){return JE()==="http:"||JE()==="https:"}function JE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VL()||hM()||"connection"in navigator)?navigator.onLine:!0}function UL(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.shortDelay=e,this.longDelay=t,hi(t>e,"Short delay should be less than long delay!"),this.isMobile=cM()||pM()}get(){return BL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(n,e){hi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],HL=new Fh(3e4,6e4);function pg(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function du(n,e,t,r,s={}){return Ik(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Lh({key:n.config.apiKey,...o}).slice(1),d=await n._getAdditionalHeaders();d["Content-Type"]="application/json",n.languageCode&&(d["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:d,...i};return dM()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&gi(n.emulatorConfig.host)&&(p.credentials="include"),Tk.fetch()(await kk(n,n.config.apiHost,t,u),p)})}async function Ik(n,e,t){n._canInitEmulator=!1;const r={...$L,...e};try{const s=new qL(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Pm(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[d,p]=u.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pm(n,"credential-already-in-use",o);if(d==="EMAIL_EXISTS")throw Pm(n,"email-already-in-use",o);if(d==="USER_DISABLED")throw Pm(n,"user-disabled",o);const f=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw c0(n,f,p);Ps(n,f)}}catch(s){if(s instanceof Qr)throw s;Ps(n,"network-request-failed",{message:String(s)})}}async function Ck(n,e,t,r,s={}){const i=await du(n,e,t,r,s);return"mfaPendingCredential"in i&&Ps(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function kk(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?d0(n.config,s):`${n.config.apiScheme}://${s}`;return zL.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class qL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Hr(this.auth,"network-request-failed")),HL.get())})}}function Pm(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=Hr(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GL(n,e){return du(n,"POST","/v1/accounts:delete",e)}async function Cf(n,e){return du(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function WL(n,e=!1){const t=st(n),r=await t.getIdToken(e),s=h0(r);Fe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i?.sign_in_provider;return{claims:s,token:r,authTime:Bd(Gv(s.auth_time)),issuedAtTime:Bd(Gv(s.iat)),expirationTime:Bd(Gv(s.exp)),signInProvider:o||null,signInSecondFactor:i?.sign_in_second_factor||null}}function Gv(n){return Number(n)*1e3}function h0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xm("JWT malformed, contained fewer than 3 sections"),null;try{const s=n0(t);return s?JSON.parse(s):(Xm("Failed to decode base64 JWT payload"),null)}catch(s){return Xm("Caught error parsing JWT payload as JSON",s?.toString()),null}}function QE(n){const e=h0(n);return Fe(e,"internal-error"),Fe(typeof e.exp<"u","internal-error"),Fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hh(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Qr&&KL(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function KL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bd(this.lastLoginAt),this.creationTime=Bd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){const e=n.auth,t=await n.getIdToken(),r=await hh(n,Cf(e,{idToken:t}));Fe(r?.users.length,e,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const i=s.providerUserInfo?.length?Ak(s.providerUserInfo):[],o=YL(n.providerData,i),u=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!o?.length,p=u?d:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new $x(s.createdAt,s.lastLoginAt),isAnonymous:p};Object.assign(n,f)}async function QL(n){const e=st(n);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YL(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ak(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(n,e){const t=await Ik(n,{},async()=>{const r=Lh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await kk(n,s,"/v1/token",`key=${i}`),u=await n._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:u,body:r};return n.emulatorConfig&&gi(n.emulatorConfig.host)&&(d.credentials="include"),Tk.fetch()(o,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZL(n,e){return du(n,"POST","/v2/accounts:revokeToken",pg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Fe(e.idToken,"internal-error"),Fe(typeof e.idToken<"u","internal-error"),Fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):QE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Fe(e.length!==0,"internal-error");const t=QE(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await XL(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new Rc;return r&&(Fe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Fe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Fe(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rc,this.toJSON())}_performRefresh(){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(n,e){Fe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $r{constructor({uid:e,auth:t,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new JL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $x(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await hh(this,this.stsTokenManager.getToken(this.auth,e));return Fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return WL(this,e)}reload(){return QL(this)}_assign(e){this!==e&&(Fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $r({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vn(this.auth.app))return Promise.reject(vo(this.auth));const e=await this.getIdToken();return await hh(this,GL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,s=t.email??void 0,i=t.phoneNumber??void 0,o=t.photoURL??void 0,u=t.tenantId??void 0,d=t._redirectEventId??void 0,p=t.createdAt??void 0,f=t.lastLoginAt??void 0,{uid:y,emailVerified:x,isAnonymous:S,providerData:E,stsTokenManager:k}=t;Fe(y&&k,e,"internal-error");const I=Rc.fromJSON(this.name,k);Fe(typeof y=="string",e,"internal-error"),Yi(r,e.name),Yi(s,e.name),Fe(typeof x=="boolean",e,"internal-error"),Fe(typeof S=="boolean",e,"internal-error"),Yi(i,e.name),Yi(o,e.name),Yi(u,e.name),Yi(d,e.name),Yi(p,e.name),Yi(f,e.name);const M=new $r({uid:y,auth:e,email:s,emailVerified:x,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:i,tenantId:u,stsTokenManager:I,createdAt:p,lastLoginAt:f});return E&&Array.isArray(E)&&(M.providerData=E.map(j=>({...j}))),d&&(M._redirectEventId=d),M}static async _fromIdTokenResponse(e,t,r=!1){const s=new Rc;s.updateFromServerResponse(t);const i=new $r({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await kf(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Fe(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ak(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!i?.length,u=new Rc;u.updateFromIdToken(r);const d=new $r({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new $x(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!i?.length};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE=new Map;function ri(n){hi(n instanceof Function,"Expected a class definition");let e=YE.get(n);return e?(hi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,YE.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Pk.type="NONE";const XE=Pk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(n,e,t){return`firebase:${n}:${e}:${t}`}class Dc{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zm(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zm("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Cf(this.auth,{idToken:e}).catch(()=>{});return t?$r._fromGetAccountInfoResponse(this.auth,t,e):null}return $r._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Dc(ri(XE),e,r);const s=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let i=s[0]||ri(XE);const o=Zm(r,e.config.apiKey,e.name);let u=null;for(const p of t)try{const f=await p._get(o);if(f){let y;if(typeof f=="string"){const x=await Cf(e,{idToken:f}).catch(()=>{});if(!x)break;y=await $r._fromGetAccountInfoResponse(e,x,f)}else y=$r._fromJSON(e,f);p!==i&&(u=y),i=p;break}}catch{}const d=s.filter(p=>p._shouldAllowMigration);return!i._shouldAllowMigration||!d.length?new Dc(i,e,r):(i=d[0],u&&await i._set(o,u.toJSON()),await Promise.all(t.map(async p=>{if(p!==i)try{await p._remove(o)}catch{}})),new Dc(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Dk(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nk(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mk(e))return"Blackberry";if(Lk(e))return"Webos";if(jk(e))return"Safari";if((e.includes("chrome/")||Rk(e))&&!e.includes("edge/"))return"Chrome";if(Ok(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Nk(n=Xt()){return/firefox\//i.test(n)}function jk(n=Xt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Rk(n=Xt()){return/crios\//i.test(n)}function Dk(n=Xt()){return/iemobile/i.test(n)}function Ok(n=Xt()){return/android/i.test(n)}function Mk(n=Xt()){return/blackberry/i.test(n)}function Lk(n=Xt()){return/webos/i.test(n)}function p0(n=Xt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eF(n=Xt()){return p0(n)&&!!window.navigator?.standalone}function tF(){return mM()&&document.documentMode===10}function Fk(n=Xt()){return p0(n)||Ok(n)||Lk(n)||Mk(n)||/windows phone/i.test(n)||Dk(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(n,e=[]){let t;switch(n){case"Browser":t=ZE(Xt());break;case"Worker":t=`${ZE(Xt())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,u)=>{try{const d=e(i);o(d)}catch(d){u(d)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(n,e={}){return du(n,"GET","/v2/passwordPolicy",pg(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=6;class iF{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oF{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new eT(this),this.idTokenSubscription=new eT(this),this.beforeStateQueue=new nF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ek,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ri(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Dc.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Cf(this,{idToken:e}),r=await $r._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Vn(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=this.redirectUser?._redirectEventId,o=r?._redirectEventId,u=await this.tryRedirectSignIn(e);(!i||i===o)&&u?.user&&(r=u.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(i){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vn(this.app))return Promise.reject(vo(this));const t=e?st(e):null;return t&&Fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vn(this.app)?Promise.reject(vo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vn(this.app)?Promise.reject(vo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ri(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rF(this),t=new iF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Mh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZL(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ri(e)||this._popupRedirectResolver;Fe(t,this,"argument-error"),this.redirectPersistenceManager=await Dc.create(this,[ri(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Fe(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,s);return()=>{o=!0,d()}}else{const d=e.addObserver(t);return()=>{o=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Vk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&LL(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Vh(n){return st(n)}class eT{constructor(e){this.auth=e,this.observer=null,this.addObserver=bM(t=>this.observer=t)}get next(){return Fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aF(n){m0=n}function lF(n){return m0.loadJS(n)}function cF(){return m0.gapiScript}function uF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dF(n,e){const t=gl(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Wr(i,e??{}))return s;Ps(s,"already-initialized")}return t.initialize({options:e})}function hF(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(ri);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function pF(n,e,t){const r=Vh(n);Fe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Bk(e),{host:o,port:u}=mF(e),d=u===null?"":`:${u}`,p={url:`${i}//${o}${d}/`},f=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Fe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Fe(Wr(p,r.config.emulator)&&Wr(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,gi(o)?(dg(`${i}//${o}${d}`),s0("Auth",!0)):fF()}function Bk(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function mF(n){const e=Bk(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:tT(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:tT(o)}}}function tT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function fF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ni("not implemented")}_getIdTokenResponse(e){return ni("not implemented")}_linkToIdToken(e,t){return ni("not implemented")}_getReauthenticationResolver(e){return ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n,e){return Ck(n,"POST","/v1/accounts:signInWithIdp",pg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF="http://localhost";class Xa extends Uk{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ps("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=t;if(!r||!s)return null;const o=new Xa(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Oc(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Oc(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oc(e,t)}buildRequest(){const e={requestUri:gF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Lh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends f0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so extends Bh{constructor(){super("facebook.com")}static credential(e){return Xa._fromParams({providerId:so.PROVIDER_ID,signInMethod:so.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return so.credentialFromTaggedObject(e)}static credentialFromError(e){return so.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return so.credential(e.oauthAccessToken)}catch{return null}}}so.FACEBOOK_SIGN_IN_METHOD="facebook.com";so.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti extends Bh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Xa._fromParams({providerId:ti.PROVIDER_ID,signInMethod:ti.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ti.credentialFromTaggedObject(e)}static credentialFromError(e){return ti.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ti.credential(t,r)}catch{return null}}}ti.GOOGLE_SIGN_IN_METHOD="google.com";ti.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io extends Bh{constructor(){super("github.com")}static credential(e){return Xa._fromParams({providerId:io.PROVIDER_ID,signInMethod:io.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return io.credentialFromTaggedObject(e)}static credentialFromError(e){return io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return io.credential(e.oauthAccessToken)}catch{return null}}}io.GITHUB_SIGN_IN_METHOD="github.com";io.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo extends Bh{constructor(){super("twitter.com")}static credential(e,t){return Xa._fromParams({providerId:oo.PROVIDER_ID,signInMethod:oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return oo.credentialFromTaggedObject(e)}static credentialFromError(e){return oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return oo.credential(t,r)}catch{return null}}}oo.TWITTER_SIGN_IN_METHOD="twitter.com";oo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yF(n,e){return Ck(n,"POST","/v1/accounts:signUp",pg(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await $r._fromIdTokenResponse(e,r,s),o=nT(r);return new ko({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=nT(r);return new ko({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function nT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vF(n){if(Vn(n.app))return Promise.reject(vo(n));const e=Vh(n);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new ko({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await yF(e,{returnSecureToken:!0}),r=await ko._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(r.user),r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Qr{constructor(e,t,r,s){super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Af(e,t,r,s)}}function $k(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(n,i,e,r):i})}async function xF(n,e,t=!1){const r=await hh(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ko._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bF(n,e,t=!1){const{auth:r}=n;if(Vn(r.app))return Promise.reject(vo(r));const s="reauthenticate";try{const i=await hh(n,$k(r,s,e,n),t);Fe(i.idToken,r,"internal-error");const o=h0(i.idToken);Fe(o,r,"internal-error");const{sub:u}=o;return Fe(n.uid===u,r,"user-mismatch"),ko._forOperation(n,s,i)}catch(i){throw i?.code==="auth/user-not-found"&&Ps(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF(n,e,t=!1){if(Vn(n.app))return Promise.reject(vo(n));const r="signIn",s=await $k(n,r,e),i=await ko._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function SF(n,e,t,r){return st(n).onIdTokenChanged(e,t,r)}function _F(n,e,t){return st(n).beforeAuthStateChanged(e,t)}function g0(n,e,t,r){return st(n).onAuthStateChanged(e,t,r)}function EF(n){return st(n).signOut()}const Pf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pf,"1"),this.storage.removeItem(Pf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=1e3,IF=10;class Hk extends zk{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,u,d)=>{this.notifyListeners(o,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);tF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,IF):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},TF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hk.type="LOCAL";const CF=Hk;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk extends zk{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qk.type="SESSION";const Gk=qk;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new mg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async p=>p(t.origin,i)),d=await kF(u);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}mg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,d)=>{const p=y0("",20);s.port1.start();const f=setTimeout(()=>{d(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(y){const x=y;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(x.data.response);break;default:clearTimeout(f),clearTimeout(i),d(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(){return window}function PF(n){Is().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(){return typeof Is().WorkerGlobalScope<"u"&&typeof Is().importScripts=="function"}async function NF(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jF(){return navigator?.serviceWorker?.controller||null}function RF(){return Wk()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="firebaseLocalStorageDb",DF=1,Nf="firebaseLocalStorage",Jk="fbase_key";class Uh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function fg(n,e){return n.transaction([Nf],e?"readwrite":"readonly").objectStore(Nf)}function OF(){const n=indexedDB.deleteDatabase(Kk);return new Uh(n).toPromise()}function zx(){const n=indexedDB.open(Kk,DF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Nf,{keyPath:Jk})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Nf)?e(r):(r.close(),await OF(),e(await zx()))})})}async function rT(n,e,t){const r=fg(n,!0).put({[Jk]:e,value:t});return new Uh(r).toPromise()}async function MF(n,e){const t=fg(n,!1).get(e),r=await new Uh(t).toPromise();return r===void 0?null:r.value}function sT(n,e){const t=fg(n,!0).delete(e);return new Uh(t).toPromise()}const LF=800,FF=3;class Qk{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zx(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>FF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wk()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=mg._getInstance(RF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await NF(),!this.activeServiceWorker)return;this.sender=new AF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||jF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zx();return await rT(e,Pf,"1"),await sT(e,Pf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>rT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>MF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=fg(s,!1).getAll();return new Uh(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qk.type="LOCAL";const VF=Qk;new Fh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(n,e){return e?ri(e):(Fe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0 extends Uk{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oc(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oc(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oc(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function BF(n){return wF(n.auth,new v0(n),n.bypassAuthState)}function UF(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),bF(t,new v0(n),n.bypassAuthState)}async function $F(n){const{auth:e,user:t}=n;return Fe(t,e,"internal-error"),xF(t,new v0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BF;case"linkViaPopup":case"linkViaRedirect":return $F;case"reauthViaPopup":case"reauthViaRedirect":return UF;default:Ps(this.auth,"internal-error")}}resolve(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF=new Fh(2e3,1e4);async function HF(n,e,t){if(Vn(n.app))return Promise.reject(Hr(n,"operation-not-supported-in-this-environment"));const r=Vh(n);FL(n,e,f0);const s=Yk(r,t);return new Ba(r,"signInViaPopup",e,s).executeNotNull()}class Ba extends Xk{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ba.currentPopupAction&&Ba.currentPopupAction.cancel(),Ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Fe(e,this.auth,"internal-error"),e}async onExecution(){hi(this.filter.length===1,"Popup operations only handle one event");const e=y0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Hr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Hr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Hr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zF.get())};e()}}Ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qF="pendingRedirect",ef=new Map;class GF extends Xk{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=ef.get(this.auth._key());if(!e){try{const r=await WF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}ef.set(this.auth._key(),e)}return this.bypassAuthState||ef.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WF(n,e){const t=QF(e),r=JF(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function KF(n,e){ef.set(n._key(),e)}function JF(n){return ri(n._redirectPersistence)}function QF(n){return Zm(qF,n.config.apiKey,n.name)}async function YF(n,e,t=!1){if(Vn(n.app))return Promise.reject(vo(n));const r=Vh(n),s=Yk(r,e),o=await new GF(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=600*1e3;class ZF{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Zk(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Hr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XF&&this.cachedEventUids.clear(),this.cachedEventUids.has(iT(e))}saveEventToCache(e){this.cachedEventUids.add(iT(e)),this.lastProcessedEventTime=Date.now()}}function iT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Zk({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function eV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zk(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(n,e={}){return du(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rV=/^https?/;async function sV(n){if(n.config.emulator)return;const{authorizedDomains:e}=await tV(n);for(const t of e)try{if(iV(t))return}catch{}Ps(n,"unauthorized-domain")}function iV(n){const e=Ux(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!rV.test(t))return!1;if(nV.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new Fh(3e4,6e4);function oT(){const n=Is().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aV(n){return new Promise((e,t)=>{function r(){oT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{oT(),t(Hr(n,"network-request-failed"))},timeout:oV.get()})}if(Is().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Is().gapi?.load)r();else{const s=uF("iframefcb");return Is()[s]=()=>{gapi.load?r():t(Hr(n,"network-request-failed"))},lF(`${cF()}?onload=${s}`).catch(i=>t(i))}}).catch(e=>{throw tf=null,e})}let tf=null;function lV(n){return tf=tf||aV(n),tf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=new Fh(5e3,15e3),uV="__/auth/iframe",dV="emulator/auth/iframe",hV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mV(n){const e=n.config;Fe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?d0(e,dV):`https://${n.config.authDomain}/${uV}`,r={apiKey:e.apiKey,appName:n.name,v:Bo},s=pV.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${Lh(r).slice(1)}`}async function fV(n){const e=await lV(n),t=Is().gapi;return Fe(t,n,"internal-error"),e.open({where:document.body,url:mV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hV,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Hr(n,"network-request-failed"),u=Is().setTimeout(()=>{i(o)},cV.get());function d(){Is().clearTimeout(u),s(r)}r.ping(d).then(d,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yV=500,vV=600,xV="_blank",bV="http://localhost";class aT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wV(n,e,t,r=yV,s=vV){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const d={...gV,width:r.toString(),height:s.toString(),top:i,left:o},p=Xt().toLowerCase();t&&(u=Rk(p)?xV:t),Nk(p)&&(e=e||bV,d.scrollbars="yes");const f=Object.entries(d).reduce((x,[S,E])=>`${x}${S}=${E},`,"");if(eF(p)&&u!=="_self")return SV(e||"",u),new aT(null);const y=window.open(e||"",u,f);Fe(y,n,"popup-blocked");try{y.focus()}catch{}return new aT(y)}function SV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V="__/auth/handler",EV="emulator/auth/handler",TV=encodeURIComponent("fac");async function lT(n,e,t,r,s,i){Fe(n.config.authDomain,n,"auth-domain-config-required"),Fe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bo,eventId:s};if(e instanceof f0){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",xM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,y]of Object.entries({}))o[f]=y}if(e instanceof Bh){const f=e.getScopes().filter(y=>y!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);const u=o;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const d=await n._getAppCheckToken(),p=d?`#${TV}=${encodeURIComponent(d)}`:"";return`${IV(n)}?${Lh(u).slice(1)}${p}`}function IV({config:n}){return n.emulator?d0(n,EV):`https://${n.authDomain}/${_V}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="webStorageSupport";class CV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gk,this._completeRedirectFn=YF,this._overrideRedirectResult=KF}async _openPopup(e,t,r,s){hi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const i=await lT(e,t,r,Ux(),s);return wV(e,i,y0())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await lT(e,t,r,Ux(),s);return PF(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(hi(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await fV(e),r=new ZF(e);return t.register("authEvent",s=>(Fe(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Wv,{type:Wv},s=>{const i=s?.[0]?.[Wv];i!==void 0&&t(!!i),Ps(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Fk()||jk()||p0()}}const kV=CV;var cT="@firebase/auth",uT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function NV(n){Co(new To("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;Fe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:o,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Vk(n)},p=new oF(r,s,i,d);return hF(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Co(new To("auth-internal",e=>{const t=Vh(e.getProvider("auth").getImmediate());return(r=>new AV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),kr(cT,uT,PV(n)),kr(cT,uT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=300,RV=ok("authIdTokenMaxAge")||jV;let dT=null;const DV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>RV)return;const s=t?.token;dT!==s&&(dT=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function x0(n=hg()){const e=gl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=dF(n,{popupRedirectResolver:kV,persistence:[VF,CF,Gk]}),r=ok("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=DV(i.toString());_F(t,o,()=>o(t.currentUser)),SF(t,u=>o(u))}}const s=sk("auth");return s&&pF(t,`http://${s}`),t}function OV(){return document.getElementsByTagName("head")?.[0]??document}aF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=Hr("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",OV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});NV("Browser");var hT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xo,eA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,_){function R(){}R.prototype=_.prototype,N.F=_.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(O,B,z){for(var L=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)L[Te-2]=arguments[Te];return _.prototype[B].apply(O,L)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,_,R){R||(R=0);const O=Array(16);if(typeof _=="string")for(var B=0;B<16;++B)O[B]=_.charCodeAt(R++)|_.charCodeAt(R++)<<8|_.charCodeAt(R++)<<16|_.charCodeAt(R++)<<24;else for(B=0;B<16;++B)O[B]=_[R++]|_[R++]<<8|_[R++]<<16|_[R++]<<24;_=N.g[0],R=N.g[1],B=N.g[2];let z=N.g[3],L;L=_+(z^R&(B^z))+O[0]+3614090360&4294967295,_=R+(L<<7&4294967295|L>>>25),L=z+(B^_&(R^B))+O[1]+3905402710&4294967295,z=_+(L<<12&4294967295|L>>>20),L=B+(R^z&(_^R))+O[2]+606105819&4294967295,B=z+(L<<17&4294967295|L>>>15),L=R+(_^B&(z^_))+O[3]+3250441966&4294967295,R=B+(L<<22&4294967295|L>>>10),L=_+(z^R&(B^z))+O[4]+4118548399&4294967295,_=R+(L<<7&4294967295|L>>>25),L=z+(B^_&(R^B))+O[5]+1200080426&4294967295,z=_+(L<<12&4294967295|L>>>20),L=B+(R^z&(_^R))+O[6]+2821735955&4294967295,B=z+(L<<17&4294967295|L>>>15),L=R+(_^B&(z^_))+O[7]+4249261313&4294967295,R=B+(L<<22&4294967295|L>>>10),L=_+(z^R&(B^z))+O[8]+1770035416&4294967295,_=R+(L<<7&4294967295|L>>>25),L=z+(B^_&(R^B))+O[9]+2336552879&4294967295,z=_+(L<<12&4294967295|L>>>20),L=B+(R^z&(_^R))+O[10]+4294925233&4294967295,B=z+(L<<17&4294967295|L>>>15),L=R+(_^B&(z^_))+O[11]+2304563134&4294967295,R=B+(L<<22&4294967295|L>>>10),L=_+(z^R&(B^z))+O[12]+1804603682&4294967295,_=R+(L<<7&4294967295|L>>>25),L=z+(B^_&(R^B))+O[13]+4254626195&4294967295,z=_+(L<<12&4294967295|L>>>20),L=B+(R^z&(_^R))+O[14]+2792965006&4294967295,B=z+(L<<17&4294967295|L>>>15),L=R+(_^B&(z^_))+O[15]+1236535329&4294967295,R=B+(L<<22&4294967295|L>>>10),L=_+(B^z&(R^B))+O[1]+4129170786&4294967295,_=R+(L<<5&4294967295|L>>>27),L=z+(R^B&(_^R))+O[6]+3225465664&4294967295,z=_+(L<<9&4294967295|L>>>23),L=B+(_^R&(z^_))+O[11]+643717713&4294967295,B=z+(L<<14&4294967295|L>>>18),L=R+(z^_&(B^z))+O[0]+3921069994&4294967295,R=B+(L<<20&4294967295|L>>>12),L=_+(B^z&(R^B))+O[5]+3593408605&4294967295,_=R+(L<<5&4294967295|L>>>27),L=z+(R^B&(_^R))+O[10]+38016083&4294967295,z=_+(L<<9&4294967295|L>>>23),L=B+(_^R&(z^_))+O[15]+3634488961&4294967295,B=z+(L<<14&4294967295|L>>>18),L=R+(z^_&(B^z))+O[4]+3889429448&4294967295,R=B+(L<<20&4294967295|L>>>12),L=_+(B^z&(R^B))+O[9]+568446438&4294967295,_=R+(L<<5&4294967295|L>>>27),L=z+(R^B&(_^R))+O[14]+3275163606&4294967295,z=_+(L<<9&4294967295|L>>>23),L=B+(_^R&(z^_))+O[3]+4107603335&4294967295,B=z+(L<<14&4294967295|L>>>18),L=R+(z^_&(B^z))+O[8]+1163531501&4294967295,R=B+(L<<20&4294967295|L>>>12),L=_+(B^z&(R^B))+O[13]+2850285829&4294967295,_=R+(L<<5&4294967295|L>>>27),L=z+(R^B&(_^R))+O[2]+4243563512&4294967295,z=_+(L<<9&4294967295|L>>>23),L=B+(_^R&(z^_))+O[7]+1735328473&4294967295,B=z+(L<<14&4294967295|L>>>18),L=R+(z^_&(B^z))+O[12]+2368359562&4294967295,R=B+(L<<20&4294967295|L>>>12),L=_+(R^B^z)+O[5]+4294588738&4294967295,_=R+(L<<4&4294967295|L>>>28),L=z+(_^R^B)+O[8]+2272392833&4294967295,z=_+(L<<11&4294967295|L>>>21),L=B+(z^_^R)+O[11]+1839030562&4294967295,B=z+(L<<16&4294967295|L>>>16),L=R+(B^z^_)+O[14]+4259657740&4294967295,R=B+(L<<23&4294967295|L>>>9),L=_+(R^B^z)+O[1]+2763975236&4294967295,_=R+(L<<4&4294967295|L>>>28),L=z+(_^R^B)+O[4]+1272893353&4294967295,z=_+(L<<11&4294967295|L>>>21),L=B+(z^_^R)+O[7]+4139469664&4294967295,B=z+(L<<16&4294967295|L>>>16),L=R+(B^z^_)+O[10]+3200236656&4294967295,R=B+(L<<23&4294967295|L>>>9),L=_+(R^B^z)+O[13]+681279174&4294967295,_=R+(L<<4&4294967295|L>>>28),L=z+(_^R^B)+O[0]+3936430074&4294967295,z=_+(L<<11&4294967295|L>>>21),L=B+(z^_^R)+O[3]+3572445317&4294967295,B=z+(L<<16&4294967295|L>>>16),L=R+(B^z^_)+O[6]+76029189&4294967295,R=B+(L<<23&4294967295|L>>>9),L=_+(R^B^z)+O[9]+3654602809&4294967295,_=R+(L<<4&4294967295|L>>>28),L=z+(_^R^B)+O[12]+3873151461&4294967295,z=_+(L<<11&4294967295|L>>>21),L=B+(z^_^R)+O[15]+530742520&4294967295,B=z+(L<<16&4294967295|L>>>16),L=R+(B^z^_)+O[2]+3299628645&4294967295,R=B+(L<<23&4294967295|L>>>9),L=_+(B^(R|~z))+O[0]+4096336452&4294967295,_=R+(L<<6&4294967295|L>>>26),L=z+(R^(_|~B))+O[7]+1126891415&4294967295,z=_+(L<<10&4294967295|L>>>22),L=B+(_^(z|~R))+O[14]+2878612391&4294967295,B=z+(L<<15&4294967295|L>>>17),L=R+(z^(B|~_))+O[5]+4237533241&4294967295,R=B+(L<<21&4294967295|L>>>11),L=_+(B^(R|~z))+O[12]+1700485571&4294967295,_=R+(L<<6&4294967295|L>>>26),L=z+(R^(_|~B))+O[3]+2399980690&4294967295,z=_+(L<<10&4294967295|L>>>22),L=B+(_^(z|~R))+O[10]+4293915773&4294967295,B=z+(L<<15&4294967295|L>>>17),L=R+(z^(B|~_))+O[1]+2240044497&4294967295,R=B+(L<<21&4294967295|L>>>11),L=_+(B^(R|~z))+O[8]+1873313359&4294967295,_=R+(L<<6&4294967295|L>>>26),L=z+(R^(_|~B))+O[15]+4264355552&4294967295,z=_+(L<<10&4294967295|L>>>22),L=B+(_^(z|~R))+O[6]+2734768916&4294967295,B=z+(L<<15&4294967295|L>>>17),L=R+(z^(B|~_))+O[13]+1309151649&4294967295,R=B+(L<<21&4294967295|L>>>11),L=_+(B^(R|~z))+O[4]+4149444226&4294967295,_=R+(L<<6&4294967295|L>>>26),L=z+(R^(_|~B))+O[11]+3174756917&4294967295,z=_+(L<<10&4294967295|L>>>22),L=B+(_^(z|~R))+O[2]+718787259&4294967295,B=z+(L<<15&4294967295|L>>>17),L=R+(z^(B|~_))+O[9]+3951481745&4294967295,N.g[0]=N.g[0]+_&4294967295,N.g[1]=N.g[1]+(B+(L<<21&4294967295|L>>>11))&4294967295,N.g[2]=N.g[2]+B&4294967295,N.g[3]=N.g[3]+z&4294967295}r.prototype.v=function(N,_){_===void 0&&(_=N.length);const R=_-this.blockSize,O=this.C;let B=this.h,z=0;for(;z<_;){if(B==0)for(;z<=R;)s(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<_;)if(O[B++]=N.charCodeAt(z++),B==this.blockSize){s(this,O),B=0;break}}else for(;z<_;)if(O[B++]=N[z++],B==this.blockSize){s(this,O),B=0;break}}this.h=B,this.o+=_},r.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var _=1;_<N.length-8;++_)N[_]=0;_=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=_&255,_/=256;for(this.v(N),N=Array(16),_=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)N[_++]=this.g[R]>>>O&255;return N};function i(N,_){var R=u;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=_(N)}function o(N,_){this.h=_;const R=[];let O=!0;for(let B=N.length-1;B>=0;B--){const z=N[B]|0;O&&z==_||(R[B]=z,O=!1)}this.g=R}var u={};function d(N){return-128<=N&&N<128?i(N,function(_){return new o([_|0],_<0?-1:0)}):new o([N|0],N<0?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return y;if(N<0)return I(p(-N));const _=[];let R=1;for(let O=0;N>=R;O++)_[O]=N/R|0,R*=4294967296;return new o(_,0)}function f(N,_){if(N.length==0)throw Error("number format error: empty string");if(_=_||10,_<2||36<_)throw Error("radix out of range: "+_);if(N.charAt(0)=="-")return I(f(N.substring(1),_));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=p(Math.pow(_,8));let O=y;for(let z=0;z<N.length;z+=8){var B=Math.min(8,N.length-z);const L=parseInt(N.substring(z,z+B),_);B<8?(B=p(Math.pow(_,B)),O=O.j(B).add(p(L))):(O=O.j(R),O=O.add(p(L)))}return O}var y=d(0),x=d(1),S=d(16777216);n=o.prototype,n.m=function(){if(k(this))return-I(this).m();let N=0,_=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);N+=(O>=0?O:4294967296+O)*_,_*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(E(this))return"0";if(k(this))return"-"+I(this).toString(N);const _=p(Math.pow(N,6));var R=this;let O="";for(;;){const B=F(R,_).g;R=M(R,B.j(_));let z=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=B,E(R))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function E(N){if(N.h!=0)return!1;for(let _=0;_<N.g.length;_++)if(N.g[_]!=0)return!1;return!0}function k(N){return N.h==-1}n.l=function(N){return N=M(this,N),k(N)?-1:E(N)?0:1};function I(N){const _=N.g.length,R=[];for(let O=0;O<_;O++)R[O]=~N.g[O];return new o(R,~N.h).add(x)}n.abs=function(){return k(this)?I(this):this},n.add=function(N){const _=Math.max(this.g.length,N.g.length),R=[];let O=0;for(let B=0;B<=_;B++){let z=O+(this.i(B)&65535)+(N.i(B)&65535),L=(z>>>16)+(this.i(B)>>>16)+(N.i(B)>>>16);O=L>>>16,z&=65535,L&=65535,R[B]=L<<16|z}return new o(R,R[R.length-1]&-2147483648?-1:0)};function M(N,_){return N.add(I(_))}n.j=function(N){if(E(this)||E(N))return y;if(k(this))return k(N)?I(this).j(I(N)):I(I(this).j(N));if(k(N))return I(this.j(I(N)));if(this.l(S)<0&&N.l(S)<0)return p(this.m()*N.m());const _=this.g.length+N.g.length,R=[];for(var O=0;O<2*_;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let B=0;B<N.g.length;B++){const z=this.i(O)>>>16,L=this.i(O)&65535,Te=N.i(B)>>>16,Ce=N.i(B)&65535;R[2*O+2*B]+=L*Ce,j(R,2*O+2*B),R[2*O+2*B+1]+=z*Ce,j(R,2*O+2*B+1),R[2*O+2*B+1]+=L*Te,j(R,2*O+2*B+1),R[2*O+2*B+2]+=z*Te,j(R,2*O+2*B+2)}for(N=0;N<_;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=_;N<2*_;N++)R[N]=0;return new o(R,0)};function j(N,_){for(;(N[_]&65535)!=N[_];)N[_+1]+=N[_]>>>16,N[_]&=65535,_++}function C(N,_){this.g=N,this.h=_}function F(N,_){if(E(_))throw Error("division by zero");if(E(N))return new C(y,y);if(k(N))return _=F(I(N),_),new C(I(_.g),I(_.h));if(k(_))return _=F(N,I(_)),new C(I(_.g),_.h);if(N.g.length>30){if(k(N)||k(_))throw Error("slowDivide_ only works with positive integers.");for(var R=x,O=_;O.l(N)<=0;)R=G(R),O=G(O);var B=q(R,1),z=q(O,1);for(O=q(O,2),R=q(R,2);!E(O);){var L=z.add(O);L.l(N)<=0&&(B=B.add(R),z=L),O=q(O,1),R=q(R,1)}return _=M(N,B.j(_)),new C(B,_)}for(B=y;N.l(_)>=0;){for(R=Math.max(1,Math.floor(N.m()/_.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=p(R),L=z.j(_);k(L)||L.l(N)>0;)R-=O,z=p(R),L=z.j(_);E(z)&&(z=x),B=B.add(z),N=M(N,L)}return new C(B,N)}n.B=function(N){return F(this,N).h},n.and=function(N){const _=Math.max(this.g.length,N.g.length),R=[];for(let O=0;O<_;O++)R[O]=this.i(O)&N.i(O);return new o(R,this.h&N.h)},n.or=function(N){const _=Math.max(this.g.length,N.g.length),R=[];for(let O=0;O<_;O++)R[O]=this.i(O)|N.i(O);return new o(R,this.h|N.h)},n.xor=function(N){const _=Math.max(this.g.length,N.g.length),R=[];for(let O=0;O<_;O++)R[O]=this.i(O)^N.i(O);return new o(R,this.h^N.h)};function G(N){const _=N.g.length+1,R=[];for(let O=0;O<_;O++)R[O]=N.i(O)<<1|N.i(O-1)>>>31;return new o(R,N.h)}function q(N,_){const R=_>>5;_%=32;const O=N.g.length-R,B=[];for(let z=0;z<O;z++)B[z]=_>0?N.i(z+R)>>>_|N.i(z+R+1)<<32-_:N.i(z+R);return new o(B,N.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,eA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=p,o.fromString=f,xo=o}).apply(typeof hT<"u"?hT:typeof self<"u"?self:typeof window<"u"?window:{});var Nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tA,Nd,nA,nf,Hx,rA,sA,iA;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Nm=="object"&&Nm];for(var w=0;w<m.length;++w){var T=m[w];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function s(m,w){if(w)e:{var T=r;m=m.split(".");for(var D=0;D<m.length-1;D++){var J=m[D];if(!(J in T))break e;T=T[J]}m=m[m.length-1],D=T[m],w=w(D),w!=D&&w!=null&&e(T,m,{configurable:!0,writable:!0,value:w})}}s("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(m){return m||function(w){var T=[],D;for(D in w)Object.prototype.hasOwnProperty.call(w,D)&&T.push([D,w[D]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(m){var w=typeof m;return w=="object"&&m!=null||w=="function"}function d(m,w,T){return m.call.apply(m.bind,arguments)}function p(m,w,T){return p=d,p.apply(null,arguments)}function f(m,w){var T=Array.prototype.slice.call(arguments,1);return function(){var D=T.slice();return D.push.apply(D,arguments),m.apply(this,D)}}function y(m,w){function T(){}T.prototype=w.prototype,m.Z=w.prototype,m.prototype=new T,m.prototype.constructor=m,m.Ob=function(D,J,Z){for(var pe=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)pe[Ue-2]=arguments[Ue];return w.prototype[J].apply(D,pe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function S(m){const w=m.length;if(w>0){const T=Array(w);for(let D=0;D<w;D++)T[D]=m[D];return T}return[]}function E(m,w){for(let D=1;D<arguments.length;D++){const J=arguments[D];var T=typeof J;if(T=T!="object"?T:J?Array.isArray(J)?"array":T:"null",T=="array"||T=="object"&&typeof J.length=="number"){T=m.length||0;const Z=J.length||0;m.length=T+Z;for(let pe=0;pe<Z;pe++)m[T+pe]=J[pe]}else m.push(J)}}class k{constructor(w,T){this.i=w,this.j=T,this.h=0,this.g=null}get(){let w;return this.h>0?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function I(m){o.setTimeout(()=>{throw m},0)}function M(){var m=N;let w=null;return m.g&&(w=m.g,m.g=m.g.next,m.g||(m.h=null),w.next=null),w}class j{constructor(){this.h=this.g=null}add(w,T){const D=C.get();D.set(w,T),this.h?this.h.next=D:this.g=D,this.h=D}}var C=new k(()=>new F,m=>m.reset());class F{constructor(){this.next=this.g=this.h=null}set(w,T){this.h=w,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let G,q=!1,N=new j,_=()=>{const m=Promise.resolve(void 0);G=()=>{m.then(R)}};function R(){for(var m;m=M();){try{m.h.call(m.g)}catch(T){I(T)}var w=C;w.j(m),w.h<100&&(w.h++,m.next=w.g,w.g=m)}q=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(m,w){this.type=m,this.g=this.target=w,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var m=!1,w=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const T=()=>{};o.addEventListener("test",T,w),o.removeEventListener("test",T,w)}catch{}return m})();function L(m){return/^[\s\xa0]*$/.test(m)}function Te(m,w){B.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,w)}y(Te,B),Te.prototype.init=function(m,w){const T=this.type=m.type,D=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=w,w=m.relatedTarget,w||(T=="mouseover"?w=m.fromElement:T=="mouseout"&&(w=m.toElement)),this.relatedTarget=w,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Te.Z.h.call(this)},Te.prototype.h=function(){Te.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var Ce="closure_listenable_"+(Math.random()*1e6|0),we=0;function $e(m,w,T,D,J){this.listener=m,this.proxy=null,this.src=w,this.type=T,this.capture=!!D,this.ha=J,this.key=++we,this.da=this.fa=!1}function le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ie(m,w,T){for(const D in m)w.call(T,m[D],D,m)}function se(m,w){for(const T in m)w.call(void 0,m[T],T,m)}function U(m){const w={};for(const T in m)w[T]=m[T];return w}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ne(m,w){let T,D;for(let J=1;J<arguments.length;J++){D=arguments[J];for(T in D)m[T]=D[T];for(let Z=0;Z<te.length;Z++)T=te[Z],Object.prototype.hasOwnProperty.call(D,T)&&(m[T]=D[T])}}function Pe(m){this.src=m,this.g={},this.h=0}Pe.prototype.add=function(m,w,T,D,J){const Z=m.toString();m=this.g[Z],m||(m=this.g[Z]=[],this.h++);const pe=Be(m,w,D,J);return pe>-1?(w=m[pe],T||(w.fa=!1)):(w=new $e(w,this.src,Z,!!D,J),w.fa=T,m.push(w)),w};function Ve(m,w){const T=w.type;if(T in m.g){var D=m.g[T],J=Array.prototype.indexOf.call(D,w,void 0),Z;(Z=J>=0)&&Array.prototype.splice.call(D,J,1),Z&&(le(w),m.g[T].length==0&&(delete m.g[T],m.h--))}}function Be(m,w,T,D){for(let J=0;J<m.length;++J){const Z=m[J];if(!Z.da&&Z.listener==w&&Z.capture==!!T&&Z.ha==D)return J}return-1}var Xe="closure_lm_"+(Math.random()*1e6|0),ne={};function ye(m,w,T,D,J){if(Array.isArray(w)){for(let Z=0;Z<w.length;Z++)ye(m,w[Z],T,D,J);return null}return T=ku(T),m&&m[Ce]?m.J(w,T,u(D)?!!D.capture:!1,J):fe(m,w,T,!1,D,J)}function fe(m,w,T,D,J,Z){if(!w)throw Error("Invalid event type");const pe=u(J)?!!J.capture:!!J;let Ue=Tl(m);if(Ue||(m[Xe]=Ue=new Pe(m)),T=Ue.add(w,T,D,pe,Z),T.proxy)return T;if(D=ot(),T.proxy=D,D.src=m,D.listener=T,m.addEventListener)z||(J=pe),J===void 0&&(J=!1),m.addEventListener(w.toString(),D,J);else if(m.attachEvent)m.attachEvent(El(w.toString()),D);else if(m.addListener&&m.removeListener)m.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return T}function ot(){function m(T){return w.call(m.src,m.listener,T)}const w=pp;return m}function dr(m,w,T,D,J){if(Array.isArray(w))for(var Z=0;Z<w.length;Z++)dr(m,w[Z],T,D,J);else D=u(D)?!!D.capture:!!D,T=ku(T),m&&m[Ce]?(m=m.i,Z=String(w).toString(),Z in m.g&&(w=m.g[Z],T=Be(w,T,D,J),T>-1&&(le(w[T]),Array.prototype.splice.call(w,T,1),w.length==0&&(delete m.g[Z],m.h--)))):m&&(m=Tl(m))&&(w=m.g[w.toString()],m=-1,w&&(m=Be(w,T,D,J)),(T=m>-1?w[m]:null)&&wi(T))}function wi(m){if(typeof m!="number"&&m&&!m.da){var w=m.src;if(w&&w[Ce])Ve(w.i,m);else{var T=m.type,D=m.proxy;w.removeEventListener?w.removeEventListener(T,D,m.capture):w.detachEvent?w.detachEvent(El(T),D):w.addListener&&w.removeListener&&w.removeListener(D),(T=Tl(w))?(Ve(T,m),T.h==0&&(T.src=null,w[Xe]=null)):le(m)}}}function El(m){return m in ne?ne[m]:ne[m]="on"+m}function pp(m,w){if(m.da)m=!0;else{w=new Te(w,this);const T=m.listener,D=m.ha||m.src;m.fa&&wi(m),m=T.call(D,w)}return m}function Tl(m){return m=m[Xe],m instanceof Pe?m:null}var Yo="__closure_events_fn_"+(Math.random()*1e9>>>0);function ku(m){return typeof m=="function"?m:(m[Yo]||(m[Yo]=function(w){return m.handleEvent(w)}),m[Yo])}function $t(){O.call(this),this.i=new Pe(this),this.M=this,this.G=null}y($t,O),$t.prototype[Ce]=!0,$t.prototype.removeEventListener=function(m,w,T,D){dr(this,m,w,T,D)};function Mt(m,w){var T,D=m.G;if(D)for(T=[];D;D=D.G)T.push(D);if(m=m.M,D=w.type||w,typeof w=="string")w=new B(w,m);else if(w instanceof B)w.target=w.target||m;else{var J=w;w=new B(D,m),Ne(w,J)}J=!0;let Z,pe;if(T)for(pe=T.length-1;pe>=0;pe--)Z=w.g=T[pe],J=Pr(Z,D,!0,w)&&J;if(Z=w.g=m,J=Pr(Z,D,!0,w)&&J,J=Pr(Z,D,!1,w)&&J,T)for(pe=0;pe<T.length;pe++)Z=w.g=T[pe],J=Pr(Z,D,!1,w)&&J}$t.prototype.N=function(){if($t.Z.N.call(this),this.i){var m=this.i;for(const w in m.g){const T=m.g[w];for(let D=0;D<T.length;D++)le(T[D]);delete m.g[w],m.h--}}this.G=null},$t.prototype.J=function(m,w,T,D){return this.i.add(String(m),w,!1,T,D)},$t.prototype.K=function(m,w,T,D){return this.i.add(String(m),w,!0,T,D)};function Pr(m,w,T,D){if(w=m.i.g[String(w)],!w)return!0;w=w.concat();let J=!0;for(let Z=0;Z<w.length;++Z){const pe=w[Z];if(pe&&!pe.da&&pe.capture==T){const Ue=pe.listener,Lt=pe.ha||pe.src;pe.fa&&Ve(m.i,pe),J=Ue.call(Lt,D)!==!1&&J}}return J&&!D.defaultPrevented}function Au(m,w){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=p(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(w)>2147483647?-1:o.setTimeout(m,w||0)}function Pu(m){m.g=Au(()=>{m.g=null,m.i&&(m.i=!1,Pu(m))},m.l);const w=m.h;m.h=null,m.m.apply(null,w)}class mp extends O{constructor(w,T){super(),this.m=w,this.l=T,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Pu(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Si(m){O.call(this),this.h=m,this.g={}}y(Si,O);var Nu=[];function Il(m){ie(m.g,function(w,T){this.g.hasOwnProperty(T)&&wi(w)},m),m.g={}}Si.prototype.N=function(){Si.Z.N.call(this),Il(this)},Si.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _i=o.JSON.stringify,fp=o.JSON.parse,Xo=class{stringify(m){return o.JSON.stringify(m,void 0)}parse(m){return o.JSON.parse(m,void 0)}};function Ei(){}function gp(){}var Ti={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cl(){B.call(this,"d")}y(Cl,B);function ju(){B.call(this,"c")}y(ju,B);var Nr={},kl=null;function Ii(){return kl=kl||new $t}Nr.Ia="serverreachability";function Al(m){B.call(this,Nr.Ia,m)}y(Al,B);function Ds(m){const w=Ii();Mt(w,new Al(w))}Nr.STAT_EVENT="statevent";function Os(m,w){B.call(this,Nr.STAT_EVENT,m),this.stat=w}y(Os,B);function Nt(m){const w=Ii();Mt(w,new Os(w,m))}Nr.Ja="timingevent";function Ru(m,w){B.call(this,Nr.Ja,m),this.size=w}y(Ru,B);function Ci(m,w){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){m()},w)}function ki(){this.g=!0}ki.prototype.ua=function(){this.g=!1};function yp(m,w,T,D,J,Z){m.info(function(){if(m.g)if(Z){var pe="",Ue=Z.split("&");for(let at=0;at<Ue.length;at++){var Lt=Ue[at].split("=");if(Lt.length>1){const zt=Lt[0];Lt=Lt[1];const er=zt.split("_");pe=er.length>=2&&er[1]=="type"?pe+(zt+"="+Lt+"&"):pe+(zt+"=redacted&")}}}else pe=null;else pe=Z;return"XMLHTTP REQ ("+D+") [attempt "+J+"]: "+w+`
`+T+`
`+pe})}function vp(m,w,T,D,J,Z,pe){m.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+J+"]: "+w+`
`+T+`
`+Z+" "+pe})}function Xr(m,w,T,D){m.info(function(){return"XMLHTTP TEXT ("+w+"): "+Zo(m,T)+(D?" "+D:"")})}function xp(m,w){m.info(function(){return"TIMEOUT: "+w})}ki.prototype.info=function(){};function Zo(m,w){if(!m.g)return w;if(!w)return null;try{const Z=JSON.parse(w);if(Z){for(m=0;m<Z.length;m++)if(Array.isArray(Z[m])){var T=Z[m];if(!(T.length<2)){var D=T[1];if(Array.isArray(D)&&!(D.length<1)){var J=D[0];if(J!="noop"&&J!="stop"&&J!="close")for(let pe=1;pe<D.length;pe++)D[pe]=""}}}}return _i(Z)}catch{return w}}var Ai={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Pi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bp;function Ms(){}y(Ms,Ei),Ms.prototype.g=function(){return new XMLHttpRequest},bp=new Ms;function Zr(m){return encodeURIComponent(String(m))}function Pl(m){var w=1;m=m.split(":");const T=[];for(;w>0&&m.length;)T.push(m.shift()),w--;return m.length&&T.push(m.join(":")),T}function hr(m,w,T,D){this.j=m,this.i=w,this.l=T,this.S=D||1,this.V=new Si(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new wp}function wp(){this.i=null,this.g="",this.h=!1}var Sp={},Du={};function jr(m,w,T){m.M=1,m.A=Fs(pr(w)),m.u=T,m.R=!0,Ou(m,null)}function Ou(m,w){m.F=Date.now(),ea(m),m.B=pr(m.A);var T=m.B,D=m.S;Array.isArray(D)||(D=[String(D)]),qu(T.i,"t",D),m.C=0,T=m.j.L,m.h=new wp,m.g=jp(m.j,T?w:null,!m.u),m.P>0&&(m.O=new mp(p(m.Y,m,m.g),m.P)),w=m.V,T=m.g,D=m.ba;var J="readystatechange";Array.isArray(J)||(J&&(Nu[0]=J.toString()),J=Nu);for(let Z=0;Z<J.length;Z++){const pe=ye(T,J[Z],D||w.handleEvent,!1,w.h||w);if(!pe)break;w.g[pe.key]=pe}w=m.J?U(m.J):{},m.u?(m.v||(m.v="POST"),w["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,w)):(m.v="GET",m.g.ea(m.B,m.v,null,w)),Ds(),yp(m.i,m.v,m.B,m.l,m.S,m.u)}hr.prototype.ba=function(m){m=m.target;const w=this.O;w&&os(m)==3?w.j():this.Y(m)},hr.prototype.Y=function(m){try{if(m==this.g)e:{const Ue=os(this.g),Lt=this.g.ya(),at=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||Pp(this.g)))){this.K||Ue!=4||Lt==7||(Lt==8||at<=0?Ds(3):Ds(2)),Nl(this);var w=this.g.ca();this.X=w;var T=_p(this);if(this.o=w==200,vp(this.i,this.v,this.B,this.l,this.S,Ue,w),this.o){if(this.U&&!this.L){t:{if(this.g){var D,J=this.g;if((D=J.g?J.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(D)){var Z=D;break t}}Z=null}if(m=Z)Xr(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yt(this,m);else{this.o=!1,this.m=3,Nt(12),Ls(this),ta(this);break e}}if(this.R){m=!0;let zt;for(;!this.K&&this.C<T.length;)if(zt=Tp(this,T),zt==Du){Ue==4&&(this.m=4,Nt(14),m=!1),Xr(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Sp){this.m=4,Nt(15),Xr(this.i,this.l,T,"[Invalid Chunk]"),m=!1;break}else Xr(this.i,this.l,zt,null),yt(this,zt);if(Ep(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||T.length!=0||this.h.h||(this.m=1,Nt(16),m=!1),this.o=this.o&&m,!m)Xr(this.i,this.l,T,"[Invalid Chunked Response]"),Ls(this),ta(this);else if(T.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),ua(pe),pe.P=!0,Nt(11))}}else Xr(this.i,this.l,T,null),yt(this,T);Ue==4&&Ls(this),this.o&&!this.K&&(Ue==4?Ul(this.j,this):(this.o=!1,ea(this)))}else Wu(this.g),w==400&&T.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Ls(this),ta(this)}}}catch{}finally{}};function _p(m){if(!Ep(m))return m.g.la();const w=Pp(m.g);if(w==="")return"";let T="";const D=w.length,J=os(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return Ls(m),ta(m),"";m.h.i=new o.TextDecoder}for(let Z=0;Z<D;Z++)m.h.h=!0,T+=m.h.i.decode(w[Z],{stream:!(J&&Z==D-1)});return w.length=0,m.h.g+=T,m.C=0,m.h.g}function Ep(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function Tp(m,w){var T=m.C,D=w.indexOf(`
`,T);return D==-1?Du:(T=Number(w.substring(T,D)),isNaN(T)?Sp:(D+=1,D+T>w.length?Du:(w=w.slice(D,D+T),m.C=D+T,w)))}hr.prototype.cancel=function(){this.K=!0,Ls(this)};function ea(m){m.T=Date.now()+m.H,Mu(m,m.H)}function Mu(m,w){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ci(p(m.aa,m),w)}function Nl(m){m.D&&(o.clearTimeout(m.D),m.D=null)}hr.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(xp(this.i,this.B),this.M!=2&&(Ds(),Nt(17)),Ls(this),this.m=2,ta(this)):Mu(this,this.T-m)};function ta(m){m.j.I==0||m.K||Ul(m.j,m)}function Ls(m){Nl(m);var w=m.O;w&&typeof w.dispose=="function"&&w.dispose(),m.O=null,Il(m.V),m.g&&(w=m.g,m.g=null,w.abort(),w.dispose())}function yt(m,w){try{var T=m.j;if(T.I!=0&&(T.g==m||Fu(T.h,m))){if(!m.L&&Fu(T.h,m)&&T.I==3){try{var D=T.Ba.g.parse(w)}catch{D=null}if(Array.isArray(D)&&D.length==3){var J=D;if(J[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<m.F)Bl(T),Xn(T);else break e;cs(T),Nt(18)}}else T.xa=J[1],0<T.xa-T.K&&J[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Ci(p(T.Va,T),6e3));na(T.h)<=1&&T.ta&&(T.ta=void 0)}else Zn(T,11)}else if((m.L||T.g==m)&&Bl(T),!L(w))for(J=T.Ba.g.parse(w),w=0;w<J.length;w++){let at=J[w];const zt=at[0];if(!(zt<=T.K))if(T.K=zt,at=at[1],T.I==2)if(at[0]=="c"){T.M=at[1],T.ba=at[2];const er=at[3];er!=null&&(T.ka=er,T.j.info("VER="+T.ka));const zs=at[4];zs!=null&&(T.za=zs,T.j.info("SVER="+T.za));const us=at[5];us!=null&&typeof us=="number"&&us>0&&(D=1.5*us,T.O=D,T.j.info("backChannelRequestTimeoutMs_="+D)),D=T;const ds=m.g;if(ds){const Hl=ds.g?ds.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hl){var Z=D.h;Z.g||Hl.indexOf("spdy")==-1&&Hl.indexOf("quic")==-1&&Hl.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Rl(Z,Z.h),Z.h=null))}if(D.G){const Qu=ds.g?ds.g.getResponseHeader("X-HTTP-Session-Id"):null;Qu&&(D.wa=Qu,rt(D.J,D.G,Qu))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-m.F,T.j.info("Handshake RTT: "+T.T+"ms")),D=T;var pe=m;if(D.na=Ju(D,D.L?D.ba:null,D.W),pe.L){ra(D.h,pe);var Ue=pe,Lt=D.O;Lt&&(Ue.H=Lt),Ue.D&&(Nl(Ue),ea(Ue)),D.g=pe}else fn(D);T.i.length>0&&$s(T)}else at[0]!="stop"&&at[0]!="close"||Zn(T,7);else T.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Zn(T,7):Fl(T):at[0]!="noop"&&T.l&&T.l.qa(at),T.A=0)}}Ds(4)}catch{}}var hy=class{constructor(m,w){this.g=m,this.map=w}};function jl(m){this.l=m||10,o.PerformanceNavigationTiming?(m=o.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lu(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function na(m){return m.h?1:m.g?m.g.size:0}function Fu(m,w){return m.h?m.h==w:m.g?m.g.has(w):!1}function Rl(m,w){m.g?m.g.add(w):m.h=w}function ra(m,w){m.h&&m.h==w?m.h=null:m.g&&m.g.has(w)&&m.g.delete(w)}jl.prototype.cancel=function(){if(this.i=Jn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function Jn(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let w=m.i;for(const T of m.g.values())w=w.concat(T.G);return w}return S(m.i)}var Ip=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qn(m,w){if(m){m=m.split("&");for(let T=0;T<m.length;T++){const D=m[T].indexOf("=");let J,Z=null;D>=0?(J=m[T].substring(0,D),Z=m[T].substring(D+1)):J=m[T],w(J,Z?decodeURIComponent(Z.replace(/\+/g," ")):"")}}}function es(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let w;m instanceof es?(this.l=m.l,sa(this,m.j),this.o=m.o,this.g=m.g,ts(this,m.u),this.h=m.h,Ni(this,Gu(m.i)),this.m=m.m):m&&(w=String(m).match(Ip))?(this.l=!1,sa(this,w[1]||"",!0),this.o=ia(w[2]||""),this.g=ia(w[3]||"",!0),ts(this,w[4]),this.h=ia(w[5]||"",!0),Ni(this,w[6]||"",!0),this.m=ia(w[7]||"")):(this.l=!1,this.i=new Ze(null,this.l))}es.prototype.toString=function(){const m=[];var w=this.j;w&&m.push(oa(w,Bu,!0),":");var T=this.g;return(T||w=="file")&&(m.push("//"),(w=this.o)&&m.push(oa(w,Bu,!0),"@"),m.push(Zr(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&m.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&m.push("/"),m.push(oa(T,T.charAt(0)=="/"?aa:Uu,!0))),(T=this.i.toString())&&m.push("?",T),(T=this.m)&&m.push("#",oa(T,$u)),m.join("")},es.prototype.resolve=function(m){const w=pr(this);let T=!!m.j;T?sa(w,m.j):T=!!m.o,T?w.o=m.o:T=!!m.g,T?w.g=m.g:T=m.u!=null;var D=m.h;if(T)ts(w,m.u);else if(T=!!m.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var J=w.h.lastIndexOf("/");J!=-1&&(D=w.h.slice(0,J+1)+D)}if(J=D,J==".."||J==".")D="";else if(J.indexOf("./")!=-1||J.indexOf("/.")!=-1){D=J.lastIndexOf("/",0)==0,J=J.split("/");const Z=[];for(let pe=0;pe<J.length;){const Ue=J[pe++];Ue=="."?D&&pe==J.length&&Z.push(""):Ue==".."?((Z.length>1||Z.length==1&&Z[0]!="")&&Z.pop(),D&&pe==J.length&&Z.push("")):(Z.push(Ue),D=!0)}D=Z.join("/")}else D=J}return T?w.h=D:T=m.i.toString()!=="",T?Ni(w,Gu(m.i)):T=!!m.m,T&&(w.m=m.m),w};function pr(m){return new es(m)}function sa(m,w,T){m.j=T?ia(w,!0):w,m.j&&(m.j=m.j.replace(/:$/,""))}function ts(m,w){if(w){if(w=Number(w),isNaN(w)||w<0)throw Error("Bad port number "+w);m.u=w}else m.u=null}function Ni(m,w,T){w instanceof Ze?(m.i=w,Ol(m.i,m.l)):(T||(w=oa(w,py)),m.i=new Ze(w,m.l))}function rt(m,w,T){m.i.set(w,T)}function Fs(m){return rt(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function ia(m,w){return m?w?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function oa(m,w,T){return typeof m=="string"?(m=encodeURI(m).replace(w,Vu),T&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vu(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Bu=/[#\/\?@]/g,Uu=/[#\?:]/g,aa=/[#\?]/g,py=/[#\?@]/g,$u=/#/g;function Ze(m,w){this.h=this.g=null,this.i=m||null,this.j=!!w}function ns(m){m.g||(m.g=new Map,m.h=0,m.i&&Qn(m.i,function(w,T){m.add(decodeURIComponent(w.replace(/\+/g," ")),T)}))}n=Ze.prototype,n.add=function(m,w){ns(this),this.i=null,m=rs(this,m);let T=this.g.get(m);return T||this.g.set(m,T=[]),T.push(w),this.h+=1,this};function zu(m,w){ns(m),w=rs(m,w),m.g.has(w)&&(m.i=null,m.h-=m.g.get(w).length,m.g.delete(w))}function Dl(m,w){return ns(m),w=rs(m,w),m.g.has(w)}n.forEach=function(m,w){ns(this),this.g.forEach(function(T,D){T.forEach(function(J){m.call(w,J,D,this)},this)},this)};function Hu(m,w){ns(m);let T=[];if(typeof w=="string")Dl(m,w)&&(T=T.concat(m.g.get(rs(m,w))));else for(m=Array.from(m.g.values()),w=0;w<m.length;w++)T=T.concat(m[w]);return T}n.set=function(m,w){return ns(this),this.i=null,m=rs(this,m),Dl(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[w]),this.h+=1,this},n.get=function(m,w){return m?(m=Hu(this,m),m.length>0?String(m[0]):w):w};function qu(m,w,T){zu(m,w),T.length>0&&(m.i=null,m.g.set(rs(m,w),S(T)),m.h+=T.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],w=Array.from(this.g.keys());for(let D=0;D<w.length;D++){var T=w[D];const J=Zr(T);T=Hu(this,T);for(let Z=0;Z<T.length;Z++){let pe=J;T[Z]!==""&&(pe+="="+Zr(T[Z])),m.push(pe)}}return this.i=m.join("&")};function Gu(m){const w=new Ze;return w.i=m.i,m.g&&(w.g=new Map(m.g),w.h=m.h),w}function rs(m,w){return w=String(w),m.j&&(w=w.toLowerCase()),w}function Ol(m,w){w&&!m.j&&(ns(m),m.i=null,m.g.forEach(function(T,D){const J=D.toLowerCase();D!=J&&(zu(this,D),qu(this,J,T))},m)),m.j=w}function ss(m,w){const T=new ki;if(o.Image){const D=new Image;D.onload=f(cn,T,"TestLoadImage: loaded",!0,w,D),D.onerror=f(cn,T,"TestLoadImage: error",!1,w,D),D.onabort=f(cn,T,"TestLoadImage: abort",!1,w,D),D.ontimeout=f(cn,T,"TestLoadImage: timeout",!1,w,D),o.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=m}else w(!1)}function is(m,w){const T=new ki,D=new AbortController,J=setTimeout(()=>{D.abort(),cn(T,"TestPingServer: timeout",!1,w)},1e4);fetch(m,{signal:D.signal}).then(Z=>{clearTimeout(J),Z.ok?cn(T,"TestPingServer: ok",!0,w):cn(T,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(J),cn(T,"TestPingServer: error",!1,w)})}function cn(m,w,T,D,J){try{J&&(J.onload=null,J.onerror=null,J.onabort=null,J.ontimeout=null),D(T)}catch{}}function la(){this.g=new Xo}function Vs(m){this.i=m.Sb||null,this.h=m.ab||!1}y(Vs,Ei),Vs.prototype.g=function(){return new Yn(this.i,this.h)};function Yn(m,w){$t.call(this),this.H=m,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}y(Yn,$t),n=Yn.prototype,n.open=function(m,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=w,this.readyState=1,Rr(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const w={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(w.body=m),(this.H||o).fetch(new Request(this.D,w)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Rr(this)),this.g&&(this.readyState=3,Rr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cp(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cp(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var w=m.value?m.value:new Uint8Array(0);(w=this.B.decode(w,{stream:!m.done}))&&(this.response=this.responseText+=w)}m.done?ji(this):Rr(this),this.readyState==3&&Cp(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,ji(this))},n.Na=function(m){this.g&&(this.response=m,ji(this))},n.ga=function(){this.g&&ji(this)};function ji(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Rr(m)}n.setRequestHeader=function(m,w){this.A.append(m,w)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],w=this.h.entries();for(var T=w.next();!T.done;)T=T.value,m.push(T[0]+": "+T[1]),T=w.next();return m.join(`\r
`)};function Rr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(Yn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function kp(m){let w="";return ie(m,function(T,D){w+=D,w+=":",w+=T,w+=`\r
`}),w}function Ml(m,w,T){e:{for(D in T){var D=!1;break e}D=!0}D||(T=kp(T),typeof m=="string"?T!=null&&Zr(T):rt(m,w,T))}function ht(m){$t.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}y(ht,$t);var Ap=/^https?$/i,my=["POST","PUT"];n=ht.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,w,T,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);w=w?w.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bp.g(),this.g.onreadystatechange=x(p(this.Ca,this));try{this.B=!0,this.g.open(w,String(m),!0),this.B=!1}catch(Z){Ri(this,Z);return}if(m=T||"",T=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var J in D)T.set(J,D[J]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const Z of D.keys())T.set(Z,D.get(Z));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(T.keys()).find(Z=>Z.toLowerCase()=="content-type"),J=o.FormData&&m instanceof o.FormData,!(Array.prototype.indexOf.call(my,w,void 0)>=0)||D||J||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,pe]of T)this.g.setRequestHeader(Z,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(Z){Ri(this,Z)}};function Ri(m,w){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=w,m.o=5,Di(m),Us(m)}function Di(m){m.A||(m.A=!0,Mt(m,"complete"),Mt(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Mt(this,"complete"),Mt(this,"abort"),Us(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Us(this,!0)),ht.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Bs(this):this.Xa())},n.Xa=function(){Bs(this)};function Bs(m){if(m.h&&typeof i<"u"){if(m.v&&os(m)==4)setTimeout(m.Ca.bind(m),0);else if(Mt(m,"readystatechange"),os(m)==4){m.h=!1;try{const Z=m.ca();e:switch(Z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var T;if(!(T=w)){var D;if(D=Z===0){let pe=String(m.D).match(Ip)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),D=!Ap.test(pe?pe.toLowerCase():"")}T=D}if(T)Mt(m,"complete"),Mt(m,"success");else{m.o=6;try{var J=os(m)>2?m.g.statusText:""}catch{J=""}m.l=J+" ["+m.ca()+"]",Di(m)}}finally{Us(m)}}}}function Us(m,w){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const T=m.g;m.g=null,w||Mt(m,"ready");try{T.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function os(m){return m.g?m.g.readyState:0}n.ca=function(){try{return os(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var w=this.g.responseText;return m&&w.indexOf(m)==0&&(w=w.substring(m.length)),fp(w)}};function Pp(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Wu(m){const w={};m=(m.g&&os(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<m.length;D++){if(L(m[D]))continue;var T=Pl(m[D]);const J=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Z=w[J]||[];w[J]=Z,Z.push(T)}se(w,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function as(m,w,T){return T&&T.internalChannelParams&&T.internalChannelParams[m]||w}function Ll(m){this.za=0,this.i=[],this.j=new ki,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=as("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=as("baseRetryDelayMs",5e3,m),this.Za=as("retryDelaySeedMs",1e4,m),this.Ta=as("forwardChannelMaxRetries",2,m),this.va=as("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new jl(m&&m.concurrentRequestLimit),this.Ba=new la,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ll.prototype,n.ka=8,n.I=1,n.connect=function(m,w,T,D){Nt(0),this.W=m,this.H=w||{},T&&D!==void 0&&(this.H.OSID=T,this.H.OAID=D),this.F=this.X,this.J=Ju(this,null,this.W),$s(this)};function Fl(m){if(Vl(m),m.I==3){var w=m.V++,T=pr(m.J);if(rt(T,"SID",m.M),rt(T,"RID",w),rt(T,"TYPE","terminate"),ls(m,T),w=new hr(m,m.j,w),w.M=2,w.A=Fs(pr(T)),T=!1,o.navigator&&o.navigator.sendBeacon)try{T=o.navigator.sendBeacon(w.A.toString(),"")}catch{}!T&&o.Image&&(new Image().src=w.A,T=!0),T||(w.g=jp(w.j,null),w.g.ea(w.A)),w.F=Date.now(),ea(w)}da(m)}function Xn(m){m.g&&(ua(m),m.g.cancel(),m.g=null)}function Vl(m){Xn(m),m.v&&(o.clearTimeout(m.v),m.v=null),Bl(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&o.clearTimeout(m.m),m.m=null)}function $s(m){if(!Lu(m.h)&&!m.m){m.m=!0;var w=m.Ea;G||_(),q||(G(),q=!0),N.add(w,m),m.D=0}}function Np(m,w){return na(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=w.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ci(p(m.Ea,m,w),$l(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const J=new hr(this,this.j,m);let Z=this.o;if(this.U&&(Z?(Z=U(Z),Ne(Z,this.U)):Z=this.U),this.u!==null||this.R||(J.J=Z,Z=null),this.S)e:{for(var w=0,T=0;T<this.i.length;T++){t:{var D=this.i[T];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(w+=D,w>4096){w=T;break e}if(w===4096||T===this.i.length-1){w=T+1;break e}}w=1e3}else w=1e3;w=Ku(this,J,w),T=pr(this.J),rt(T,"RID",m),rt(T,"CVER",22),this.G&&rt(T,"X-HTTP-Session-Id",this.G),ls(this,T),Z&&(this.R?w="headers="+Zr(kp(Z))+"&"+w:this.u&&Ml(T,this.u,Z)),Rl(this.h,J),this.Ra&&rt(T,"TYPE","init"),this.S?(rt(T,"$req",w),rt(T,"SID","null"),J.U=!0,jr(J,T,null)):jr(J,T,w),this.I=2}}else this.I==3&&(m?ca(this,m):this.i.length==0||Lu(this.h)||ca(this))};function ca(m,w){var T;w?T=w.l:T=m.V++;const D=pr(m.J);rt(D,"SID",m.M),rt(D,"RID",T),rt(D,"AID",m.K),ls(m,D),m.u&&m.o&&Ml(D,m.u,m.o),T=new hr(m,m.j,T,m.D+1),m.u===null&&(T.J=m.o),w&&(m.i=w.G.concat(m.i)),w=Ku(m,T,1e3),T.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Rl(m.h,T),jr(T,D,w)}function ls(m,w){m.H&&ie(m.H,function(T,D){rt(w,D,T)}),m.l&&ie({},function(T,D){rt(w,D,T)})}function Ku(m,w,T){T=Math.min(m.i.length,T);const D=m.l?p(m.l.Ka,m.l,m):null;e:{var J=m.i;let Ue=-1;for(;;){const Lt=["count="+T];Ue==-1?T>0?(Ue=J[0].g,Lt.push("ofs="+Ue)):Ue=0:Lt.push("ofs="+Ue);let at=!0;for(let zt=0;zt<T;zt++){var Z=J[zt].g;const er=J[zt].map;if(Z-=Ue,Z<0)Ue=Math.max(0,J[zt].g-100),at=!1;else try{Z="req"+Z+"_"||"";try{var pe=er instanceof Map?er:Object.entries(er);for(const[zs,us]of pe){let ds=us;u(us)&&(ds=_i(us)),Lt.push(Z+zs+"="+encodeURIComponent(ds))}}catch(zs){throw Lt.push(Z+"type="+encodeURIComponent("_badmap")),zs}}catch{D&&D(er)}}if(at){pe=Lt.join("&");break e}}pe=void 0}return m=m.i.splice(0,T),w.G=m,pe}function fn(m){if(!m.g&&!m.v){m.Y=1;var w=m.Da;G||_(),q||(G(),q=!0),N.add(w,m),m.A=0}}function cs(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ci(p(m.Da,m),$l(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,Oi(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ci(p(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),Xn(this),Oi(this))};function ua(m){m.B!=null&&(o.clearTimeout(m.B),m.B=null)}function Oi(m){m.g=new hr(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var w=pr(m.na);rt(w,"RID","rpc"),rt(w,"SID",m.M),rt(w,"AID",m.K),rt(w,"CI",m.F?"0":"1"),!m.F&&m.ia&&rt(w,"TO",m.ia),rt(w,"TYPE","xmlhttp"),ls(m,w),m.u&&m.o&&Ml(w,m.u,m.o),m.O&&(m.g.H=m.O);var T=m.g;m=m.ba,T.M=1,T.A=Fs(pr(w)),T.u=null,T.R=!0,Ou(T,m)}n.Va=function(){this.C!=null&&(this.C=null,Xn(this),cs(this),Nt(19))};function Bl(m){m.C!=null&&(o.clearTimeout(m.C),m.C=null)}function Ul(m,w){var T=null;if(m.g==w){Bl(m),ua(m),m.g=null;var D=2}else if(Fu(m.h,w))T=w.G,ra(m.h,w),D=1;else return;if(m.I!=0){if(w.o)if(D==1){T=w.u?w.u.length:0,w=Date.now()-w.F;var J=m.D;D=Ii(),Mt(D,new Ru(D,T)),$s(m)}else fn(m);else if(J=w.m,J==3||J==0&&w.X>0||!(D==1&&Np(m,w)||D==2&&cs(m)))switch(T&&T.length>0&&(w=m.h,w.i=w.i.concat(T)),J){case 1:Zn(m,5);break;case 4:Zn(m,10);break;case 3:Zn(m,6);break;default:Zn(m,2)}}}function $l(m,w){let T=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(T*=2),T*w}function Zn(m,w){if(m.j.info("Error code "+w),w==2){var T=p(m.bb,m),D=m.Ua;const J=!D;D=new es(D||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||sa(D,"https"),Fs(D),J?ss(D.toString(),T):is(D.toString(),T)}else Nt(2);m.I=0,m.l&&m.l.pa(w),da(m),Vl(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function da(m){if(m.I=0,m.ja=[],m.l){const w=Jn(m.h);(w.length!=0||m.i.length!=0)&&(E(m.ja,w),E(m.ja,m.i),m.h.i.length=0,S(m.i),m.i.length=0),m.l.oa()}}function Ju(m,w,T){var D=T instanceof es?pr(T):new es(T);if(D.g!="")w&&(D.g=w+"."+D.g),ts(D,D.u);else{var J=o.location;D=J.protocol,w=w?w+"."+J.hostname:J.hostname,J=+J.port;const Z=new es(null);D&&sa(Z,D),w&&(Z.g=w),J&&ts(Z,J),T&&(Z.h=T),D=Z}return T=m.G,w=m.wa,T&&w&&rt(D,T,w),rt(D,"VER",m.ka),ls(m,D),D}function jp(m,w,T){if(w&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return w=m.Aa&&!m.ma?new ht(new Vs({ab:T})):new ht(m.ma),w.Fa(m.L),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rp(){}n=Rp.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function zl(){}zl.prototype.g=function(m,w){return new un(m,w)};function un(m,w){$t.call(this),this.g=new Ll(w),this.l=m,this.h=w&&w.messageUrlParams||null,m=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(m?m["X-WebChannel-Content-Type"]=w.messageContentType:m={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.sa&&(m?m["X-WebChannel-Client-Profile"]=w.sa:m={"X-WebChannel-Client-Profile":w.sa}),this.g.U=m,(m=w&&w.Qb)&&!L(m)&&(this.g.u=m),this.A=w&&w.supportsCrossDomainXhr||!1,this.v=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.G=w,m=this.h,m!==null&&w in m&&(m=this.h,w in m&&delete m[w])),this.j=new Mi(this)}y(un,$t),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){Fl(this.g)},un.prototype.o=function(m){var w=this.g;if(typeof m=="string"){var T={};T.__data__=m,m=T}else this.v&&(T={},T.__data__=_i(m),m=T);w.i.push(new hy(w.Ya++,m)),w.I==3&&$s(w)},un.prototype.N=function(){this.g.l=null,delete this.j,Fl(this.g),delete this.g,un.Z.N.call(this)};function Dp(m){Cl.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var w=m.__sm__;if(w){e:{for(const T in w){m=T;break e}m=void 0}(this.i=m)&&(m=this.i,w=w!==null&&m in w?w[m]:void 0),this.data=w}else this.data=m}y(Dp,Cl);function Op(){ju.call(this),this.status=1}y(Op,ju);function Mi(m){this.g=m}y(Mi,Rp),Mi.prototype.ra=function(){Mt(this.g,"a")},Mi.prototype.qa=function(m){Mt(this.g,new Dp(m))},Mi.prototype.pa=function(m){Mt(this.g,new Op)},Mi.prototype.oa=function(){Mt(this.g,"b")},zl.prototype.createWebChannel=zl.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,iA=function(){return new zl},sA=function(){return Ii()},rA=Nr,Hx={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ai.NO_ERROR=0,Ai.TIMEOUT=8,Ai.HTTP_ERROR=6,nf=Ai,Pi.COMPLETE="complete",nA=Pi,gp.EventType=Ti,Ti.OPEN="a",Ti.CLOSE="b",Ti.ERROR="c",Ti.MESSAGE="d",$t.prototype.listen=$t.prototype.J,Nd=gp,ht.prototype.listenOnce=ht.prototype.K,ht.prototype.getLastError=ht.prototype.Ha,ht.prototype.getLastErrorCode=ht.prototype.ya,ht.prototype.getStatus=ht.prototype.ca,ht.prototype.getResponseJson=ht.prototype.La,ht.prototype.getResponseText=ht.prototype.la,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Fa,tA=ht}).apply(typeof Nm<"u"?Nm:typeof self<"u"?self:typeof window<"u"?window:{});const pT="@firebase/firestore",mT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao=new o0("@firebase/firestore");function Sc(){return Ao.logLevel}function MV(n){Ao.setLogLevel(n)}function oe(n,...e){if(Ao.logLevel<=Je.DEBUG){const t=e.map(b0);Ao.debug(`Firestore (${hu}): ${n}`,...t)}}function Vt(n,...e){if(Ao.logLevel<=Je.ERROR){const t=e.map(b0);Ao.error(`Firestore (${hu}): ${n}`,...t)}}function lr(n,...e){if(Ao.logLevel<=Je.WARN){const t=e.map(b0);Ao.warn(`Firestore (${hu}): ${n}`,...t)}}function b0(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,oA(n,r,t)}function oA(n,e,t){let r=`FIRESTORE (${hu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Vt(r),new Error(r)}function Ee(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||oA(e,s,r)}function LV(n,e){n||xe(57014,e)}function me(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends Qr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(an.UNAUTHENTICATED)))}shutdown(){}}class FV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class VV{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let r=this.i;const s=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let i=new ln;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ln,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const d=i;e.enqueueRetryable((async()=>{await d.promise,await s(this.currentUser)}))},u=d=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((d=>u(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?u(d):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ln)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new aA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class BV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new BV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class qx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $V{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const r=i=>{i.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable((()=>r(i)))};const s=i=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new qx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new qx(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class zV{getToken(){return Promise.resolve(new qx(""))}invalidateToken(){}start(e,t){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=HV(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function Oe(n,e){return n<e?-1:n>e?1:0}function Gx(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const s=n.charAt(r),i=e.charAt(r);if(s!==i)return Kv(s)===Kv(i)?Oe(s,i):Kv(s)?1:-1}return Oe(n.length,e.length)}const qV=55296,GV=57343;function Kv(n){const e=n.charCodeAt(0);return e>=qV&&e<=GV}function Bc(n,e,t){return n.length===e.length&&n.every(((r,s)=>t(r,e[s])))}function cA(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx="__name__";class ys{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ys.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ys?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=ys.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return Oe(e.length,t.length)}static compareSegments(e,t){const r=ys.isNumericId(e),s=ys.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?ys.extractNumericId(e).compare(ys.extractNumericId(t)):Gx(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xo.fromString(e.substring(4,e.length-2))}}class We extends ys{construct(e,t,r){return new We(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((s=>s.length>0)))}return new We(t)}static emptyPath(){return new We([])}}const WV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends ys{construct(e,t,r){return new wt(e,t,r)}static isValidIdentifier(e){return WV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wx}static keyField(){return new wt([Wx])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new re(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new re(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new re(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(t)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(We.fromString(e))}static fromName(e){return new he(We.fromString(e).popFirst(5))}static empty(){return new he(We.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&We.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return We.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new We(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(n,e,t){if(!t)throw new re(Q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uA(n,e,t,r){if(e===!0&&r===!0)throw new re(Q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function fT(n){if(!he.isDocumentKey(n))throw new re(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gT(n){if(he.isDocumentKey(n))throw new re(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dA(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function yg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function Ke(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new re(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yg(n);throw new re(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function hA(n,e){if(e<=0)throw new re(Q.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n,e){const t={typeString:n};return e&&(t.value=e),t}function yl(n,e){if(!dA(n))throw new re(Q.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const o=n[r];if(s&&typeof o!==s){t=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){t=`Expected '${r}' field to equal '${i.value}'`;break}}if(t)throw new re(Q.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT=-62135596800,vT=1e6;class it{static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*vT);return new it(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new re(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<yT)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vT}_compareTo(e){return this.seconds===e.seconds?Oe(this.nanoseconds,e.nanoseconds):Oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:it._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yl(e,it._jsonSchema))return new it(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}it._jsonSchemaVersion="firestore/timestamp/1.0",it._jsonSchema={type:Wt("string",it._jsonSchemaVersion),seconds:Wt("number"),nanoseconds:Wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new it(0,0))}static max(){return new Ae(new it(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=-1;class $c{constructor(e,t,r,s){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=s}}function Kx(n){return n.fields.find((e=>e.kind===2))}function Ca(n){return n.fields.filter((e=>e.kind!==2))}function KV(n,e){let t=Oe(n.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let r=0;r<Math.min(n.fields.length,e.fields.length);++r)if(t=JV(n.fields[r],e.fields[r]),t!==0)return t;return Oe(n.fields.length,e.fields.length)}$c.UNKNOWN_ID=-1;class qa{constructor(e,t){this.fieldPath=e,this.kind=t}}function JV(n,e){const t=wt.comparator(n.fieldPath,e.fieldPath);return t!==0?t:Oe(n.kind,e.kind)}class zc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new zc(0,cr.min())}}function pA(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(r===1e9?new it(t+1,0):new it(t,r));return new cr(s,he.empty(),e)}function mA(n){return new cr(n.readTime,n.key,Uc)}class cr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new cr(Ae.min(),he.empty(),Uc)}static max(){return new cr(Ae.max(),he.empty(),Uc)}}function S0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Oe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uo(n){if(n.code!==Q.FAILED_PRECONDITION||n.message!==fA)throw n;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new W(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof W?t:W.resolve(t)}catch(t){return W.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):W.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):W.reject(t)}static resolve(e){return new W(((t,r)=>{t(e)}))}static reject(e){return new W(((t,r)=>{r(e)}))}static waitFor(e){return new W(((t,r)=>{let s=0,i=0,o=!1;e.forEach((u=>{++s,u.next((()=>{++i,o&&i===s&&t()}),(d=>r(d)))})),o=!0,i===s&&t()}))}static or(e){let t=W.resolve(!1);for(const r of e)t=t.next((s=>s?W.resolve(s):r()));return t}static forEach(e,t){const r=[];return e.forEach(((s,i)=>{r.push(t.call(this,s,i))})),this.waitFor(r)}static mapArray(e,t){return new W(((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let d=0;d<i;d++){const p=d;t(e[p]).next((f=>{o[p]=f,++u,u===i&&r(o)}),(f=>s(f)))}}))}static doWhile(e,t){return new W(((r,s)=>{const i=()=>{e()===!0?t().next((()=>{i()}),s):r()};i()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="SimpleDb";class vg{static open(e,t,r,s){try{return new vg(t,e.transaction(s,r))}catch(i){throw new Ud(t,i)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new ln,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Ud(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const s=_0(r.target.error);this.S.reject(new Ud(e,s))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(sr,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new YV(t)}}class Cs{static delete(e){return oe(sr,"Removing database:",e),Oa(rk().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!hk())return!1;if(Cs.F())return!0;const e=Xt(),t=Cs.M(e),r=0<t&&t<10,s=yA(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Cs.M(Xt())===12.2&&Vt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(oe(sr,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;t(o)},s.onblocked=()=>{r(new Ud(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new re(Q.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new re(Q.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Ud(e,o))},s.onupgradeneeded=i=>{oe(sr,'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.N.k(o,s.transaction,i.oldVersion,this.version).next((()=>{oe(sr,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,s){const i=t==="readonly";let o=0;for(;;){++o;try{this.db=await this.L(e);const u=vg.open(this.db,e,i?"readonly":"readwrite",r),d=s(u).next((p=>(u.C(),p))).catch((p=>(u.abort(p),W.reject(p)))).toPromise();return d.catch((()=>{})),await u.D,d}catch(u){const d=u,p=d.name!=="FirebaseError"&&o<3;if(oe(sr,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function yA(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class QV{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Oa(this.U.delete())}}class Ud extends re{constructor(e,t){super(Q.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function $o(n){return n.name==="IndexedDbTransactionError"}class YV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe(sr,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe(sr,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Oa(r)}add(e){return oe(sr,"ADD",this.store.name,e,e),Oa(this.store.add(e))}get(e){return Oa(this.store.get(e)).next((t=>(t===void 0&&(t=null),oe(sr,"GET",this.store.name,e,t),t)))}delete(e){return oe(sr,"DELETE",this.store.name,e),Oa(this.store.delete(e))}count(){return oe(sr,"COUNT",this.store.name),Oa(this.store.count())}J(e,t){const r=this.options(e,t),s=r.index?this.store.index(r.index):this.store;if(typeof s.getAll=="function"){const i=s.getAll(r.range);return new W(((o,u)=>{i.onerror=d=>{u(d.target.error)},i.onsuccess=d=>{o(d.target.result)}}))}{const i=this.cursor(r),o=[];return this.H(i,((u,d)=>{o.push(d)})).next((()=>o))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new W(((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}}))}Z(e,t){oe(sr,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const s=this.cursor(r);return this.H(s,((i,o,u)=>u.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const s=this.cursor(r);return this.H(s,t)}te(e){const t=this.cursor({});return new W(((r,s)=>{t.onerror=i=>{const o=_0(i.target.error);s(o)},t.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next((u=>{u?o.continue():r()})):r()}}))}H(e,t){const r=[];return new W(((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const u=o.target.result;if(!u)return void s();const d=new QV(u),p=t(u.primaryKey,u.value,d);if(p instanceof W){const f=p.catch((y=>(d.done(),W.reject(y))));r.push(f)}d.isDone?s():d.G===null?u.continue():u.continue(d.G)}})).next((()=>W.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Oa(n){return new W(((e,t)=>{n.onsuccess=r=>{const s=r.target.result;e(s)},n.onerror=r=>{const s=_0(r.target.error);t(s)}}))}let xT=!1;function _0(n){const e=Cs.M(Xt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xT||(xT=!0,setTimeout((()=>{throw r}),0)),r}}return n}const $d="IndexBackfiller";class XV{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){oe($d,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();oe($d,`Documents written: ${t}`)}catch(t){$o(t)?oe($d,"Ignoring IndexedDB error during index backfill: ",t):await Uo(t)}await this.re(6e4)}))}}class ZV{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let s=t,i=!0;return W.doWhile((()=>i===!0&&s>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((o=>{if(o!==null&&!r.has(o))return oe($d,`Processing collection: ${o}`),this.oe(e,o,s).next((u=>{s-=u,r.add(o)}));i=!1})))).next((()=>t-s))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((s=>this.localStore.localDocuments.getNextDocuments(e,t,s,r).next((i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next((()=>this._e(s,i))).next((u=>(oe($d,`Updating offset: ${u}`),this.localStore.indexManager.updateCollectionGroup(e,t,u)))).next((()=>o.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((s,i)=>{const o=mA(i);S0(o,r)>0&&(r=o)})),new cr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Un.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=-1;function $h(n){return n==null}function ph(n){return n===0&&1/n==-1/0}function vA(n){return typeof n=="number"&&Number.isInteger(n)&&!ph(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="";function En(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bT(e)),e=e3(n.get(t),e);return bT(e)}function e3(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case jf:t+="";break;default:t+=i}}return t}function bT(n){return n+jf+""}function ws(n){const e=n.length;if(Ee(e>=2,64408,{path:n}),e===2)return Ee(n.charAt(0)===jf&&n.charAt(1)==="",56145,{path:n}),We.emptyPath();const t=e-2,r=[];let s="";for(let i=0;i<e;){const o=n.indexOf(jf,i);switch((o<0||o>t)&&xe(50515,{path:n}),n.charAt(o+1)){case"":const u=n.substring(i,o);let d;s.length===0?d=u:(s+=u,d=s,s=""),r.push(d);break;case"":s+=n.substring(i,o),s+="\0";break;case"":s+=n.substring(i,o+1);break;default:xe(61167,{path:n})}i=o+2}return new We(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ka="remoteDocuments",zh="owner",dc="owner",mh="mutationQueues",t3="userId",Ur="mutations",wT="batchId",Ua="userMutationsIndex",ST=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rf(n,e){return[n,En(e)]}function xA(n,e,t){return[n,En(e),t]}const n3={},Hc="documentMutations",Rf="remoteDocumentsV14",r3=["prefixPath","collectionGroup","readTime","documentId"],sf="documentKeyIndex",s3=["prefixPath","collectionGroup","documentId"],bA="collectionGroupIndex",i3=["collectionGroup","readTime","prefixPath","documentId"],fh="remoteDocumentGlobal",Jx="remoteDocumentGlobalKey",qc="targets",wA="queryTargetsIndex",o3=["canonicalId","targetId"],Gc="targetDocuments",a3=["targetId","path"],E0="documentTargetsIndex",l3=["path","targetId"],Df="targetGlobalKey",Ga="targetGlobal",gh="collectionParents",c3=["collectionId","parent"],Wc="clientMetadata",u3="clientId",xg="bundles",d3="bundleId",bg="namedQueries",h3="name",T0="indexConfiguration",p3="indexId",Qx="collectionGroupIndex",m3="collectionGroup",zd="indexState",f3=["indexId","uid"],SA="sequenceNumberIndex",g3=["uid","sequenceNumber"],Hd="indexEntries",y3=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_A="documentKeyIndex",v3=["indexId","uid","orderedDocumentKey"],wg="documentOverlays",x3=["userId","collectionPath","documentId"],Yx="collectionPathOverlayIndex",b3=["userId","collectionPath","largestBatchId"],EA="collectionGroupOverlayIndex",w3=["userId","collectionGroup","largestBatchId"],I0="globals",S3="name",TA=[mh,Ur,Hc,ka,qc,zh,Ga,Gc,Wc,fh,gh,xg,bg],_3=[...TA,wg],IA=[mh,Ur,Hc,Rf,qc,zh,Ga,Gc,Wc,fh,gh,xg,bg,wg],CA=IA,C0=[...CA,T0,zd,Hd],E3=C0,kA=[...C0,I0],T3=kA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx extends gA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function en(n,e){const t=me(n);return Cs.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function zo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function AA(n,e){const t=[];for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.push(e(n[r],r,n));return t}function PA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new gt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new jm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new jm(this.root,e,this.comparator,!1)}getReverseIterator(){return new jm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new jm(this.root,e,this.comparator,!0)}}class jm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??pn.RED,this.left=s??pn.EMPTY,this.right=i??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new pn(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return pn.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ET(this.data.getIterator())}getIteratorFrom(e){return new ET(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new ut(this.comparator);return t.data=e,t}}class ET{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function hc(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new $n([])}unionWith(e){let t=new ut(wt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $n(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bc(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new NA("Invalid base64 string: "+i):i}})(e);return new Pt(t)}static fromUint8Array(e){const t=(function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i})(e);return new Pt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const C3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(n){if(Ee(!!n,39018),typeof n=="string"){let e=0;const t=C3.exec(n);if(Ee(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_t(n.seconds),nanos:_t(n.nanos)}}function _t(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mi(n){return typeof n=="string"?Pt.fromBase64String(n):Pt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA="server_timestamp",RA="__type__",DA="__previous_value__",OA="__local_write_time__";function Sg(n){return(n?.mapValue?.fields||{})[RA]?.stringValue===jA}function _g(n){const e=n.mapValue.fields[DA];return Sg(e)?_g(e):e}function yh(n){const e=pi(n.mapValue.fields[OA].timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(e,t,r,s,i,o,u,d,p,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=f}}const vh="(default)";class Po{constructor(e,t){this.projectId=e,this.database=t||vh}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database===vh}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="__type__",MA="__max__",mo={mapValue:{fields:{__type__:{stringValue:MA}}}},A0="__vector__",Kc="value",of={nullValue:"NULL_VALUE"};function No(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Sg(n)?4:LA(n)?9007199254740991:Eg(n)?10:11:xe(28295,{value:n})}function Ns(n,e){if(n===e)return!0;const t=No(n);if(t!==No(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return yh(n).isEqual(yh(e));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=pi(s.timestampValue),u=pi(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,i){return mi(s.bytesValue).isEqual(mi(i.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,i){return _t(s.geoPointValue.latitude)===_t(i.geoPointValue.latitude)&&_t(s.geoPointValue.longitude)===_t(i.geoPointValue.longitude)})(n,e);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return _t(s.integerValue)===_t(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=_t(s.doubleValue),u=_t(i.doubleValue);return o===u?ph(o)===ph(u):isNaN(o)&&isNaN(u)}return!1})(n,e);case 9:return Bc(n.arrayValue.values||[],e.arrayValue.values||[],Ns);case 10:case 11:return(function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(_T(o)!==_T(u))return!1;for(const d in o)if(o.hasOwnProperty(d)&&(u[d]===void 0||!Ns(o[d],u[d])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function xh(n,e){return(n.values||[]).find((t=>Ns(t,e)))!==void 0}function jo(n,e){if(n===e)return 0;const t=No(n),r=No(e);if(t!==r)return Oe(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Oe(n.booleanValue,e.booleanValue);case 2:return(function(i,o){const u=_t(i.integerValue||i.doubleValue),d=_t(o.integerValue||o.doubleValue);return u<d?-1:u>d?1:u===d?0:isNaN(u)?isNaN(d)?0:-1:1})(n,e);case 3:return TT(n.timestampValue,e.timestampValue);case 4:return TT(yh(n),yh(e));case 5:return Gx(n.stringValue,e.stringValue);case 6:return(function(i,o){const u=mi(i),d=mi(o);return u.compareTo(d)})(n.bytesValue,e.bytesValue);case 7:return(function(i,o){const u=i.split("/"),d=o.split("/");for(let p=0;p<u.length&&p<d.length;p++){const f=Oe(u[p],d[p]);if(f!==0)return f}return Oe(u.length,d.length)})(n.referenceValue,e.referenceValue);case 8:return(function(i,o){const u=Oe(_t(i.latitude),_t(o.latitude));return u!==0?u:Oe(_t(i.longitude),_t(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return IT(n.arrayValue,e.arrayValue);case 10:return(function(i,o){const u=i.fields||{},d=o.fields||{},p=u[Kc]?.arrayValue,f=d[Kc]?.arrayValue,y=Oe(p?.values?.length||0,f?.values?.length||0);return y!==0?y:IT(p,f)})(n.mapValue,e.mapValue);case 11:return(function(i,o){if(i===mo.mapValue&&o===mo.mapValue)return 0;if(i===mo.mapValue)return 1;if(o===mo.mapValue)return-1;const u=i.fields||{},d=Object.keys(u),p=o.fields||{},f=Object.keys(p);d.sort(),f.sort();for(let y=0;y<d.length&&y<f.length;++y){const x=Gx(d[y],f[y]);if(x!==0)return x;const S=jo(u[d[y]],p[f[y]]);if(S!==0)return S}return Oe(d.length,f.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function TT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Oe(n,e);const t=pi(n),r=pi(e),s=Oe(t.seconds,r.seconds);return s!==0?s:Oe(t.nanos,r.nanos)}function IT(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=jo(t[s],r[s]);if(i)return i}return Oe(t.length,r.length)}function Jc(n){return Zx(n)}function Zx(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=pi(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mi(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=Zx(i);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Zx(t.fields[o])}`;return s+"}"})(n.mapValue):xe(61005,{value:n})}function af(n){switch(No(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=_g(n);return e?16+af(e):16;case 5:return 2*n.stringValue.length;case 6:return mi(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+af(i)),0)})(n.arrayValue);case 10:case 11:return(function(r){let s=0;return zo(r.fields,((i,o)=>{s+=i.length+af(o)})),s})(n.mapValue);default:throw xe(13486,{value:n})}}function Za(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eb(n){return!!n&&"integerValue"in n}function bh(n){return!!n&&"arrayValue"in n}function CT(n){return!!n&&"nullValue"in n}function kT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function lf(n){return!!n&&"mapValue"in n}function Eg(n){return(n?.mapValue?.fields||{})[k0]?.stringValue===A0}function qd(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return zo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=qd(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=qd(n.arrayValue.values[t]);return e}return{...n}}function LA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===MA}const FA={mapValue:{fields:{[k0]:{stringValue:A0},[Kc]:{arrayValue:{}}}}};function A3(n){return"nullValue"in n?of:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Za(Po.empty(),he.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Eg(n)?FA:{mapValue:{}}:xe(35942,{value:n})}function P3(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Za(Po.empty(),he.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?FA:"mapValue"in n?Eg(n)?{mapValue:{}}:mo:xe(61959,{value:n})}function AT(n,e){const t=jo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function PT(n,e){const t=jo(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!lf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qd(t)}setAll(e){let t=wt.emptyPath(),r={},s=[];e.forEach(((o,u)=>{if(!t.isImmediateParentOf(u)){const d=this.getFieldsMap(t);this.applyChanges(d,r,s),r={},s=[],t=u.popLast()}o?r[u.lastSegment()]=qd(o):s.push(u.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());lf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ns(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];lf(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){zo(t,((s,i)=>e[s]=i));for(const s of r)delete e[s]}clone(){return new mn(qd(this.value))}}function VA(n){const e=[];return zo(n.fields,((t,r)=>{const s=new wt([t]);if(lf(r)){const i=VA(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)})),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t,r,s,i,o,u){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new bt(e,0,Ae.min(),Ae.min(),Ae.min(),mn.empty(),0)}static newFoundDocument(e,t,r,s){return new bt(e,1,t,Ae.min(),r,s,0)}static newNoDocument(e,t){return new bt(e,2,t,Ae.min(),Ae.min(),mn.empty(),0)}static newUnknownDocument(e,t){return new bt(e,3,t,Ae.min(),Ae.min(),mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,t){this.position=e,this.inclusive=t}}function NT(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),t.key):r=jo(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function jT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ns(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t="asc"){this.field=e,this.dir=t}}function N3(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BA=class{};class Ye extends BA{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new j3(e,t,r):t==="array-contains"?new O3(e,r):t==="in"?new GA(e,r):t==="not-in"?new M3(e,r):t==="array-contains-any"?new L3(e,r):new Ye(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new R3(e,r):new D3(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(jo(t,this.value)):t!==null&&No(this.value)===No(t)&&this.matchesComparison(jo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class lt extends BA{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new lt(e,t)}matches(e){return Qc(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Qc(n){return n.op==="and"}function tb(n){return n.op==="or"}function P0(n){return UA(n)&&Qc(n)}function UA(n){for(const e of n.filters)if(e instanceof lt)return!1;return!0}function nb(n){if(n instanceof Ye)return n.field.canonicalString()+n.op.toString()+Jc(n.value);if(P0(n))return n.filters.map((e=>nb(e))).join(",");{const e=n.filters.map((t=>nb(t))).join(",");return`${n.op}(${e})`}}function $A(n,e){return n instanceof Ye?(function(r,s){return s instanceof Ye&&r.op===s.op&&r.field.isEqual(s.field)&&Ns(r.value,s.value)})(n,e):n instanceof lt?(function(r,s){return s instanceof lt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,o,u)=>i&&$A(o,s.filters[u])),!0):!1})(n,e):void xe(19439)}function zA(n,e){const t=n.filters.concat(e);return lt.create(t,n.op)}function HA(n){return n instanceof Ye?(function(t){return`${t.field.canonicalString()} ${t.op} ${Jc(t.value)}`})(n):n instanceof lt?(function(t){return t.op.toString()+" {"+t.getFilters().map(HA).join(" ,")+"}"})(n):"Filter"}class j3 extends Ye{constructor(e,t,r){super(e,t,r),this.key=he.fromName(r.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class R3 extends Ye{constructor(e,t){super(e,"in",t),this.keys=qA("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class D3 extends Ye{constructor(e,t){super(e,"not-in",t),this.keys=qA("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function qA(n,e){return(e.arrayValue?.values||[]).map((t=>he.fromName(t.referenceValue)))}class O3 extends Ye{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bh(t)&&xh(t.arrayValue,this.value)}}class GA extends Ye{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&xh(this.value.arrayValue,t)}}class M3 extends Ye{constructor(e,t){super(e,"not-in",t)}matches(e){if(xh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!xh(this.value.arrayValue,t)}}class L3 extends Ye{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bh(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>xh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,t=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function rb(n,e=null,t=[],r=[],s=null,i=null,o=null){return new F3(n,e,t,r,s,i,o)}function el(n){const e=me(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>nb(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),$h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Jc(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Jc(r))).join(",")),e.Te=t}return e.Te}function Hh(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!N3(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$A(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jT(n.startAt,e.startAt)&&jT(n.endAt,e.endAt)}function Of(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Mf(n,e){return n.filters.filter((t=>t instanceof Ye&&t.field.isEqual(e)))}function RT(n,e,t){let r=of,s=!0;for(const i of Mf(n,e)){let o=of,u=!0;switch(i.op){case"<":case"<=":o=A3(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,u=!1;break;case"!=":case"not-in":o=of}AT({value:r,inclusive:s},{value:o,inclusive:u})<0&&(r=o,s=u)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];AT({value:r,inclusive:s},{value:o,inclusive:t.inclusive})<0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}function DT(n,e,t){let r=mo,s=!0;for(const i of Mf(n,e)){let o=mo,u=!0;switch(i.op){case">=":case">":o=P3(i.value),u=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,u=!1;break;case"!=":case"not-in":o=mo}PT({value:r,inclusive:s},{value:o,inclusive:u})>0&&(r=o,s=u)}if(t!==null){for(let i=0;i<n.orderBy.length;++i)if(n.orderBy[i].field.isEqual(e)){const o=t.position[i];PT({value:r,inclusive:s},{value:o,inclusive:t.inclusive})>0&&(r=o,s=t.inclusive);break}}return{value:r,inclusive:s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e,t=null,r=[],s=[],i=null,o="F",u=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=d,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function WA(n,e,t,r,s,i,o,u){return new yi(n,e,t,r,s,i,o,u)}function pu(n){return new yi(n)}function OT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function N0(n){return n.collectionGroup!==null}function Mc(n){const e=me(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new ut(wt.comparator);return o.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(u=u.add(p.field))}))})),u})(e).forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new wh(i,r))})),t.has(wt.keyField().canonicalString())||e.Ie.push(new wh(wt.keyField(),r))}return e.Ie}function Tn(n){const e=me(n);return e.Ee||(e.Ee=JA(e,Mc(n))),e.Ee}function KA(n){const e=me(n);return e.de||(e.de=JA(e,n.explicitOrderBy)),e.de}function JA(n,e){if(n.limitType==="F")return rb(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new wh(s.field,i)}));const t=n.endAt?new Ro(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ro(n.startAt.position,n.startAt.inclusive):null;return rb(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function sb(n,e){const t=n.filters.concat([e]);return new yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Lf(n,e,t){return new yi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qh(n,e){return Hh(Tn(n),Tn(e))&&n.limitType===e.limitType}function QA(n){return`${el(Tn(n))}|lt:${n.limitType}`}function _c(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((s=>HA(s))).join(", ")}]`),$h(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((s=>Jc(s))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((s=>Jc(s))).join(",")),`Target(${r})`})(Tn(n))}; limitType=${n.limitType})`}function Gh(n,e){return e.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):he.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(n,e)&&(function(r,s){for(const i of Mc(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(n,e)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(n,e)&&(function(r,s){return!(r.startAt&&!(function(o,u,d){const p=NT(o,u,d);return o.inclusive?p<=0:p<0})(r.startAt,Mc(r),s)||r.endAt&&!(function(o,u,d){const p=NT(o,u,d);return o.inclusive?p>=0:p>0})(r.endAt,Mc(r),s))})(n,e)}function YA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function XA(n){return(e,t)=>{let r=!1;for(const s of Mc(n)){const i=V3(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function V3(n,e,t){const r=n.field.isKeyField()?he.comparator(e.key,t.key):(function(i,o,u){const d=o.data.field(i),p=u.data.field(i);return d!==null&&p!==null?jo(d,p):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){zo(this.inner,((t,r)=>{for(const[s,i]of r)e(s,i)}))}isEmpty(){return PA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3=new gt(he.comparator);function zn(){return B3}const ZA=new gt(he.comparator);function jd(...n){let e=ZA;for(const t of n)e=e.insert(t.key,t);return e}function eP(n){let e=ZA;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ss(){return Gd()}function tP(){return Gd()}function Gd(){return new vi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const U3=new gt(he.comparator),$3=new ut(he.comparator);function ze(...n){let e=$3;for(const t of n)e=e.add(t);return e}const z3=new ut(Oe);function j0(){return z3}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ph(e)?"-0":e}}function nP(n){return{integerValue:""+n}}function rP(n,e){return vA(e)?nP(e):R0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(){this._=void 0}}function H3(n,e,t){return n instanceof Yc?(function(s,i){const o={fields:{[RA]:{stringValue:jA},[OA]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Sg(i)&&(i=_g(i)),i&&(o.fields[DA]=i),{mapValue:o}})(t,e):n instanceof tl?iP(n,e):n instanceof nl?oP(n,e):(function(s,i){const o=sP(s,i),u=MT(o)+MT(s.Ae);return eb(o)&&eb(s.Ae)?nP(u):R0(s.serializer,u)})(n,e)}function q3(n,e,t){return n instanceof tl?iP(n,e):n instanceof nl?oP(n,e):t}function sP(n,e){return n instanceof Xc?(function(r){return eb(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(e)?e:{integerValue:0}:null}class Yc extends Tg{}class tl extends Tg{constructor(e){super(),this.elements=e}}function iP(n,e){const t=aP(e);for(const r of n.elements)t.some((s=>Ns(s,r)))||t.push(r);return{arrayValue:{values:t}}}class nl extends Tg{constructor(e){super(),this.elements=e}}function oP(n,e){let t=aP(e);for(const r of n.elements)t=t.filter((s=>!Ns(s,r)));return{arrayValue:{values:t}}}class Xc extends Tg{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function MT(n){return _t(n.integerValue||n.doubleValue)}function aP(n){return bh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t){this.field=e,this.transform=t}}function G3(n,e){return n.field.isEqual(e.field)&&(function(r,s){return r instanceof tl&&s instanceof tl||r instanceof nl&&s instanceof nl?Bc(r.elements,s.elements,Ns):r instanceof Xc&&s instanceof Xc?Ns(r.Ae,s.Ae):r instanceof Yc&&s instanceof Yc})(n.transform,e.transform)}class W3{constructor(e,t){this.version=e,this.transformResults=t}}class Et{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Et}static exists(e){return new Et(void 0,e)}static updateTime(e){return new Et(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ig{}function lP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new fu(n.key,Et.none()):new mu(n.key,n.data,Et.none());{const t=n.data,r=mn.empty();let s=new ut(wt.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new xi(n.key,r,new $n(s.toArray()),Et.none())}}function K3(n,e,t){n instanceof mu?(function(s,i,o){const u=s.value.clone(),d=FT(s.fieldTransforms,i,o.transformResults);u.setAll(d),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()})(n,e,t):n instanceof xi?(function(s,i,o){if(!cf(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=FT(s.fieldTransforms,i,o.transformResults),d=i.data;d.setAll(cP(s)),d.setAll(u),i.convertToFoundDocument(o.version,d).setHasCommittedMutations()})(n,e,t):(function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function Wd(n,e,t,r){return n instanceof mu?(function(i,o,u,d){if(!cf(i.precondition,o))return u;const p=i.value.clone(),f=VT(i.fieldTransforms,d,o);return p.setAll(f),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof xi?(function(i,o,u,d){if(!cf(i.precondition,o))return u;const p=VT(i.fieldTransforms,d,o),f=o.data;return f.setAll(cP(i)),f.setAll(p),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((y=>y.field)))})(n,e,t,r):(function(i,o,u){return cf(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u})(n,e,t)}function J3(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=sP(r.transform,s||null);i!=null&&(t===null&&(t=mn.empty()),t.set(r.field,i))}return t||null}function LT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Bc(r,s,((i,o)=>G3(i,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class mu extends Ig{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xi extends Ig{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function cP(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function FT(n,e,t){const r=new Map;Ee(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,q3(o,u,t[s]))}return r}function VT(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,H3(i,o,e))}return r}class fu extends Ig{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D0 extends Ig{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&K3(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Wd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Wd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=tP();return this.mutations.forEach((s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=t.has(s.key)?null:u;const d=lP(o,u);d!==null&&r.set(s.key,d),o.isValidDocument()||o.convertToNoDocument(Ae.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Bc(this.mutations,e.mutations,((t,r)=>LT(t,r)))&&Bc(this.baseMutations,e.baseMutations,((t,r)=>LT(t,r)))}}class M0{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return U3})();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new M0(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,et;function dP(n){switch(n){case Q.OK:return xe(64938);case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function hP(n){if(n===void 0)return Vt("GRPC error has no .code"),Q.UNKNOWN;switch(n){case qt.OK:return Q.OK;case qt.CANCELLED:return Q.CANCELLED;case qt.UNKNOWN:return Q.UNKNOWN;case qt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case qt.INTERNAL:return Q.INTERNAL;case qt.UNAVAILABLE:return Q.UNAVAILABLE;case qt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case qt.NOT_FOUND:return Q.NOT_FOUND;case qt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case qt.ABORTED:return Q.ABORTED;case qt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case qt.DATA_LOSS:return Q.DATA_LOSS;default:return xe(39323,{code:n})}}(et=qt||(qt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ib=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=new xo([4294967295,4294967295],0);function BT(n){const e=pP().encode(n),t=new eA;return t.update(e),new Uint8Array(t.digest())}function UT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new xo([t,r],0),new xo([s,i],0)]}class F0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Rd(`Invalid padding: ${t}`);if(r<0)throw new Rd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Rd(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Rd(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=xo.fromNumber(this.ge)}ye(e,t,r){let s=e.add(t.multiply(xo.fromNumber(r)));return s.compare(Y3)===1&&(s=new xo([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=BT(e),[r,s]=UT(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new F0(i,s,t);return r.forEach((u=>o.insert(u))),o}insert(e){if(this.ge===0)return;const t=BT(e),[r,s]=UT(t);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Rd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,Jh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kh(Ae.min(),s,new gt(Oe),zn(),ze())}}class Jh{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jh(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uf{constructor(e,t,r,s){this.be=e,this.removedTargetIds=t,this.key=r,this.De=s}}class mP{constructor(e,t){this.targetId=e,this.Ce=t}}class fP{constructor(e,t,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class $T{constructor(){this.ve=0,this.Fe=zT(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:xe(38017,{changeType:i})}})),new Jh(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=zT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class X3{constructor(e){this.Ge=e,this.ze=new Map,this.je=zn(),this.Je=Rm(),this.He=Rm(),this.Ye=new gt(Oe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,r=e.Ce.count,s=this.ot(t);if(s){const i=s.target;if(Of(i))if(r===0){const o=new he(i.path);this.et(t,o,bt.newNoDocument(o,Ae.min()))}else Ee(r===1,20013,{expectedCount:r});else{const o=this._t(t);if(o!==r){const u=this.ut(e),d=u?this.ct(u,e,o):1;if(d!==0){this.it(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}ib?.lt((function(f,y,x,S,E){const k={localCacheCount:f,existenceFilterCount:y.count,databaseId:x.database,projectId:x.projectId},I=y.unchangedNames;return I&&(k.bloomFilter={applied:E===0,hashCount:I?.hashCount??0,bitmapLength:I?.bits?.bitmap?.length??0,padding:I?.bits?.padding??0,mightContain:M=>S?.mightContain(M)??!1}),k})(o,e.Ce,this.Ge.ht(),u,d))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,u;try{o=mi(r).toUint8Array()}catch(d){if(d instanceof NA)return lr("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{u=new F0(o,s,i)}catch(d){return lr(d instanceof Rd?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return u.ge===0?null:u}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let s=0;return r.forEach((i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(t,i,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((i,o)=>{const u=this.ot(o);if(u){if(i.current&&Of(u.target)){const d=new he(u.target.path);this.It(d).has(o)||this.Et(o,d)||this.et(o,d,bt.newNoDocument(d,e))}i.Be&&(t.set(o,i.ke()),i.qe())}}));let r=ze();this.He.forEach(((i,o)=>{let u=!0;o.forEachWhile((d=>{const p=this.ot(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)})),u&&(r=r.add(i))})),this.je.forEach(((i,o)=>o.setReadTime(e)));const s=new Kh(e,t,this.Ye,this.je,r);return this.je=zn(),this.Je=Rm(),this.He=Rm(),this.Ye=new gt(Oe),s}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $T,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new ut(Oe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new ut(Oe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $T),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Rm(){return new gt(he.comparator)}function zT(){return new gt(he.comparator)}const Z3={asc:"ASCENDING",desc:"DESCENDING"},e5={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},t5={and:"AND",or:"OR"};class n5{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ob(n,e){return n.useProto3Json||$h(e)?e:{value:e}}function Zc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function r5(n,e){return Zc(n,e.toTimestamp())}function Ut(n){return Ee(!!n,49232),Ae.fromTimestamp((function(t){const r=pi(t);return new it(r.seconds,r.nanos)})(n))}function V0(n,e){return ab(n,e).canonicalString()}function ab(n,e){const t=(function(s){return new We(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function yP(n){const e=We.fromString(n);return Ee(IP(e),10190,{key:e.toString()}),e}function Sh(n,e){return V0(n.databaseId,e.path)}function ks(n,e){const t=yP(e);if(t.get(1)!==n.databaseId.projectId)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new re(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(bP(t))}function vP(n,e){return V0(n.databaseId,e)}function xP(n){const e=yP(n);return e.length===4?We.emptyPath():bP(e)}function lb(n){return new We(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bP(n){return Ee(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function HT(n,e,t){return{name:Sh(n,e),fields:t.value.mapValue.fields}}function Cg(n,e,t){const r=ks(n,e.name),s=Ut(e.updateTime),i=e.createTime?Ut(e.createTime):Ae.min(),o=new mn({mapValue:{fields:e.fields}}),u=bt.newFoundDocument(r,s,i,o);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function s5(n,e){return"found"in e?(function(r,s){Ee(!!s.found,43571),s.found.name,s.found.updateTime;const i=ks(r,s.found.name),o=Ut(s.found.updateTime),u=s.found.createTime?Ut(s.found.createTime):Ae.min(),d=new mn({mapValue:{fields:s.found.fields}});return bt.newFoundDocument(i,o,u,d)})(n,e):"missing"in e?(function(r,s){Ee(!!s.missing,3894),Ee(!!s.readTime,22933);const i=ks(r,s.missing),o=Ut(s.readTime);return bt.newNoDocument(i,o)})(n,e):xe(7234,{result:e})}function i5(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:xe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=(function(p,f){return p.useProto3Json?(Ee(f===void 0||typeof f=="string",58123),Pt.fromBase64String(f||"")):(Ee(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Pt.fromUint8Array(f||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&(function(p){const f=p.code===void 0?Q.UNKNOWN:hP(p.code);return new re(f,p.message||"")})(o);t=new fP(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ks(n,r.document.name),i=Ut(r.document.updateTime),o=r.document.createTime?Ut(r.document.createTime):Ae.min(),u=new mn({mapValue:{fields:r.document.fields}}),d=bt.newFoundDocument(s,i,o,u),p=r.targetIds||[],f=r.removedTargetIds||[];t=new uf(p,f,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ks(n,r.document),i=r.readTime?Ut(r.readTime):Ae.min(),o=bt.newNoDocument(s,i),u=r.removedTargetIds||[];t=new uf([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ks(n,r.document),i=r.removedTargetIds||[];t=new uf([],i,s,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Q3(s,i),u=r.targetId;t=new mP(u,o)}}return t}function _h(n,e){let t;if(e instanceof mu)t={update:HT(n,e.key,e.value)};else if(e instanceof fu)t={delete:Sh(n,e.key)};else if(e instanceof xi)t={update:HT(n,e.key,e.data),updateMask:d5(e.fieldMask)};else{if(!(e instanceof D0))return xe(16599,{Vt:e.type});t={verify:Sh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(i,o){const u=o.transform;if(u instanceof Yc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof tl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof nl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Xc)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw xe(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:r5(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:xe(27497)})(n,e.precondition)),t}function cb(n,e){const t=e.currentDocument?(function(i){return i.updateTime!==void 0?Et.updateTime(Ut(i.updateTime)):i.exists!==void 0?Et.exists(i.exists):Et.none()})(e.currentDocument):Et.none(),r=e.updateTransforms?e.updateTransforms.map((s=>(function(o,u){let d=null;if("setToServerValue"in u)Ee(u.setToServerValue==="REQUEST_TIME",16630,{proto:u}),d=new Yc;else if("appendMissingElements"in u){const f=u.appendMissingElements.values||[];d=new tl(f)}else if("removeAllFromArray"in u){const f=u.removeAllFromArray.values||[];d=new nl(f)}else"increment"in u?d=new Xc(o,u.increment):xe(16584,{proto:u});const p=wt.fromServerFormat(u.fieldPath);return new Wh(p,d)})(n,s))):[];if(e.update){e.update.name;const s=ks(n,e.update.name),i=new mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=(function(d){const p=d.fieldPaths||[];return new $n(p.map((f=>wt.fromServerFormat(f))))})(e.updateMask);return new xi(s,i,o,t,r)}return new mu(s,i,t,r)}if(e.delete){const s=ks(n,e.delete);return new fu(s,t)}if(e.verify){const s=ks(n,e.verify);return new D0(s,t)}return xe(1463,{proto:e})}function o5(n,e){return n&&n.length>0?(Ee(e!==void 0,14353),n.map((t=>(function(s,i){let o=s.updateTime?Ut(s.updateTime):Ut(i);return o.isEqual(Ae.min())&&(o=Ut(i)),new W3(o,s.transformResults||[])})(t,e)))):[]}function wP(n,e){return{documents:[vP(n,e.path)]}}function kg(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vP(n,s);const i=(function(p){if(p.length!==0)return TP(lt.create(p,"and"))})(e.filters);i&&(t.structuredQuery.where=i);const o=(function(p){if(p.length!==0)return p.map((f=>(function(x){return{field:ao(x.field),direction:l5(x.dir)}})(f)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const u=ob(n,e.limit);return u!==null&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:s}}function SP(n,e,t,r){const{ft:s,parent:i}=kg(n,e),o={},u=[];let d=0;return t.forEach((p=>{const f=r?p.alias:"aggregate_"+d++;o[f]=p.alias,p.aggregateType==="count"?u.push({alias:f,count:{}}):p.aggregateType==="avg"?u.push({alias:f,avg:{field:ao(p.fieldPath)}}):p.aggregateType==="sum"&&u.push({alias:f,sum:{field:ao(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:u,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function _P(n){let e=xP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Ee(r===1,65062);const f=t.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];t.where&&(i=(function(y){const x=EP(y);return x instanceof lt&&P0(x)?x.getFilters():[x]})(t.where));let o=[];t.orderBy&&(o=(function(y){return y.map((x=>(function(E){return new wh(Ec(E.field),(function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(x)))})(t.orderBy));let u=null;t.limit&&(u=(function(y){let x;return x=typeof y=="object"?y.value:y,$h(x)?null:x})(t.limit));let d=null;t.startAt&&(d=(function(y){const x=!!y.before,S=y.values||[];return new Ro(S,x)})(t.startAt));let p=null;return t.endAt&&(p=(function(y){const x=!y.before,S=y.values||[];return new Ro(S,x)})(t.endAt)),WA(e,s,o,i,u,"F",d,p)}function a5(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function EP(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Ec(t.unaryFilter.field);return Ye.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ec(t.unaryFilter.field);return Ye.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ec(t.unaryFilter.field);return Ye.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ec(t.unaryFilter.field);return Ye.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ye.create(Ec(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return lt.create(t.compositeFilter.filters.map((r=>EP(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function l5(n){return Z3[n]}function c5(n){return e5[n]}function u5(n){return t5[n]}function ao(n){return{fieldPath:n.canonicalString()}}function Ec(n){return wt.fromServerFormat(n.fieldPath)}function TP(n){return n instanceof Ye?(function(t){if(t.op==="=="){if(kT(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NAN"}};if(CT(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(kT(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NAN"}};if(CT(t.value))return{unaryFilter:{field:ao(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ao(t.field),op:c5(t.op),value:t.value}}})(n):n instanceof lt?(function(t){const r=t.getFilters().map((s=>TP(s)));return r.length===1?r[0]:{compositeFilter:{op:u5(t.op),filters:r}}})(n):xe(54877,{filter:n})}function d5(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function IP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t,r,s,i=Ae.min(),o=Ae.min(),u=Pt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=d}withSequenceNumber(e){return new si(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new si(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.yt=e}}function h5(n,e){let t;if(e.document)t=Cg(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=he.fromSegments(e.noDocument.path),s=sl(e.noDocument.readTime);t=bt.newNoDocument(r,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xe(56709);{const r=he.fromSegments(e.unknownDocument.path),s=sl(e.unknownDocument.version);t=bt.newUnknownDocument(r,s)}}return e.readTime&&t.setReadTime((function(s){const i=new it(s[0],s[1]);return Ae.fromTimestamp(i)})(e.readTime)),t}function qT(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ff(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(i,o){return{name:Sh(i,o.key),fields:o.data.value.mapValue.fields,updateTime:Zc(i,o.version.toTimestamp()),createTime:Zc(i,o.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:rl(e.version)};else{if(!e.isUnknownDocument())return xe(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:rl(e.version)}}return r}function Ff(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function rl(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function sl(n){const e=new it(n.seconds,n.nanoseconds);return Ae.fromTimestamp(e)}function Ma(n,e){const t=(e.baseMutations||[]).map((i=>cb(n.yt,i)));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const u=e.mutations[i+1];o.updateTransforms=u.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map((i=>cb(n.yt,i))),s=it.fromMillis(e.localWriteTimeMs);return new O0(e.batchId,s,t,r)}function Dd(n){const e=sl(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?sl(n.lastLimboFreeSnapshotVersion):Ae.min();let r;return r=(function(i){return i.documents!==void 0})(n.query)?(function(i){const o=i.documents.length;return Ee(o===1,1966,{count:o}),Tn(pu(xP(i.documents[0])))})(n.query):(function(i){return Tn(_P(i))})(n.query),new si(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Pt.fromBase64String(n.resumeToken))}function kP(n,e){const t=rl(e.snapshotVersion),r=rl(e.lastLimboFreeSnapshotVersion);let s;s=Of(e.target)?wP(n.yt,e.target):kg(n.yt,e.target).ft;const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:el(e.target),readTime:t,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function Ag(n){const e=_P({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Lf(e,e.limit,"L"):e}function Jv(n,e){return new L0(e.largestBatchId,cb(n.yt,e.overlayMutation))}function GT(n,e){const t=e.path.lastSegment();return[n,En(e.path.popLast()),t]}function WT(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:rl(r.readTime),documentKey:En(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{getBundleMetadata(e,t){return KT(e).get(t).next((r=>{if(r)return(function(i){return{id:i.bundleId,createTime:sl(i.createTime),version:i.version}})(r)}))}saveBundleMetadata(e,t){return KT(e).put((function(s){return{bundleId:s.id,createTime:rl(Ut(s.createTime)),version:s.version}})(t))}getNamedQuery(e,t){return JT(e).get(t).next((r=>{if(r)return(function(i){return{name:i.name,query:Ag(i.bundledQuery),readTime:sl(i.readTime)}})(r)}))}saveNamedQuery(e,t){return JT(e).put((function(s){return{name:s.name,readTime:rl(Ut(s.readTime)),bundledQuery:s.bundledQuery}})(t))}}function KT(n){return en(n,xg)}function JT(n){return en(n,bg)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Pg(e,r)}getOverlay(e,t){return Sd(e).get(GT(this.userId,t)).next((r=>r?Jv(this.serializer,r):null))}getOverlays(e,t){const r=Ss();return W.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){const s=[];return r.forEach(((i,o)=>{const u=new L0(t,o);s.push(this.St(e,u))})),W.waitFor(s)}removeOverlaysForBatchId(e,t,r){const s=new Set;t.forEach((o=>s.add(En(o.getCollectionPath()))));const i=[];return s.forEach((o=>{const u=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(Sd(e).Z(Yx,u))})),W.waitFor(i)}getOverlaysForCollection(e,t,r){const s=Ss(),i=En(t),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Sd(e).J(Yx,o).next((u=>{for(const d of u){const p=Jv(this.serializer,d);s.set(p.getKey(),p)}return s}))}getOverlaysForCollectionGroup(e,t,r,s){const i=Ss();let o;const u=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Sd(e).ee({index:EA,range:u},((d,p,f)=>{const y=Jv(this.serializer,p);i.size()<s||y.largestBatchId===o?(i.set(y.getKey(),y),o=y.largestBatchId):f.done()})).next((()=>i))}St(e,t){return Sd(e).put((function(s,i,o){const[u,d,p]=GT(i,o.mutation.key);return{userId:i,collectionPath:d,documentId:p,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:_h(s.yt,o.mutation)}})(this.serializer,this.userId,t))}}function Sd(n){return en(n,wg)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{bt(e){return en(e,I0)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t?.value;return r?Pt.fromUint8Array(r):Pt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(_t(e.integerValue));else if("doubleValue"in e){const r=_t(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ph(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=pi(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(mi(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?LA(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Eg(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):xe(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const s of Object.keys(r))this.Ot(s,t),this.Ct(r[s],t)}kt(e,t){const r=e.fields||{};this.Ft(t,53);const s=Kc,i=r[s].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(_t(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const s of r)this.Ct(s,t)}Lt(e,t){this.Ft(t,37),he.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}La.Kt=new La;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pc=255;function f5(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function QT(n){const e=64-(function(r){let s=0;for(let i=0;i<8;++i){const o=f5(255&r[i]);if(s+=o,o!==8)break}return s})(n);return Math.ceil(e/8)}class g5{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const s=t.codePointAt(0);this.Gt(240|s>>>18),this.Gt(128|63&s>>>12),this.Gt(128|63&s>>>6),this.Gt(128|63&s)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const s=t.codePointAt(0);this.Jt(240|s>>>18),this.Jt(128|63&s>>>12),this.Jt(128|63&s>>>6),this.Jt(128|63&s)}}this.Ht()}Xt(e){const t=this.en(e),r=QT(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=255&t[s]}nn(e){const t=this.en(e),r=QT(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let s=t.length-r;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}rn(){this.sn(pc),this.sn(255)}_n(){this.an(pc),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(i){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,i,!1),new Uint8Array(o.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let s=1;s<t.length;++s)t[s]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===pc?(this.sn(pc),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===pc?(this.an(pc),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class y5{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class v5{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class _d{constructor(){this.cn=new g5,this.ln=new y5(this.cn),this.hn=new v5(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,t,r,s){this.Tn=e,this.In=t,this.En=r,this.dn=s}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Fa(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:df(this.En),directionalValue:df(this.dn),orderedDocumentKey:df(t),documentKey:r.path.toArray()}}Vn(e,t,r){const s=this.Rn(e,t,r);return[s.indexId,s.uid,s.arrayValue,s.directionalValue,s.orderedDocumentKey,s.documentKey]}}function Xi(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=YT(n.En,e.En),t!==0?t:(t=YT(n.dn,e.dn),t!==0?t:he.comparator(n.In,e.In)))}function YT(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function df(n){return dk()?(function(t){let r="";for(let s=0;s<t.length;s++)r+=String.fromCharCode(t[s]);return r})(n):n}function XT(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r})(n)}class ZT{constructor(e){this.mn=new ut(((t,r)=>wt.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=Kx(e);if(t!==void 0&&!this.wn(t))return!1;const r=Ca(e);let s=new Set,i=0,o=0;for(;i<r.length&&this.wn(r[i]);++i)s=s.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.mn.size>0){const u=this.mn.getIterator().getNext();if(!s.has(u.field.canonicalString())){const d=r[i];if(!this.Sn(u,d)||!this.bn(this.fn[o++],d))return!1}++i}for(;i<r.length;++i){const u=r[i];if(o>=this.fn.length||!this.bn(this.fn[o++],u))return!1}return!0}Dn(){if(this.pn)return null;let e=new ut(wt.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new qa(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new qa(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new qa(r.field,r.dir==="asc"?0:1)));return new $c($c.UNKNOWN_ID,this.collectionId,t,zc.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n){if(Ee(n instanceof Ye||n instanceof lt,20012),n instanceof Ye){if(n instanceof GA){const t=n.value.arrayValue?.values?.map((r=>Ye.create(n.field,"==",r)))||[];return lt.create(t,"or")}return n}const e=n.filters.map((t=>AP(t)));return lt.create(e,n.op)}function x5(n){if(n.getFilters().length===0)return[];const e=hb(AP(n));return Ee(PP(e),7391),ub(e)||db(e)?[e]:e.getFilters()}function ub(n){return n instanceof Ye}function db(n){return n instanceof lt&&P0(n)}function PP(n){return ub(n)||db(n)||(function(t){if(t instanceof lt&&tb(t)){for(const r of t.getFilters())if(!ub(r)&&!db(r))return!1;return!0}return!1})(n)}function hb(n){if(Ee(n instanceof Ye||n instanceof lt,34018),n instanceof Ye)return n;if(n.filters.length===1)return hb(n.filters[0]);const e=n.filters.map((r=>hb(r)));let t=lt.create(e,n.op);return t=Vf(t),PP(t)?t:(Ee(t instanceof lt,64498),Ee(Qc(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((r,s)=>B0(r,s))))}function B0(n,e){let t;return Ee(n instanceof Ye||n instanceof lt,38388),Ee(e instanceof Ye||e instanceof lt,25473),t=n instanceof Ye?e instanceof Ye?(function(s,i){return lt.create([s,i],"and")})(n,e):e1(n,e):e instanceof Ye?e1(e,n):(function(s,i){if(Ee(s.filters.length>0&&i.filters.length>0,48005),Qc(s)&&Qc(i))return zA(s,i.getFilters());const o=tb(s)?s:i,u=tb(s)?i:s,d=o.filters.map((p=>B0(p,u)));return lt.create(d,"or")})(n,e),Vf(t)}function e1(n,e){if(Qc(e))return zA(e,n.getFilters());{const t=e.filters.map((r=>B0(n,r)));return lt.create(t,"or")}}function Vf(n){if(Ee(n instanceof Ye||n instanceof lt,11850),n instanceof Ye)return n;const e=n.getFilters();if(e.length===1)return Vf(e[0]);if(UA(n))return n;const t=e.map((s=>Vf(s))),r=[];return t.forEach((s=>{s instanceof Ye?r.push(s):s instanceof lt&&(s.op===n.op?r.push(...s.filters):r.push(s))})),r.length===1?r[0]:lt.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(){this.Cn=new U0}addToCollectionParentIndex(e,t){return this.Cn.add(t),W.resolve()}getCollectionParents(e,t){return W.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return W.resolve()}deleteFieldIndex(e,t){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,t){return W.resolve()}getDocumentsMatchingTarget(e,t){return W.resolve(null)}getIndexType(e,t){return W.resolve(0)}getFieldIndexes(e,t){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,t){return W.resolve(cr.min())}getMinOffsetFromCollectionGroup(e,t){return W.resolve(cr.min())}updateCollectionGroup(e,t,r){return W.resolve()}updateIndexEntries(e,t){return W.resolve()}}class U0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new ut(We.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ut(We.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="IndexedDbIndexManager",Dm=new Uint8Array(0);class w5{constructor(e,t){this.databaseId=t,this.vn=new U0,this.Fn=new vi((r=>el(r)),((r,s)=>Hh(r,s))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),s=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const i={collectionId:r,parent:En(s)};return n1(e).put(i)}return W.resolve()}getCollectionParents(e,t){const r=[],s=IDBKeyRange.bound([t,""],[cA(t),""],!1,!0);return n1(e).J(s).next((i=>{for(const o of i){if(o.collectionId!==t)break;r.push(ws(o.parent))}return r}))}addFieldIndex(e,t){const r=Ed(e),s=(function(u){return{indexId:u.indexId,collectionGroup:u.collectionGroup,fields:u.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete s.indexId;const i=r.add(s);if(t.indexState){const o=fc(e);return i.next((u=>{o.put(WT(u,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const r=Ed(e),s=fc(e),i=mc(e);return r.delete(t.indexId).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ed(e),r=mc(e),s=fc(e);return t.Z().next((()=>r.Z())).next((()=>s.Z()))}createTargetIndexes(e,t){return W.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((s=>{if(s===0||s===1){const i=new ZT(r).Dn();if(i!=null)return this.addFieldIndex(e,i)}}))))}getDocumentsMatchingTarget(e,t){const r=mc(e);let s=!0;const i=new Map;return W.forEach(this.Mn(t),(o=>this.xn(e,o).next((u=>{s&&(s=!!u),i.set(o,u)})))).next((()=>{if(s){let o=ze();const u=[];return W.forEach(i,((d,p)=>{oe(t1,`Using index ${(function(C){return`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map((F=>`${F.fieldPath}:${F.kind}`)).join(",")}`})(d)} to execute ${el(t)}`);const f=(function(C,F){const G=Kx(F);if(G===void 0)return null;for(const q of Mf(C,G.fieldPath))switch(q.op){case"array-contains-any":return q.value.arrayValue.values||[];case"array-contains":return[q.value]}return null})(p,d),y=(function(C,F){const G=new Map;for(const q of Ca(F))for(const N of Mf(C,q.fieldPath))switch(N.op){case"==":case"in":G.set(q.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return G.set(q.fieldPath.canonicalString(),N.value),Array.from(G.values())}return null})(p,d),x=(function(C,F){const G=[];let q=!0;for(const N of Ca(F)){const _=N.kind===0?RT(C,N.fieldPath,C.startAt):DT(C,N.fieldPath,C.startAt);G.push(_.value),q&&(q=_.inclusive)}return new Ro(G,q)})(p,d),S=(function(C,F){const G=[];let q=!0;for(const N of Ca(F)){const _=N.kind===0?DT(C,N.fieldPath,C.endAt):RT(C,N.fieldPath,C.endAt);G.push(_.value),q&&(q=_.inclusive)}return new Ro(G,q)})(p,d),E=this.On(d,p,x),k=this.On(d,p,S),I=this.Nn(d,p,y),M=this.Bn(d.indexId,f,E,x.inclusive,k,S.inclusive,I);return W.forEach(M,(j=>r.Y(j,t.limit).next((C=>{C.forEach((F=>{const G=he.fromSegments(F.documentKey);o.has(G)||(o=o.add(G),u.push(G))}))}))))})).next((()=>u))}return W.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=x5(lt.create(e.filters,"and")).map((r=>rb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,s,i,o,u){const d=(t!=null?t.length:1)*Math.max(r.length,i.length),p=d/(t!=null?t.length:1),f=[];for(let y=0;y<d;++y){const x=t?this.Ln(t[y/p]):Dm,S=this.kn(e,x,r[y%p],s),E=this.qn(e,x,i[y%p],o),k=u.map((I=>this.kn(e,x,I,!0)));f.push(...this.createRange(S,E,k))}return f}kn(e,t,r,s){const i=new Fa(e,he.empty(),t,r);return s?i:i.An()}qn(e,t,r,s){const i=new Fa(e,he.empty(),t,r);return s?i.An():i}xn(e,t){const r=new ZT(t),s=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next((i=>{let o=null;for(const u of i)r.yn(u)&&(!o||u.fields.length>o.fields.length)&&(o=u);return o}))}getIndexType(e,t){let r=2;const s=this.Mn(t);return W.forEach(s,(i=>this.xn(e,i).next((o=>{o?r!==0&&o.fields.length<(function(d){let p=new ut(wt.comparator),f=!1;for(const y of d.filters)for(const x of y.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?f=!0:p=p.add(x.field));for(const y of d.orderBy)y.field.isKeyField()||(p=p.add(y.field));return p.size+(f?1:0)})(i)&&(r=1):r=0})))).next((()=>(function(o){return o.limit!==null})(t)&&s.length>1&&r===2?1:r))}Qn(e,t){const r=new _d;for(const s of Ca(e)){const i=t.data.field(s.fieldPath);if(i==null)return null;const o=r.Pn(s.kind);La.Kt.Dt(i,o)}return r.un()}Ln(e){const t=new _d;return La.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new _d;return La.Kt.Dt(Za(this.databaseId,t),r.Pn((function(i){const o=Ca(i);return o.length===0?0:o[o.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let s=[];s.push(new _d);let i=0;for(const o of Ca(e)){const u=r[i++];for(const d of s)if(this.Un(t,o.fieldPath)&&bh(u))s=this.Kn(s,o,u);else{const p=d.Pn(o.kind);La.Kt.Dt(u,p)}}return this.Wn(s)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const u of s){const d=new _d;d.seed(u.un()),La.Kt.Dt(o,d.Pn(t.kind)),i.push(d)}return i}Un(e,t){return!!e.filters.find((r=>r instanceof Ye&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Ed(e),s=fc(e);return(t?r.J(Qx,IDBKeyRange.bound(t,t)):r.J()).next((i=>{const o=[];return W.forEach(i,(u=>s.get([u.indexId,this.uid]).next((d=>{o.push((function(f,y){const x=y?new zc(y.sequenceNumber,new cr(sl(y.readTime),new he(ws(y.documentKey)),y.largestBatchId)):zc.empty(),S=f.fields.map((([E,k])=>new qa(wt.fromServerFormat(E),k)));return new $c(f.indexId,f.collectionGroup,S,x)})(u,d))})))).next((()=>o))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:Oe(r.collectionGroup,s.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const s=Ed(e),i=fc(e);return this.Gn(e).next((o=>s.J(Qx,IDBKeyRange.bound(t,t)).next((u=>W.forEach(u,(d=>i.put(WT(d.indexId,this.uid,o,r))))))))}updateIndexEntries(e,t){const r=new Map;return W.forEach(t,((s,i)=>{const o=r.get(s.collectionGroup);return(o?W.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next((u=>(r.set(s.collectionGroup,u),W.forEach(u,(d=>this.zn(e,s,d).next((p=>{const f=this.jn(i,d);return p.isEqual(f)?W.resolve():this.Jn(e,i,d,p,f)})))))))}))}Hn(e,t,r,s){return mc(e).put(s.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,s){return mc(e).delete(s.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const s=mc(e);let i=new ut(Xi);return s.ee({index:_A,range:IDBKeyRange.only([r.indexId,this.uid,df(this.$n(r,t))])},((o,u)=>{i=i.add(new Fa(r.indexId,t,XT(u.arrayValue),XT(u.directionalValue)))})).next((()=>i))}jn(e,t){let r=new ut(Xi);const s=this.Qn(t,e);if(s==null)return r;const i=Kx(t);if(i!=null){const o=e.data.field(i.fieldPath);if(bh(o))for(const u of o.arrayValue.values||[])r=r.add(new Fa(t.indexId,e.key,this.Ln(u),s))}else r=r.add(new Fa(t.indexId,e.key,Dm,s));return r}Jn(e,t,r,s,i){oe(t1,"Updating index entries for document '%s'",t.key);const o=[];return(function(d,p,f,y,x){const S=d.getIterator(),E=p.getIterator();let k=hc(S),I=hc(E);for(;k||I;){let M=!1,j=!1;if(k&&I){const C=f(k,I);C<0?j=!0:C>0&&(M=!0)}else k!=null?j=!0:M=!0;M?(y(I),I=hc(E)):j?(x(k),k=hc(S)):(k=hc(S),I=hc(E))}})(s,i,Xi,(u=>{o.push(this.Hn(e,t,r,u))}),(u=>{o.push(this.Yn(e,t,r,u))})),W.waitFor(o)}Gn(e){let t=1;return fc(e).ee({index:SA,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,s,i)=>{i.done(),t=s.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((o,u)=>Xi(o,u))).filter(((o,u,d)=>!u||Xi(o,d[u-1])!==0));const s=[];s.push(e);for(const o of r){const u=Xi(o,e),d=Xi(o,t);if(u===0)s[0]=e.An();else if(u>0&&d<0)s.push(o),s.push(o.An());else if(d>0)break}s.push(t);const i=[];for(let o=0;o<s.length;o+=2){if(this.Zn(s[o],s[o+1]))return[];const u=s[o].Vn(this.uid,Dm,he.empty()),d=s[o+1].Vn(this.uid,Dm,he.empty());i.push(IDBKeyRange.bound(u,d))}return i}Zn(e,t){return Xi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(r1)}getMinOffset(e,t){return W.mapArray(this.Mn(t),(r=>this.xn(e,r).next((s=>s||xe(44426))))).next(r1)}}function n1(n){return en(n,gh)}function mc(n){return en(n,Hd)}function Ed(n){return en(n,T0)}function fc(n){return en(n,zd)}function r1(n){Ee(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const s=n[r].indexState.offset;S0(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new cr(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},NP=41943040;class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(n,e,t){const r=n.store(Ur),s=n.store(Hc),i=[],o=IDBKeyRange.only(t.batchId);let u=0;const d=r.ee({range:o},((f,y,x)=>(u++,x.delete())));i.push(d.next((()=>{Ee(u===1,47070,{batchId:t.batchId})})));const p=[];for(const f of t.mutations){const y=xA(e,f.key.path,t.batchId);i.push(s.delete(y)),p.push(f.key)}return W.waitFor(i).next((()=>p))}function Bf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(NP,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);class Ng{constructor(e,t,r,s){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=s,this.Xn={}}static wt(e,t,r,s){Ee(e.uid!=="",64387);const i=e.isAuthenticated()?e.uid:"";return new Ng(i,t,r,s)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Zi(e).ee({index:Ua,range:r},((s,i,o)=>{t=!1,o.done()})).next((()=>t))}addMutationBatch(e,t,r,s){const i=Tc(e),o=Zi(e);return o.add({}).next((u=>{Ee(typeof u=="number",49019);const d=new O0(u,t,r,s),p=(function(S,E,k){const I=k.baseMutations.map((j=>_h(S.yt,j))),M=k.mutations.map((j=>_h(S.yt,j)));return{userId:E,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:I,mutations:M}})(this.serializer,this.userId,d),f=[];let y=new ut(((x,S)=>Oe(x.canonicalString(),S.canonicalString())));for(const x of s){const S=xA(this.userId,x.key.path,u);y=y.add(x.key.path.popLast()),f.push(o.put(p)),f.push(i.put(S,n3))}return y.forEach((x=>{f.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Xn[u]=d.keys()})),W.waitFor(f).next((()=>d))}))}lookupMutationBatch(e,t){return Zi(e).get(t).next((r=>r?(Ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Ma(this.serializer,r)):null))}er(e,t){return this.Xn[t]?W.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const s=r.keys();return this.Xn[t]=s,s}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return Zi(e).ee({index:Ua,range:s},((o,u,d)=>{u.userId===this.userId&&(Ee(u.batchId>=r,47524,{tr:r}),i=Ma(this.serializer,u)),d.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=bo;return Zi(e).ee({index:Ua,range:t,reverse:!0},((s,i,o)=>{r=i.batchId,o.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,bo],[this.userId,Number.POSITIVE_INFINITY]);return Zi(e).J(Ua,t).next((r=>r.map((s=>Ma(this.serializer,s)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rf(this.userId,t.path),s=IDBKeyRange.lowerBound(r),i=[];return Tc(e).ee({range:s},((o,u,d)=>{const[p,f,y]=o,x=ws(f);if(p===this.userId&&t.path.isEqual(x))return Zi(e).get(y).next((S=>{if(!S)throw xe(61480,{nr:o,batchId:y});Ee(S.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:S.userId,batchId:y}),i.push(Ma(this.serializer,S))}));d.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Oe);const s=[];return t.forEach((i=>{const o=rf(this.userId,i.path),u=IDBKeyRange.lowerBound(o),d=Tc(e).ee({range:u},((p,f,y)=>{const[x,S,E]=p,k=ws(S);x===this.userId&&i.path.isEqual(k)?r=r.add(E):y.done()}));s.push(d)})),W.waitFor(s).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1,i=rf(this.userId,r),o=IDBKeyRange.lowerBound(i);let u=new ut(Oe);return Tc(e).ee({range:o},((d,p,f)=>{const[y,x,S]=d,E=ws(x);y===this.userId&&r.isPrefixOf(E)?E.length===s&&(u=u.add(S)):f.done()})).next((()=>this.rr(e,u)))}rr(e,t){const r=[],s=[];return t.forEach((i=>{s.push(Zi(e).get(i).next((o=>{if(o===null)throw xe(35274,{batchId:i});Ee(o.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:o.userId,batchId:i}),r.push(Ma(this.serializer,o))})))})),W.waitFor(s).next((()=>r))}removeMutationBatch(e,t){return jP(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),W.forEach(r,(s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return W.resolve();const r=IDBKeyRange.lowerBound((function(o){return[o]})(this.userId)),s=[];return Tc(e).ee({range:r},((i,o,u)=>{if(i[0]===this.userId){const d=ws(i[1]);s.push(d)}else u.done()})).next((()=>{Ee(s.length===0,56720,{sr:s.map((i=>i.canonicalString()))})}))}))}containsKey(e,t){return RP(e,this.userId,t)}_r(e){return DP(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:bo,lastStreamToken:""}))}}function RP(n,e,t){const r=rf(e,t.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return Tc(n).ee({range:i,X:!0},((u,d,p)=>{const[f,y,x]=u;f===e&&y===s&&(o=!0),p.done()})).next((()=>o))}function Zi(n){return en(n,Ur)}function Tc(n){return en(n,Hc)}function DP(n){return en(n,mh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new il(0)}static cr(){return new il(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new il(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Ae.fromTimestamp(new it(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((s=>(s.highestListenSequenceNumber=t,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.hr(e,s))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>gc(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(Ee(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let s=0;const i=[];return gc(e).ee(((o,u)=>{const d=Dd(u);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(s++,i.push(this.removeTargetData(e,d)))})).next((()=>W.waitFor(i))).next((()=>s))}forEachTarget(e,t){return gc(e).ee(((r,s)=>{const i=Dd(s);t(i)}))}lr(e){return i1(e).get(Df).next((t=>(Ee(t!==null,2888),t)))}hr(e,t){return i1(e).put(Df,t)}Pr(e,t){return gc(e).put(kP(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=el(t),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return gc(e).ee({range:s,index:wA},((o,u,d)=>{const p=Dd(u);Hh(t,p.target)&&(i=p,d.done())})).next((()=>i))}addMatchingKeys(e,t,r){const s=[],i=lo(e);return t.forEach((o=>{const u=En(o.path);s.push(i.put({targetId:r,path:u})),s.push(this.referenceDelegate.addReference(e,r,o))})),W.waitFor(s)}removeMatchingKeys(e,t,r){const s=lo(e);return W.forEach(t,(i=>{const o=En(i.path);return W.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])}))}removeMatchingKeysForTargetId(e,t){const r=lo(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),s=lo(e);let i=ze();return s.ee({range:r,X:!0},((o,u,d)=>{const p=ws(o[1]),f=new he(p);i=i.add(f)})).next((()=>i))}containsKey(e,t){const r=En(t.path),s=IDBKeyRange.bound([r],[cA(r)],!1,!0);let i=0;return lo(e).ee({index:E0,X:!0,range:s},(([o,u],d,p)=>{o!==0&&(i++,p.done())})).next((()=>i>0))}At(e,t){return gc(e).get(t).next((r=>r?Dd(r):null))}}function gc(n){return en(n,qc)}function i1(n){return en(n,Ga)}function lo(n){return en(n,Gc)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="LruGarbageCollector",OP=1048576;function a1([n,e],[t,r]){const s=Oe(n,t);return s===0?Oe(e,r):s}class _5{constructor(e){this.Ir=e,this.buffer=new ut(a1),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();a1(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(o1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){$o(t)?oe(o1,"Ignoring IndexedDB error during garbage collection: ",t):await Uo(t)}await this.Vr(3e5)}))}}class E5{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return W.resolve(Un.ce);const r=new _5(t);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(s1)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),s1):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,s,i,o,u,d,p;const f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((y=>(y>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${y}`),s=this.params.maximumSequenceNumbersToCollect):s=y,o=Date.now(),this.nthSequenceNumber(e,s)))).next((y=>(r=y,u=Date.now(),this.removeTargets(e,r,t)))).next((y=>(i=y,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((y=>(p=Date.now(),Sc()<=Je.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-f}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(d-u)+`ms
	Removed ${y} documents in `+(p-d)+`ms
Total Duration: ${p-f}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:y}))))}}function LP(n,e){return new E5(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e,t){this.db=e,this.garbageCollector=LP(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,s)=>t(s)))}addReference(e,t,r){return Om(e,r)}removeReference(e,t,r){return Om(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Om(e,t)}br(e,t){return(function(s,i){let o=!1;return DP(s).te((u=>RP(s,u,i).next((d=>(d&&(o=!0),W.resolve(!d)))))).next((()=>o))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Sr(e,((o,u)=>{if(u<=t){const d=this.br(e,o).next((p=>{if(!p)return i++,r.getEntry(e,o).next((()=>(r.removeEntry(o,Ae.min()),lo(e).delete((function(y){return[0,En(y.path)]})(o)))))}));s.push(d)}})).next((()=>W.waitFor(s))).next((()=>r.apply(e))).next((()=>i))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Om(e,t)}Sr(e,t){const r=lo(e);let s,i=Un.ce;return r.ee({index:E0},(([o,u],{path:d,sequenceNumber:p})=>{o===0?(i!==Un.ce&&t(new he(ws(s)),i),i=p,s=d):i=Un.ce})).next((()=>{i!==Un.ce&&t(new he(ws(s)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Om(n,e){return lo(n).put((function(r,s){return{targetId:0,path:En(r.path),sequenceNumber:s}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(){this.changes=new vi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,bt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?W.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I5{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ea(e).put(r)}removeEntry(e,t,r){return Ea(e).delete((function(i,o){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],Ff(o),u[u.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=bt.newInvalidDocument(t);return Ea(e).ee({index:sf,range:IDBKeyRange.only(Td(t))},((s,i)=>{r=this.Cr(t,i)})).next((()=>r))}vr(e,t){let r={size:0,document:bt.newInvalidDocument(t)};return Ea(e).ee({index:sf,range:IDBKeyRange.only(Td(t))},((s,i)=>{r={document:this.Cr(t,i),size:Bf(i)}})).next((()=>r))}getEntries(e,t){let r=zn();return this.Fr(e,t,((s,i)=>{const o=this.Cr(s,i);r=r.insert(s,o)})).next((()=>r))}Mr(e,t){let r=zn(),s=new gt(he.comparator);return this.Fr(e,t,((i,o)=>{const u=this.Cr(i,o);r=r.insert(i,u),s=s.insert(i,Bf(o))})).next((()=>({documents:r,Or:s})))}Fr(e,t,r){if(t.isEmpty())return W.resolve();let s=new ut(u1);t.forEach((d=>s=s.add(d)));const i=IDBKeyRange.bound(Td(s.first()),Td(s.last())),o=s.getIterator();let u=o.getNext();return Ea(e).ee({index:sf,range:i},((d,p,f)=>{const y=he.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;u&&u1(u,y)<0;)r(u,null),u=o.getNext();u&&u.isEqual(y)&&(r(u,p),u=o.hasNext()?o.getNext():null),u?f.j(Td(u)):f.done()})).next((()=>{for(;u;)r(u,null),u=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,r,s,i){const o=t.path,u=[o.popLast().toArray(),o.lastSegment(),Ff(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ea(e).J(IDBKeyRange.bound(u,d,!0)).next((p=>{i?.incrementDocumentReadCount(p.length);let f=zn();for(const y of p){const x=this.Cr(he.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);x.isFoundDocument()&&(Gh(t,x)||s.has(x.key))&&(f=f.insert(x.key,x))}return f}))}getAllFromCollectionGroup(e,t,r,s){let i=zn();const o=c1(t,r),u=c1(t,cr.max());return Ea(e).ee({index:bA,range:IDBKeyRange.bound(o,u,!0)},((d,p,f)=>{const y=this.Cr(he.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);i=i.insert(y.key,y),i.size===s&&f.done()})).next((()=>i))}newChangeBuffer(e){return new C5(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return l1(e).get(Jx).next((t=>(Ee(!!t,20021),t)))}Dr(e,t){return l1(e).put(Jx,t)}Cr(e,t){if(t){const r=h5(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Ae.min())))return r}return bt.newInvalidDocument(e)}}function VP(n){return new I5(n)}class C5 extends FP{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new vi((r=>r.toString()),((r,s)=>r.isEqual(s)))}applyChanges(e){const t=[];let r=0,s=new ut(((i,o)=>Oe(i.canonicalString(),o.canonicalString())));return this.changes.forEach(((i,o)=>{const u=this.Br.get(i);if(t.push(this.Nr.removeEntry(e,i,u.readTime)),o.isValidDocument()){const d=qT(this.Nr.serializer,o);s=s.add(i.path.popLast());const p=Bf(d);r+=p-u.size,t.push(this.Nr.addEntry(e,i,d))}else if(r-=u.size,this.trackRemovals){const d=qT(this.Nr.serializer,o.convertToNoDocument(Ae.min()));t.push(this.Nr.addEntry(e,i,d))}})),s.forEach((i=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,i))})),t.push(this.Nr.updateMetadata(e,r)),W.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:s})=>(s.forEach(((i,o)=>{this.Br.set(i,{size:o,readTime:r.get(i).readTime})})),r)))}}function l1(n){return en(n,fh)}function Ea(n){return en(n,Rf)}function Td(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function c1(n,e){const t=e.documentKey.path.toArray();return[n,Ff(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function u1(n,e){const t=n.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<t.length-2&&i<r.length-2;++i)if(s=Oe(t[i],r[i]),s)return s;return s=Oe(t.length,r.length),s||(s=Oe(t[t.length-2],r[r.length-2]),s||Oe(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(r!==null&&Wd(r.mutation,s,$n.empty(),it.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const s=Ss();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,r).next((i=>{let o=jd();return i.forEach(((u,d)=>{o=o.insert(u,d.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const r=Ss();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const s=[];return r.forEach((i=>{t.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(e,s).next((i=>{i.forEach(((o,u)=>{t.set(o,u)}))}))}computeViews(e,t,r,s){let i=zn();const o=Gd(),u=(function(){return Gd()})();return t.forEach(((d,p)=>{const f=r.get(p.key);s.has(p.key)&&(f===void 0||f.mutation instanceof xi)?i=i.insert(p.key,p):f!==void 0?(o.set(p.key,f.mutation.getFieldMask()),Wd(f.mutation,p,f.mutation.getFieldMask(),it.now())):o.set(p.key,$n.empty())})),this.recalculateAndSaveOverlays(e,i).next((d=>(d.forEach(((p,f)=>o.set(p,f))),t.forEach(((p,f)=>u.set(p,new k5(f,o.get(p)??null)))),u)))}recalculateAndSaveOverlays(e,t){const r=Gd();let s=new gt(((o,u)=>o-u)),i=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const u of o)u.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let f=r.get(d)||$n.empty();f=u.applyToLocalView(p,f),r.set(d,f);const y=(s.get(u.batchId)||ze()).add(d);s=s.insert(u.batchId,y)}))})).next((()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const d=u.getNext(),p=d.key,f=d.value,y=tP();f.forEach((x=>{if(!i.has(x)){const S=lP(t.get(x),r.get(x));S!==null&&y.set(x,S),i=i.add(x)}})),o.push(this.documentOverlayCache.saveOverlays(e,p,y))}return W.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,s){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):N0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next((i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):W.resolve(Ss());let u=Uc,d=i;return o.next((p=>W.forEach(p,((f,y)=>(u<y.largestBatchId&&(u=y.largestBatchId),i.get(f)?W.resolve():this.remoteDocumentCache.getEntry(e,f).next((x=>{d=d.insert(f,x)}))))).next((()=>this.populateOverlays(e,p,i))).next((()=>this.computeViews(e,d,p,ze()))).next((f=>({batchId:u,changes:eP(f)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next((r=>{let s=jd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=jd();return this.indexManager.getCollectionParents(e,i).next((u=>W.forEach(u,(d=>{const p=(function(y,x){return new yi(x,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)})(t,d.child(i));return this.getDocumentsMatchingCollectionQuery(e,p,r,s).next((f=>{f.forEach(((y,x)=>{o=o.insert(y,x)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s)))).next((o=>{i.forEach(((d,p)=>{const f=p.getKey();o.get(f)===null&&(o=o.insert(f,bt.newInvalidDocument(f)))}));let u=jd();return o.forEach(((d,p)=>{const f=i.get(d);f!==void 0&&Wd(f.mutation,p,$n.empty(),it.now()),Gh(t,p)&&(u=u.insert(d,p))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A5{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return W.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:Ut(s.createTime)}})(t)),W.resolve()}getNamedQuery(e,t){return W.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:Ag(s.bundledQuery),readTime:Ut(s.readTime)}})(t)),W.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(){this.overlays=new gt(he.comparator),this.qr=new Map}getOverlay(e,t){return W.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ss();return W.forEach(t,(s=>this.getOverlay(e,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((s,i)=>{this.St(e,t,i)})),W.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),W.resolve()}getOverlaysForCollection(e,t,r){const s=Ss(),i=t.length+1,o=new he(t.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const d=u.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===i&&d.largestBatchId>r&&s.set(d.getKey(),d)}return W.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new gt(((p,f)=>p-f));const o=this.overlays.getIterator();for(;o.hasNext();){const p=o.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let f=i.get(p.largestBatchId);f===null&&(f=Ss(),i=i.insert(p.largestBatchId,f)),f.set(p.getKey(),p)}}const u=Ss(),d=i.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,f)=>u.set(p,f))),!(u.size()>=s)););return W.resolve(u)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new L0(t,r));let i=this.qr.get(t);i===void 0&&(i=ze(),this.qr.set(t,i)),this.qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N5{constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,W.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(){this.Qr=new ut(on.$r),this.Ur=new ut(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new on(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new on(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new he(new We([])),r=new on(t,e),s=new on(t,e+1),i=[];return this.Ur.forEachInRange([r,s],(o=>{this.Gr(o),i.push(o.key)})),i}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new he(new We([])),r=new on(t,e),s=new on(t,e+1);let i=ze();return this.Ur.forEachInRange([r,s],(o=>{i=i.add(o.key)})),i}containsKey(e){const t=new on(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return he.comparator(e.key,t.key)||Oe(e.Yr,t.Yr)}static Kr(e,t){return Oe(e.Yr,t.Yr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new ut(on.$r)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new O0(i,t,r,s);this.mutationQueue.push(o);for(const u of s)this.Zr=this.Zr.add(new on(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return W.resolve(o)}lookupMutationBatch(e,t){return W.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ei(r),i=s<0?0:s;return W.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?bo:this.tr-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new on(t,0),s=new on(t,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(o=>{const u=this.Xr(o.Yr);i.push(u)})),W.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ut(Oe);return t.forEach((s=>{const i=new on(s,0),o=new on(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],(u=>{r=r.add(u.Yr)}))})),W.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;he.isDocumentKey(i)||(i=i.child(""));const o=new on(new he(i),0);let u=new ut(Oe);return this.Zr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===s&&(u=u.add(d.Yr)),!0)}),o),W.resolve(this.ti(u))}ti(e){const t=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){Ee(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return W.forEach(t.mutations,(s=>{const i=new on(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new on(t,0),s=this.Zr.firstAfterOrEqual(r);return W.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R5{constructor(e){this.ri=e,this.docs=(function(){return new gt(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return W.resolve(r?r.document.mutableCopy():bt.newInvalidDocument(t))}getEntries(e,t){let r=zn();return t.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():bt.newInvalidDocument(s))})),W.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=zn();const o=t.path,u=new he(o.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:p,value:{document:f}}=d.getNext();if(!o.isPrefixOf(p.path))break;p.path.length>o.length+1||S0(mA(f),r)<=0||(s.has(f.key)||Gh(t,f))&&(i=i.insert(f.key,f.mutableCopy()))}return W.resolve(i)}getAllFromCollectionGroup(e,t,r,s){xe(9500)}ii(e,t){return W.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new D5(this)}getSize(e){return W.resolve(this.size)}}class D5 extends FP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),W.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.persistence=e,this.si=new vi((t=>el(t)),Hh),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new $0,this.targetCount=0,this.ai=il.ur()}forEachTarget(e,t){return this.si.forEach(((r,s)=>t(s))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),W.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new il(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,W.resolve()}updateTargetData(e,t){return this.Pr(t),W.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.si.forEach(((o,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),W.waitFor(i).next((()=>s))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return W.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),W.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach((o=>{i.push(s.markPotentiallyOrphaned(e,o))})),W.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),W.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return W.resolve(r)}containsKey(e,t){return W.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(e,t){this.ui={},this.overlays={},this.ci=new Un(0),this.li=!1,this.li=!0,this.hi=new N5,this.referenceDelegate=e(this),this.Pi=new O5(this),this.indexManager=new b5,this.remoteDocumentCache=(function(s){return new R5(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new CP(t),this.Ii=new A5(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new P5,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new j5(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const s=new M5(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(e,t){return W.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class M5 extends gA{constructor(e){super(),this.currentSequenceNumber=e}}class jg{constructor(e){this.persistence=e,this.Ri=new $0,this.Vi=null}static mi(e){return new jg(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),W.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),W.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),W.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.fi,(r=>{const s=he.fromPath(r);return this.gi(e,s).next((i=>{i||t.removeEntry(s,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return W.or([()=>W.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Uf{constructor(e,t){this.persistence=e,this.pi=new vi((r=>En(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=LP(this,t)}static mi(e,t){return new Uf(e,t)}Ei(){}di(e){return W.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((s=>r+s))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return W.forEach(this.pi,((r,s)=>this.br(e,r,s).next((i=>i?W.resolve():t(s)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,t).next((u=>{u||(r++,i.removeEntry(o,Ae.min()))})))).next((()=>i.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),W.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=af(e.data.value)),t}br(e,t,r){return W.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return W.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L5{constructor(e){this.serializer=e}k(e,t,r,s){const i=new vg("createOrUpgrade",t);r<1&&s>=1&&((function(d){d.createObjectStore(zh)})(e),(function(d){d.createObjectStore(mh,{keyPath:t3}),d.createObjectStore(Ur,{keyPath:wT,autoIncrement:!0}).createIndex(Ua,ST,{unique:!0}),d.createObjectStore(Hc)})(e),d1(e),(function(d){d.createObjectStore(ka)})(e));let o=W.resolve();return r<3&&s>=3&&(r!==0&&((function(d){d.deleteObjectStore(Gc),d.deleteObjectStore(qc),d.deleteObjectStore(Ga)})(e),d1(e)),o=o.next((()=>(function(d){const p=d.store(Ga),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ae.min().toTimestamp(),targetCount:0};return p.put(Df,f)})(i)))),r<4&&s>=4&&(r!==0&&(o=o.next((()=>(function(d,p){return p.store(Ur).J().next((y=>{d.deleteObjectStore(Ur),d.createObjectStore(Ur,{keyPath:wT,autoIncrement:!0}).createIndex(Ua,ST,{unique:!0});const x=p.store(Ur),S=y.map((E=>x.put(E)));return W.waitFor(S)}))})(e,i)))),o=o.next((()=>{(function(d){d.createObjectStore(Wc,{keyPath:u3})})(e)}))),r<5&&s>=5&&(o=o.next((()=>this.yi(i)))),r<6&&s>=6&&(o=o.next((()=>((function(d){d.createObjectStore(fh)})(e),this.wi(i))))),r<7&&s>=7&&(o=o.next((()=>this.Si(i)))),r<8&&s>=8&&(o=o.next((()=>this.bi(e,i)))),r<9&&s>=9&&(o=o.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&s>=10&&(o=o.next((()=>this.Di(i)))),r<11&&s>=11&&(o=o.next((()=>{(function(d){d.createObjectStore(xg,{keyPath:d3})})(e),(function(d){d.createObjectStore(bg,{keyPath:h3})})(e)}))),r<12&&s>=12&&(o=o.next((()=>{(function(d){const p=d.createObjectStore(wg,{keyPath:x3});p.createIndex(Yx,b3,{unique:!1}),p.createIndex(EA,w3,{unique:!1})})(e)}))),r<13&&s>=13&&(o=o.next((()=>(function(d){const p=d.createObjectStore(Rf,{keyPath:r3});p.createIndex(sf,s3),p.createIndex(bA,i3)})(e))).next((()=>this.Ci(e,i))).next((()=>e.deleteObjectStore(ka)))),r<14&&s>=14&&(o=o.next((()=>this.Fi(e,i)))),r<15&&s>=15&&(o=o.next((()=>(function(d){d.createObjectStore(T0,{keyPath:p3,autoIncrement:!0}).createIndex(Qx,m3,{unique:!1}),d.createObjectStore(zd,{keyPath:f3}).createIndex(SA,g3,{unique:!1}),d.createObjectStore(Hd,{keyPath:y3}).createIndex(_A,v3,{unique:!1})})(e)))),r<16&&s>=16&&(o=o.next((()=>{t.objectStore(zd).clear()})).next((()=>{t.objectStore(Hd).clear()}))),r<17&&s>=17&&(o=o.next((()=>{(function(d){d.createObjectStore(I0,{keyPath:S3})})(e)}))),r<18&&s>=18&&dk()&&(o=o.next((()=>{t.objectStore(zd).clear()})).next((()=>{t.objectStore(Hd).clear()}))),o}wi(e){let t=0;return e.store(ka).ee(((r,s)=>{t+=Bf(s)})).next((()=>{const r={byteSize:t};return e.store(fh).put(Jx,r)}))}yi(e){const t=e.store(mh),r=e.store(Ur);return t.J().next((s=>W.forEach(s,(i=>{const o=IDBKeyRange.bound([i.userId,bo],[i.userId,i.lastAcknowledgedBatchId]);return r.J(Ua,o).next((u=>W.forEach(u,(d=>{Ee(d.userId===i.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const p=Ma(this.serializer,d);return jP(e,i.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Gc),r=e.store(ka);return e.store(Ga).get(Df).next((s=>{const i=[];return r.ee(((o,u)=>{const d=new We(o),p=(function(y){return[0,En(y)]})(d);i.push(t.get(p).next((f=>f?W.resolve():(y=>t.put({targetId:0,path:En(y),sequenceNumber:s.highestListenSequenceNumber}))(d))))})).next((()=>W.waitFor(i)))}))}bi(e,t){e.createObjectStore(gh,{keyPath:c3});const r=t.store(gh),s=new U0,i=o=>{if(s.add(o)){const u=o.lastSegment(),d=o.popLast();return r.put({collectionId:u,parent:En(d)})}};return t.store(ka).ee({X:!0},((o,u)=>{const d=new We(o);return i(d.popLast())})).next((()=>t.store(Hc).ee({X:!0},(([o,u,d],p)=>{const f=ws(u);return i(f.popLast())}))))}Di(e){const t=e.store(qc);return t.ee(((r,s)=>{const i=Dd(s),o=kP(this.serializer,i);return t.put(o)}))}Ci(e,t){const r=t.store(ka),s=[];return r.ee(((i,o)=>{const u=t.store(Rf),d=(function(y){return y.document?new he(We.fromString(y.document.name).popFirst(5)):y.noDocument?he.fromSegments(y.noDocument.path):y.unknownDocument?he.fromSegments(y.unknownDocument.path):xe(36783)})(o).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(u.put(p))})).next((()=>W.waitFor(s)))}Fi(e,t){const r=t.store(Ur),s=VP(this.serializer),i=new z0(jg.mi,this.serializer.yt);return r.J().next((o=>{const u=new Map;return o.forEach((d=>{let p=u.get(d.userId)??ze();Ma(this.serializer,d).keys().forEach((f=>p=p.add(f))),u.set(d.userId,p)})),W.forEach(u,((d,p)=>{const f=new an(p),y=Pg.wt(this.serializer,f),x=i.getIndexManager(f),S=Ng.wt(f,this.serializer,x,i.referenceDelegate);return new BP(s,S,y,x).recalculateAndSaveOverlaysForDocumentKeys(new Xx(t,Un.ce),d).next()}))}))}}function d1(n){n.createObjectStore(Gc,{keyPath:a3}).createIndex(E0,l3,{unique:!0}),n.createObjectStore(qc,{keyPath:"targetId"}).createIndex(wA,o3,{unique:!0}),n.createObjectStore(Ga)}const eo="IndexedDbPersistence",Qv=18e5,Yv=5e3,Xv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",UP="main";class H0{constructor(e,t,r,s,i,o,u,d,p,f,y=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=i,this.window=o,this.document=u,this.xi=p,this.Oi=f,this.Ni=y,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=x=>Promise.resolve(),!H0.v())throw new re(Q.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new T5(this,s),this.$i=t+UP,this.serializer=new CP(d),this.Ui=new Cs(this.$i,this.Ni,new L5(this.serializer)),this.hi=new m5,this.Pi=new S5(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VP(this.serializer),this.Ii=new p5,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,f===!1&&Vt(eo,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,Xv);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Un(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Mm(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if($o(e))return oe(eo,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(eo,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Id(e).get(dc).next((t=>W.resolve(this.es(t))))}ts(e){return Mm(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Qv)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=en(t,Wc);return r.J().next((s=>{const i=this.ss(s,Qv),o=s.filter((u=>i.indexOf(u)===-1));return W.forEach(o,(u=>r.delete(u.clientId))).next((()=>o))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?W.resolve(!0):Id(e).get(dc).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Yv)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new re(Q.FAILED_PRECONDITION,Xv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Mm(e).J().next((r=>this.ss(r,Yv).find((s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,u=this.networkEnabled===s.networkEnabled;if(i||o&&u)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&oe(eo,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[zh,Wc],(e=>{const t=new Xx(e,Un.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Mm(e).J().next((t=>this.ss(t,Qv).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return Ng.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new w5(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Pg.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){oe(eo,"Starting transaction:",e);const s=t==="readonly"?"readonly":"readwrite",i=(function(d){return d===18?T3:d===17?kA:d===16?E3:d===15?C0:d===14?CA:d===13?IA:d===12?_3:d===11?TA:void xe(60245)})(this.Ni);let o;return this.Ui.runTransaction(e,s,i,(u=>(o=new Xx(u,this.ci?this.ci.next():Un.ce),t==="readwrite-primary"?this.Hi(o).next((d=>!!d||this.Yi(o))).next((d=>{if(!d)throw Vt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new re(Q.FAILED_PRECONDITION,fA);return r(o)})).next((d=>this.Xi(o).next((()=>d)))):this.Is(o).next((()=>r(o)))))).then((u=>(o.raiseOnCommittedEvent(),u)))}Is(e){return Id(e).get(dc).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Yv)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new re(Q.FAILED_PRECONDITION,Xv)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Id(e).put(dc,t)}static v(){return Cs.v()}Zi(e){const t=Id(e);return t.get(dc).next((r=>this.es(r)?(oe(eo,"Releasing primary lease."),t.delete(dc)):W.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Vt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;uk()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return oe(eo,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return Vt(eo,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){Vt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Id(n){return en(n,zh)}function Mm(n){return en(n,Wc)}function q0(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=s}static As(e,t){let r=ze(),s=ze();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new G0(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return uk()?8:yA(Xt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ys(e,t).next((o=>{i.result=o})).next((()=>{if(!i.result)return this.ws(e,t,s,r).next((o=>{i.result=o}))})).next((()=>{if(i.result)return;const o=new F5;return this.Ss(e,t,o).next((u=>{if(i.result=u,this.Vs)return this.bs(e,t,o,u.size)}))})).next((()=>i.result))}bs(e,t,r,s){return r.documentReadCount<this.fs?(Sc()<=Je.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",_c(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),W.resolve()):(Sc()<=Je.DEBUG&&oe("QueryEngine","Query:",_c(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Sc()<=Je.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",_c(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Tn(t))):W.resolve())}ys(e,t){if(OT(t))return W.resolve(null);let r=Tn(t);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=Lf(t,null,"F"),r=Tn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((i=>{const o=ze(...i);return this.ps.getDocuments(e,o).next((u=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.Ds(t,u);return this.Cs(t,p,o,d.readTime)?this.ys(e,Lf(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ws(e,t,r,s){return OT(t)||s.isEqual(Ae.min())?W.resolve(null):this.ps.getDocuments(e,r).next((i=>{const o=this.Ds(t,i);return this.Cs(t,o,r,s)?W.resolve(null):(Sc()<=Je.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_c(t)),this.vs(e,o,t,pA(s,Uc)).next((u=>u)))}))}Ds(e,t){let r=new ut(XA(e));return t.forEach(((s,i)=>{Gh(e,i)&&(r=r.add(i))})),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return Sc()<=Je.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",_c(t)),this.ps.getDocumentsMatchingQuery(e,t,cr.min(),r)}vs(e,t,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((i=>(t.forEach((o=>{i=i.insert(o.key,o)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="LocalStore",V5=3e8;class B5{constructor(e,t,r,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new gt(Oe),this.xs=new vi((i=>el(i)),Hh),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function zP(n,e,t,r){return new B5(n,e,t,r)}async function HP(n,e){const t=me(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((i=>{const o=[],u=[];let d=ze();for(const p of s){o.push(p.batchId);for(const f of p.mutations)d=d.add(f.key)}for(const p of i){u.push(p.batchId);for(const f of p.mutations)d=d.add(f.key)}return t.localDocuments.getDocuments(r,d).next((p=>({Ls:p,removedBatchIds:o,addedBatchIds:u})))}))}))}function U5(n,e){const t=me(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),i=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,d,p,f){const y=p.batch,x=y.keys();let S=W.resolve();return x.forEach((E=>{S=S.next((()=>f.getEntry(d,E))).next((k=>{const I=p.docVersions.get(E);Ee(I!==null,48541),k.version.compareTo(I)<0&&(y.applyToRemoteDocument(k,p),k.isValidDocument()&&(k.setReadTime(p.commitVersion),f.addEntry(k)))}))})),S.next((()=>u.mutationQueue.removeMutationBatch(d,y)))})(t,r,e,i).next((()=>i.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let d=ze();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(d=d.add(u.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,s)))}))}function qP(n){const e=me(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function $5(n,e){const t=me(n),r=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const u=[];e.targetChanges.forEach(((f,y)=>{const x=s.get(y);if(!x)return;u.push(t.Pi.removeMatchingKeys(i,f.removedDocuments,y).next((()=>t.Pi.addMatchingKeys(i,f.addedDocuments,y))));let S=x.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(y)!==null?S=S.withResumeToken(Pt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,r)),s=s.insert(y,S),(function(k,I,M){return k.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=V5?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0})(x,S,f)&&u.push(t.Pi.updateTargetData(i,S))}));let d=zn(),p=ze();if(e.documentUpdates.forEach((f=>{e.resolvedLimboDocuments.has(f)&&u.push(t.persistence.referenceDelegate.updateLimboDocument(i,f))})),u.push(GP(i,o,e.documentUpdates).next((f=>{d=f.ks,p=f.qs}))),!r.isEqual(Ae.min())){const f=t.Pi.getLastRemoteSnapshotVersion(i).next((y=>t.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));u.push(f)}return W.waitFor(u).next((()=>o.apply(i))).next((()=>t.localDocuments.getLocalViewOfDocuments(i,d,p))).next((()=>d))})).then((i=>(t.Ms=s,i)))}function GP(n,e,t){let r=ze(),s=ze();return t.forEach((i=>r=r.add(i))),e.getEntries(n,r).next((i=>{let o=zn();return t.forEach(((u,d)=>{const p=i.get(u);d.isFoundDocument()!==p.isFoundDocument()&&(s=s.add(u)),d.isNoDocument()&&d.version.isEqual(Ae.min())?(e.removeEntry(u,d.readTime),o=o.insert(u,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),o=o.insert(u,d)):oe(W0,"Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",d.version)})),{ks:o,qs:s}}))}function z5(n,e){const t=me(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=bo),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function eu(n,e){const t=me(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return t.Pi.getTargetData(r,e).next((i=>i?(s=i,W.resolve(s)):t.Pi.allocateTargetId(r).next((o=>(s=new si(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=t.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function tu(n,e,t){const r=me(n),s=r.Ms.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,(o=>r.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!$o(o))throw o;oe(W0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function $f(n,e,t){const r=me(n);let s=Ae.min(),i=ze();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(d,p,f){const y=me(d),x=y.xs.get(f);return x!==void 0?W.resolve(y.Ms.get(x)):y.Pi.getTargetData(p,f)})(r,o,Tn(e)).next((u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,u.targetId).next((d=>{i=d}))})).next((()=>r.Fs.getDocumentsMatchingQuery(o,e,t?s:Ae.min(),t?i:ze()))).next((u=>(JP(r,YA(e),u),{documents:u,Qs:i})))))}function WP(n,e){const t=me(n),r=me(t.Pi),s=t.Ms.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",(i=>r.At(i,e).next((o=>o?o.target:null))))}function KP(n,e){const t=me(n),r=t.Os.get(e)||Ae.min();return t.persistence.runTransaction("Get new document changes","readonly",(s=>t.Ns.getAllFromCollectionGroup(s,e,pA(r,Uc),Number.MAX_SAFE_INTEGER))).then((s=>(JP(t,e,s),s)))}function JP(n,e,t){let r=n.Os.get(e)||Ae.min();t.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),n.Os.set(e,r)}async function H5(n,e,t,r){const s=me(n);let i=ze(),o=zn();for(const p of t){const f=e.$s(p.metadata.name);p.document&&(i=i.add(f));const y=e.Us(p);y.setReadTime(e.Ks(p.metadata.readTime)),o=o.insert(f,y)}const u=s.Ns.newChangeBuffer({trackRemovals:!0}),d=await eu(s,(function(f){return Tn(pu(We.fromString(`__bundle__/docs/${f}`)))})(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",(p=>GP(p,u,o).next((f=>(u.apply(p),f))).next((f=>s.Pi.removeMatchingKeysForTargetId(p,d.targetId).next((()=>s.Pi.addMatchingKeys(p,i,d.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(p,f.ks,f.qs))).next((()=>f.ks))))))}async function q5(n,e,t=ze()){const r=await eu(n,Tn(Ag(e.bundledQuery))),s=me(n);return s.persistence.runTransaction("Save named query","readwrite",(i=>{const o=Ut(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ii.saveNamedQuery(i,e);const u=r.withResumeToken(Pt.EMPTY_BYTE_STRING,o);return s.Ms=s.Ms.insert(u.targetId,u),s.Pi.updateTargetData(i,u).next((()=>s.Pi.removeMatchingKeysForTargetId(i,r.targetId))).next((()=>s.Pi.addMatchingKeys(i,t,r.targetId))).next((()=>s.Ii.saveNamedQuery(i,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="firestore_clients";function h1(n,e){return`${QP}_${n}_${e}`}const YP="firestore_mutations";function p1(n,e,t){let r=`${YP}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const XP="firestore_targets";function Zv(n,e){return`${XP}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="SharedClientState";class zf{constructor(e,t,r,s){this.user=e,this.batchId=t,this.state=r,this.error=s}static Ws(e,t,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new re(s.error.code,s.error.message))),o?new zf(e,t,s.state,i):(Vt(xs,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new re(r.error.code,r.error.message))),i?new Kd(e,r.state,s):(Vt(xs,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=j0();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=vA(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new Hf(e,i):(Vt(xs,`Failed to parse client data for instance '${e}': ${t}`),null)}}class K0{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new K0(t.clientId,t.onlineState):(Vt(xs,`Failed to parse online state: ${e}`),null)}}class pb{constructor(){this.activeTargetIds=j0()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ex{constructor(e,t,r,s,i){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new gt(Oe),this.started=!1,this.Xs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.eo=h1(this.persistenceKey,this.Js),this.no=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new pb),this.ro=new RegExp(`^${QP}_${o}_([^_]*)$`),this.io=new RegExp(`^${YP}_${o}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${XP}_${o}_(\\d+)$`),this.oo=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this._o=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const s=this.getItem(h1(this.persistenceKey,r));if(s){const i=Hf.Ws(r,s);i&&(this.Zs=this.Zs.insert(i.clientId,i))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,s)=>{s.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const s=this.storage.getItem(Zv(this.persistenceKey,e));if(s){const i=Kd.Ws(e,s);i&&(r=i.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zv(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((s=>{this.Po(s)})),this.currentUser=e,r.forEach((s=>{this.addPendingMutation(s)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe(xs,"READ",e,t),t}setItem(e,t){oe(xs,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe(xs,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(oe(xs,"EVENT",t.key,t.newValue),t.key===this.eo)return void Vt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(i){let o=Un.ce;if(i!=null)try{const u=JSON.parse(i);Ee(typeof u=="number",30636,{So:i}),o=u}catch(u){Vt(xs,"Failed to read sequence number from WebStorage",u)}return o})(t.newValue);r!==Un.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((s=>this.syncEngine.Do(s))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const s=new zf(this.currentUser,e,t,r),i=p1(this.persistenceKey,this.currentUser,e);this.setItem(i,s.Gs())}Po(e){const t=p1(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const s=Zv(this.persistenceKey,e),i=new Kd(e,t,r);this.setItem(s,i.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Hf.Ws(r,t)}fo(e,t){const r=this.io.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return zf.Ws(new an(i),s,t)}yo(e,t){const r=this.so.exec(e),s=Number(r[1]);return Kd.Ws(s,t)}uo(e){return K0.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);oe(xs,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),s=this.lo(this.Zs),i=this.lo(r),o=[],u=[];return i.forEach((d=>{s.has(d)||o.push(d)})),s.forEach((d=>{i.has(d)||u.push(d)})),this.syncEngine.Fo(o,u).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=j0();return e.forEach(((r,s)=>{t=t.unionWith(s.activeTargetIds)})),t}}class ZP{constructor(){this.Mo=new pb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new pb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="ConnectivityMonitor";class f1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(m1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(m1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm=null;function mb(){return Lm===null?Lm=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lm++,"0x"+Lm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="RestConnection",W5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class K5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===vh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,t,r,s,i){const o=mb(),u=this.zo(e,t.toUriEncodedString());oe(tx,`Sending RPC '${e}' ${o}:`,u,r);const d={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(d,s,i);const{host:p}=new URL(u),f=gi(p);return this.Jo(e,u,d,r,f).then((y=>(oe(tx,`Received RPC '${e}' ${o}: `,y),y)),(y=>{throw lr(tx,`RPC '${e}' ${o} failed with error: `,y,"url: ",u,"request:",r),y}))}Ho(e,t,r,s,i,o){return this.Go(e,t,r,s,i)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+hu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,i)=>e[i]=s)),r&&r.headers.forEach(((s,i)=>e[i]=s))}zo(e,t){const r=W5[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class Q5 extends K5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const o=mb();return new Promise(((u,d)=>{const p=new tA;p.setWithCredentials(!0),p.listenOnce(nA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case nf.NO_ERROR:const y=p.getResponseJson();oe(bn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),u(y);break;case nf.TIMEOUT:oe(bn,`RPC '${e}' ${o} timed out`),d(new re(Q.DEADLINE_EXCEEDED,"Request time out"));break;case nf.HTTP_ERROR:const x=p.getStatus();if(oe(bn,`RPC '${e}' ${o} failed with status:`,x,"response text:",p.getResponseText()),x>0){let S=p.getResponseJson();Array.isArray(S)&&(S=S[0]);const E=S?.error;if(E&&E.status&&E.message){const k=(function(M){const j=M.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(j)>=0?j:Q.UNKNOWN})(E.status);d(new re(k,E.message))}else d(new re(Q.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new re(Q.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:o,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{oe(bn,`RPC '${e}' ${o} completed.`)}}));const f=JSON.stringify(s);oe(bn,`RPC '${e}' ${o} sending request:`,s),p.send(t,"POST",f,r,15)}))}T_(e,t,r){const s=mb(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=iA(),u=sA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.jo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const f=i.join("");oe(bn,`Creating RPC '${e}' stream ${s}: ${f}`,d);const y=o.createWebChannel(f,d);this.I_(y);let x=!1,S=!1;const E=new J5({Yo:I=>{S?oe(bn,`Not sending because RPC '${e}' stream ${s} is closed:`,I):(x||(oe(bn,`Opening RPC '${e}' stream ${s} transport.`),y.open(),x=!0),oe(bn,`RPC '${e}' stream ${s} sending:`,I),y.send(I))},Zo:()=>y.close()}),k=(I,M,j)=>{I.listen(M,(C=>{try{j(C)}catch(F){setTimeout((()=>{throw F}),0)}}))};return k(y,Nd.EventType.OPEN,(()=>{S||(oe(bn,`RPC '${e}' stream ${s} transport opened.`),E.o_())})),k(y,Nd.EventType.CLOSE,(()=>{S||(S=!0,oe(bn,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(y))})),k(y,Nd.EventType.ERROR,(I=>{S||(S=!0,lr(bn,`RPC '${e}' stream ${s} transport errored. Name:`,I.name,"Message:",I.message),E.a_(new re(Q.UNAVAILABLE,"The operation could not be completed")))})),k(y,Nd.EventType.MESSAGE,(I=>{if(!S){const M=I.data[0];Ee(!!M,16349);const j=M,C=j?.error||j[0]?.error;if(C){oe(bn,`RPC '${e}' stream ${s} received error:`,C);const F=C.status;let G=(function(_){const R=qt[_];if(R!==void 0)return hP(R)})(F),q=C.message;G===void 0&&(G=Q.INTERNAL,q="Unknown error status: "+F+" with message "+C.message),S=!0,E.a_(new re(G,q)),y.close()}else oe(bn,`RPC '${e}' stream ${s} received:`,M),E.u_(M)}})),k(u,rA.STAT_EVENT,(I=>{I.stat===Hx.PROXY?oe(bn,`RPC '${e}' stream ${s} detected buffering proxy`):I.stat===Hx.NOPROXY&&oe(bn,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof window<"u"?window:null}function hf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n){return new n5(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(e,t,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-r);s>0&&oe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="PersistentStream";class tN{constructor(e,t,r,s,i,o,u,d){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=d,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J0(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Q.RESOURCE_EXHAUSTED?(Vt(t.toString()),Vt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===t&&this.G_(r,s)}),(r=>{e((()=>{const s=new re(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return oe(g1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(oe(g1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Y5 extends tN{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=i5(this.serializer,e),r=(function(i){if(!("targetChange"in i))return Ae.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?Ut(o.readTime):Ae.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=lb(this.serializer),t.addTarget=(function(i,o){let u;const d=o.target;if(u=Of(d)?{documents:wP(i,d)}:{query:kg(i,d).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=gP(i,o.resumeToken);const p=ob(i,o.expectedCount);p!==null&&(u.expectedCount=p)}else if(o.snapshotVersion.compareTo(Ae.min())>0){u.readTime=Zc(i,o.snapshotVersion.toTimestamp());const p=ob(i,o.expectedCount);p!==null&&(u.expectedCount=p)}return u})(this.serializer,e);const r=a5(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=lb(this.serializer),t.removeTarget=e,this.q_(t)}}class X5 extends tN{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=o5(e.writeResults,e.commitTime),r=Ut(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=lb(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>_h(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{}class e6 extends Z5{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.Go(e,ab(t,r),s,i,o))).catch((i=>{throw i.name==="FirebaseError"?(i.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new re(Q.UNKNOWN,i.toString())}))}Ho(e,t,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,u])=>this.connection.Ho(e,ab(t,r),s,o,u,i))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(Q.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class t6{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Vt(t),this.aa=!1):oe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="RemoteStore";class n6{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((o=>{r.enqueueAndForget((async()=>{Ho(this)&&(oe(ol,"Restarting streams for network reachability change."),await(async function(d){const p=me(d);p.Ea.add(4),await gu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Qh(p)})(this))}))})),this.Ra=new t6(r,s)}}async function Qh(n){if(Ho(n))for(const e of n.da)await e(!0)}async function gu(n){for(const e of n.da)await e(!1)}function Rg(n,e){const t=me(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),X0(t)?Y0(t):vu(t).O_()&&Q0(t,e))}function nu(n,e){const t=me(n),r=vu(t);t.Ia.delete(e),r.O_()&&nN(t,e),t.Ia.size===0&&(r.O_()?r.L_():Ho(t)&&t.Ra.set("Unknown"))}function Q0(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vu(n).Y_(e)}function nN(n,e){n.Va.Ue(e),vu(n).Z_(e)}function Y0(n){n.Va=new X3({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),vu(n).start(),n.Ra.ua()}function X0(n){return Ho(n)&&!vu(n).x_()&&n.Ia.size>0}function Ho(n){return me(n).Ea.size===0}function rN(n){n.Va=void 0}async function r6(n){n.Ra.set("Online")}async function s6(n){n.Ia.forEach(((e,t)=>{Q0(n,e)}))}async function i6(n,e){rN(n),X0(n)?(n.Ra.ha(e),Y0(n)):n.Ra.set("Unknown")}async function o6(n,e,t){if(n.Ra.set("Online"),e instanceof fP&&e.state===2&&e.cause)try{await(async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.Va.removeTarget(u))})(n,e)}catch(r){oe(ol,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await qf(n,r)}else if(e instanceof uf?n.Va.Ze(e):e instanceof mP?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ae.min()))try{const r=await qP(n.localStore);t.compareTo(r)>=0&&await(function(i,o){const u=i.Va.Tt(o);return u.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const f=i.Ia.get(p);f&&i.Ia.set(p,f.withResumeToken(d.resumeToken,o))}})),u.targetMismatches.forEach(((d,p)=>{const f=i.Ia.get(d);if(!f)return;i.Ia.set(d,f.withResumeToken(Pt.EMPTY_BYTE_STRING,f.snapshotVersion)),nN(i,d);const y=new si(f.target,d,p,f.sequenceNumber);Q0(i,y)})),i.remoteSyncer.applyRemoteEvent(u)})(n,t)}catch(r){oe(ol,"Failed to raise snapshot:",r),await qf(n,r)}}async function qf(n,e,t){if(!$o(e))throw e;n.Ea.add(1),await gu(n),n.Ra.set("Offline"),t||(t=()=>qP(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{oe(ol,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Qh(n)}))}function sN(n,e){return e().catch((t=>qf(n,t,e)))}async function yu(n){const e=me(n),t=Do(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bo;for(;a6(e);)try{const s=await z5(e.localStore,r);if(s===null){e.Ta.length===0&&t.L_();break}r=s.batchId,l6(e,s)}catch(s){await qf(e,s)}iN(e)&&oN(e)}function a6(n){return Ho(n)&&n.Ta.length<10}function l6(n,e){n.Ta.push(e);const t=Do(n);t.O_()&&t.X_&&t.ea(e.mutations)}function iN(n){return Ho(n)&&!Do(n).x_()&&n.Ta.length>0}function oN(n){Do(n).start()}async function c6(n){Do(n).ra()}async function u6(n){const e=Do(n);for(const t of n.Ta)e.ea(t.mutations)}async function d6(n,e,t){const r=n.Ta.shift(),s=M0.from(r,e,t);await sN(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await yu(n)}async function h6(n,e){e&&Do(n).X_&&await(async function(r,s){if((function(o){return dP(o)&&o!==Q.ABORTED})(s.code)){const i=r.Ta.shift();Do(r).B_(),await sN(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await yu(r)}})(n,e),iN(n)&&oN(n)}async function y1(n,e){const t=me(n);t.asyncQueue.verifyOperationInProgress(),oe(ol,"RemoteStore received new credentials");const r=Ho(t);t.Ea.add(3),await gu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Qh(t)}async function fb(n,e){const t=me(n);e?(t.Ea.delete(2),await Qh(t)):e||(t.Ea.add(2),await gu(t),t.Ra.set("Unknown"))}function vu(n){return n.ma||(n.ma=(function(t,r,s){const i=me(t);return i.sa(),new Y5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:r6.bind(null,n),t_:s6.bind(null,n),r_:i6.bind(null,n),H_:o6.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),X0(n)?Y0(n):n.Ra.set("Unknown")):(await n.ma.stop(),rN(n))}))),n.ma}function Do(n){return n.fa||(n.fa=(function(t,r,s){const i=me(t);return i.sa(),new X5(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:c6.bind(null,n),r_:h6.bind(null,n),ta:u6.bind(null,n),na:d6.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await yu(n)):(await n.fa.stop(),n.Ta.length>0&&(oe(ol,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ln,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,u=new Z0(e,t,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xu(n,e){if(Vt("AsyncQueue",`${e}: ${n}`),$o(n))return new re(Q.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{static emptySet(e){return new Wa(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||he.comparator(t.key,r.key):(t,r)=>he.comparator(t.key,r.key),this.keyedMap=jd(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Wa)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Wa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(){this.ga=new gt(he.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class al{constructor(e,t,r,s,i,o,u,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach((u=>{o.push({type:0,doc:u})})),new al(e,t,Wa.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class m6{constructor(){this.queries=x1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=me(t),i=s.queries;s.queries=x1(),i.forEach(((o,u)=>{for(const d of u.Sa)d.onError(r)}))})(this,new re(Q.ABORTED,"Firestore shutting down"))}}function x1(){return new vi((n=>QA(n)),qh)}async function ew(n,e){const t=me(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new p6,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await t.onListen(s,!0);break;case 1:i.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const u=xu(o,`Initialization of query '${_c(e.query)}' failed`);return void e.onError(u)}t.queries.set(s,i),i.Sa.push(e),e.va(t.onlineState),i.wa&&e.Fa(i.wa)&&nw(t)}async function tw(n,e){const t=me(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function f6(n,e){const t=me(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const u of o.Sa)u.Fa(s)&&(r=!0);o.wa=s}}r&&nw(t)}function g6(n,e,t){const r=me(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function nw(n){n.Ca.forEach((e=>{e.next()}))}var gb,b1;(b1=gb||(gb={})).Ma="default",b1.Cache="cache";class rw{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new al(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=al.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==gb.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aN{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e){this.serializer=e}$s(e){return ks(this.serializer,e)}Us(e){return e.metadata.exists?Cg(this.serializer,e.document,!1):bt.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return Ut(e)}}class sw{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=lN(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const r=We.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){const t=new Map,r=new w1(this.serializer);for(const s of e)if(s.metadata.queries){const i=r.$s(s.metadata.name);for(const o of s.metadata.queries){const u=(t.get(o)||ze()).add(i);t.set(o,u)}}return t}async ja(e){const t=await H5(e,new w1(this.serializer),this.Wa,this.Ua.id),r=this.za(this.documents);for(const s of this.Ka)await q5(e,s,r.get(s.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function lN(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.key=e}}class uN{constructor(e){this.key=e}}class dN{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=XA(e),this.tu=new Wa(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new v1,s=t?t.tu:this.tu;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,u=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,p=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((f,y)=>{const x=s.get(f),S=Gh(this.query,y)?y:null,E=!!x&&this.mutatedKeys.has(x.key),k=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let I=!1;x&&S?x.data.isEqual(S.data)?E!==k&&(r.track({type:3,doc:S}),I=!0):this.su(x,S)||(r.track({type:2,doc:S}),I=!0,(d&&this.eu(S,d)>0||p&&this.eu(S,p)<0)&&(u=!0)):!x&&S?(r.track({type:0,doc:S}),I=!0):x&&!S&&(r.track({type:1,doc:x}),I=!0,(d||p)&&(u=!0)),I&&(S?(o=o.add(S),i=k?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{tu:o,iu:r,Cs:u,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((f,y)=>(function(S,E){const k=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:I})}};return k(S)-k(E)})(f.type,y.type)||this.eu(f.doc,y.doc))),this.ou(r),s=s??!1;const u=t&&!s?this._u():[],d=this.Xa.size===0&&this.current&&!s?1:0,p=d!==this.Za;return this.Za=d,o.length!==0||p?{snapshot:new al(this.query,e.tu,i,o,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new v1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new uN(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new cN(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return al.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qo="SyncEngine";class y6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class v6{constructor(e){this.key=e,this.hu=!1}}class x6{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new vi((u=>QA(u)),qh),this.Iu=new Map,this.Eu=new Set,this.du=new gt(he.comparator),this.Au=new Map,this.Ru=new $0,this.Vu={},this.mu=new Map,this.fu=il.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b6(n,e,t=!0){const r=Dg(n);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await hN(r,e,t,!0),s}async function w6(n,e){const t=Dg(n);await hN(t,e,!0,!1)}async function hN(n,e,t,r){const s=await eu(n.localStore,Tn(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let u;return r&&(u=await iw(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&Rg(n.remoteStore,s),u}async function iw(n,e,t,r,s){n.pu=(y,x,S)=>(async function(k,I,M,j){let C=I.view.ru(M);C.Cs&&(C=await $f(k.localStore,I.query,!1).then((({documents:N})=>I.view.ru(N,C))));const F=j&&j.targetChanges.get(I.targetId),G=j&&j.targetMismatches.get(I.targetId)!=null,q=I.view.applyChanges(C,k.isPrimaryClient,F,G);return yb(k,I.targetId,q.au),q.snapshot})(n,y,x,S);const i=await $f(n.localStore,e,!0),o=new dN(e,i.Qs),u=o.ru(i.documents),d=Jh.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),p=o.applyChanges(u,n.isPrimaryClient,d);yb(n,t,p.au);const f=new y6(e,t,o);return n.Tu.set(e,f),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function S6(n,e,t){const r=me(n),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((o=>!qh(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await tu(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),t&&nu(r.remoteStore,s.targetId),ru(r,s.targetId)})).catch(Uo)):(ru(r,s.targetId),await tu(r.localStore,s.targetId,!0))}async function _6(n,e){const t=me(n),r=t.Tu.get(e),s=t.Iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),nu(t.remoteStore,r.targetId))}async function E6(n,e,t){const r=cw(n);try{const s=await(function(o,u){const d=me(o),p=it.now(),f=u.reduce(((S,E)=>S.add(E.key)),ze());let y,x;return d.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let E=zn(),k=ze();return d.Ns.getEntries(S,f).next((I=>{E=I,E.forEach(((M,j)=>{j.isValidDocument()||(k=k.add(M))}))})).next((()=>d.localDocuments.getOverlayedDocuments(S,E))).next((I=>{y=I;const M=[];for(const j of u){const C=J3(j,y.get(j.key).overlayedDocument);C!=null&&M.push(new xi(j.key,C,VA(C.value.mapValue),Et.exists(!0)))}return d.mutationQueue.addMutationBatch(S,p,M,u)})).next((I=>{x=I;const M=I.applyToLocalDocumentSet(y,k);return d.documentOverlayCache.saveOverlays(S,I.batchId,M)}))})).then((()=>({batchId:x.batchId,changes:eP(y)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(o,u,d){let p=o.Vu[o.currentUser.toKey()];p||(p=new gt(Oe)),p=p.insert(u,d),o.Vu[o.currentUser.toKey()]=p})(r,s.batchId,t),await bi(r,s.changes),await yu(r.remoteStore)}catch(s){const i=xu(s,"Failed to persist write");t.reject(i)}}async function pN(n,e){const t=me(n);try{const r=await $5(t.localStore,e);e.targetChanges.forEach(((s,i)=>{const o=t.Au.get(i);o&&(Ee(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ee(o.hu,14607):s.removedDocuments.size>0&&(Ee(o.hu,42227),o.hu=!1))})),await bi(t,r,e)}catch(r){await Uo(r)}}function S1(n,e,t){const r=me(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.Tu.forEach(((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(o,u){const d=me(o);d.onlineState=u;let p=!1;d.queries.forEach(((f,y)=>{for(const x of y.Sa)x.va(u)&&(p=!0)})),p&&nw(d)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function T6(n,e,t){const r=me(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new gt(he.comparator);o=o.insert(i,bt.newNoDocument(i,Ae.min()));const u=ze().add(i),d=new Kh(Ae.min(),new Map,new gt(Oe),o,u);await pN(r,d),r.du=r.du.remove(i),r.Au.delete(e),lw(r)}else await tu(r.localStore,e,!1).then((()=>ru(r,e,t))).catch(Uo)}async function I6(n,e){const t=me(n),r=e.batch.batchId;try{const s=await U5(t.localStore,e);aw(t,r,null),ow(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await bi(t,s)}catch(s){await Uo(s)}}async function C6(n,e,t){const r=me(n);try{const s=await(function(o,u){const d=me(o);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let f;return d.mutationQueue.lookupMutationBatch(p,u).next((y=>(Ee(y!==null,37113),f=y.keys(),d.mutationQueue.removeMutationBatch(p,y)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,f,u))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,f))).next((()=>d.localDocuments.getDocuments(p,f)))}))})(r.localStore,e);aw(r,e,t),ow(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await bi(r,s)}catch(s){await Uo(s)}}async function k6(n,e){const t=me(n);Ho(t.remoteStore)||oe(qo,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(o){const u=me(o);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(d=>u.mutationQueue.getHighestUnacknowledgedBatchId(d)))})(t.localStore);if(r===bo)return void e.resolve();const s=t.mu.get(r)||[];s.push(e),t.mu.set(r,s)}catch(r){const s=xu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function ow(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function aw(n,e,t){const r=me(n);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function ru(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||mN(n,r)}))}function mN(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(nu(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),lw(n))}function yb(n,e,t){for(const r of t)r instanceof cN?(n.Ru.addReference(r.key,e),A6(n,r)):r instanceof uN?(oe(qo,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||mN(n,r.key)):xe(19791,{wu:r})}function A6(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(oe(qo,"New document in limbo: "+t),n.Eu.add(r),lw(n))}function lw(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new he(We.fromString(e)),r=n.fu.next();n.Au.set(r,new v6(t)),n.du=n.du.insert(t,r),Rg(n.remoteStore,new si(Tn(pu(t.path)),r,"TargetPurposeLimboResolution",Un.ce))}}async function bi(n,e,t){const r=me(n),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,d)=>{o.push(r.pu(d,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const f=p?!p.fromCache:t?.targetChanges.get(d.targetId)?.current;r.sharedClientState.updateQueryState(d.targetId,f?"current":"not-current")}if(p){s.push(p);const f=G0.As(d.targetId,p);i.push(f)}})))})),await Promise.all(o),r.Pu.H_(s),await(async function(d,p){const f=me(d);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",(y=>W.forEach(p,(x=>W.forEach(x.Es,(S=>f.persistence.referenceDelegate.addReference(y,x.targetId,S))).next((()=>W.forEach(x.ds,(S=>f.persistence.referenceDelegate.removeReference(y,x.targetId,S)))))))))}catch(y){if(!$o(y))throw y;oe(W0,"Failed to update sequence numbers: "+y)}for(const y of p){const x=y.targetId;if(!y.fromCache){const S=f.Ms.get(x),E=S.snapshotVersion,k=S.withLastLimboFreeSnapshotVersion(E);f.Ms=f.Ms.insert(x,k)}}})(r.localStore,i))}async function P6(n,e){const t=me(n);if(!t.currentUser.isEqual(e)){oe(qo,"User change. New user:",e.toKey());const r=await HP(t.localStore,e);t.currentUser=e,(function(i,o){i.mu.forEach((u=>{u.forEach((d=>{d.reject(new re(Q.CANCELLED,o))}))})),i.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await bi(t,r.Ls)}}function N6(n,e){const t=me(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let s=ze();const i=t.Iu.get(e);if(!i)return s;for(const o of i){const u=t.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}async function j6(n,e){const t=me(n),r=await $f(t.localStore,e.query,!0),s=e.view.cu(r);return t.isPrimaryClient&&yb(t,e.targetId,s.au),s}async function R6(n,e){const t=me(n);return KP(t.localStore,e).then((r=>bi(t,r)))}async function D6(n,e,t,r){const s=me(n),i=await(function(u,d){const p=me(u),f=me(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(y=>f.er(y,d).next((x=>x?p.localDocuments.getDocuments(y,x):W.resolve(null)))))})(s.localStore,e);i!==null?(t==="pending"?await yu(s.remoteStore):t==="acknowledged"||t==="rejected"?(aw(s,e,r||null),ow(s,e),(function(u,d){me(me(u).mutationQueue).ir(d)})(s.localStore,e)):xe(6720,"Unknown batchState",{Su:t}),await bi(s,i)):oe(qo,"Cannot apply mutation batch with id: "+e)}async function O6(n,e){const t=me(n);if(Dg(t),cw(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),s=await _1(t,r.toArray());t.gu=!0,await fb(t.remoteStore,!0);for(const i of s)Rg(t.remoteStore,i)}else if(e===!1&&t.gu!==!1){const r=[];let s=Promise.resolve();t.Iu.forEach(((i,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then((()=>(ru(t,o),tu(t.localStore,o,!0)))),nu(t.remoteStore,o)})),await s,await _1(t,r),(function(o){const u=me(o);u.Au.forEach(((d,p)=>{nu(u.remoteStore,p)})),u.Ru.Jr(),u.Au=new Map,u.du=new gt(he.comparator)})(t),t.gu=!1,await fb(t.remoteStore,!1)}}async function _1(n,e,t){const r=me(n),s=[],i=[];for(const o of e){let u;const d=r.Iu.get(o);if(d&&d.length!==0){u=await eu(r.localStore,Tn(d[0]));for(const p of d){const f=r.Tu.get(p),y=await j6(r,f);y.snapshot&&i.push(y.snapshot)}}else{const p=await WP(r.localStore,o);u=await eu(r.localStore,p),await iw(r,fN(p),o,!1,u.resumeToken)}s.push(u)}return r.Pu.H_(i),s}function fN(n){return WA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function M6(n){return(function(t){return me(me(t).persistence).Ts()})(me(n).localStore)}async function L6(n,e,t,r){const s=me(n);if(s.gu)return void oe(qo,"Ignoring unexpected query state notification.");const i=s.Iu.get(e);if(i&&i.length>0)switch(t){case"current":case"not-current":{const o=await KP(s.localStore,YA(i[0])),u=Kh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",Pt.EMPTY_BYTE_STRING);await bi(s,o,u);break}case"rejected":await tu(s.localStore,e,!0),ru(s,e,r);break;default:xe(64155,t)}}async function F6(n,e,t){const r=Dg(n);if(r.gu){for(const s of e){if(r.Iu.has(s)&&r.sharedClientState.isActiveQueryTarget(s)){oe(qo,"Adding an already active target "+s);continue}const i=await WP(r.localStore,s),o=await eu(r.localStore,i);await iw(r,fN(i),o.targetId,!1,o.resumeToken),Rg(r.remoteStore,o)}for(const s of t)r.Iu.has(s)&&await tu(r.localStore,s,!1).then((()=>{nu(r.remoteStore,s),ru(r,s)})).catch(Uo)}}function Dg(n){const e=me(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=pN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=N6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=T6.bind(null,e),e.Pu.H_=f6.bind(null,e.eventManager),e.Pu.yu=g6.bind(null,e.eventManager),e}function cw(n){const e=me(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=I6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=C6.bind(null,e),e}function V6(n,e,t){const r=me(n);(async function(i,o,u){try{const d=await o.getMetadata();if(await(function(S,E){const k=me(S),I=Ut(E.createTime);return k.persistence.runTransaction("hasNewerBundle","readonly",(M=>k.Ii.getBundleMetadata(M,E.id))).then((M=>!!M&&M.createTime.compareTo(I)>=0))})(i.localStore,d))return await o.close(),u._completeWith((function(S){return{taskState:"Success",documentsLoaded:S.totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}})(d)),Promise.resolve(new Set);u._updateProgress(lN(d));const p=new sw(d,o.serializer);let f=await o.bu();for(;f;){const x=await p.Ga(f);x&&u._updateProgress(x),f=await o.bu()}const y=await p.ja(i.localStore);return await bi(i,y.Ha,void 0),await(function(S,E){const k=me(S);return k.persistence.runTransaction("Save bundle","readwrite",(I=>k.Ii.saveBundleMetadata(I,E)))})(i.localStore,d),u._completeWith(y.progress),Promise.resolve(y.Ja)}catch(d){return lr(qo,`Loading bundle failed with ${d}`),u._failWith(d),Promise.resolve(new Set)}})(r,e,t).then((s=>{r.sharedClientState.notifyBundleLoaded(s)}))}class su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zP(this.persistence,new $P,e.initialUser,this.serializer)}Cu(e){return new z0(jg.mi,this.serializer)}Du(e){return new ZP}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}su.provider={build:()=>new su};class uw extends su{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ee(this.persistence.referenceDelegate instanceof Uf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new z0((r=>Uf.mi(r,t)),this.serializer)}}class dw extends su{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await cw(this.xu.syncEngine),await yu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return zP(this.persistence,new $P,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new MP(r,e.asyncQueue,t)}Mu(e,t){const r=new ZV(t,this.persistence);return new XV(e.asyncQueue,r)}Cu(e){const t=q0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new H0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,eN(),hf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ZP}}class gN extends dw{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof ex&&(this.sharedClientState.syncEngine={Co:D6.bind(null,t),vo:L6.bind(null,t),Fo:F6.bind(null,t),Ts:M6.bind(null,t),Do:R6.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await O6(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=eN();if(!ex.v(t))throw new re(Q.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=q0(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ex(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Oo{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>S1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=P6.bind(null,this.syncEngine),await fb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new m6})()}createDatastore(e){const t=vl(e.databaseInfo.databaseId),r=(function(i){return new Q5(i)})(e.databaseInfo);return(function(i,o,u,d){return new e6(i,o,u,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,s,i,o,u){return new n6(r,s,i,o,u)})(this.localStore,this.datastore,e.asyncQueue,(t=>S1(this.syncEngine,t,0)),(function(){return f1.v()?new f1:new G5})())}createSyncEngine(e,t){return(function(s,i,o,u,d,p,f){const y=new x6(s,i,o,u,d,p);return f&&(y.gu=!0),y})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=me(t);oe(ol,"RemoteStore shutting down."),r.Ea.add(5),await gu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Oo.provider={build:()=>new Oo};function E1(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Vt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new ln,this.buffer=new Uint8Array,this.Lu=(function(){return new TextDecoder("utf-8")})(),this.ku().then((r=>{r&&r.$a()?this.metadata.resolve(r.Qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.Qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(e===null)return null;const t=this.Lu.decode(e),r=Number(t);isNaN(r)&&this.Qu(`length string (${t}) is not valid number`);const s=await this.$u(r);return new aN(JSON.parse(s),e.length+r)}Uu(){return this.buffer.findIndex((e=>e===123))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(this.buffer.length===0)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.Qa)}`);this.metadata=r;do r=this.bu(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),t=this.$u(e);return new aN(JSON.parse(t),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new re(Q.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new re(Q.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(s,i){const o=me(s),u={documents:i.map((y=>Sh(o.serializer,y)))},d=await o.Ho("BatchGetDocuments",o.serializer.databaseId,We.emptyPath(),u,i.length),p=new Map;d.forEach((y=>{const x=s5(o.serializer,y);p.set(x.key.toString(),x)}));const f=[];return i.forEach((y=>{const x=p.get(y.toString());Ee(!!x,55234,{key:y}),f.push(x)})),f})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const s=he.fromPath(r);this.mutations.push(new D0(s,this.precondition(s)))})),await(async function(r,s){const i=me(r),o={writes:s.map((u=>_h(i.serializer,u)))};await i.Go("Commit",i.serializer.databaseId,We.emptyPath(),o)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xe(50498,{Gu:e.constructor.name});t=Ae.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new re(Q.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ae.min())?Et.exists(!1):Et.updateTime(t):Et.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ae.min()))throw new re(Q.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Et.updateTime(t)}return Et.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,t,r,s,i){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=s,this.deferred=i,this.zu=r.maxAttempts,this.M_=new J0(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_((async()=>{const e=new $6(this.datastore),t=this.Hu(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((s=>{this.Yu(s)}))))})).catch((r=>{this.Yu(r)}))}))}Hu(e){try{const t=this.updateFunction(e);return!$h(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ju(),Promise.resolve())))):this.deferred.reject(e)}Zu(e){if(e?.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!dP(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mo="FirestoreClient";class H6{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=an.UNAUTHENTICATED,this.clientId=gg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async o=>{oe(Mo,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(oe(Mo,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ln;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=xu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function nx(n,e){n.asyncQueue.verifyOperationInProgress(),oe(Mo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async s=>{r.isEqual(s)||(await HP(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function T1(n,e){n.asyncQueue.verifyOperationInProgress();const t=await hw(n);oe(Mo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>y1(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,s)=>y1(e.remoteStore,s))),n._onlineComponents=e}async function hw(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){oe(Mo,"Using user provided OfflineComponentProvider");try{await nx(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===Q.FAILED_PRECONDITION||s.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;lr("Error using user provided cache. Falling back to memory cache: "+t),await nx(n,new su)}}else oe(Mo,"Using default OfflineComponentProvider"),await nx(n,new uw(void 0));return n._offlineComponents}async function Mg(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(oe(Mo,"Using user provided OnlineComponentProvider"),await T1(n,n._uninitializedComponentsProvider._online)):(oe(Mo,"Using default OnlineComponentProvider"),await T1(n,new Oo))),n._onlineComponents}function yN(n){return hw(n).then((e=>e.persistence))}function bu(n){return hw(n).then((e=>e.localStore))}function vN(n){return Mg(n).then((e=>e.remoteStore))}function pw(n){return Mg(n).then((e=>e.syncEngine))}function xN(n){return Mg(n).then((e=>e.datastore))}async function iu(n){const e=await Mg(n),t=e.eventManager;return t.onListen=b6.bind(null,e.syncEngine),t.onUnlisten=S6.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=w6.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=_6.bind(null,e.syncEngine),t}function q6(n){return n.asyncQueue.enqueue((async()=>{const e=await yN(n),t=await vN(n);return e.setNetworkEnabled(!0),(function(s){const i=me(s);return i.Ea.delete(0),Qh(i)})(t)}))}function G6(n){return n.asyncQueue.enqueue((async()=>{const e=await yN(n),t=await vN(n);return e.setNetworkEnabled(!1),(async function(s){const i=me(s);i.Ea.add(0),await gu(i),i.Ra.set("Offline")})(t)}))}function W6(n,e){const t=new ln;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const u=await(function(p,f){const y=me(p);return y.persistence.runTransaction("read document","readonly",(x=>y.localDocuments.getDocument(x,f)))})(s,i);u.isFoundDocument()?o.resolve(u):u.isNoDocument()?o.resolve(null):o.reject(new re(Q.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(u){const d=xu(u,`Failed to get document '${i} from cache`);o.reject(d)}})(await bu(n),e,t))),t.promise}function bN(n,e,t={}){const r=new ln;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,p){const f=new Og({next:x=>{f.Nu(),o.enqueueAndForget((()=>tw(i,y)));const S=x.docs.has(u);!S&&x.fromCache?p.reject(new re(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&x.fromCache&&d&&d.source==="server"?p.reject(new re(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(x)},error:x=>p.reject(x)}),y=new rw(pu(u.path),f,{includeMetadataChanges:!0,qa:!0});return ew(i,y)})(await iu(n),n.asyncQueue,e,t,r))),r.promise}function K6(n,e){const t=new ln;return n.asyncQueue.enqueueAndForget((async()=>(async function(s,i,o){try{const u=await $f(s,i,!0),d=new dN(i,u.Qs),p=d.ru(u.documents),f=d.applyChanges(p,!1);o.resolve(f.snapshot)}catch(u){const d=xu(u,`Failed to execute query '${i} against cache`);o.reject(d)}})(await bu(n),e,t))),t.promise}function wN(n,e,t={}){const r=new ln;return n.asyncQueue.enqueueAndForget((async()=>(function(i,o,u,d,p){const f=new Og({next:x=>{f.Nu(),o.enqueueAndForget((()=>tw(i,y))),x.fromCache&&d.source==="server"?p.reject(new re(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),y=new rw(u,f,{includeMetadataChanges:!0,qa:!0});return ew(i,y)})(await iu(n),n.asyncQueue,e,t,r))),r.promise}function J6(n,e,t){const r=new ln;return n.asyncQueue.enqueueAndForget((async()=>{try{const s=await xN(n);r.resolve((async function(o,u,d){const p=me(o),{request:f,gt:y,parent:x}=SP(p.serializer,KA(u),d);p.connection.$o||delete f.parent;const S=(await p.Ho("RunAggregationQuery",p.serializer.databaseId,x,f,1)).filter((k=>!!k.result));Ee(S.length===1,64727);const E=S[0].result?.aggregateFields;return Object.keys(E).reduce(((k,I)=>(k[y[I]]=E[I],k)),{})})(s,e,t))}catch(s){r.reject(s)}})),r.promise}function Q6(n,e){const t=new Og(e);return n.asyncQueue.enqueueAndForget((async()=>(function(s,i){me(s).Ca.add(i),i.next()})(await iu(n),t))),()=>{t.Nu(),n.asyncQueue.enqueueAndForget((async()=>(function(s,i){me(s).Ca.delete(i)})(await iu(n),t)))}}function Y6(n,e,t,r){const s=(function(o,u){let d;return d=typeof o=="string"?pP().encode(o):o,(function(f,y){return new B6(f,y)})((function(f,y){if(f instanceof Uint8Array)return E1(f,y);if(f instanceof ArrayBuffer)return E1(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(d),u)})(t,vl(e));n.asyncQueue.enqueueAndForget((async()=>{V6(await pw(n),s,r)}))}function X6(n,e){return n.asyncQueue.enqueue((async()=>(function(r,s){const i=me(r);return i.persistence.runTransaction("Get named query","readonly",(o=>i.Ii.getNamedQuery(o,s)))})(await bu(n),e)))}function SN(n,e){return(function(r,s){return new U6(r,s)})(n,e)}function Z6(n,e){return n.asyncQueue.enqueue((async()=>(async function(r,s){const i=me(r),o=i.indexManager,u=[];return i.persistence.runTransaction("Configure indexes","readwrite",(d=>o.getFieldIndexes(d).next((p=>(function(y,x,S,E,k){y=[...y],x=[...x],y.sort(S),x.sort(S);const I=y.length,M=x.length;let j=0,C=0;for(;j<M&&C<I;){const F=S(y[C],x[j]);F<0?k(y[C++]):F>0?E(x[j++]):(j++,C++)}for(;j<M;)E(x[j++]);for(;C<I;)k(y[C++])})(p,s,KV,(f=>{u.push(o.addFieldIndex(d,f))}),(f=>{u.push(o.deleteFieldIndex(d,f))})))).next((()=>W.waitFor(u)))))})(await bu(n),e)))}function eB(n,e){return n.asyncQueue.enqueue((async()=>(function(r,s){me(r).Fs.Vs=s})(await bu(n),e)))}function tB(n){return n.asyncQueue.enqueue((async()=>(function(t){const r=me(t),s=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(i=>s.deleteAllFieldIndexes(i)))})(await bu(n))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firestore.googleapis.com",C1=!0;class k1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=EN,this.ssl=C1}else this.host=e.host,this.ssl=e.ssl??C1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=NP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OP)throw new re(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_N(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yh{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new k1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new k1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new lA;switch(r.type){case"firstParty":return new UV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=I1.get(t);r&&(oe("ComponentProvider","Removing Datastore"),I1.delete(t),r.terminate())})(this),Promise.resolve()}}function TN(n,e,t,r={}){n=Ke(n,Yh);const s=gi(e),i=n._getSettings(),o={...i,emulatorOptions:n._getEmulatorOptions()},u=`${e}:${t}`;s&&(dg(`https://${u}`),s0("Firestore",!0)),i.host!==EN&&i.host!==u&&lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const d={...i,host:u,ssl:s,emulatorOptions:r};if(!Wr(d,o)&&(n._setSettings(d),r.mockUserToken)){let p,f;if(typeof r.mockUserToken=="string")p=r.mockUserToken,f=an.MOCK_USER;else{p=ak(r.mockUserToken,n._app?.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new re(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new an(y)}n._authCredentials=new FV(new aA(p,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zt(this.firestore,e,this._query)}}class ct{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}toJSON(){return{type:ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(yl(t,ct._jsonSchema))return new ct(e,r||null,new he(We.fromString(t.referencePath)))}}ct._jsonSchemaVersion="firestore/documentReference/1.0",ct._jsonSchema={type:Wt("string",ct._jsonSchemaVersion),referencePath:Wt("string")};class qr extends Zt{constructor(e,t,r){super(e,t,pu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new he(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function An(n,e,...t){if(n=st(n),w0("collection","path",e),n instanceof Yh){const r=We.fromString(e,...t);return gT(r),new qr(n,null,r)}{if(!(n instanceof ct||n instanceof qr))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(We.fromString(e,...t));return gT(r),new qr(n.firestore,null,r)}}function nB(n,e){if(n=Ke(n,Yh),w0("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new re(Q.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Zt(n,null,(function(r){return new yi(We.emptyPath(),r)})(e))}function pt(n,e,...t){if(n=st(n),arguments.length===1&&(e=gg.newId()),w0("doc","path",e),n instanceof Yh){const r=We.fromString(e,...t);return fT(r),new ct(n,null,new he(r))}{if(!(n instanceof ct||n instanceof qr))throw new re(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(We.fromString(e,...t));return fT(r),new ct(n.firestore,n instanceof qr?n.converter:null,new he(r))}}function rB(n,e){return n=st(n),e=st(e),(n instanceof ct||n instanceof qr)&&(e instanceof ct||e instanceof qr)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mw(n,e){return n=st(n),e=st(e),n instanceof Zt&&e instanceof Zt&&n.firestore===e.firestore&&qh(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="AsyncQueue";class P1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J0(this,"async_queue_retry"),this._c=()=>{const r=hf();r&&oe(A1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=hf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=hf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new ln;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$o(e))throw e;oe(A1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Vt("INTERNAL UNHANDLED ERROR: ",N1(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=Z0.createAndSchedule(this,e,t,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&xe(47125,{Pc:N1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function N1(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(n,["next","error","complete"])}class IN{constructor(){this._progressObserver={},this._taskCompletionResolver=new ln,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sB=-1;class dt extends Yh{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new P1,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new P1(e),this._firestoreClient=void 0,await e}}}function iB(n,e,t){t||(t=vh);const r=gl(n,"firestore");if(r.isInitialized(t)){const s=r.getImmediate({identifier:t}),i=r.getOptions(t);if(Wr(i,e))return s;throw new re(Q.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new re(Q.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OP)throw new re(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&gi(e.host)&&dg(e.host),r.initialize({options:e,instanceIdentifier:t})}function Lg(n,e){const t=typeof n=="object"?n:hg(),r=typeof n=="string"?n:e||vh,s=gl(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=ik("firestore");i&&TN(s,...i)}return s}function Tt(n){if(n._terminated)throw new re(Q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||CN(n),n._firestoreClient}function CN(n){const e=n._freezeSettings(),t=(function(s,i,o,u){return new k3(s,i,o,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,_N(u.experimentalLongPollingOptions),u.useFetchStreams,u.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new H6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(n._componentsProvider))}function oB(n,e){lr("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return kN(n,Oo.provider,{build:r=>new dw(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}async function aB(n){lr("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();kN(n,Oo.provider,{build:t=>new gN(t,e.cacheSizeBytes)})}function kN(n,e,t){if((n=Ke(n,dt))._firestoreClient||n._terminated)throw new re(Q.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new re(Q.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},CN(n)}function lB(n){if(n._initialized&&!n._terminated)throw new re(Q.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ln;return n._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Cs.v())return Promise.resolve();const s=r+UP;await Cs.delete(s)})(q0(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function cB(n){return(function(t){const r=new ln;return t.asyncQueue.enqueueAndForget((async()=>k6(await pw(t),r))),r.promise})(Tt(n=Ke(n,dt)))}function uB(n){return q6(Tt(n=Ke(n,dt)))}function dB(n){return G6(Tt(n=Ke(n,dt)))}function hB(n){return yk(n.app,"firestore",n._databaseId.database),n._delete()}function vb(n,e){const t=Tt(n=Ke(n,dt)),r=new IN;return Y6(t,n._databaseId,e,r),r}function AN(n,e){return X6(Tt(n=Ke(n,dt)),e).then((t=>t?new Zt(n,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class PN{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Pt.fromBase64String(e))}catch(t){throw new re(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yl(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:Wt("string",Bn._jsonSchemaVersion),bytes:Wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new re(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function pB(){return new Go(Wx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new re(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new re(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Oe(this._lat,e._lat)||Oe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gr._jsonSchemaVersion}}static fromJSON(e){if(yl(e,Gr._jsonSchema))return new Gr(e.latitude,e.longitude)}}Gr._jsonSchemaVersion="firestore/geoPoint/1.0",Gr._jsonSchema={type:Wt("string",Gr._jsonSchemaVersion),latitude:Wt("number"),longitude:Wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yl(e,Ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ar(e.vectorValues);throw new re(Q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ar._jsonSchemaVersion="firestore/vectorValue/1.0",Ar._jsonSchema={type:Wt("string",Ar._jsonSchemaVersion),vectorValues:Wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mB=/^__.*__$/;class fB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new xi(e,this.data,this.fieldMask,t,this.fieldTransforms):new mu(e,this.data,t,this.fieldTransforms)}}class NN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new xi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function jN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:n})}}class Fg{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Fg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(jN(this.Ac)&&mB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gB{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||vl(e)}Cc(e,t,r,s=!1){return new Fg({Ac:e,methodName:t,Dc:r,path:wt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xl(n){const e=n._freezeSettings(),t=vl(n._databaseId);return new gB(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Vg(n,e,t,r,s,i={}){const o=n.Cc(i.merge||i.mergeFields?2:0,e,t,s);ww("Data must be an object, but it was:",o,r);const u=ON(r,o);let d,p;if(i.merge)d=new $n(o.fieldMask),p=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const y of i.mergeFields){const x=Eh(e,y,t);if(!o.contains(x))throw new re(Q.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);LN(f,x)||f.push(x)}d=new $n(f),p=o.fieldTransforms.filter((y=>d.covers(y.field)))}else d=null,p=o.fieldTransforms;return new fB(new mn(u),d,p)}class Xh extends Wo{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function RN(n,e,t){return new Fg({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class fw extends Wo{_toFieldTransform(e){return new Wh(e.path,new Yc)}isEqual(e){return e instanceof fw}}class gw extends Wo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=RN(this,e,!0),r=this.vc.map((i=>bl(i,t))),s=new tl(r);return new Wh(e.path,s)}isEqual(e){return e instanceof gw&&Wr(this.vc,e.vc)}}class yw extends Wo{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=RN(this,e,!0),r=this.vc.map((i=>bl(i,t))),s=new nl(r);return new Wh(e.path,s)}isEqual(e){return e instanceof yw&&Wr(this.vc,e.vc)}}class vw extends Wo{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Xc(e.serializer,rP(e.serializer,this.Fc));return new Wh(e.path,t)}isEqual(e){return e instanceof vw&&this.Fc===e.Fc}}function xw(n,e,t,r){const s=n.Cc(1,e,t);ww("Data must be an object, but it was:",s,r);const i=[],o=mn.empty();zo(r,((d,p)=>{const f=Bg(e,d,t);p=st(p);const y=s.yc(f);if(p instanceof Xh)i.push(f);else{const x=bl(p,y);x!=null&&(i.push(f),o.set(f,x))}}));const u=new $n(i);return new NN(o,u,s.fieldTransforms)}function bw(n,e,t,r,s,i){const o=n.Cc(1,e,t),u=[Eh(e,r,t)],d=[s];if(i.length%2!=0)throw new re(Q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<i.length;x+=2)u.push(Eh(e,i[x])),d.push(i[x+1]);const p=[],f=mn.empty();for(let x=u.length-1;x>=0;--x)if(!LN(p,u[x])){const S=u[x];let E=d[x];E=st(E);const k=o.yc(S);if(E instanceof Xh)p.push(S);else{const I=bl(E,k);I!=null&&(p.push(S),f.set(S,I))}}const y=new $n(p);return new NN(f,y,o.fieldTransforms)}function DN(n,e,t,r=!1){return bl(t,n.Cc(r?4:3,e))}function bl(n,e){if(MN(n=st(n)))return ww("Unsupported field value:",e,n),ON(n,e);if(n instanceof Wo)return(function(r,s){if(!jN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let o=0;for(const u of r){let d=bl(u,s.wc(o));d==null&&(d={nullValue:"NULL_VALUE"}),i.push(d),o++}return{arrayValue:{values:i}}})(n,e)}return(function(r,s){if((r=st(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return rP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=it.fromDate(r);return{timestampValue:Zc(s.serializer,i)}}if(r instanceof it){const i=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Zc(s.serializer,i)}}if(r instanceof Gr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Bn)return{bytesValue:gP(s.serializer,r._byteString)};if(r instanceof ct){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:V0(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Ar)return(function(o,u){return{mapValue:{fields:{[k0]:{stringValue:A0},[Kc]:{arrayValue:{values:o.toArray().map((p=>{if(typeof p!="number")throw u.Sc("VectorValues must only contain numeric values.");return R0(u.serializer,p)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${yg(r)}`)})(n,e)}function ON(n,e){const t={};return PA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zo(n,((r,s)=>{const i=bl(s,e.mc(r));i!=null&&(t[r]=i)})),{mapValue:{fields:t}}}function MN(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof it||n instanceof Gr||n instanceof Bn||n instanceof ct||n instanceof Wo||n instanceof Ar)}function ww(n,e,t){if(!MN(t)||!dA(t)){const r=yg(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function Eh(n,e,t){if((e=st(e))instanceof Go)return e._internalPath;if(typeof e=="string")return Bg(n,e);throw Gf("Field path arguments must be of type string or ",n,!1,void 0,t)}const yB=new RegExp("[~\\*/\\[\\]]");function Bg(n,e,t){if(e.search(yB)>=0)throw Gf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Go(...e.split("."))._internalPath}catch{throw Gf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gf(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let d="";return(i||o)&&(d+=" (found",i&&(d+=` in field ${r}`),o&&(d+=` in document ${s}`),d+=")"),new re(Q.INVALID_ARGUMENT,u+n+d)}function LN(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ug("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vB extends Th{data(){return super.data()}}function Ug(n,e){return typeof e=="string"?Bg(n,e):e instanceof Go?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new re(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sw{}class wu extends Sw{}function Er(n,e,...t){let r=[];e instanceof Sw&&r.push(e),r=r.concat(t),(function(i){const o=i.filter((d=>d instanceof wl)).length,u=i.filter((d=>d instanceof Su)).length;if(o>1||o>0&&u>0)throw new re(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const s of r)n=s._apply(n);return n}class Su extends wu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Su(e,t,r)}_apply(e){const t=this._parse(e);return BN(e._query,t),new Zt(e.firestore,e.converter,sb(e._query,t))}_parse(e){const t=xl(e.firestore);return(function(i,o,u,d,p,f,y){let x;if(p.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new re(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){R1(y,f);const E=[];for(const k of y)E.push(j1(d,i,k));x={arrayValue:{values:E}}}else x=j1(d,i,y)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||R1(y,f),x=DN(u,o,y,f==="in"||f==="not-in");return Ye.create(p,f,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Nn(n,e,t){const r=e,s=Ug("where",n);return Su._create(s,r,t)}class wl extends Sw{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new wl(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:lt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(s,i){let o=s;const u=i.getFlattenedFilters();for(const d of u)BN(o,d),o=sb(o,d)})(e._query,t),new Zt(e.firestore,e.converter,sb(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function xB(...n){return n.forEach((e=>UN("or",e))),wl._create("or",n)}function bB(...n){return n.forEach((e=>UN("and",e))),wl._create("and",n)}class $g extends wu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $g(e,t)}_apply(e){const t=(function(s,i,o){if(s.startAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new re(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wh(i,o)})(e._query,this._field,this._direction);return new Zt(e.firestore,e.converter,(function(s,i){const o=s.explicitOrderBy.concat([i]);return new yi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)})(e._query,t))}}function pf(n,e="asc"){const t=e,r=Ug("orderBy",n);return $g._create(r,t)}class Zh extends wu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Zh(e,t,r)}_apply(e){return new Zt(e.firestore,e.converter,Lf(e._query,this._limit,this._limitType))}}function wB(n){return hA("limit",n),Zh._create("limit",n,"F")}function SB(n){return hA("limitToLast",n),Zh._create("limitToLast",n,"L")}class ep extends wu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ep(e,t,r)}_apply(e){const t=VN(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,(function(s,i){return new yi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)})(e._query,t))}}function _B(...n){return ep._create("startAt",n,!0)}function EB(...n){return ep._create("startAfter",n,!1)}class tp extends wu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new tp(e,t,r)}_apply(e){const t=VN(e,this.type,this._docOrFields,this._inclusive);return new Zt(e.firestore,e.converter,(function(s,i){return new yi(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,i)})(e._query,t))}}function TB(...n){return tp._create("endBefore",n,!1)}function IB(...n){return tp._create("endAt",n,!0)}function VN(n,e,t,r){if(t[0]=st(t[0]),t[0]instanceof Th)return(function(i,o,u,d,p){if(!d)throw new re(Q.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const f=[];for(const y of Mc(i))if(y.field.isKeyField())f.push(Za(o,d.key));else{const x=d.data.field(y.field);if(Sg(x))throw new re(Q.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+y.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const S=y.field.canonicalString();throw new re(Q.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}f.push(x)}return new Ro(f,p)})(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=xl(n.firestore);return(function(o,u,d,p,f,y){const x=o.explicitOrderBy;if(f.length>x.length)throw new re(Q.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let E=0;E<f.length;E++){const k=f[E];if(x[E].field.isKeyField()){if(typeof k!="string")throw new re(Q.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof k}`);if(!N0(o)&&k.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${k}' contains a slash.`);const I=o.path.child(We.fromString(k));if(!he.isDocumentKey(I))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${I}' is not because it contains an odd number of segments.`);const M=new he(I);S.push(Za(u,M))}else{const I=DN(d,p,k);S.push(I)}}return new Ro(S,y)})(n._query,n.firestore._databaseId,s,e,t,r)}}function j1(n,e,t){if(typeof(t=st(t))=="string"){if(t==="")throw new re(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N0(e)&&t.indexOf("/")!==-1)throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(We.fromString(t));if(!he.isDocumentKey(r))throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Za(n,new he(r))}if(t instanceof ct)return Za(n,t._key);throw new re(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yg(t)}.`)}function R1(n,e){if(!Array.isArray(n)||n.length===0)throw new re(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BN(n,e){const t=(function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null})(n.filters,(function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function UN(n,e){if(!(e instanceof Su||e instanceof wl))throw new re(Q.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class _w{convertValue(e,t="none"){switch(No(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _t(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return zo(e,((s,i)=>{r[s]=this.convertValue(i,t)})),r}convertVectorValue(e){const t=e.fields?.[Kc].arrayValue?.values?.map((r=>_t(r.doubleValue)));return new Ar(t)}convertGeoPoint(e){return new Gr(_t(e.latitude),_t(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_g(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(yh(e));default:return null}}convertTimestamp(e){const t=pi(e);return new it(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=We.fromString(e);Ee(IP(r),9688,{name:e});const s=new Po(r.get(1),r.get(3)),i=new he(r.popFirst(5));return s.isEqual(t)||Vt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ew extends _w{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CB(n){return new ou("sum",Eh("sum",n))}function kB(n){return new ou("avg",Eh("average",n))}function $N(){return new ou("count")}function AB(n,e){return n instanceof ou&&e instanceof ou&&n.aggregateType===e.aggregateType&&n._internalFieldPath?.canonicalString()===e._internalFieldPath?.canonicalString()}function PB(n,e){return mw(n.query,e.query)&&Wr(n.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="NOT SUPPORTED";class ii{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hn extends Th{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Ug("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Hn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}function NB(n,e,t){if(yl(e,Hn._jsonSchema)){if(e.bundle===zN)throw new re(Q.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=vl(n._databaseId),s=SN(e.bundle,r),i=s.Wu(),o=new sw(s.getMetadata(),r);for(const f of i)o.Ga(f);const u=o.documents;if(u.length!==1)throw new re(Q.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${u.length} documents.`);const d=Cg(r,u[0].document),p=new he(We.fromString(e.bundleName));return new Hn(n,new Ew(n),p,d,new ii(!1,!1),t||null)}}Hn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Hn._jsonSchema={type:Wt("string",Hn._jsonSchemaVersion),bundleSource:Wt("string","DocumentSnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Jd extends Hn{data(e={}){return super.data(e)}}class qn{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new ii(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Jd(this._firestore,this._userDataWriter,r.key,r,new ii(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new re(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((u=>{const d=new Jd(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ii(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:d,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>i||u.type!==3)).map((u=>{const d=new Jd(s._firestore,s._userDataWriter,u.doc.key,u.doc,new ii(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let p=-1,f=-1;return u.type!==0&&(p=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:RB(u.type),doc:d,oldIndex:p,newIndex:f}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(Q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=gg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(t.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jB(n,e,t){if(yl(e,qn._jsonSchema)){if(e.bundle===zN)throw new re(Q.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=vl(n._databaseId),s=SN(e.bundle,r),i=s.Wu(),o=new sw(s.getMetadata(),r);for(const x of i)o.Ga(x);if(o.queries.length!==1)throw new re(Q.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${o.queries.length} queries.`);const u=Ag(o.queries[0].bundledQuery),d=o.documents;let p=new Wa;d.map((x=>{const S=Cg(r,x.document);p=p.add(S)}));const f=al.fromInitialDocuments(u,p,ze(),!1,!1),y=new Zt(n,t||null,u);return new qn(n,new Ew(n),y,f)}}function RB(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}function DB(n,e){return n instanceof Hn&&e instanceof Hn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qn&&e instanceof qn&&n._firestore===e._firestore&&mw(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(n){n=Ke(n,ct);const e=Ke(n.firestore,dt);return bN(Tt(e),n._key).then((t=>Tw(e,n,t)))}qn._jsonSchemaVersion="firestore/querySnapshot/1.0",qn._jsonSchema={type:Wt("string",qn._jsonSchemaVersion),bundleSource:Wt("string","QuerySnapshot"),bundleName:Wt("string"),bundle:Wt("string")};class Ko extends _w{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}function OB(n){n=Ke(n,ct);const e=Ke(n.firestore,dt),t=Tt(e),r=new Ko(e);return W6(t,n._key).then((s=>new Hn(e,r,n._key,s,new ii(s!==null&&s.hasLocalMutations,!0),n.converter)))}function MB(n){n=Ke(n,ct);const e=Ke(n.firestore,dt);return bN(Tt(e),n._key,{source:"server"}).then((t=>Tw(e,n,t)))}function Od(n){n=Ke(n,Zt);const e=Ke(n.firestore,dt),t=Tt(e),r=new Ko(e);return FN(n._query),wN(t,n._query).then((s=>new qn(e,r,n,s)))}function LB(n){n=Ke(n,Zt);const e=Ke(n.firestore,dt),t=Tt(e),r=new Ko(e);return K6(t,n._query).then((s=>new qn(e,r,n,s)))}function FB(n){n=Ke(n,Zt);const e=Ke(n.firestore,dt),t=Tt(e),r=new Ko(e);return wN(t,n._query,{source:"server"}).then((s=>new qn(e,r,n,s)))}function Ir(n,e,t){n=Ke(n,ct);const r=Ke(n.firestore,dt),s=zg(n.converter,e,t);return _u(r,[Vg(xl(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Et.none())])}function Md(n,e,t,...r){n=Ke(n,ct);const s=Ke(n.firestore,dt),i=xl(s);let o;return o=typeof(e=st(e))=="string"||e instanceof Go?bw(i,"updateDoc",n._key,e,t,r):xw(i,"updateDoc",n._key,e),_u(s,[o.toMutation(n._key,Et.exists(!0))])}function Yd(n){return _u(Ke(n.firestore,dt),[new fu(n._key,Et.none())])}function Ic(n,e){const t=Ke(n.firestore,dt),r=pt(n),s=zg(n.converter,e);return _u(t,[Vg(xl(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Et.exists(!1))]).then((()=>r))}function co(n,...e){n=st(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Lc(e[r])||(t=e[r++]);const s={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Lc(e[r])){const d=e[r];e[r]=d.next?.bind(d),e[r+1]=d.error?.bind(d),e[r+2]=d.complete?.bind(d)}let i,o,u;if(n instanceof ct)o=Ke(n.firestore,dt),u=pu(n._key.path),i={next:d=>{e[r]&&e[r](Tw(o,n,d))},error:e[r+1],complete:e[r+2]};else{const d=Ke(n,Zt);o=Ke(d.firestore,dt),u=d._query;const p=new Ko(o);i={next:f=>{e[r]&&e[r](new qn(o,p,d,f))},error:e[r+1],complete:e[r+2]},FN(n._query)}return(function(p,f,y,x){const S=new Og(x),E=new rw(f,S,y);return p.asyncQueue.enqueueAndForget((async()=>ew(await iu(p),E))),()=>{S.Nu(),p.asyncQueue.enqueueAndForget((async()=>tw(await iu(p),E)))}})(Tt(o),u,s,i)}function VB(n,e,...t){const r=st(n),s=(function(d){const p={bundle:"",bundleName:"",bundleSource:""},f=["bundle","bundleName","bundleSource"];for(const y of f){if(!(y in d)){p.error=`snapshotJson missing required field: ${y}`;break}const x=d[y];if(typeof x!="string"){p.error=`snapshotJson field '${y}' must be a string.`;break}if(x.length===0){p.error=`snapshotJson field '${y}' cannot be an empty string.`;break}y==="bundle"?p.bundle=x:y==="bundleName"?p.bundleName=x:y==="bundleSource"&&(p.bundleSource=x)}return p})(e);if(s.error)throw new re(Q.INVALID_ARGUMENT,s.error);let i,o=0;if(typeof t[o]!="object"||Lc(t[o])||(i=t[o++]),s.bundleSource==="QuerySnapshot"){let u=null;if(typeof t[o]=="object"&&Lc(t[o])){const d=t[o++];u={next:d.next,error:d.error,complete:d.complete}}else u={next:t[o++],error:t[o++],complete:t[o++]};return(function(p,f,y,x,S){let E,k=!1;return vb(p,f.bundle).then((()=>AN(p,f.bundleName))).then((M=>{M&&!k&&(S&&M.withConverter(S),E=co(M,y||{},x))})).catch((M=>(x.error&&x.error(M),()=>{}))),()=>{k||(k=!0,E&&E())}})(r,s,i,u,t[o])}if(s.bundleSource==="DocumentSnapshot"){let u=null;if(typeof t[o]=="object"&&Lc(t[o])){const d=t[o++];u={next:d.next,error:d.error,complete:d.complete}}else u={next:t[o++],error:t[o++],complete:t[o++]};return(function(p,f,y,x,S){let E,k=!1;return vb(p,f.bundle).then((()=>{if(!k){const M=new ct(p,S||null,he.fromPath(f.bundleName));E=co(M,y||{},x)}})).catch((M=>(x.error&&x.error(M),()=>{}))),()=>{k||(k=!0,E&&E())}})(r,s,i,u,t[o])}throw new re(Q.INVALID_ARGUMENT,`unsupported bundle source: ${s.bundleSource}`)}function BB(n,e){return Q6(Tt(n=Ke(n,dt)),Lc(e)?e:{next:e})}function _u(n,e){return(function(r,s){const i=new ln;return r.asyncQueue.enqueueAndForget((async()=>E6(await pw(r),s,i))),i.promise})(Tt(n),e)}function Tw(n,e,t){const r=t.docs.get(e._key),s=new Ko(n);return new Hn(n,s,e._key,r,new ii(t.hasPendingWrites,t.fromCache),e.converter)}function UB(n){return HN(n,{count:$N()})}function HN(n,e){const t=Ke(n.firestore,dt),r=Tt(t),s=AA(e,((i,o)=>new uP(o,i.aggregateType,i._internalFieldPath)));return J6(r,n._query,s).then((i=>(function(u,d,p){const f=new Ko(u);return new PN(d,f,p)})(t,n,i)))}class $B{constructor(e){this.kind="memory",this._onlineComponentProvider=Oo.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new uw(void 0)}}toJSON(){return{kind:this.kind}}}class zB{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=qN(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class HB{constructor(){this.kind="memoryEager",this._offlineComponentProvider=su.provider}toJSON(){return{kind:this.kind}}}class qB{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new uw(e)}}toJSON(){return{kind:this.kind}}}function GB(){return new HB}function WB(n){return new qB(n?.cacheSizeBytes)}function KB(n){return new $B(n)}function JB(n){return new zB(n)}class QB{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Oo.provider,this._offlineComponentProvider={build:t=>new dw(t,e?.cacheSizeBytes,this.forceOwnership)}}}class YB{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Oo.provider,this._offlineComponentProvider={build:t=>new gN(t,e?.cacheSizeBytes)}}}function qN(n){return new QB(n?.forceOwnership)}function XB(){return new YB}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xl(e)}set(e,t,r){this._verifyNotCommitted();const s=fo(e,this._firestore),i=zg(s.converter,t,r),o=Vg(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Et.none())),this}update(e,t,r,...s){this._verifyNotCommitted();const i=fo(e,this._firestore);let o;return o=typeof(t=st(t))=="string"||t instanceof Go?bw(this._dataReader,"WriteBatch.update",i._key,t,r,s):xw(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,Et.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=fo(e,this._firestore);return this._mutations=this._mutations.concat(new fu(t._key,Et.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new re(Q.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function fo(n,e){if((n=st(n)).firestore!==e)throw new re(Q.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eU{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xl(e)}get(e){const t=fo(e,this._firestore),r=new Ew(this._firestore);return this._transaction.lookup([t._key]).then((s=>{if(!s||s.length!==1)return xe(24041);const i=s[0];if(i.isFoundDocument())return new Th(this._firestore,r,i.key,i,t.converter);if(i.isNoDocument())return new Th(this._firestore,r,t._key,null,t.converter);throw xe(18433,{doc:i})}))}set(e,t,r){const s=fo(e,this._firestore),i=zg(s.converter,t,r),o=Vg(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,t,r,...s){const i=fo(e,this._firestore);let o;return o=typeof(t=st(t))=="string"||t instanceof Go?bw(this._dataReader,"Transaction.update",i._key,t,r,s):xw(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,o),this}delete(e){const t=fo(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN extends eU{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=fo(e,this._firestore),r=new Ko(this._firestore);return super.get(e).then((s=>new Hn(this._firestore,r,t._key,s._document,new ii(!1,!1),t.converter)))}}function tU(n,e,t){n=Ke(n,dt);const r={...ZB,...t};return(function(i){if(i.maxAttempts<1)throw new re(Q.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(i,o,u){const d=new ln;return i.asyncQueue.enqueueAndForget((async()=>{const p=await xN(i);new z6(i.asyncQueue,p,u,o,d).ju()})),d.promise})(Tt(n),(s=>e(new WN(n,s))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(){return new Xh("deleteField")}function ei(){return new fw("serverTimestamp")}function rU(...n){return new gw("arrayUnion",n)}function sU(...n){return new yw("arrayRemove",n)}function iU(n){return new vw("increment",n)}function oU(n){return new Ar(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aU(n){return Tt(n=Ke(n,dt)),new GN(n,(e=>_u(n,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lU(n,e){const t=Tt(n=Ke(n,dt));if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return lr("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(i){const o=typeof i=="string"?(function(p){try{return JSON.parse(p)}catch(f){throw new re(Q.INVALID_ARGUMENT,"Failed to parse JSON: "+f?.message)}})(i):i,u=[];if(Array.isArray(o.indexes))for(const d of o.indexes){const p=D1(d,"collectionGroup"),f=[];if(Array.isArray(d.fields))for(const y of d.fields){const x=Bg("setIndexConfiguration",D1(y,"fieldPath"));y.arrayConfig==="CONTAINS"?f.push(new qa(x,2)):y.order==="ASCENDING"?f.push(new qa(x,0)):y.order==="DESCENDING"&&f.push(new qa(x,1))}u.push(new $c($c.UNKNOWN_ID,p,f,zc.empty()))}return u})(e);return Z6(t,r)}function D1(n,e){if(typeof n[e]!="string")throw new re(Q.INVALID_ARGUMENT,"Missing string value for: "+e);return n[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function cU(n){n=Ke(n,dt);const e=O1.get(n);if(e)return e;if(Tt(n)._uninitializedComponentsProvider?._offline.kind!=="persistent")return null;const r=new KN(n);return O1.set(n,r),r}function uU(n){JN(n,!0)}function dU(n){JN(n,!1)}function hU(n){tB(Tt(n._firestore)).then((e=>oe("deleting all persistent cache indexes succeeded"))).catch((e=>lr("deleting all persistent cache indexes failed",e)))}function JN(n,e){eB(Tt(n._firestore),e).then((t=>oe(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((t=>lr(`setting persistent cache index auto creation isEnabled=${e} failed`,t)))}const O1=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pU(n){const e=Tt(Ke(n.firestore,dt)),t=e._onlineComponents?.datastore.serializer;return t===void 0?null:kg(t,Tn(n._query)).ft}function mU(n,e){const t=AA(e,((i,o)=>new uP(o,i.aggregateType,i._internalFieldPath))),r=Tt(Ke(n.firestore,dt)),s=r._onlineComponents?.datastore.serializer;return s===void 0?null:SP(s,KA(n._query),t,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fU{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Iw.instance.onExistenceFilterMismatch(e)}}class Iw{constructor(){this.Mc=new Map}static get instance(){return Fm||(Fm=new Iw,(function(t){if(ib)throw new Error("a TestingHooksSpi instance is already set");ib=t})(Fm)),Fm}lt(e){this.Mc.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),r=this.Mc;return r.set(t,e),()=>r.delete(t)}}let Fm=null;(function(e,t=!0){(function(s){hu=s})(Bo),Co(new To("firestore",((r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new dt(new VV(r.getProvider("auth-internal")),new $V(o,r.getProvider("app-check-internal")),(function(p,f){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new re(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(p.options.projectId,f)})(o,s),o);return i={useFetchStreams:t,...i},u._setSettings(i),u}),"PUBLIC").setMultipleInstances(!0)),kr(pT,mT,e),kr(pT,mT,"esm2020")})();const $a=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:_w,AggregateField:ou,AggregateQuerySnapshot:PN,Bytes:Bn,CACHE_SIZE_UNLIMITED:sB,CollectionReference:qr,DocumentReference:ct,DocumentSnapshot:Hn,FieldPath:Go,FieldValue:Wo,Firestore:dt,FirestoreError:re,GeoPoint:Gr,LoadBundleTask:IN,PersistentCacheIndexManager:KN,Query:Zt,QueryCompositeFilterConstraint:wl,QueryConstraint:wu,QueryDocumentSnapshot:Jd,QueryEndAtConstraint:tp,QueryFieldFilterConstraint:Su,QueryLimitConstraint:Zh,QueryOrderByConstraint:$g,QuerySnapshot:qn,QueryStartAtConstraint:ep,SnapshotMetadata:ii,Timestamp:it,Transaction:WN,VectorValue:Ar,WriteBatch:GN,_AutoId:gg,_ByteString:Pt,_DatabaseId:Po,_DocumentKey:he,_EmptyAppCheckTokenProvider:zV,_EmptyAuthCredentialsProvider:lA,_FieldPath:wt,_TestingHooks:fU,_cast:Ke,_debugAssert:LV,_internalAggregationQueryToProtoRunAggregationQueryRequest:mU,_internalQueryToProtoQueryTarget:pU,_isBase64Available:I3,_logWarn:lr,_validateIsNotUsedTogether:uA,addDoc:Ic,aggregateFieldEqual:AB,aggregateQuerySnapshotEqual:PB,and:bB,arrayRemove:sU,arrayUnion:rU,average:kB,clearIndexedDbPersistence:lB,collection:An,collectionGroup:nB,connectFirestoreEmulator:TN,count:$N,deleteAllPersistentCacheIndexes:hU,deleteDoc:Yd,deleteField:nU,disableNetwork:dB,disablePersistentCacheIndexAutoCreation:dU,doc:pt,documentId:pB,documentSnapshotFromJSON:NB,enableIndexedDbPersistence:oB,enableMultiTabIndexedDbPersistence:aB,enableNetwork:uB,enablePersistentCacheIndexAutoCreation:uU,endAt:IB,endBefore:TB,ensureFirestoreConfigured:Tt,executeWrite:_u,getAggregateFromServer:HN,getCountFromServer:UB,getDoc:Qd,getDocFromCache:OB,getDocFromServer:MB,getDocs:Od,getDocsFromCache:LB,getDocsFromServer:FB,getFirestore:Lg,getPersistentCacheIndexManager:cU,increment:iU,initializeFirestore:iB,limit:wB,limitToLast:SB,loadBundle:vb,memoryEagerGarbageCollector:GB,memoryLocalCache:KB,memoryLruGarbageCollector:WB,namedQuery:AN,onSnapshot:co,onSnapshotResume:VB,onSnapshotsInSync:BB,or:xB,orderBy:pf,persistentLocalCache:JB,persistentMultipleTabManager:XB,persistentSingleTabManager:qN,query:Er,queryEqual:mw,querySnapshotFromJSON:jB,refEqual:rB,runTransaction:tU,serverTimestamp:ei,setDoc:Ir,setIndexConfiguration:lU,setLogLevel:MV,snapshotEqual:DB,startAfter:EB,startAt:_B,sum:CB,terminate:hB,updateDoc:Md,vector:oU,waitForPendingWrites:cB,where:Nn,writeBatch:aU},Symbol.toStringTag,{value:"Module"}));var gU="firebase",yU="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kr(gU,yU,"app");const vU=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Qr,SDK_VERSION:Bo,_DEFAULT_ENTRY_NAME:uh,_addComponent:Bx,_addOrOverwriteComponent:vL,_apps:Io,_clearComponents:xL,_components:Vc,_getProvider:gl,_isFirebaseApp:l0,_isFirebaseServerApp:Vn,_isFirebaseServerAppSettings:vk,_registerComponent:Co,_removeServiceInstance:yk,_serverApps:Fc,deleteApp:bk,getApp:hg,getApps:_L,initializeApp:po,initializeServerApp:SL,onLog:EL,registerVersion:kr,setLogLevel:TL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="firebasestorage.googleapis.com",YN="storageBucket",xU=120*1e3,bU=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot extends Qr{constructor(e,t,r=0){super(rx(e),`Firebase Storage: ${t} (${rx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ot.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dt||(Dt={}));function rx(n){return"storage/"+n}function Cw(){const n="An unknown error occurred, please check the error payload for server response.";return new Ot(Dt.UNKNOWN,n)}function wU(n){return new Ot(Dt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function SU(n){return new Ot(Dt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _U(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(Dt.UNAUTHENTICATED,n)}function EU(){return new Ot(Dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function TU(n){return new Ot(Dt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function IU(){return new Ot(Dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function CU(){return new Ot(Dt.CANCELED,"User canceled the upload/download.")}function kU(n){return new Ot(Dt.INVALID_URL,"Invalid URL '"+n+"'.")}function AU(n){return new Ot(Dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function PU(){return new Ot(Dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+YN+"' property when initializing the app?")}function NU(){return new Ot(Dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jU(){return new Ot(Dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function RU(n){return new Ot(Dt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function xb(n){return new Ot(Dt.INVALID_ARGUMENT,n)}function XN(){return new Ot(Dt.APP_DELETED,"The Firebase app was deleted.")}function DU(n){return new Ot(Dt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Xd(n,e){return new Ot(Dt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Cd(n){throw new Ot(Dt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=or.makeFromUrl(e,t)}catch{return new or(e,"")}if(r.path==="")return r;throw AU(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(F){F.path.charAt(F.path.length-1)==="/"&&(F.path_=F.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),d={bucket:1,path:3};function p(F){F.path_=decodeURIComponent(F.path)}const f="v[A-Za-z0-9_]+",y=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",S=new RegExp(`^https?://${y}/${f}/b/${s}/o${x}`,"i"),E={bucket:1,path:3},k=t===QN?"(?:storage.googleapis.com|storage.cloud.google.com)":t,I="([^?#]*)",M=new RegExp(`^https?://${k}/${s}/${I}`,"i"),C=[{regex:u,indices:d,postModify:i},{regex:S,indices:E,postModify:p},{regex:M,indices:{bucket:1,path:2},postModify:p}];for(let F=0;F<C.length;F++){const G=C[F],q=G.regex.exec(e);if(q){const N=q[G.indices.bucket];let _=q[G.indices.path];_||(_=""),r=new or(N,_),G.postModify(r);break}}if(r==null)throw kU(e);return r}}class OU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(n,e,t){let r=1,s=null,i=null,o=!1,u=0;function d(){return u===2}let p=!1;function f(...I){p||(p=!0,e.apply(null,I))}function y(I){s=setTimeout(()=>{s=null,n(S,d())},I)}function x(){i&&clearTimeout(i)}function S(I,...M){if(p){x();return}if(I){x(),f.call(null,I,...M);return}if(d()||o){x(),f.call(null,I,...M);return}r<64&&(r*=2);let C;u===1?(u=2,C=0):C=(r+Math.random())*1e3,y(C)}let E=!1;function k(I){E||(E=!0,x(),!p&&(s!==null?(I||(u=2),clearTimeout(s),y(0)):I||(u=1)))}return y(0),i=setTimeout(()=>{o=!0,k(!0)},t),k}function LU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(n){return n!==void 0}function VU(n){return typeof n=="object"&&!Array.isArray(n)}function kw(n){return typeof n=="string"||n instanceof String}function M1(n){return Aw()&&n instanceof Blob}function Aw(){return typeof Blob<"u"}function L1(n,e,t,r){if(r<e)throw xb(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw xb(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function ZN(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Ka;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ka||(Ka={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BU(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UU{constructor(e,t,r,s,i,o,u,d,p,f,y,x=!0,S=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=d,this.timeout_=p,this.progressCallback_=f,this.connectionFactory_=y,this.retry=x,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,k)=>{this.resolve_=E,this.reject_=k,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Vm(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const d=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(d,p)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===Ka.NO_ERROR,d=i.getStatus();if(!u||BU(d,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Ka.ABORT;r(!1,new Vm(!1,null,f));return}const p=this.successCodes_.indexOf(d)!==-1;r(!0,new Vm(p,i))})},t=(r,s)=>{const i=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const d=this.callback_(u,u.getResponse());FU(d)?i(d):i()}catch(d){o(d)}else if(u!==null){const d=Cw();d.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,d)):o(d)}else if(s.canceled){const d=this.appDelete_?XN():CU();o(d)}else{const d=IU();o(d)}};this.canceled_?t(!1,new Vm(!1,null,!0)):this.backoffId_=MU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&LU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vm{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function $U(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function zU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function HU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function qU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function GU(n,e,t,r,s,i,o=!0,u=!1){const d=ZN(n.urlParams),p=n.url+d,f=Object.assign({},n.headers);return HU(f,e),$U(f,t),zU(f,i),qU(f,r),new UU(p,n.method,f,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function KU(...n){const e=WU();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Aw())return new Blob(n);throw new Ot(Dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function JU(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n){if(typeof atob>"u")throw RU("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class sx{constructor(e,t){this.data=e,this.contentType=t||null}}function YU(n,e){switch(n){case _s.RAW:return new sx(ej(e));case _s.BASE64:case _s.BASE64URL:return new sx(tj(n,e));case _s.DATA_URL:return new sx(ZU(e),e$(e))}throw Cw()}function ej(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=n.charCodeAt(++t);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function XU(n){let e;try{e=decodeURIComponent(n)}catch{throw Xd(_s.DATA_URL,"Malformed data URL.")}return ej(e)}function tj(n,e){switch(n){case _s.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Xd(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case _s.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Xd(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=QU(e)}catch(s){throw s.message.includes("polyfill")?s:Xd(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class nj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Xd(_s.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=t$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ZU(n){const e=new nj(n);return e.base64?tj(_s.BASE64,e.rest):XU(e.rest)}function e$(n){return new nj(n).contentType}function t$(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,t){let r=0,s="";M1(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(M1(this.data_)){const r=this.data_,s=JU(r,e,t);return s===null?null:new uo(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new uo(r,!0)}}static getBlob(...e){if(Aw()){const t=e.map(r=>r instanceof uo?r.data_:r);return new uo(KU.apply(null,t))}else{const t=e.map(o=>kw(o)?YU(_s.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return t.forEach(o=>{for(let u=0;u<o.length;u++)s[i++]=o[u]}),new uo(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rj(n){let e;try{e=JSON.parse(n)}catch{return null}return VU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function r$(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function sj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(n,e){return e}class kn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||s$}}let Bm=null;function i$(n){return!kw(n)||n.length<2?n:sj(n)}function ij(){if(Bm)return Bm;const n=[];n.push(new kn("bucket")),n.push(new kn("generation")),n.push(new kn("metageneration")),n.push(new kn("name","fullPath",!0));function e(i,o){return i$(o)}const t=new kn("name");t.xform=e,n.push(t);function r(i,o){return o!==void 0?Number(o):o}const s=new kn("size");return s.xform=r,n.push(s),n.push(new kn("timeCreated")),n.push(new kn("updated")),n.push(new kn("md5Hash",null,!0)),n.push(new kn("cacheControl",null,!0)),n.push(new kn("contentDisposition",null,!0)),n.push(new kn("contentEncoding",null,!0)),n.push(new kn("contentLanguage",null,!0)),n.push(new kn("contentType",null,!0)),n.push(new kn("metadata","customMetadata",!0)),Bm=n,Bm}function o$(n,e){function t(){const r=n.bucket,s=n.fullPath,i=new or(r,s);return e._makeStorageReference(i)}Object.defineProperty(n,"ref",{get:t})}function a$(n,e,t){const r={};r.type="file";const s=t.length;for(let i=0;i<s;i++){const o=t[i];r[o.local]=o.xform(r,e[o.server])}return o$(r,n),r}function oj(n,e,t){const r=rj(e);return r===null?null:a$(n,r,t)}function l$(n,e,t,r){const s=rj(e);if(s===null||!kw(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(p=>{const f=n.bucket,y=n.fullPath,x="/b/"+o(f)+"/o/"+o(y),S=Pw(x,t,r),E=ZN({alt:"media",token:p});return S+E})[0]}function c$(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(t[i.server]=n[i.local])}return JSON.stringify(t)}class aj{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lj(n){if(!n)throw Cw()}function u$(n,e){function t(r,s){const i=oj(n,s,e);return lj(i!==null),i}return t}function d$(n,e){function t(r,s){const i=oj(n,s,e);return lj(i!==null),l$(i,s,n.host,n._protocol)}return t}function cj(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=EU():s=_U():t.getStatus()===402?s=SU(n.bucket):t.getStatus()===403?s=TU(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function h$(n){const e=cj(n);function t(r,s){let i=e(r,s);return r.getStatus()===404&&(i=wU(n.path)),i.serverResponse=s.serverResponse,i}return t}function p$(n,e,t){const r=e.fullServerUrl(),s=Pw(r,n.host,n._protocol),i="GET",o=n.maxOperationRetryTime,u=new aj(s,i,d$(n,t),o);return u.errorHandler=h$(e),u}function m$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function f$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=m$(null,e)),r}function g$(n,e,t,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function u(){let C="";for(let F=0;F<2;F++)C=C+Math.random().toString().slice(2);return C}const d=u();o["Content-Type"]="multipart/related; boundary="+d;const p=f$(e,r,s),f=c$(p,t),y="--"+d+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+d+`\r
Content-Type: `+p.contentType+`\r
\r
`,x=`\r
--`+d+"--",S=uo.getBlob(y,r,x);if(S===null)throw NU();const E={name:p.fullPath},k=Pw(i,n.host,n._protocol),I="POST",M=n.maxUploadRetryTime,j=new aj(k,I,u$(n,t),M);return j.urlParams=E,j.headers=o,j.body=S.uploadData(),j.errorHandler=cj(e),j}class y${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ka.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ka.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ka.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s,i){if(this.sent_)throw Cd("cannot .send() more than once");if(gi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Cd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Cd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Cd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Cd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class v$ extends y${initXhr(){this.xhr_.responseType="text"}}function uj(){return new v$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t){this._service=e,t instanceof or?this._location=t:this._location=or.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new ll(e,t)}get root(){const e=new or(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sj(this._location.path)}get storage(){return this._service}get parent(){const e=n$(this._location.path);if(e===null)return null;const t=new or(this._location.bucket,e);return new ll(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw DU(e)}}function x$(n,e,t){n._throwIfRoot("uploadBytes");const r=g$(n.storage,n._location,ij(),new uo(e,!0),t);return n.storage.makeRequestWithTokens(r,uj).then(s=>({metadata:s,ref:n}))}function b$(n){n._throwIfRoot("getDownloadURL");const e=p$(n.storage,n._location,ij());return n.storage.makeRequestWithTokens(e,uj).then(t=>{if(t===null)throw jU();return t})}function w$(n,e){const t=r$(n._location.path,e),r=new or(n._location.bucket,t);return new ll(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S$(n){return/^[A-Za-z]+:\/\//.test(n)}function _$(n,e){return new ll(n,e)}function dj(n,e){if(n instanceof Nw){const t=n;if(t._bucket==null)throw PU();const r=new ll(t,t._bucket);return e!=null?dj(r,e):r}else return e!==void 0?w$(n,e):n}function E$(n,e){if(e&&S$(e)){if(n instanceof Nw)return _$(n,e);throw xb("To use ref(service, url), the first argument must be a Storage instance.")}else return dj(n,e)}function F1(n,e){const t=e?.[YN];return t==null?null:or.makeFromBucketSpec(t,n)}function T$(n,e,t,r={}){n.host=`${e}:${t}`;const s=gi(e);s&&(dg(`https://${n.host}/b`),s0("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:ak(i,n.app.options.projectId))}class Nw{constructor(e,t,r,s,i,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=QN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xU,this._maxUploadRetryTime=bU,this._requests=new Set,s!=null?this._bucket=or.makeFromBucketSpec(s,this._host):this._bucket=F1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=or.makeFromBucketSpec(this._url,e):this._bucket=F1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){L1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){L1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ll(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new OU(XN());{const o=GU(e,this._appId,r,s,t,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const V1="@firebase/storage",B1="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj="storage";function Aa(n,e,t){return n=st(n),x$(n,e,t)}function Pa(n){return n=st(n),b$(n)}function Na(n,e){return n=st(n),E$(n,e)}function pj(n=hg(),e){n=st(n);const r=gl(n,hj).getImmediate({identifier:e}),s=ik("storage");return s&&I$(r,...s),r}function I$(n,e,t,r={}){T$(n,e,t,r)}function C$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Nw(t,r,s,e,Bo)}function k$(){Co(new To(hj,C$,"PUBLIC").setMultipleInstances(!0)),kr(V1,B1,""),kr(V1,B1,"esm2020")}k$();const mf={apiKey:"AIzaSyCWjBfZHPHDI4rXRStWPP48lRZVJquWH38",authDomain:"dreambuild-2024-app.firebaseapp.com",projectId:"dreambuild-2024-app",storageBucket:"dreambuild-2024-app.firebasestorage.app",messagingSenderId:"780467658601",appId:"1:780467658601:web:833a9373c15fa3be0be7f8"};console.log("Firebase config loaded:",{hasApiKey:!!mf.apiKey,hasAuthDomain:!!mf.authDomain,projectId:mf.projectId,usingEnvVars:!0});const jw=po(mf),Um=x0(jw),vs=Lg(jw),yc=pj(jw),mj=A.createContext();function Hg(){return A.useContext(mj)}function A$({children:n}){const[e,t]=A.useState(null),[r,s]=A.useState(!0);A.useEffect(()=>{let d,p;try{d=g0(Um,async f=>{try{if(f)try{const y=await Qd(pt(vs,"users",f.uid)),x=y.exists()?y.data():null;t({uid:f.uid,email:f.email,displayName:f.displayName,photoURL:f.photoURL,...x})}catch(y){console.warn("Failed to fetch user data from Firestore:",y),t({uid:f.uid,email:f.email,displayName:f.displayName,photoURL:f.photoURL})}else t(null)}catch(y){console.error("Error in auth state change:",y),t(null)}finally{s(!1)}}),p=setTimeout(()=>{console.log("Firebase auth timeout - setting loading to false"),s(!1)},5e3)}catch(f){console.error("Error setting up auth listener:",f),s(!1)}return()=>{d&&d(),p&&clearTimeout(p)}},[]);const u={user:e,loading:r,signInWithGoogle:async()=>{try{const d=new ti;d.addScope("email"),d.addScope("profile");const p=await HF(Um,d);try{await Ir(pt(vs,"users",p.user.uid),{uid:p.user.uid,email:p.user.email,displayName:p.user.displayName,photoURL:p.user.photoURL,createdAt:new Date,lastLogin:new Date},{merge:!0})}catch(f){console.warn("Failed to save user data to Firestore:",f)}console.log("Successfully signed in!")}catch(d){throw console.error("Failed to sign in:",d.message),d}},logout:async()=>{try{await EF(Um),console.log("Successfully signed out!")}catch(d){console.error("Failed to sign out:",d.message)}},auth:Um,db:vs};return c.jsx(mj.Provider,{value:u,children:r?c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading DreamBuild..."})]})}):n})}const P$="modulepreload",N$=function(n){return"/"+n},U1={},oi=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){let p=function(f){return Promise.all(f.map(y=>Promise.resolve(y).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};var o=p;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=u?.nonce||u?.getAttribute("nonce");s=p(t.map(f=>{if(f=N$(f),f in U1)return;U1[f]=!0;const y=f.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${x}`))return;const S=document.createElement("link");if(S.rel=y?"stylesheet":P$,y||(S.as="script"),S.crossOrigin="",S.href=f,d&&S.setAttribute("nonce",d),document.head.appendChild(S),y)return new Promise((E,k)=>{S.addEventListener("load",E),S.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return s.then(u=>{for(const d of u||[])d.status==="rejected"&&i(d.reason);return e().catch(i)})},fj=A.createContext();function Jo(){return A.useContext(fj)}function j$({children:n}){const{user:e,db:t}=Hg(),[r,s]=A.useState({id:null,name:"Untitled Project",files:{"index.html":"","style.css":"","script.js":"","components.jsx":""},activeFile:"index.html",config:{appType:"frontend",language:"javascript",styling:"tailwind",database:"none",auth:"none"},lastModified:new Date}),[i,o]=A.useState([]),[u,d]=A.useState(!1),p=A.useCallback(j=>{s(C=>({...C,activeFile:j,lastModified:new Date}))},[]),f=A.useCallback((j,C)=>{s(F=>({...F,files:{...F.files,[j]:C},lastModified:new Date}))},[]),y=A.useCallback(j=>{s(C=>({...C,config:{...C.config,...j},lastModified:new Date}))},[]),x=A.useCallback(async(j=null)=>{if(!e){Me.error("Please sign in to save projects");return}d(!0);try{const C={...r,name:j||r.name,userId:e.uid,lastModified:new Date},{doc:F,setDoc:G,collection:q}=await oi(async()=>{const{doc:_,setDoc:R,collection:O}=await Promise.resolve().then(()=>$a);return{doc:_,setDoc:R,collection:O}},void 0),N=F(q(t,"projects"));await G(N,{...C,id:N.id,createdAt:r.id?void 0:new Date}),s(_=>({..._,id:N.id})),Me.success("Project saved successfully!"),S()}catch(C){Me.error("Failed to save project: "+C.message)}finally{d(!1)}},[r,e,t]),S=A.useCallback(async()=>{if(e){d(!0);try{const{collection:j,query:C,where:F,getDocs:G,orderBy:q}=await oi(async()=>{const{collection:B,query:z,where:L,getDocs:Te,orderBy:Ce}=await Promise.resolve().then(()=>$a);return{collection:B,query:z,where:L,getDocs:Te,orderBy:Ce}},void 0),N=j(t,"projects"),_=C(N,F("userId","==",e.uid),q("lastModified","desc")),O=(await G(_)).docs.map(B=>({id:B.id,...B.data()}));o(O)}catch(j){Me.error("Failed to load projects: "+j.message)}finally{d(!1)}}},[e,t]),E=A.useCallback(async j=>{if(e){d(!0);try{const{doc:C,getDoc:F}=await oi(async()=>{const{doc:N,getDoc:_}=await Promise.resolve().then(()=>$a);return{doc:N,getDoc:_}},void 0),G=C(t,"projects",j),q=await F(G);if(q.exists()){const N={id:q.id,...q.data()};s(N),Me.success("Project loaded successfully!")}else Me.error("Project not found")}catch(C){Me.error("Failed to load project: "+C.message)}finally{d(!1)}}},[e,t]),k=A.useCallback(async j=>{if(e){d(!0);try{const{doc:C,deleteDoc:F}=await oi(async()=>{const{doc:G,deleteDoc:q}=await Promise.resolve().then(()=>$a);return{doc:G,deleteDoc:q}},void 0);await F(C(t,"projects",j)),o(G=>G.filter(q=>q.id!==j)),Me.success("Project deleted successfully!")}catch(C){Me.error("Failed to delete project: "+C.message)}finally{d(!1)}}},[e,t]),I=A.useCallback(()=>{s({id:null,name:"Untitled Project",files:{"index.html":"","style.css":"","script.js":"","components.jsx":""},activeFile:"index.html",config:{appType:"frontend",language:"javascript",styling:"tailwind",database:"none",auth:"none"},lastModified:new Date}),Me.success("New project created!")},[]),M={currentProject:r,projects:i,isLoading:u,switchFile:p,updateFile:f,updateConfig:y,saveProject:x,loadProjects:S,loadProject:E,deleteProject:k,createNewProject:I};return c.jsx(fj.Provider,{value:M,children:n})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var R$={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D$=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ve=(n,e)=>{const t=A.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:d,...p},f)=>A.createElement("svg",{ref:f,...R$,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${D$(n)}`,u].join(" "),...p},[...e.map(([y,x])=>A.createElement(y,x)),...Array.isArray(d)?d:[d]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O$=ve("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M$=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L$=ve("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const np=ve("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F$=ve("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=ve("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V$=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eh=ve("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=ve("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=ve("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B$=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=ve("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=ve("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rp=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=ve("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cl=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ul=ve("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=ve("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wo=ve("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=ve("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=ve("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=ve("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=ve("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U$=ve("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=ve("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $$=ve("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=ve("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qg=ve("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $1=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wj=ve("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z$=ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H$=ve("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q$=ve("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=ve("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _b=ve("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G$=ve("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W$=ve("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K$=ve("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sj=ve("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=ve("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J$=ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=ve("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gg=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const So=ve("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _j=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kr=ve("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q$=ve("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ej=ve("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=ve("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y$=ve("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ve("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=ve("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X$=ve("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=ve("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z1=ve("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H1=ve("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tj=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ij=ve("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q1=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=ve("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z$=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=ve("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ez=()=>{const{theme:n,toggleTheme:e}=t0(),{user:t,logout:r}=Hg(),[s,i]=A.useState(!1),[o,u]=A.useState(!1),[d,p]=A.useState(!1),f=fl();Cr.useEffect(()=>{const S=()=>{u(window.innerWidth>=768)};return S(),window.addEventListener("resize",S),()=>window.removeEventListener("resize",S)},[]),Cr.useEffect(()=>{const S=E=>{d&&!E.target.closest(".user-menu")&&p(!1)};return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[d]);const y=[{name:"Home",href:"/",icon:So},{name:"AI Builder",href:"/ai-builder",icon:Rt},{name:"Projects",href:"/projects",icon:ff},{name:"Dashboard",href:"/dashboard",icon:Qf}],x=S=>f.pathname===S;return c.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-lg border-b border-border/50 shadow-sm",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex items-center justify-between h-20",children:[c.jsxs(_r,{to:"/",className:"flex items-center gap-3 group",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-primary-light rounded-xl flex items-center justify-center group-hover:scale-105 transition-transform duration-200 shadow-lg",children:c.jsx(kh,{className:"h-6 w-6 text-primary-foreground"})}),c.jsxs("div",{className:"flex flex-col",children:[c.jsx("span",{className:"text-xl font-bold text-high-contrast",children:"DreamBuild"}),c.jsx("span",{className:"text-xs text-muted-foreground -mt-1",children:"AI Development Platform"})]})]}),c.jsx("div",{className:"hidden md:flex items-center gap-1",children:y.map(S=>{const E=S.icon;return c.jsxs(_r,{to:S.href,className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 border ${x(S.href)?"bg-primary text-primary-foreground border-primary shadow-md":"bg-card text-foreground border-border hover:bg-muted hover:border-primary/30 shadow-sm hover:shadow-md"}`,children:[c.jsx(E,{className:"h-4 w-4"}),S.name]},S.name)})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:e,className:"p-2 rounded-lg hover:bg-muted/50 transition-all duration-200 border border-border/50 hover:border-primary/30 group",title:`Switch to ${n==="light"?"dark":"light"} mode`,children:n==="light"?c.jsx(W$,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors"}):c.jsx(X$,{className:"h-4 w-4 text-warning group-hover:text-primary transition-colors"})}),t?c.jsxs("div",{className:"relative user-menu",children:[c.jsxs("button",{onClick:()=>p(!d),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-muted/50 transition-colors border border-border/50 hover:border-primary/30",children:[c.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-sm font-semibold text-primary",children:(t.displayName||t.email||"U").charAt(0).toUpperCase()})}),c.jsx("span",{className:"text-sm font-medium text-foreground",children:t.displayName||t.email})]}),d&&c.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-card border border-border rounded-lg shadow-lg z-50",children:[c.jsxs("div",{className:"p-3 border-b border-border",children:[c.jsx("p",{className:"text-sm font-medium text-foreground",children:t.displayName||"User"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:t.email})]}),c.jsxs("div",{className:"p-1",children:[c.jsxs(_r,{to:"/dashboard",onClick:()=>p(!1),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-muted rounded-md transition-colors",children:[c.jsx(ff,{className:"h-4 w-4"}),"Dashboard"]}),c.jsxs(_r,{to:"/settings",onClick:()=>p(!1),className:"flex items-center gap-2 px-3 py-2 text-sm hover:bg-muted rounded-md transition-colors",children:[c.jsx(q1,{className:"h-4 w-4"}),"Settings"]}),c.jsx("hr",{className:"my-1"}),c.jsxs("button",{onClick:()=>{r(),p(!1)},className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[c.jsx($1,{className:"h-4 w-4"}),"Sign Out"]})]})]})]}):c.jsxs(_r,{to:"/login",className:"hidden sm:flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-primary to-primary-dark text-primary-foreground rounded-lg hover:from-primary-dark hover:to-primary transition-all duration-200 text-sm font-semibold shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:[c.jsx(So,{className:"h-4 w-4"}),"Sign In"]}),!o&&c.jsx("button",{onClick:()=>i(!s),className:"p-2 rounded-lg hover:bg-muted/50 transition-colors border border-border/50 hover:border-primary/30",children:s?c.jsx(Z$,{className:"h-4 w-4"}):c.jsx(q$,{className:"h-4 w-4"})})]})]}),!o&&s&&c.jsx("div",{className:"border-t border-border/50 bg-background/95 backdrop-blur-lg",children:c.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[y.map(S=>{const E=S.icon;return c.jsxs(_r,{to:S.href,onClick:()=>i(!1),className:`flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-all duration-200 border ${x(S.href)?"bg-primary text-primary-foreground border-primary shadow-md":"bg-card text-foreground border-border hover:bg-muted hover:border-primary/30 shadow-sm"}`,children:[c.jsx(E,{className:"h-5 w-5"}),S.name]},S.name)}),t?c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsxs("div",{className:"px-4 py-2 border-b border-border",children:[c.jsx("p",{className:"text-sm font-medium text-foreground",children:t.displayName||"User"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:t.email})]}),c.jsxs(_r,{to:"/dashboard",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-3 text-base font-medium hover:bg-muted rounded-lg",children:[c.jsx(ff,{className:"h-5 w-5"}),"Dashboard"]}),c.jsxs(_r,{to:"/settings",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-3 text-base font-medium hover:bg-muted rounded-lg",children:[c.jsx(q1,{className:"h-5 w-5"}),"Settings"]}),c.jsxs("button",{onClick:()=>{r(),i(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-base font-medium text-red-600 hover:bg-red-50 rounded-lg",children:[c.jsx($1,{className:"h-5 w-5"}),"Sign Out"]})]}):c.jsxs(_r,{to:"/login",onClick:()=>i(!1),className:"flex items-center gap-3 px-4 py-3 mt-4 bg-gradient-to-r from-primary to-primary-dark text-primary-foreground rounded-lg text-base font-semibold",children:[c.jsx(So,{className:"h-5 w-5"}),"Sign In"]})]})})]})})},tz=()=>c.jsx("footer",{className:"bg-muted/30 border-t border-border",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-black font-bold",children:"D"})}),c.jsx("span",{className:"text-xl font-bold",children:"DreamBuild"})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:"Universal AI Development Platform supporting 100+ programming languages. Build, code, and deploy with the power of AI."}),c.jsx("div",{className:"flex gap-2",children:c.jsx("a",{href:"https://github.com/ronb12/DreamBuild",target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-muted rounded-md transition-colors",children:c.jsx(js,{className:"h-4 w-4"})})})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-sm font-semibold",children:"Product"}),c.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[c.jsx("li",{children:c.jsx("a",{href:"/ai-builder",className:"hover:text-foreground transition-colors",children:"AI Builder"})}),c.jsx("li",{children:c.jsx("a",{href:"/projects",className:"hover:text-foreground transition-colors",children:"Projects"})}),c.jsx("li",{children:c.jsx("a",{href:"/dashboard",className:"hover:text-foreground transition-colors",children:"Dashboard"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-sm font-semibold",children:"Resources"}),c.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[c.jsx("li",{children:c.jsx("a",{href:"/documentation",className:"hover:text-foreground transition-colors",children:"Documentation"})}),c.jsx("li",{children:c.jsx("a",{href:"/examples",className:"hover:text-foreground transition-colors",children:"Examples"})}),c.jsx("li",{children:c.jsx("a",{href:"/community",className:"hover:text-foreground transition-colors",children:"Community"})})]})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-sm font-semibold",children:"Company"}),c.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[c.jsx("li",{children:c.jsx("a",{href:"/about",className:"hover:text-foreground transition-colors",children:"About"})}),c.jsx("li",{children:c.jsx("a",{href:"/blog",className:"hover:text-foreground transition-colors",children:"Blog"})}),c.jsx("li",{children:c.jsx("a",{href:"/contact",className:"hover:text-foreground transition-colors",children:"Contact"})})]})]})]}),c.jsx("hr",{className:"my-8 border-border"}),c.jsx("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:c.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[c.jsx("span",{children:"© 2024 Bradley Virtual Solutions, LLC"}),c.jsx("span",{children:"•"}),c.jsx("span",{children:"Made with"}),c.jsx(Wf,{className:"h-4 w-4 text-red-500"}),c.jsx("span",{children:"for developers"})]})})]})}),kj=A.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Wg=A.createContext({}),Kg=A.createContext(null),Jg=typeof document<"u",Ow=Jg?A.useLayoutEffect:A.useEffect,Aj=A.createContext({strict:!1}),Mw=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),nz="framerAppearId",Pj="data-"+Mw(nz);function rz(n,e,t,r){const{visualElement:s}=A.useContext(Wg),i=A.useContext(Aj),o=A.useContext(Kg),u=A.useContext(kj).reducedMotion,d=A.useRef();r=r||i.renderer,!d.current&&r&&(d.current=r(n,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:u}));const p=d.current;A.useInsertionEffect(()=>{p&&p.update(t,o)});const f=A.useRef(!!(t[Pj]&&!window.HandoffComplete));return Ow(()=>{p&&(p.render(),f.current&&p.animationState&&p.animationState.animateChanges())}),A.useEffect(()=>{p&&(p.updateFeatures(),!f.current&&p.animationState&&p.animationState.animateChanges(),f.current&&(f.current=!1,window.HandoffComplete=!0))}),p}function kc(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function sz(n,e,t){return A.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):kc(t)&&(t.current=r))},[e])}function Ph(n){return typeof n=="string"||Array.isArray(n)}function Qg(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const Lw=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Fw=["initial",...Lw];function Yg(n){return Qg(n.animate)||Fw.some(e=>Ph(n[e]))}function Nj(n){return!!(Yg(n)||n.variants)}function iz(n,e){if(Yg(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Ph(t)?t:void 0,animate:Ph(r)?r:void 0}}return n.inherit!==!1?e:{}}function oz(n){const{initial:e,animate:t}=iz(n,A.useContext(Wg));return A.useMemo(()=>({initial:e,animate:t}),[G1(e),G1(t)])}function G1(n){return Array.isArray(n)?n.join(" "):n}const W1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Nh={};for(const n in W1)Nh[n]={isEnabled:e=>W1[n].some(t=>!!e[t])};function az(n){for(const e in n)Nh[e]={...Nh[e],...n[e]}}const Vw=A.createContext({}),jj=A.createContext({}),lz=Symbol.for("motionComponentSymbol");function cz({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&az(n);function i(u,d){let p;const f={...A.useContext(kj),...u,layoutId:uz(u)},{isStatic:y}=f,x=oz(u),S=r(u,y);if(!y&&Jg){x.visualElement=rz(s,S,f,e);const E=A.useContext(jj),k=A.useContext(Aj).strict;x.visualElement&&(p=x.visualElement.loadFeatures(f,k,n,E))}return A.createElement(Wg.Provider,{value:x},p&&x.visualElement?A.createElement(p,{visualElement:x.visualElement,...f}):null,t(s,u,sz(S,x.visualElement,d),S,y,x.visualElement))}const o=A.forwardRef(i);return o[lz]=s,o}function uz({layoutId:n}){const e=A.useContext(Vw).id;return e&&n!==void 0?e+"-"+n:n}function dz(n){function e(r,s={}){return cz(n(r,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const hz=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bw(n){return typeof n!="string"||n.includes("-")?!1:!!(hz.indexOf(n)>-1||/[A-Z]/.test(n))}const Yf={};function pz(n){Object.assign(Yf,n)}const sp=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Sl=new Set(sp);function Rj(n,{layout:e,layoutId:t}){return Sl.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Yf[n]||n==="opacity")}const Kn=n=>!!(n&&n.getVelocity),mz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fz=sp.length;function gz(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,s){let i="";for(let o=0;o<fz;o++){const u=sp[o];if(n[u]!==void 0){const d=mz[u]||u;i+=`${d}(${n[u]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(n,r?"":i):t&&r&&(i="none"),i}const Dj=n=>e=>typeof e=="string"&&e.startsWith(n),Oj=Dj("--"),Cb=Dj("var(--"),yz=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,vz=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Lo=(n,e,t)=>Math.min(Math.max(t,n),e),_l={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},th={..._l,transform:n=>Lo(0,1,n)},$m={..._l,default:1},nh=n=>Math.round(n*1e5)/1e5,Xg=/(-)?([\d]*\.?[\d])+/g,Mj=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,xz=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function ip(n){return typeof n=="string"}const op=n=>({test:e=>ip(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),to=op("deg"),As=op("%"),De=op("px"),bz=op("vh"),wz=op("vw"),K1={...As,parse:n=>As.parse(n)/100,transform:n=>As.transform(n*100)},J1={..._l,transform:Math.round},Lj={borderWidth:De,borderTopWidth:De,borderRightWidth:De,borderBottomWidth:De,borderLeftWidth:De,borderRadius:De,radius:De,borderTopLeftRadius:De,borderTopRightRadius:De,borderBottomRightRadius:De,borderBottomLeftRadius:De,width:De,maxWidth:De,height:De,maxHeight:De,size:De,top:De,right:De,bottom:De,left:De,padding:De,paddingTop:De,paddingRight:De,paddingBottom:De,paddingLeft:De,margin:De,marginTop:De,marginRight:De,marginBottom:De,marginLeft:De,rotate:to,rotateX:to,rotateY:to,rotateZ:to,scale:$m,scaleX:$m,scaleY:$m,scaleZ:$m,skew:to,skewX:to,skewY:to,distance:De,translateX:De,translateY:De,translateZ:De,x:De,y:De,z:De,perspective:De,transformPerspective:De,opacity:th,originX:K1,originY:K1,originZ:De,zIndex:J1,fillOpacity:th,strokeOpacity:th,numOctaves:J1};function Uw(n,e,t,r){const{style:s,vars:i,transform:o,transformOrigin:u}=n;let d=!1,p=!1,f=!0;for(const y in e){const x=e[y];if(Oj(y)){i[y]=x;continue}const S=Lj[y],E=vz(x,S);if(Sl.has(y)){if(d=!0,o[y]=E,!f)continue;x!==(S.default||0)&&(f=!1)}else y.startsWith("origin")?(p=!0,u[y]=E):s[y]=E}if(e.transform||(d||r?s.transform=gz(n.transform,t,f,r):s.transform&&(s.transform="none")),p){const{originX:y="50%",originY:x="50%",originZ:S=0}=u;s.transformOrigin=`${y} ${x} ${S}`}}const $w=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Fj(n,e,t){for(const r in e)!Kn(e[r])&&!Rj(r,t)&&(n[r]=e[r])}function Sz({transformTemplate:n},e,t){return A.useMemo(()=>{const r=$w();return Uw(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function _z(n,e,t){const r=n.style||{},s={};return Fj(s,r,n),Object.assign(s,Sz(n,e,t)),n.transformValues?n.transformValues(s):s}function Ez(n,e,t){const r={},s=_z(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=s,r}const Tz=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Tz.has(n)}let Vj=n=>!Xf(n);function Iz(n){n&&(Vj=e=>e.startsWith("on")?!Xf(e):n(e))}try{Iz(require("@emotion/is-prop-valid").default)}catch{}function Cz(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(Vj(s)||t===!0&&Xf(s)||!e&&!Xf(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function Q1(n,e,t){return typeof n=="string"?n:De.transform(e+t*n)}function kz(n,e,t){const r=Q1(e,n.x,n.width),s=Q1(t,n.y,n.height);return`${r} ${s}`}const Az={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pz={offset:"strokeDashoffset",array:"strokeDasharray"};function Nz(n,e,t=1,r=0,s=!0){n.pathLength=1;const i=s?Az:Pz;n[i.offset]=De.transform(-r);const o=De.transform(e),u=De.transform(t);n[i.array]=`${o} ${u}`}function zw(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:u=1,pathOffset:d=0,...p},f,y,x){if(Uw(n,p,f,x),y){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:S,style:E,dimensions:k}=n;S.transform&&(k&&(E.transform=S.transform),delete S.transform),k&&(s!==void 0||i!==void 0||E.transform)&&(E.transformOrigin=kz(k,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(S.x=e),t!==void 0&&(S.y=t),r!==void 0&&(S.scale=r),o!==void 0&&Nz(S,o,u,d,!1)}const Bj=()=>({...$w(),attrs:{}}),Hw=n=>typeof n=="string"&&n.toLowerCase()==="svg";function jz(n,e,t,r){const s=A.useMemo(()=>{const i=Bj();return zw(i,e,{enableHardwareAcceleration:!1},Hw(r),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};Fj(i,n.style,n),s.style={...i,...s.style}}return s}function Rz(n=!1){return(t,r,s,{latestValues:i},o)=>{const d=(Bw(t)?jz:Ez)(r,i,o,t),f={...Cz(r,typeof t=="string",n),...d,ref:s},{children:y}=r,x=A.useMemo(()=>Kn(y)?y.get():y,[y]);return A.createElement(t,{...f,children:x})}}function Uj(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const i in t)n.style.setProperty(i,t[i])}const $j=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function zj(n,e,t,r){Uj(n,e,void 0,r);for(const s in e.attrs)n.setAttribute($j.has(s)?s:Mw(s),e.attrs[s])}function qw(n,e){const{style:t}=n,r={};for(const s in t)(Kn(t[s])||e.style&&Kn(e.style[s])||Rj(s,n))&&(r[s]=t[s]);return r}function Hj(n,e){const t=qw(n,e);for(const r in n)if(Kn(n[r])||Kn(e[r])){const s=sp.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[s]=n[r]}return t}function Gw(n,e,t,r={},s={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),e}function qj(n){const e=A.useRef(null);return e.current===null&&(e.current=n()),e.current}const Zf=n=>Array.isArray(n),Dz=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Oz=n=>Zf(n)?n[n.length-1]||0:n;function gf(n){const e=Kn(n)?n.get():n;return Dz(e)?e.toValue():e}function Mz({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,s,i){const o={latestValues:Lz(r,s,i,n),renderState:e()};return t&&(o.mount=u=>t(r,u,o)),o}const Gj=n=>(e,t)=>{const r=A.useContext(Wg),s=A.useContext(Kg),i=()=>Mz(n,e,r,s);return t?i():qj(i)};function Lz(n,e,t,r){const s={},i=r(n,{});for(const x in i)s[x]=gf(i[x]);let{initial:o,animate:u}=n;const d=Yg(n),p=Nj(n);e&&p&&!d&&n.inherit!==!1&&(o===void 0&&(o=e.initial),u===void 0&&(u=e.animate));let f=t?t.initial===!1:!1;f=f||o===!1;const y=f?u:o;return y&&typeof y!="boolean"&&!Qg(y)&&(Array.isArray(y)?y:[y]).forEach(S=>{const E=Gw(n,S);if(!E)return;const{transitionEnd:k,transition:I,...M}=E;for(const j in M){let C=M[j];if(Array.isArray(C)){const F=f?C.length-1:0;C=C[F]}C!==null&&(s[j]=C)}for(const j in k)s[j]=k[j]}),s}const Bt=n=>n;class Y1{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Fz(n){let e=new Y1,t=new Y1,r=0,s=!1,i=!1;const o=new WeakSet,u={schedule:(d,p=!1,f=!1)=>{const y=f&&s,x=y?e:t;return p&&o.add(d),x.add(d)&&y&&s&&(r=e.order.length),d},cancel:d=>{t.remove(d),o.delete(d)},process:d=>{if(s){i=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let p=0;p<r;p++){const f=e.order[p];f(d),o.has(f)&&(u.schedule(f),n())}s=!1,i&&(i=!1,u.process(d))}};return u}const zm=["prepare","read","update","preRender","render","postRender"],Vz=40;function Bz(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=zm.reduce((y,x)=>(y[x]=Fz(()=>t=!0),y),{}),o=y=>i[y].process(s),u=()=>{const y=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(y-s.timestamp,Vz),1),s.timestamp=y,s.isProcessing=!0,zm.forEach(o),s.isProcessing=!1,t&&e&&(r=!1,n(u))},d=()=>{t=!0,r=!0,s.isProcessing||n(u)};return{schedule:zm.reduce((y,x)=>{const S=i[x];return y[x]=(E,k=!1,I=!1)=>(t||d(),S.schedule(E,k,I)),y},{}),cancel:y=>zm.forEach(x=>i[x].cancel(y)),state:s,steps:i}}const{schedule:ft,cancel:fi,state:wn,steps:ox}=Bz(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bt,!0),Uz={useVisualState:Gj({scrapeMotionValuesFromProps:Hj,createRenderState:Bj,onMount:(n,e,{renderState:t,latestValues:r})=>{ft.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),ft.render(()=>{zw(t,r,{enableHardwareAcceleration:!1},Hw(e.tagName),n.transformTemplate),zj(e,t)})}})},$z={useVisualState:Gj({scrapeMotionValuesFromProps:qw,createRenderState:$w})};function zz(n,{forwardMotionProps:e=!1},t,r){return{...Bw(n)?Uz:$z,preloadedFeatures:t,useRender:Rz(e),createVisualElement:r,Component:n}}function ai(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const Wj=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Zg(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const Hz=n=>e=>Wj(e)&&n(e,Zg(e));function li(n,e,t,r){return ai(n,e,Hz(t),r)}const qz=(n,e)=>t=>e(n(t)),_o=(...n)=>n.reduce(qz);function Kj(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const X1=Kj("dragHorizontal"),Z1=Kj("dragVertical");function Jj(n){let e=!1;if(n==="y")e=Z1();else if(n==="x")e=X1();else{const t=X1(),r=Z1();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function Qj(){const n=Jj(!0);return n?(n(),!1):!0}class Qo{constructor(e){this.isMounted=!1,this.node=e}update(){}}function eI(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||Qj())return;const u=n.getProps();n.animationState&&u.whileHover&&n.animationState.setActive("whileHover",e),u[r]&&ft.update(()=>u[r](i,o))};return li(n.current,t,s,{passive:!n.getProps()[r]})}class Gz extends Qo{mount(){this.unmount=_o(eI(this.node,!0),eI(this.node,!1))}unmount(){}}class Wz extends Qo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_o(ai(this.node.current,"focus",()=>this.onFocus()),ai(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const Yj=(n,e)=>e?n===e?!0:Yj(n,e.parentElement):!1;function ax(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Zg(t))}class Kz extends Qo{constructor(){super(...arguments),this.removeStartListeners=Bt,this.removeEndListeners=Bt,this.removeAccessibleListeners=Bt,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=li(window,"pointerup",(u,d)=>{if(!this.checkPressEnd())return;const{onTap:p,onTapCancel:f,globalTapTarget:y}=this.node.getProps();ft.update(()=>{!y&&!Yj(this.node.current,u.target)?f&&f(u,d):p&&p(u,d)})},{passive:!(r.onTap||r.onPointerUp)}),o=li(window,"pointercancel",(u,d)=>this.cancelPress(u,d),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=_o(i,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=u=>{u.key!=="Enter"||!this.checkPressEnd()||ax("up",(d,p)=>{const{onTap:f}=this.node.getProps();f&&ft.update(()=>f(d,p))})};this.removeEndListeners(),this.removeEndListeners=ai(this.node.current,"keyup",o),ax("down",(u,d)=>{this.startPress(u,d)})},t=ai(this.node.current,"keydown",e),r=()=>{this.isPressing&&ax("cancel",(i,o)=>this.cancelPress(i,o))},s=ai(this.node.current,"blur",r);this.removeAccessibleListeners=_o(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&ft.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Qj()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&ft.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=li(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=ai(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=_o(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const kb=new WeakMap,lx=new WeakMap,Jz=n=>{const e=kb.get(n.target);e&&e(n)},Qz=n=>{n.forEach(Jz)};function Yz({root:n,...e}){const t=n||document;lx.has(t)||lx.set(t,{});const r=lx.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Qz,{root:n,...e})),r[s]}function Xz(n,e,t){const r=Yz(e);return kb.set(n,t),r.observe(n),()=>{kb.delete(n),r.unobserve(n)}}const Zz={some:0,all:1};class e9 extends Qo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Zz[s]},u=d=>{const{isIntersecting:p}=d;if(this.isInView===p||(this.isInView=p,i&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:f,onViewportLeave:y}=this.node.getProps(),x=p?f:y;x&&x(d)};return Xz(this.node.current,o,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(t9(e,t))&&this.startObserver()}unmount(){}}function t9({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const n9={inView:{Feature:e9},tap:{Feature:Kz},focus:{Feature:Wz},hover:{Feature:Gz}};function Xj(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function r9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function s9(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function ey(n,e,t){const r=n.getProps();return Gw(r,e,t!==void 0?t:r.custom,r9(n),s9(n))}let Ww=Bt;const Qa=n=>n*1e3,ci=n=>n/1e3,i9={current:!1},Zj=n=>Array.isArray(n)&&typeof n[0]=="number";function e2(n){return!!(!n||typeof n=="string"&&t2[n]||Zj(n)||Array.isArray(n)&&n.every(e2))}const Ld=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,t2={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ld([0,.65,.55,1]),circOut:Ld([.55,0,1,.45]),backIn:Ld([.31,.01,.66,-.59]),backOut:Ld([.33,1.53,.69,.99])};function n2(n){if(n)return Zj(n)?Ld(n):Array.isArray(n)?n.map(n2):t2[n]}function o9(n,e,t,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:u,times:d}={}){const p={[e]:t};d&&(p.offset=d);const f=n2(u);return Array.isArray(f)&&(p.easing=f),n.animate(p,{delay:r,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function a9(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const r2=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,l9=1e-7,c9=12;function u9(n,e,t,r,s){let i,o,u=0;do o=e+(t-e)/2,i=r2(o,r,s)-n,i>0?t=o:e=o;while(Math.abs(i)>l9&&++u<c9);return o}function ap(n,e,t,r){if(n===e&&t===r)return Bt;const s=i=>u9(i,0,1,n,t);return i=>i===0||i===1?i:r2(s(i),e,r)}const d9=ap(.42,0,1,1),h9=ap(0,0,.58,1),s2=ap(.42,0,.58,1),p9=n=>Array.isArray(n)&&typeof n[0]!="number",i2=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,o2=n=>e=>1-n(1-e),Kw=n=>1-Math.sin(Math.acos(n)),a2=o2(Kw),m9=i2(Kw),l2=ap(.33,1.53,.69,.99),Jw=o2(l2),f9=i2(Jw),g9=n=>(n*=2)<1?.5*Jw(n):.5*(2-Math.pow(2,-10*(n-1))),y9={linear:Bt,easeIn:d9,easeInOut:s2,easeOut:h9,circIn:Kw,circInOut:m9,circOut:a2,backIn:Jw,backInOut:f9,backOut:l2,anticipate:g9},tI=n=>{if(Array.isArray(n)){Ww(n.length===4);const[e,t,r,s]=n;return ap(e,t,r,s)}else if(typeof n=="string")return y9[n];return n},Qw=(n,e)=>t=>!!(ip(t)&&xz.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),c2=(n,e,t)=>r=>{if(!ip(r))return r;const[s,i,o,u]=r.match(Xg);return{[n]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(o),alpha:u!==void 0?parseFloat(u):1}},v9=n=>Lo(0,255,n),cx={..._l,transform:n=>Math.round(v9(n))},za={test:Qw("rgb","red"),parse:c2("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+cx.transform(n)+", "+cx.transform(e)+", "+cx.transform(t)+", "+nh(th.transform(r))+")"};function x9(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Ab={test:Qw("#"),parse:x9,transform:za.transform},Ac={test:Qw("hsl","hue"),parse:c2("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+As.transform(nh(e))+", "+As.transform(nh(t))+", "+nh(th.transform(r))+")"},Pn={test:n=>za.test(n)||Ab.test(n)||Ac.test(n),parse:n=>za.test(n)?za.parse(n):Ac.test(n)?Ac.parse(n):Ab.parse(n),transform:n=>ip(n)?n:n.hasOwnProperty("red")?za.transform(n):Ac.transform(n)},kt=(n,e,t)=>-t*n+t*e+n;function ux(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function b9({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,i=0,o=0;if(!e)s=i=o=t;else{const u=t<.5?t*(1+e):t+e-t*e,d=2*t-u;s=ux(d,u,n+1/3),i=ux(d,u,n),o=ux(d,u,n-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const dx=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},w9=[Ab,za,Ac],S9=n=>w9.find(e=>e.test(n));function nI(n){const e=S9(n);let t=e.parse(n);return e===Ac&&(t=b9(t)),t}const u2=(n,e)=>{const t=nI(n),r=nI(e),s={...t};return i=>(s.red=dx(t.red,r.red,i),s.green=dx(t.green,r.green,i),s.blue=dx(t.blue,r.blue,i),s.alpha=kt(t.alpha,r.alpha,i),za.transform(s))};function _9(n){var e,t;return isNaN(n)&&ip(n)&&(((e=n.match(Xg))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Mj))===null||t===void 0?void 0:t.length)||0)>0}const d2={regex:yz,countKey:"Vars",token:"${v}",parse:Bt},h2={regex:Mj,countKey:"Colors",token:"${c}",parse:Pn.parse},p2={regex:Xg,countKey:"Numbers",token:"${n}",parse:_l.parse};function hx(n,{regex:e,countKey:t,token:r,parse:s}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...i.map(s)))}function eg(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&hx(t,d2),hx(t,h2),hx(t,p2),t}function m2(n){return eg(n).values}function f2(n){const{values:e,numColors:t,numVars:r,tokenised:s}=eg(n),i=e.length;return o=>{let u=s;for(let d=0;d<i;d++)d<r?u=u.replace(d2.token,o[d]):d<r+t?u=u.replace(h2.token,Pn.transform(o[d])):u=u.replace(p2.token,nh(o[d]));return u}}const E9=n=>typeof n=="number"?0:n;function T9(n){const e=m2(n);return f2(n)(e.map(E9))}const Fo={test:_9,parse:m2,createTransformer:f2,getAnimatableNone:T9},g2=(n,e)=>t=>`${t>0?e:n}`;function y2(n,e){return typeof n=="number"?t=>kt(n,e,t):Pn.test(n)?u2(n,e):n.startsWith("var(")?g2(n,e):x2(n,e)}const v2=(n,e)=>{const t=[...n],r=t.length,s=n.map((i,o)=>y2(i,e[o]));return i=>{for(let o=0;o<r;o++)t[o]=s[o](i);return t}},I9=(n,e)=>{const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=y2(n[s],e[s]));return s=>{for(const i in r)t[i]=r[i](s);return t}},x2=(n,e)=>{const t=Fo.createTransformer(e),r=eg(n),s=eg(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?_o(v2(r.values,s.values),t):g2(n,e)},jh=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},rI=(n,e)=>t=>kt(n,e,t);function C9(n){return typeof n=="number"?rI:typeof n=="string"?Pn.test(n)?u2:x2:Array.isArray(n)?v2:typeof n=="object"?I9:rI}function k9(n,e,t){const r=[],s=t||C9(n[0]),i=n.length-1;for(let o=0;o<i;o++){let u=s(n[o],n[o+1]);if(e){const d=Array.isArray(e)?e[o]||Bt:e;u=_o(d,u)}r.push(u)}return r}function b2(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const i=n.length;if(Ww(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=k9(e,r,s),u=o.length,d=p=>{let f=0;if(u>1)for(;f<n.length-2&&!(p<n[f+1]);f++);const y=jh(n[f],n[f+1],p);return o[f](y)};return t?p=>d(Lo(n[0],n[i-1],p)):d}function A9(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=jh(0,e,r);n.push(kt(t,1,s))}}function P9(n){const e=[0];return A9(e,n.length-1),e}function N9(n,e){return n.map(t=>t*e)}function j9(n,e){return n.map(()=>e||s2).splice(0,n.length-1)}function tg({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=p9(r)?r.map(tI):tI(r),i={done:!1,value:e[0]},o=N9(t&&t.length===e.length?t:P9(e),n),u=b2(o,e,{ease:Array.isArray(s)?s:j9(e,s)});return{calculatedDuration:n,next:d=>(i.value=u(d),i.done=d>=n,i)}}function w2(n,e){return e?n*(1e3/e):0}const R9=5;function S2(n,e,t){const r=Math.max(e-R9,0);return w2(t-n(r),e-r)}const px=.001,D9=.01,O9=10,M9=.05,L9=1;function F9({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let s,i,o=1-e;o=Lo(M9,L9,o),n=Lo(D9,O9,ci(n)),o<1?(s=p=>{const f=p*o,y=f*n,x=f-t,S=Pb(p,o),E=Math.exp(-y);return px-x/S*E},i=p=>{const y=p*o*n,x=y*t+t,S=Math.pow(o,2)*Math.pow(p,2)*n,E=Math.exp(-y),k=Pb(Math.pow(p,2),o);return(-s(p)+px>0?-1:1)*((x-S)*E)/k}):(s=p=>{const f=Math.exp(-p*n),y=(p-t)*n+1;return-px+f*y},i=p=>{const f=Math.exp(-p*n),y=(t-p)*(n*n);return f*y});const u=5/n,d=B9(s,i,u);if(n=Qa(n),isNaN(d))return{stiffness:100,damping:10,duration:n};{const p=Math.pow(d,2)*r;return{stiffness:p,damping:o*2*Math.sqrt(r*p),duration:n}}}const V9=12;function B9(n,e,t){let r=t;for(let s=1;s<V9;s++)r=r-n(r)/e(r);return r}function Pb(n,e){return n*Math.sqrt(1-e*e)}const U9=["duration","bounce"],$9=["stiffness","damping","mass"];function sI(n,e){return e.some(t=>n[t]!==void 0)}function z9(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!sI(n,$9)&&sI(n,U9)){const t=F9(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function _2({keyframes:n,restDelta:e,restSpeed:t,...r}){const s=n[0],i=n[n.length-1],o={done:!1,value:s},{stiffness:u,damping:d,mass:p,duration:f,velocity:y,isResolvedFromDuration:x}=z9({...r,velocity:-ci(r.velocity||0)}),S=y||0,E=d/(2*Math.sqrt(u*p)),k=i-s,I=ci(Math.sqrt(u/p)),M=Math.abs(k)<5;t||(t=M?.01:2),e||(e=M?.005:.5);let j;if(E<1){const C=Pb(I,E);j=F=>{const G=Math.exp(-E*I*F);return i-G*((S+E*I*k)/C*Math.sin(C*F)+k*Math.cos(C*F))}}else if(E===1)j=C=>i-Math.exp(-I*C)*(k+(S+I*k)*C);else{const C=I*Math.sqrt(E*E-1);j=F=>{const G=Math.exp(-E*I*F),q=Math.min(C*F,300);return i-G*((S+E*I*k)*Math.sinh(q)+C*k*Math.cosh(q))/C}}return{calculatedDuration:x&&f||null,next:C=>{const F=j(C);if(x)o.done=C>=f;else{let G=S;C!==0&&(E<1?G=S2(j,C,F):G=0);const q=Math.abs(G)<=t,N=Math.abs(i-F)<=e;o.done=q&&N}return o.value=o.done?i:F,o}}}function iI({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:u,max:d,restDelta:p=.5,restSpeed:f}){const y=n[0],x={done:!1,value:y},S=_=>u!==void 0&&_<u||d!==void 0&&_>d,E=_=>u===void 0?d:d===void 0||Math.abs(u-_)<Math.abs(d-_)?u:d;let k=t*e;const I=y+k,M=o===void 0?I:o(I);M!==I&&(k=M-y);const j=_=>-k*Math.exp(-_/r),C=_=>M+j(_),F=_=>{const R=j(_),O=C(_);x.done=Math.abs(R)<=p,x.value=x.done?M:O};let G,q;const N=_=>{S(x.value)&&(G=_,q=_2({keyframes:[x.value,E(x.value)],velocity:S2(C,_,x.value),damping:s,stiffness:i,restDelta:p,restSpeed:f}))};return N(0),{calculatedDuration:null,next:_=>{let R=!1;return!q&&G===void 0&&(R=!0,F(_),N(_)),G!==void 0&&_>G?q.next(_-G):(!R&&F(_),x)}}}const H9=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ft.update(e,!0),stop:()=>fi(e),now:()=>wn.isProcessing?wn.timestamp:performance.now()}},oI=2e4;function aI(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<oI;)e+=t,r=n.next(e);return e>=oI?1/0:e}const q9={decay:iI,inertia:iI,tween:tg,keyframes:tg,spring:_2};function ng({autoplay:n=!0,delay:e=0,driver:t=H9,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:u="loop",onPlay:d,onStop:p,onComplete:f,onUpdate:y,...x}){let S=1,E=!1,k,I;const M=()=>{I=new Promise(U=>{k=U})};M();let j;const C=q9[s]||tg;let F;C!==tg&&typeof r[0]!="number"&&(F=b2([0,100],r,{clamp:!1}),r=[0,100]);const G=C({...x,keyframes:r});let q;u==="mirror"&&(q=C({...x,keyframes:[...r].reverse(),velocity:-(x.velocity||0)}));let N="idle",_=null,R=null,O=null;G.calculatedDuration===null&&i&&(G.calculatedDuration=aI(G));const{calculatedDuration:B}=G;let z=1/0,L=1/0;B!==null&&(z=B+o,L=z*(i+1)-o);let Te=0;const Ce=U=>{if(R===null)return;S>0&&(R=Math.min(R,U)),S<0&&(R=Math.min(U-L/S,R)),_!==null?Te=_:Te=Math.round(U-R)*S;const te=Te-e*(S>=0?1:-1),Ne=S>=0?te<0:te>L;Te=Math.max(te,0),N==="finished"&&_===null&&(Te=L);let Pe=Te,Ve=G;if(i){const ye=Math.min(Te,L)/z;let fe=Math.floor(ye),ot=ye%1;!ot&&ye>=1&&(ot=1),ot===1&&fe--,fe=Math.min(fe,i+1),!!(fe%2)&&(u==="reverse"?(ot=1-ot,o&&(ot-=o/z)):u==="mirror"&&(Ve=q)),Pe=Lo(0,1,ot)*z}const Be=Ne?{done:!1,value:r[0]}:Ve.next(Pe);F&&(Be.value=F(Be.value));let{done:Xe}=Be;!Ne&&B!==null&&(Xe=S>=0?Te>=L:Te<=0);const ne=_===null&&(N==="finished"||N==="running"&&Xe);return y&&y(Be.value),ne&&le(),Be},we=()=>{j&&j.stop(),j=void 0},$e=()=>{N="idle",we(),k(),M(),R=O=null},le=()=>{N="finished",f&&f(),we(),k()},ie=()=>{if(E)return;j||(j=t(Ce));const U=j.now();d&&d(),_!==null?R=U-_:(!R||N==="finished")&&(R=U),N==="finished"&&M(),O=R,_=null,N="running",j.start()};n&&ie();const se={then(U,te){return I.then(U,te)},get time(){return ci(Te)},set time(U){U=Qa(U),Te=U,_!==null||!j||S===0?_=U:R=j.now()-U/S},get duration(){const U=G.calculatedDuration===null?aI(G):G.calculatedDuration;return ci(U)},get speed(){return S},set speed(U){U===S||!j||(S=U,se.time=ci(Te))},get state(){return N},play:ie,pause:()=>{N="paused",_=Te},stop:()=>{E=!0,N!=="idle"&&(N="idle",p&&p(),$e())},cancel:()=>{O!==null&&Ce(O),$e()},complete:()=>{N="finished"},sample:U=>(R=0,Ce(U))};return se}function G9(n){let e;return()=>(e===void 0&&(e=n()),e)}const W9=G9(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),K9=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Hm=10,J9=2e4,Q9=(n,e)=>e.type==="spring"||n==="backgroundColor"||!e2(e.ease);function Y9(n,e,{onUpdate:t,onComplete:r,...s}){if(!(W9()&&K9.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,u,d,p=!1;const f=()=>{d=new Promise(C=>{u=C})};f();let{keyframes:y,duration:x=300,ease:S,times:E}=s;if(Q9(e,s)){const C=ng({...s,repeat:0,delay:0});let F={done:!1,value:y[0]};const G=[];let q=0;for(;!F.done&&q<J9;)F=C.sample(q),G.push(F.value),q+=Hm;E=void 0,y=G,x=q-Hm,S="linear"}const k=o9(n.owner.current,e,y,{...s,duration:x,ease:S,times:E}),I=()=>{p=!1,k.cancel()},M=()=>{p=!0,ft.update(I),u(),f()};return k.onfinish=()=>{p||(n.set(a9(y,s)),r&&r(),M())},{then(C,F){return d.then(C,F)},attachTimeline(C){return k.timeline=C,k.onfinish=null,Bt},get time(){return ci(k.currentTime||0)},set time(C){k.currentTime=Qa(C)},get speed(){return k.playbackRate},set speed(C){k.playbackRate=C},get duration(){return ci(x)},play:()=>{o||(k.play(),fi(I))},pause:()=>k.pause(),stop:()=>{if(o=!0,k.playState==="idle")return;const{currentTime:C}=k;if(C){const F=ng({...s,autoplay:!1});n.setWithVelocity(F.sample(C-Hm).value,F.sample(C).value,Hm)}M()},complete:()=>{p||k.finish()},cancel:M}}function X9({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const s=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Bt,pause:Bt,stop:Bt,then:i=>(i(),Promise.resolve()),cancel:Bt,complete:Bt});return e?ng({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const Z9={type:"spring",stiffness:500,damping:25,restSpeed:10},e8=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),t8={type:"keyframes",duration:.8},n8={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},r8=(n,{keyframes:e})=>e.length>2?t8:Sl.has(n)?n.startsWith("scale")?e8(e[1]):Z9:n8,Nb=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Fo.test(e)||e==="0")&&!e.startsWith("url(")),s8=new Set(["brightness","contrast","saturate","opacity"]);function i8(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Xg)||[];if(!r)return n;const s=t.replace(r,"");let i=s8.has(e)?1:0;return r!==t&&(i*=100),e+"("+i+s+")"}const o8=/([a-z-]*)\(.*?\)/g,jb={...Fo,getAnimatableNone:n=>{const e=n.match(o8);return e?e.map(i8).join(" "):n}},a8={...Lj,color:Pn,backgroundColor:Pn,outlineColor:Pn,fill:Pn,stroke:Pn,borderColor:Pn,borderTopColor:Pn,borderRightColor:Pn,borderBottomColor:Pn,borderLeftColor:Pn,filter:jb,WebkitFilter:jb},Yw=n=>a8[n];function E2(n,e){let t=Yw(n);return t!==jb&&(t=Fo),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const T2=n=>/^0[^.\s]+$/.test(n);function l8(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||T2(n)}function c8(n,e,t,r){const s=Nb(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const o=r.from!==void 0?r.from:n.get();let u;const d=[];for(let p=0;p<i.length;p++)i[p]===null&&(i[p]=p===0?o:i[p-1]),l8(i[p])&&d.push(p),typeof i[p]=="string"&&i[p]!=="none"&&i[p]!=="0"&&(u=i[p]);if(s&&d.length&&u)for(let p=0;p<d.length;p++){const f=d[p];i[f]=E2(e,u)}return i}function u8({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:u,from:d,elapsed:p,...f}){return!!Object.keys(f).length}function Xw(n,e){return n[e]||n.default||n}const d8={skipAnimations:!1},Zw=(n,e,t,r={})=>s=>{const i=Xw(r,n)||{},o=i.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Qa(o);const d=c8(e,n,t,i),p=d[0],f=d[d.length-1],y=Nb(n,p),x=Nb(n,f);let S={keyframes:d,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-u,onUpdate:E=>{e.set(E),i.onUpdate&&i.onUpdate(E)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(u8(i)||(S={...S,...r8(n,S)}),S.duration&&(S.duration=Qa(S.duration)),S.repeatDelay&&(S.repeatDelay=Qa(S.repeatDelay)),!y||!x||i9.current||i.type===!1||d8.skipAnimations)return X9(S);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const E=Y9(e,n,S);if(E)return E}return ng(S)};function rg(n){return!!(Kn(n)&&n.add)}const I2=n=>/^\-?\d*\.?\d+$/.test(n);function eS(n,e){n.indexOf(e)===-1&&n.push(e)}function tS(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class nS{constructor(){this.subscriptions=[]}add(e){return eS(this.subscriptions,e),()=>tS(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const h8=n=>!isNaN(parseFloat(n));class p8{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=wn;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,ft.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>ft.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=h8(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new nS);const r=this.events[e].add(t);return e==="change"?()=>{r(),ft.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?w2(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function au(n,e){return new p8(n,e)}const C2=n=>e=>e.test(n),m8={test:n=>n==="auto",parse:n=>n},k2=[_l,De,As,to,wz,bz,m8],kd=n=>k2.find(C2(n)),f8=[...k2,Pn,Fo],g8=n=>f8.find(C2(n));function y8(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,au(t))}function v8(n,e){const t=ey(n,e);let{transitionEnd:r={},transition:s={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...r};for(const o in i){const u=Oz(i[o]);y8(n,o,u)}}function x8(n,e,t){var r,s;const i=Object.keys(e).filter(u=>!n.hasValue(u)),o=i.length;if(o)for(let u=0;u<o;u++){const d=i[u],p=e[d];let f=null;Array.isArray(p)&&(f=p[0]),f===null&&(f=(s=(r=t[d])!==null&&r!==void 0?r:n.readValue(d))!==null&&s!==void 0?s:e[d]),f!=null&&(typeof f=="string"&&(I2(f)||T2(f))?f=parseFloat(f):!g8(f)&&Fo.test(p)&&(f=E2(d,p)),n.addValue(d,au(f,{owner:n})),t[d]===void 0&&(t[d]=f),f!==null&&n.setBaseTarget(d,f))}}function b8(n,e){return e?(e[n]||e.default||e).from:void 0}function w8(n,e,t){const r={};for(const s in n){const i=b8(s,e);if(i!==void 0)r[s]=i;else{const o=t.getValue(s);o&&(r[s]=o.get())}}return r}function S8({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function _8(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function A2(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:o,...u}=n.makeTargetAnimatable(e);const d=n.getValue("willChange");r&&(i=r);const p=[],f=s&&n.animationState&&n.animationState.getState()[s];for(const y in u){const x=n.getValue(y),S=u[y];if(!x||S===void 0||f&&S8(f,y))continue;const E={delay:t,elapsed:0,...Xw(i||{},y)};if(window.HandoffAppearAnimations){const M=n.getProps()[Pj];if(M){const j=window.HandoffAppearAnimations(M,y,x,ft);j!==null&&(E.elapsed=j,E.isHandoff=!0)}}let k=!E.isHandoff&&!_8(x,S);if(E.type==="spring"&&(x.getVelocity()||E.velocity)&&(k=!1),x.animation&&(k=!1),k)continue;x.start(Zw(y,x,S,n.shouldReduceMotion&&Sl.has(y)?{type:!1}:E));const I=x.animation;rg(d)&&(d.add(y),I.then(()=>d.remove(y))),p.push(I)}return o&&Promise.all(p).then(()=>{o&&v8(n,o)}),p}function Rb(n,e,t={}){const r=ey(n,e,t.custom);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const i=r?()=>Promise.all(A2(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(d=0)=>{const{delayChildren:p=0,staggerChildren:f,staggerDirection:y}=s;return E8(n,e,p+d,f,y,t)}:()=>Promise.resolve(),{when:u}=s;if(u){const[d,p]=u==="beforeChildren"?[i,o]:[o,i];return d().then(()=>p())}else return Promise.all([i(),o(t.delay)])}function E8(n,e,t=0,r=0,s=1,i){const o=[],u=(n.variantChildren.size-1)*r,d=s===1?(p=0)=>p*r:(p=0)=>u-p*r;return Array.from(n.variantChildren).sort(T8).forEach((p,f)=>{p.notify("AnimationStart",e),o.push(Rb(p,e,{...i,delay:t+d(f)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(o)}function T8(n,e){return n.sortNodePosition(e)}function I8(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Rb(n,i,t));r=Promise.all(s)}else if(typeof e=="string")r=Rb(n,e,t);else{const s=typeof e=="function"?ey(n,e,t.custom):e;r=Promise.all(A2(n,s,t))}return r.then(()=>n.notify("AnimationComplete",e))}const C8=[...Lw].reverse(),k8=Lw.length;function A8(n){return e=>Promise.all(e.map(({animation:t,options:r})=>I8(n,t,r)))}function P8(n){let e=A8(n);const t=j8();let r=!0;const s=(d,p)=>{const f=ey(n,p);if(f){const{transition:y,transitionEnd:x,...S}=f;d={...d,...S,...x}}return d};function i(d){e=d(n)}function o(d,p){const f=n.getProps(),y=n.getVariantContext(!0)||{},x=[],S=new Set;let E={},k=1/0;for(let M=0;M<k8;M++){const j=C8[M],C=t[j],F=f[j]!==void 0?f[j]:y[j],G=Ph(F),q=j===p?C.isActive:null;q===!1&&(k=M);let N=F===y[j]&&F!==f[j]&&G;if(N&&r&&n.manuallyAnimateOnMount&&(N=!1),C.protectedKeys={...E},!C.isActive&&q===null||!F&&!C.prevProp||Qg(F)||typeof F=="boolean")continue;let R=N8(C.prevProp,F)||j===p&&C.isActive&&!N&&G||M>k&&G,O=!1;const B=Array.isArray(F)?F:[F];let z=B.reduce(s,{});q===!1&&(z={});const{prevResolvedValues:L={}}=C,Te={...L,...z},Ce=we=>{R=!0,S.has(we)&&(O=!0,S.delete(we)),C.needsAnimating[we]=!0};for(const we in Te){const $e=z[we],le=L[we];if(E.hasOwnProperty(we))continue;let ie=!1;Zf($e)&&Zf(le)?ie=!Xj($e,le):ie=$e!==le,ie?$e!==void 0?Ce(we):S.add(we):$e!==void 0&&S.has(we)?Ce(we):C.protectedKeys[we]=!0}C.prevProp=F,C.prevResolvedValues=z,C.isActive&&(E={...E,...z}),r&&n.blockInitialAnimation&&(R=!1),R&&(!N||O)&&x.push(...B.map(we=>({animation:we,options:{type:j,...d}})))}if(S.size){const M={};S.forEach(j=>{const C=n.getBaseTarget(j);C!==void 0&&(M[j]=C)}),x.push({animation:M})}let I=!!x.length;return r&&(f.initial===!1||f.initial===f.animate)&&!n.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(x):Promise.resolve()}function u(d,p,f){var y;if(t[d].isActive===p)return Promise.resolve();(y=n.variantChildren)===null||y===void 0||y.forEach(S=>{var E;return(E=S.animationState)===null||E===void 0?void 0:E.setActive(d,p)}),t[d].isActive=p;const x=o(f,d);for(const S in t)t[S].protectedKeys={};return x}return{animateChanges:o,setActive:u,setAnimateFunction:i,getState:()=>t}}function N8(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Xj(e,n):!1}function Ta(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function j8(){return{animate:Ta(!0),whileInView:Ta(),whileHover:Ta(),whileTap:Ta(),whileDrag:Ta(),whileFocus:Ta(),exit:Ta()}}class R8 extends Qo{constructor(e){super(e),e.animationState||(e.animationState=P8(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),Qg(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let D8=0;class O8 extends Qo{constructor(){super(...arguments),this.id=D8++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const M8={animation:{Feature:R8},exit:{Feature:O8}},lI=(n,e)=>Math.abs(n-e);function L8(n,e){const t=lI(n.x,e.x),r=lI(n.y,e.y);return Math.sqrt(t**2+r**2)}class P2{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=fx(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,S=L8(y.offset,{x:0,y:0})>=3;if(!x&&!S)return;const{point:E}=y,{timestamp:k}=wn;this.history.push({...E,timestamp:k});const{onStart:I,onMove:M}=this.handlers;x||(I&&I(this.lastMoveEvent,y),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,y)},this.handlePointerMove=(y,x)=>{this.lastMoveEvent=y,this.lastMoveEventInfo=mx(x,this.transformPagePoint),ft.update(this.updatePoint,!0)},this.handlePointerUp=(y,x)=>{this.end();const{onEnd:S,onSessionEnd:E,resumeAnimation:k}=this.handlers;if(this.dragSnapToOrigin&&k&&k(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const I=fx(y.type==="pointercancel"?this.lastMoveEventInfo:mx(x,this.transformPagePoint),this.history);this.startEvent&&S&&S(y,I),E&&E(y,I)},!Wj(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const o=Zg(e),u=mx(o,this.transformPagePoint),{point:d}=u,{timestamp:p}=wn;this.history=[{...d,timestamp:p}];const{onSessionStart:f}=t;f&&f(e,fx(u,this.history)),this.removeListeners=_o(li(this.contextWindow,"pointermove",this.handlePointerMove),li(this.contextWindow,"pointerup",this.handlePointerUp),li(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fi(this.updatePoint)}}function mx(n,e){return e?{point:e(n.point)}:n}function cI(n,e){return{x:n.x-e.x,y:n.y-e.y}}function fx({point:n},e){return{point:n,delta:cI(n,N2(e)),offset:cI(n,F8(e)),velocity:V8(e,.1)}}function F8(n){return n[0]}function N2(n){return n[n.length-1]}function V8(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=N2(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>Qa(e)));)t--;if(!r)return{x:0,y:0};const i=ci(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function ur(n){return n.max-n.min}function Db(n,e=0,t=.01){return Math.abs(n-e)<=t}function uI(n,e,t,r=.5){n.origin=r,n.originPoint=kt(e.min,e.max,n.origin),n.scale=ur(t)/ur(e),(Db(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=kt(t.min,t.max,n.origin)-n.originPoint,(Db(n.translate)||isNaN(n.translate))&&(n.translate=0)}function rh(n,e,t,r){uI(n.x,e.x,t.x,r?r.originX:void 0),uI(n.y,e.y,t.y,r?r.originY:void 0)}function dI(n,e,t){n.min=t.min+e.min,n.max=n.min+ur(e)}function B8(n,e,t){dI(n.x,e.x,t.x),dI(n.y,e.y,t.y)}function hI(n,e,t){n.min=e.min-t.min,n.max=n.min+ur(e)}function sh(n,e,t){hI(n.x,e.x,t.x),hI(n.y,e.y,t.y)}function U8(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?kt(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?kt(t,n,r.max):Math.min(n,t)),n}function pI(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function $8(n,{top:e,left:t,bottom:r,right:s}){return{x:pI(n.x,t,s),y:pI(n.y,e,r)}}function mI(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function z8(n,e){return{x:mI(n.x,e.x),y:mI(n.y,e.y)}}function H8(n,e){let t=.5;const r=ur(n),s=ur(e);return s>r?t=jh(e.min,e.max-r,n.min):r>s&&(t=jh(n.min,n.max-s,e.min)),Lo(0,1,t)}function q8(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Ob=.35;function G8(n=Ob){return n===!1?n=0:n===!0&&(n=Ob),{x:fI(n,"left","right"),y:fI(n,"top","bottom")}}function fI(n,e,t){return{min:gI(n,e),max:gI(n,t)}}function gI(n,e){return typeof n=="number"?n:n[e]||0}const yI=()=>({translate:0,scale:1,origin:0,originPoint:0}),Pc=()=>({x:yI(),y:yI()}),vI=()=>({min:0,max:0}),Gt=()=>({x:vI(),y:vI()});function Sr(n){return[n("x"),n("y")]}function j2({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function W8({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function K8(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function gx(n){return n===void 0||n===1}function Mb({scale:n,scaleX:e,scaleY:t}){return!gx(n)||!gx(e)||!gx(t)}function ja(n){return Mb(n)||R2(n)||n.z||n.rotate||n.rotateX||n.rotateY}function R2(n){return xI(n.x)||xI(n.y)}function xI(n){return n&&n!=="0%"}function sg(n,e,t){const r=n-t,s=e*r;return t+s}function bI(n,e,t,r,s){return s!==void 0&&(n=sg(n,s,r)),sg(n,t,r)+e}function Lb(n,e=0,t=1,r,s){n.min=bI(n.min,e,t,r,s),n.max=bI(n.max,e,t,r,s)}function D2(n,{x:e,y:t}){Lb(n.x,e.translate,e.scale,e.originPoint),Lb(n.y,t.translate,t.scale,t.originPoint)}function J8(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let i,o;for(let u=0;u<s;u++){i=t[u],o=i.projectionDelta;const d=i.instance;d&&d.style&&d.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Nc(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,D2(n,o)),r&&ja(i.latestValues)&&Nc(n,i.latestValues))}e.x=wI(e.x),e.y=wI(e.y)}function wI(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function no(n,e){n.min=n.min+e,n.max=n.max+e}function SI(n,e,[t,r,s]){const i=e[s]!==void 0?e[s]:.5,o=kt(n.min,n.max,i);Lb(n,e[t],e[r],o,e.scale)}const Q8=["x","scaleX","originX"],Y8=["y","scaleY","originY"];function Nc(n,e){SI(n.x,e,Q8),SI(n.y,e,Y8)}function O2(n,e){return j2(K8(n.getBoundingClientRect(),e))}function X8(n,e,t){const r=O2(n,t),{scroll:s}=e;return s&&(no(r.x,s.offset.x),no(r.y,s.offset.y)),r}const M2=({current:n})=>n?n.ownerDocument.defaultView:null,Z8=new WeakMap;class eH{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Gt(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=f=>{const{dragSnapToOrigin:y}=this.getProps();y?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Zg(f,"page").point)},i=(f,y)=>{const{drag:x,dragPropagation:S,onDragStart:E}=this.getProps();if(x&&!S&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Jj(x),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Sr(I=>{let M=this.getAxisMotionValue(I).get()||0;if(As.test(M)){const{projection:j}=this.visualElement;if(j&&j.layout){const C=j.layout.layoutBox[I];C&&(M=ur(C)*(parseFloat(M)/100))}}this.originPoint[I]=M}),E&&ft.update(()=>E(f,y),!1,!0);const{animationState:k}=this.visualElement;k&&k.setActive("whileDrag",!0)},o=(f,y)=>{const{dragPropagation:x,dragDirectionLock:S,onDirectionLock:E,onDrag:k}=this.getProps();if(!x&&!this.openGlobalLock)return;const{offset:I}=y;if(S&&this.currentDirection===null){this.currentDirection=tH(I),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",y.point,I),this.updateAxis("y",y.point,I),this.visualElement.render(),k&&k(f,y)},u=(f,y)=>this.stop(f,y),d=()=>Sr(f=>{var y;return this.getAnimationState(f)==="paused"&&((y=this.getAxisMotionValue(f).animation)===null||y===void 0?void 0:y.play())}),{dragSnapToOrigin:p}=this.getProps();this.panSession=new P2(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:M2(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ft.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!qm(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=U8(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&kc(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=$8(s.layoutBox,t):this.constraints=!1,this.elastic=G8(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Sr(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=q8(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!kc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=X8(r,s.root,this.visualElement.getTransformPagePoint());let o=z8(s.layout.layoutBox,i);if(t){const u=t(W8(o));this.hasMutatedConstraints=!!u,u&&(o=j2(u))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:u}=this.getProps(),d=this.constraints||{},p=Sr(f=>{if(!qm(f,t,this.currentDirection))return;let y=d&&d[f]||{};o&&(y={min:0,max:0});const x=s?200:1e6,S=s?40:1e7,E={type:"inertia",velocity:r?e[f]:0,bounceStiffness:x,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...i,...y};return this.startAxisValueAnimation(f,E)});return Promise.all(p).then(u)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Zw(e,r,0,t))}stopAnimation(){Sr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Sr(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Sr(t=>{const{drag:r}=this.getProps();if(!qm(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:o,max:u}=s.layout.layoutBox[t];i.set(e[t]-kt(o,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!kc(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Sr(o=>{const u=this.getAxisMotionValue(o);if(u){const d=u.get();s[o]=H8({min:d,max:d},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Sr(o=>{if(!qm(o,e,null))return;const u=this.getAxisMotionValue(o),{min:d,max:p}=this.constraints[o];u.set(kt(d,p,s[o]))})}addListeners(){if(!this.visualElement.current)return;Z8.set(this.visualElement,this);const e=this.visualElement.current,t=li(e,"pointerdown",d=>{const{drag:p,dragListener:f=!0}=this.getProps();p&&f&&this.start(d)}),r=()=>{const{dragConstraints:d}=this.getProps();kc(d)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=ai(window,"resize",()=>this.scalePositionWithinConstraints()),u=s.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:p})=>{this.isDragging&&p&&(Sr(f=>{const y=this.getAxisMotionValue(f);y&&(this.originPoint[f]+=d[f].translate,y.set(y.get()+d[f].translate))}),this.visualElement.render())}));return()=>{o(),t(),i(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Ob,dragMomentum:u=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:u}}}function qm(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function tH(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class nH extends Qo{constructor(e){super(e),this.removeGroupControls=Bt,this.removeListeners=Bt,this.controls=new eH(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bt}unmount(){this.removeGroupControls(),this.removeListeners()}}const _I=n=>(e,t)=>{n&&ft.update(()=>n(e,t))};class rH extends Qo{constructor(){super(...arguments),this.removePointerDownListener=Bt}onPointerDown(e){this.session=new P2(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:M2(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:_I(e),onStart:_I(t),onMove:r,onEnd:(i,o)=>{delete this.session,s&&ft.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=li(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function sH(){const n=A.useContext(Kg);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,s=A.useId();return A.useEffect(()=>r(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const yf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function EI(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ad={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(De.test(n))n=parseFloat(n);else return n;const t=EI(n,e.target.x),r=EI(n,e.target.y);return`${t}% ${r}%`}},iH={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=Fo.parse(n);if(s.length>5)return r;const i=Fo.createTransformer(n),o=typeof s[0]!="number"?1:0,u=t.x.scale*e.x,d=t.y.scale*e.y;s[0+o]/=u,s[1+o]/=d;const p=kt(u,d,.5);return typeof s[2+o]=="number"&&(s[2+o]/=p),typeof s[3+o]=="number"&&(s[3+o]/=p),i(s)}};class oH extends Cr.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;pz(aH),i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),yf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||ft.postRender(()=>{const u=o.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function L2(n){const[e,t]=sH(),r=A.useContext(Vw);return Cr.createElement(oH,{...n,layoutGroup:r,switchLayoutGroup:A.useContext(jj),isPresent:e,safeToRemove:t})}const aH={borderRadius:{...Ad,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ad,borderTopRightRadius:Ad,borderBottomLeftRadius:Ad,borderBottomRightRadius:Ad,boxShadow:iH},F2=["TopLeft","TopRight","BottomLeft","BottomRight"],lH=F2.length,TI=n=>typeof n=="string"?parseFloat(n):n,II=n=>typeof n=="number"||De.test(n);function cH(n,e,t,r,s,i){s?(n.opacity=kt(0,t.opacity!==void 0?t.opacity:1,uH(r)),n.opacityExit=kt(e.opacity!==void 0?e.opacity:1,0,dH(r))):i&&(n.opacity=kt(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<lH;o++){const u=`border${F2[o]}Radius`;let d=CI(e,u),p=CI(t,u);if(d===void 0&&p===void 0)continue;d||(d=0),p||(p=0),d===0||p===0||II(d)===II(p)?(n[u]=Math.max(kt(TI(d),TI(p),r),0),(As.test(p)||As.test(d))&&(n[u]+="%")):n[u]=p}(e.rotate||t.rotate)&&(n.rotate=kt(e.rotate||0,t.rotate||0,r))}function CI(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const uH=V2(0,.5,a2),dH=V2(.5,.95,Bt);function V2(n,e,t){return r=>r<n?0:r>e?1:t(jh(n,e,r))}function kI(n,e){n.min=e.min,n.max=e.max}function br(n,e){kI(n.x,e.x),kI(n.y,e.y)}function AI(n,e,t,r,s){return n-=e,n=sg(n,1/t,r),s!==void 0&&(n=sg(n,1/s,r)),n}function hH(n,e=0,t=1,r=.5,s,i=n,o=n){if(As.test(e)&&(e=parseFloat(e),e=kt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let u=kt(i.min,i.max,r);n===i&&(u-=e),n.min=AI(n.min,e,t,u,s),n.max=AI(n.max,e,t,u,s)}function PI(n,e,[t,r,s],i,o){hH(n,e[t],e[r],e[s],e.scale,i,o)}const pH=["x","scaleX","originX"],mH=["y","scaleY","originY"];function NI(n,e,t,r){PI(n.x,e,pH,t?t.x:void 0,r?r.x:void 0),PI(n.y,e,mH,t?t.y:void 0,r?r.y:void 0)}function jI(n){return n.translate===0&&n.scale===1}function B2(n){return jI(n.x)&&jI(n.y)}function fH(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function U2(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function RI(n){return ur(n.x)/ur(n.y)}class gH{constructor(){this.members=[]}add(e){eS(this.members,e),e.scheduleRender()}remove(e){if(tS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DI(n,e,t){let r="";const s=n.x.translate/e.x,i=n.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:d,rotateX:p,rotateY:f}=t;d&&(r+=`rotate(${d}deg) `),p&&(r+=`rotateX(${p}deg) `),f&&(r+=`rotateY(${f}deg) `)}const o=n.x.scale*e.x,u=n.y.scale*e.y;return(o!==1||u!==1)&&(r+=`scale(${o}, ${u})`),r||"none"}const yH=(n,e)=>n.depth-e.depth;class vH{constructor(){this.children=[],this.isDirty=!1}add(e){eS(this.children,e),this.isDirty=!0}remove(e){tS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yH),this.isDirty=!1,this.children.forEach(e)}}function xH(n,e){const t=performance.now(),r=({timestamp:s})=>{const i=s-t;i>=e&&(fi(r),n(i-e))};return ft.read(r,!0),()=>fi(r)}function bH(n){window.MotionDebug&&window.MotionDebug.record(n)}function wH(n){return n instanceof SVGElement&&n.tagName!=="svg"}function SH(n,e,t){const r=Kn(n)?n:au(n);return r.start(Zw("",r,e,t)),r.animation}const OI=["","X","Y","Z"],_H={visibility:"hidden"},MI=1e3;let EH=0;const Ra={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function $2({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},u=e?.()){this.id=EH++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ra.totalNodes=Ra.resolvedTargetDeltas=Ra.recalculatedProjection=0,this.nodes.forEach(CH),this.nodes.forEach(jH),this.nodes.forEach(RH),this.nodes.forEach(kH),bH(Ra)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new vH)}addEventListener(o,u){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new nS),this.eventHandlers.get(o).add(u)}notifyListeners(o,...u){const d=this.eventHandlers.get(o);d&&d.notify(...u)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wH(o),this.instance=o;const{layoutId:d,layout:p,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(p||d)&&(this.isLayoutDirty=!0),n){let y;const x=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,y&&y(),y=xH(x,250),yf.hasAnimatedSinceResize&&(yf.hasAnimatedSinceResize=!1,this.nodes.forEach(FI))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&f&&(d||p)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:x,hasRelativeTargetChanged:S,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||f.getDefaultTransition()||FH,{onLayoutAnimationStart:I,onLayoutAnimationComplete:M}=f.getProps(),j=!this.targetLayout||!U2(this.targetLayout,E)||S,C=!x&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||C||x&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(y,C);const F={...Xw(k,"layout"),onPlay:I,onComplete:M};(f.shouldReduceMotion||this.options.layoutRoot)&&(F.delay=0,F.type=!1),this.startAnimation(F)}else x||FI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(DH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const y=this.path[f];y.shouldResetTransform=!0,y.updateScroll("snapshot"),y.options.layoutRoot&&y.willUpdate(!1)}const{layoutId:u,layout:d}=this.options;if(u===void 0&&!d)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(LI);return}this.isUpdating||this.nodes.forEach(PH),this.isUpdating=!1,this.nodes.forEach(NH),this.nodes.forEach(TH),this.nodes.forEach(IH),this.clearAllSnapshots();const u=performance.now();wn.delta=Lo(0,1e3/60,u-wn.timestamp),wn.timestamp=u,wn.isProcessing=!0,ox.update.process(wn),ox.preRender.process(wn),ox.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(AH),this.sharedNodes.forEach(OH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ft.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ft.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Gt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let u=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(u=!1),u&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,u=this.projectionDelta&&!B2(this.projectionDelta),d=this.getTransformTemplate(),p=d?d(this.latestValues,""):void 0,f=p!==this.prevTransformTemplateValue;o&&(u||ja(this.latestValues)||f)&&(s(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const u=this.measurePageBox();let d=this.removeElementScroll(u);return o&&(d=this.removeTransform(d)),VH(d),{animationId:this.root.animationId,measuredBox:u,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Gt();const u=o.measureViewportBox(),{scroll:d}=this.root;return d&&(no(u.x,d.offset.x),no(u.y,d.offset.y)),u}removeElementScroll(o){const u=Gt();br(u,o);for(let d=0;d<this.path.length;d++){const p=this.path[d],{scroll:f,options:y}=p;if(p!==this.root&&f&&y.layoutScroll){if(f.isRoot){br(u,o);const{scroll:x}=this.root;x&&(no(u.x,-x.offset.x),no(u.y,-x.offset.y))}no(u.x,f.offset.x),no(u.y,f.offset.y)}}return u}applyTransform(o,u=!1){const d=Gt();br(d,o);for(let p=0;p<this.path.length;p++){const f=this.path[p];!u&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Nc(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ja(f.latestValues)&&Nc(d,f.latestValues)}return ja(this.latestValues)&&Nc(d,this.latestValues),d}removeTransform(o){const u=Gt();br(u,o);for(let d=0;d<this.path.length;d++){const p=this.path[d];if(!p.instance||!ja(p.latestValues))continue;Mb(p.latestValues)&&p.updateSnapshot();const f=Gt(),y=p.measurePageBox();br(f,y),NI(u,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,f)}return ja(this.latestValues)&&NI(u,this.latestValues),u}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var u;const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const p=!!this.resumingFrom||this!==d;if(!(o||p&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:y,layoutId:x}=this.options;if(!(!this.layout||!(y||x))){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),sh(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Gt(),this.targetWithTransforms=Gt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),B8(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):br(this.target,this.layout.layoutBox),D2(this.target,this.targetDelta)):br(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Gt(),this.relativeTargetOrigin=Gt(),sh(this.relativeTargetOrigin,this.target,S.target),br(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ra.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Mb(this.parent.latestValues)||R2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const u=this.getLead(),d=!!this.resumingFrom||this!==u;let p=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(p=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(p=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(p=!1),p)return;const{layout:f,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||y))return;br(this.layoutCorrected,this.layout.layoutBox);const x=this.treeScale.x,S=this.treeScale.y;J8(this.layoutCorrected,this.treeScale,this.path,d),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox);const{target:E}=u;if(!E){this.projectionTransform&&(this.projectionDelta=Pc(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Pc(),this.projectionDeltaWithTransform=Pc());const k=this.projectionTransform;rh(this.projectionDelta,this.layoutCorrected,E,this.latestValues),this.projectionTransform=DI(this.projectionDelta,this.treeScale),(this.projectionTransform!==k||this.treeScale.x!==x||this.treeScale.y!==S)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Ra.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,u=!1){const d=this.snapshot,p=d?d.latestValues:{},f={...this.latestValues},y=Pc();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const x=Gt(),S=d?d.source:void 0,E=this.layout?this.layout.source:void 0,k=S!==E,I=this.getStack(),M=!I||I.members.length<=1,j=!!(k&&!M&&this.options.crossfade===!0&&!this.path.some(LH));this.animationProgress=0;let C;this.mixTargetDelta=F=>{const G=F/1e3;VI(y.x,o.x,G),VI(y.y,o.y,G),this.setTargetDelta(y),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sh(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MH(this.relativeTarget,this.relativeTargetOrigin,x,G),C&&fH(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=Gt()),br(C,this.relativeTarget)),k&&(this.animationValues=f,cH(f,p,this.latestValues,G,j,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=G},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ft.update(()=>{yf.hasAnimatedSinceResize=!0,this.currentAnimation=SH(0,MI,{...o,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(MI),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:u,target:d,layout:p,latestValues:f}=o;if(!(!u||!d||!p)){if(this!==o&&this.layout&&p&&z2(this.options.animationType,this.layout.layoutBox,p.layoutBox)){d=this.target||Gt();const y=ur(this.layout.layoutBox.x);d.x.min=o.target.x.min,d.x.max=d.x.min+y;const x=ur(this.layout.layoutBox.y);d.y.min=o.target.y.min,d.y.max=d.y.min+x}br(u,d),Nc(u,f),rh(this.projectionDeltaWithTransform,this.layoutCorrected,u,f)}}registerSharedNode(o,u){this.sharedNodes.has(o)||this.sharedNodes.set(o,new gH),this.sharedNodes.get(o).add(u);const p=u.options.initialPromotionConfig;u.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(u):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:u}=this.options;return u?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:u}=this.options;return u?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:u,preserveFollowOpacity:d}={}){const p=this.getStack();p&&p.promote(this,d),o&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let u=!1;const{latestValues:d}=o;if((d.rotate||d.rotateX||d.rotateY||d.rotateZ)&&(u=!0),!u)return;const p={};for(let f=0;f<OI.length;f++){const y="rotate"+OI[f];d[y]&&(p[y]=d[y],o.setStaticValue(y,0))}o.render();for(const f in p)o.setStaticValue(f,p[f]);o.scheduleRender()}getProjectionStyles(o){var u,d;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _H;const p={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,p.opacity="",p.pointerEvents=gf(o?.pointerEvents)||"",p.transform=f?f(this.latestValues,""):"none",p;const y=this.getLead();if(!this.projectionDelta||!this.layout||!y.target){const k={};return this.options.layoutId&&(k.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,k.pointerEvents=gf(o?.pointerEvents)||""),this.hasProjected&&!ja(this.latestValues)&&(k.transform=f?f({},""):"none",this.hasProjected=!1),k}const x=y.animationValues||y.latestValues;this.applyTransformsToTarget(),p.transform=DI(this.projectionDeltaWithTransform,this.treeScale,x),f&&(p.transform=f(x,p.transform));const{x:S,y:E}=this.projectionDelta;p.transformOrigin=`${S.origin*100}% ${E.origin*100}% 0`,y.animationValues?p.opacity=y===this?(d=(u=x.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&d!==void 0?d:1:this.preserveOpacity?this.latestValues.opacity:x.opacityExit:p.opacity=y===this?x.opacity!==void 0?x.opacity:"":x.opacityExit!==void 0?x.opacityExit:0;for(const k in Yf){if(x[k]===void 0)continue;const{correct:I,applyTo:M}=Yf[k],j=p.transform==="none"?x[k]:I(x[k],y);if(M){const C=M.length;for(let F=0;F<C;F++)p[M[F]]=j}else p[k]=j}return this.options.layoutId&&(p.pointerEvents=y===this?gf(o?.pointerEvents)||"":"none"),p}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var u;return(u=o.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(LI),this.root.sharedNodes.clear()}}}function TH(n){n.updateLayout()}function IH(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:i}=n.options,o=t.source!==n.layout.source;i==="size"?Sr(y=>{const x=o?t.measuredBox[y]:t.layoutBox[y],S=ur(x);x.min=r[y].min,x.max=x.min+S}):z2(i,t.layoutBox,r)&&Sr(y=>{const x=o?t.measuredBox[y]:t.layoutBox[y],S=ur(r[y]);x.max=x.min+S,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[y].max=n.relativeTarget[y].min+S)});const u=Pc();rh(u,r,t.layoutBox);const d=Pc();o?rh(d,n.applyTransform(s,!0),t.measuredBox):rh(d,r,t.layoutBox);const p=!B2(u);let f=!1;if(!n.resumeFrom){const y=n.getClosestProjectingParent();if(y&&!y.resumeFrom){const{snapshot:x,layout:S}=y;if(x&&S){const E=Gt();sh(E,t.layoutBox,x.layoutBox);const k=Gt();sh(k,r,S.layoutBox),U2(E,k)||(f=!0),y.options.layoutRoot&&(n.relativeTarget=k,n.relativeTargetOrigin=E,n.relativeParent=y)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:d,layoutDelta:u,hasLayoutChanged:p,hasRelativeTargetChanged:f})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function CH(n){Ra.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function kH(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function AH(n){n.clearSnapshot()}function LI(n){n.clearMeasurements()}function PH(n){n.isLayoutDirty=!1}function NH(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function FI(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function jH(n){n.resolveTargetDelta()}function RH(n){n.calcProjection()}function DH(n){n.resetRotation()}function OH(n){n.removeLeadSnapshot()}function VI(n,e,t){n.translate=kt(e.translate,0,t),n.scale=kt(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function BI(n,e,t,r){n.min=kt(e.min,t.min,r),n.max=kt(e.max,t.max,r)}function MH(n,e,t,r){BI(n.x,e.x,t.x,r),BI(n.y,e.y,t.y,r)}function LH(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const FH={duration:.45,ease:[.4,0,.1,1]},UI=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),$I=UI("applewebkit/")&&!UI("chrome/")?Math.round:Bt;function zI(n){n.min=$I(n.min),n.max=$I(n.max)}function VH(n){zI(n.x),zI(n.y)}function z2(n,e,t){return n==="position"||n==="preserve-aspect"&&!Db(RI(e),RI(t),.2)}const BH=$2({attachResizeListener:(n,e)=>ai(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),yx={current:void 0},H2=$2({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!yx.current){const n=new BH({});n.mount(window),n.setOptions({layoutScroll:!0}),yx.current=n}return yx.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),UH={pan:{Feature:rH},drag:{Feature:nH,ProjectionNode:H2,MeasureLayout:L2}},$H=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function zH(n){const e=$H.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function Fb(n,e,t=1){const[r,s]=zH(n);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return I2(o)?parseFloat(o):o}else return Cb(s)?Fb(s,e,t+1):s}function HH(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(s=>{const i=s.get();if(!Cb(i))return;const o=Fb(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Cb(i))continue;const o=Fb(i,r);o&&(e[s]=o,t||(t={}),t[s]===void 0&&(t[s]=i))}return{target:e,transitionEnd:t}}const qH=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),q2=n=>qH.has(n),GH=n=>Object.keys(n).some(q2),HI=n=>n===_l||n===De,qI=(n,e)=>parseFloat(n.split(", ")[e]),GI=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return qI(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?qI(i[1],n):0}},WH=new Set(["x","y","z"]),KH=sp.filter(n=>!WH.has(n));function JH(n){const e=[];return KH.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const lu={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:GI(4,13),y:GI(5,14)};lu.translateX=lu.x;lu.translateY=lu.y;const QH=(n,e,t)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,u={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(p=>{u[p]=lu[p](r,i)}),e.render();const d=e.measureViewportBox();return t.forEach(p=>{const f=e.getValue(p);f&&f.jump(u[p]),n[p]=lu[p](d,i)}),n},YH=(n,e,t={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(q2);let i=[],o=!1;const u=[];if(s.forEach(d=>{const p=n.getValue(d);if(!n.hasValue(d))return;let f=t[d],y=kd(f);const x=e[d];let S;if(Zf(x)){const E=x.length,k=x[0]===null?1:0;f=x[k],y=kd(f);for(let I=k;I<E&&x[I]!==null;I++)S?Ww(kd(x[I])===S):S=kd(x[I])}else S=kd(x);if(y!==S)if(HI(y)&&HI(S)){const E=p.get();typeof E=="string"&&p.set(parseFloat(E)),typeof x=="string"?e[d]=parseFloat(x):Array.isArray(x)&&S===De&&(e[d]=x.map(parseFloat))}else y?.transform&&S?.transform&&(f===0||x===0)?f===0?p.set(S.transform(f)):e[d]=y.transform(x):(o||(i=JH(n),o=!0),u.push(d),r[d]=r[d]!==void 0?r[d]:e[d],p.jump(x))}),u.length){const d=u.indexOf("height")>=0?window.pageYOffset:null,p=QH(e,n,u);return i.length&&i.forEach(([f,y])=>{n.getValue(f).set(y)}),n.render(),Jg&&d!==null&&window.scrollTo({top:d}),{target:p,transitionEnd:r}}else return{target:e,transitionEnd:r}};function XH(n,e,t,r){return GH(e)?YH(n,e,t,r):{target:e,transitionEnd:r}}const ZH=(n,e,t,r)=>{const s=HH(n,e,r);return e=s.target,r=s.transitionEnd,XH(n,e,t,r)},Vb={current:null},G2={current:!1};function eq(){if(G2.current=!0,!!Jg)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Vb.current=n.matches;n.addListener(e),e()}else Vb.current=!1}function tq(n,e,t){const{willChange:r}=e;for(const s in e){const i=e[s],o=t[s];if(Kn(i))n.addValue(s,i),rg(r)&&r.add(s);else if(Kn(o))n.addValue(s,au(i,{owner:n})),rg(r)&&r.remove(s);else if(o!==i)if(n.hasValue(s)){const u=n.getValue(s);!u.hasAnimated&&u.set(i)}else{const u=n.getStaticValue(s);n.addValue(s,au(u!==void 0?u:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const WI=new WeakMap,W2=Object.keys(Nh),nq=W2.length,KI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],rq=Fw.length;class sq{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>ft.render(this.render,!1,!0);const{latestValues:u,renderState:d}=i;this.latestValues=u,this.baseTarget={...u},this.initialValues=t.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=Yg(t),this.isVariantNode=Nj(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...f}=this.scrapeMotionValuesFromProps(t,{});for(const y in f){const x=f[y];u[y]!==void 0&&Kn(x)&&(x.set(u[y],!1),rg(p)&&p.add(y))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,WI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),G2.current||eq(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Vb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){WI.delete(this.current),this.projection&&this.projection.unmount(),fi(this.notifyUpdate),fi(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=Sl.has(e),s=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ft.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,s,i){let o,u;for(let d=0;d<nq;d++){const p=W2[d],{isEnabled:f,Feature:y,ProjectionNode:x,MeasureLayout:S}=Nh[p];x&&(o=x),f(t)&&(!this.features[p]&&y&&(this.features[p]=new y(this)),S&&(u=S))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:d,layout:p,drag:f,dragConstraints:y,layoutScroll:x,layoutRoot:S}=t;this.projection.setOptions({layoutId:d,layout:p,alwaysMeasureLayout:!!f||y&&kc(y),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof p=="string"?p:"both",initialPromotionConfig:i,layoutScroll:x,layoutRoot:S})}return u}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Gt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<KI.length;r++){const s=KI[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=tq(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<rq;r++){const s=Fw[r],i=this.props[s];(Ph(i)||i===!1)&&(t[s]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=au(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(t=Gw(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Kn(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new nS),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class K2 extends sq{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:s},i){let o=w8(r,e||{},this);if(s&&(t&&(t=s(t)),r&&(r=s(r)),o&&(o=s(o))),i){x8(this,r,o);const u=ZH(this,r,o,t);t=u.transitionEnd,r=u.target}return{transition:e,transitionEnd:t,...r}}}function iq(n){return window.getComputedStyle(n)}class oq extends K2{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(Sl.has(t)){const r=Yw(t);return r&&r.default||0}else{const r=iq(e),s=(Oj(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return O2(e,t)}build(e,t,r,s){Uw(e,t,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return qw(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Kn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,s){Uj(e,t,r,s)}}class aq extends K2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Sl.has(t)){const r=Yw(t);return r&&r.default||0}return t=$j.has(t)?t:Mw(t),e.getAttribute(t)}measureInstanceViewportBox(){return Gt()}scrapeMotionValuesFromProps(e,t){return Hj(e,t)}build(e,t,r,s){zw(e,t,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,r,s){zj(e,t,r,s)}mount(e){this.isSVGTag=Hw(e.tagName),super.mount(e)}}const lq=(n,e)=>Bw(n)?new aq(e,{enableHardwareAcceleration:!1}):new oq(e,{enableHardwareAcceleration:!0}),cq={layout:{ProjectionNode:H2,MeasureLayout:L2}},uq={...M8,...n9,...UH,...cq},ge=dz((n,e)=>zz(n,e,uq,lq));function J2(){const n=A.useRef(!1);return Ow(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function dq(){const n=J2(),[e,t]=A.useState(0),r=A.useCallback(()=>{n.current&&t(e+1)},[e]);return[A.useCallback(()=>ft.postRender(r),[r]),e]}class hq extends A.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function pq({children:n,isPresent:e}){const t=A.useId(),r=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:i,height:o,top:u,left:d}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=t;const p=document.createElement("style");return document.head.appendChild(p),p.sheet&&p.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${u}px !important;
            left: ${d}px !important;
          }
        `),()=>{document.head.removeChild(p)}},[e]),A.createElement(hq,{isPresent:e,childRef:r,sizeRef:s},A.cloneElement(n,{ref:r}))}const vx=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const u=qj(mq),d=A.useId(),p=A.useMemo(()=>({id:d,initial:e,isPresent:t,custom:s,onExitComplete:f=>{u.set(f,!0);for(const y of u.values())if(!y)return;r&&r()},register:f=>(u.set(f,!1),()=>u.delete(f))}),i?void 0:[t]);return A.useMemo(()=>{u.forEach((f,y)=>u.set(y,!1))},[t]),A.useEffect(()=>{!t&&!u.size&&r&&r()},[t]),o==="popLayout"&&(n=A.createElement(pq,{isPresent:t},n)),A.createElement(Kg.Provider,{value:p},n)};function mq(){return new Map}function fq(n){return A.useEffect(()=>()=>n(),[])}const Da=n=>n.key||"";function gq(n,e){n.forEach(t=>{const r=Da(t);e.set(r,t)})}function yq(n){const e=[];return A.Children.forEach(n,t=>{A.isValidElement(t)&&e.push(t)}),e}const Ts=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const u=A.useContext(Vw).forceRender||dq()[0],d=J2(),p=yq(n);let f=p;const y=A.useRef(new Map).current,x=A.useRef(f),S=A.useRef(new Map).current,E=A.useRef(!0);if(Ow(()=>{E.current=!1,gq(p,S),x.current=f}),fq(()=>{E.current=!0,S.clear(),y.clear()}),E.current)return A.createElement(A.Fragment,null,f.map(j=>A.createElement(vx,{key:Da(j),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:o},j)));f=[...f];const k=x.current.map(Da),I=p.map(Da),M=k.length;for(let j=0;j<M;j++){const C=k[j];I.indexOf(C)===-1&&!y.has(C)&&y.set(C,void 0)}return o==="wait"&&y.size&&(f=[]),y.forEach((j,C)=>{if(I.indexOf(C)!==-1)return;const F=S.get(C);if(!F)return;const G=k.indexOf(C);let q=j;if(!q){const N=()=>{y.delete(C);const _=Array.from(S.keys()).filter(R=>!I.includes(R));if(_.forEach(R=>S.delete(R)),x.current=p.filter(R=>{const O=Da(R);return O===C||_.includes(O)}),!y.size){if(d.current===!1)return;u(),r&&r()}};q=A.createElement(vx,{key:Da(F),isPresent:!1,onExitComplete:N,custom:e,presenceAffectsLayout:i,mode:o},F),y.set(C,q)}f.splice(G,0,q)}),f=f.map(j=>{const C=j.key;return y.has(C)?j:A.createElement(vx,{key:Da(j),isPresent:!0,presenceAffectsLayout:i,mode:o},j)}),A.createElement(A.Fragment,null,y.size?f:f.map(j=>A.cloneElement(j)))},vq=()=>{const n=[{icon:zr,title:"AI-Powered Code Generation",description:"Generate code using advanced AI with multiple free services including Groq, Hugging Face, and Ollama."},{icon:Rt,title:"170+ Programming Languages",description:"Support for JavaScript, Python, Java, C++, Rust, Go, and many more programming languages."},{icon:Jr,title:"Real-time Preview",description:"See your code come to life instantly with our live preview system powered by Monaco Editor."},{icon:Ch,title:"Secure & Private",description:"Your code stays private. Use local AI models or trusted cloud services with encryption."}],e=[{label:"Languages",value:"170+",icon:Rt},{label:"AI Services",value:"4",icon:zr},{label:"Free Forever",value:"100%",icon:Ch},{label:"Open Source",value:"Yes",icon:Qf}];return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx("section",{className:"relative overflow-hidden pt-32 pb-20",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 rounded-full text-primary text-sm font-medium mb-8",children:[c.jsx(kh,{className:"h-4 w-4"}),"AI Development Platform"]}),c.jsxs(ge.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"text-4xl md:text-6xl font-bold mb-6 leading-tight",children:["Build with"," ",c.jsx("span",{className:"bg-gradient-to-r from-primary to-primary-light bg-clip-text text-transparent",children:"AI Power"})]}),c.jsx(ge.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl text-foreground mb-12 max-w-2xl mx-auto",children:"The universal AI development platform supporting 170+ programming languages. Generate, edit, and deploy code with artificial intelligence."}),c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"flex flex-col sm:flex-row gap-4 justify-center items-center mb-16",children:[c.jsxs(_r,{to:"/ai-builder",className:"inline-flex items-center gap-2 px-8 py-4 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors text-lg font-semibold",children:[c.jsx(So,{className:"h-5 w-5"}),"Start Building"]}),c.jsxs("a",{href:"https://github.com/ronb12/DreamBuild",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 border border-border rounded-lg hover:bg-muted transition-colors text-lg font-semibold",children:[c.jsx(js,{className:"h-5 w-5"}),"View on GitHub",c.jsx(ul,{className:"h-4 w-4"})]})]}),c.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:e.map((t,r)=>c.jsxs("div",{className:"text-center",children:[c.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[c.jsx(t.icon,{className:"h-5 w-5 text-primary"}),c.jsx("div",{className:"text-2xl font-bold text-primary",children:t.value})]}),c.jsx("div",{className:"text-sm text-foreground",children:t.label})]},r))})]})}),c.jsx("section",{className:"py-20 bg-muted/30",children:c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-16",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Everything you need to build with AI"}),c.jsx("p",{className:"text-lg text-foreground max-w-2xl mx-auto",children:"From simple websites to complex applications, DreamBuild provides all the tools you need to bring your ideas to life."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:n.map((t,r)=>c.jsxs(ge.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:r*.1},viewport:{once:!0},className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6 hover:shadow-lg hover:bg-card/70 transition-all duration-200",children:[c.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:c.jsx(t.icon,{className:"h-6 w-6 text-primary"})}),c.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),c.jsx("p",{className:"text-foreground",children:t.description})]},r))})]})}),c.jsx("section",{className:"py-20",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Ready to start building?"}),c.jsx("p",{className:"text-lg text-foreground mb-8",children:"Join thousands of developers who are already using DreamBuild to create amazing applications."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs(_r,{to:"/ai-builder",className:"inline-flex items-center gap-2 px-8 py-4 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors text-lg font-semibold",children:["Get Started Free",c.jsx(np,{className:"h-5 w-5"})]}),c.jsx(_r,{to:"/dashboard",className:"inline-flex items-center gap-2 px-8 py-4 border border-border rounded-lg hover:bg-muted transition-colors text-lg font-semibold",children:"View Dashboard"})]})]})})]})};class xq{constructor(){this.deployments=new Map,this.isDeploying=!1}async deployToFirebase(e,t){if(this.isDeploying)throw new Error("Deployment already in progress");this.isDeploying=!0;try{if(console.log("🚀 Starting Firebase deployment..."),this.isMobileApp(e.files))return console.log("📱 Mobile app detected - generating build instructions"),await this.deployMobileApp(e,t,"firebase");const s=`deploy_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i={id:s,projectName:t||"dream-app",files:e.files,config:e.config,deployedAt:new Date,status:"uploading",platform:"firebase"},o={};for(const[y,x]of Object.entries(e.files))if(x&&x.trim()){const S=Na(yc,`projects/${s}/${y}`),E=new Blob([x],{type:this.getMimeType(y)});await Aa(S,E);const k=await Pa(S);o[y]=k}const u=this.createHostedHTML(e.files),d=Na(yc,`projects/${s}/index.html`),p=new Blob([u],{type:"text/html"});await Aa(d,p);const f=await Pa(d);return await Ir(pt(vs,"deployments",s),{...i,status:"completed",hostedURL:f,files:o,completedAt:new Date}),this.deployments.set(s,i),console.log("✅ Firebase deployment completed:",f),{success:!0,deploymentId:s,url:f,platform:"firebase"}}catch(r){throw console.error("❌ Firebase deployment failed:",r),new Error(`Firebase deployment failed: ${r.message}`)}finally{this.isDeploying=!1}}async deployToAppleAppStore(e,t){if(this.isDeploying)throw new Error("Deployment already in progress");this.isDeploying=!0;try{console.log("🍎 Starting Apple App Store deployment...");const r=`apple_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(!this.isMobileApp(e.files))throw new Error("Apple App Store deployment is only available for mobile applications");const s=this.detectMobileFramework(e.files);console.log(`📱 Deploying ${s} app to Apple App Store...`);const i=await this.generateMobileAppFiles(e,t,s),o=await this.executeAppleStoreBuild(i,t,s),u={id:r,projectName:t||"mobile-app",files:{...e.files,...i},config:e.config,deployedAt:new Date,status:o.success?"completed":"failed",platform:"apple-app-store",framework:s,buildInstructions:this.generateAppleStoreInstructions(s,t),terminalOutput:o.output,buildCommands:o.commands},d=this.createAppleStoreInstructionsHTML(t,s,u.buildInstructions,o),p=Na(yc,`apple-store/${r}/index.html`),f=new Blob([d],{type:"text/html"});await Aa(p,f);const y=await Pa(p);return await Ir(pt(vs,"deployments",r),{...u,hostedURL:y}),this.deployments.set(r,u),{success:o.success,deploymentId:r,url:y,platform:"apple-app-store",framework:s,buildInstructions:u.buildInstructions,terminalOutput:o.output,buildCommands:o.commands,message:o.success?"Apple App Store build completed successfully! Check the hosted URL for detailed instructions.":"Apple App Store build encountered issues. Check the terminal output for details."}}catch(r){throw console.error("❌ Apple App Store deployment failed:",r),new Error(`Apple App Store deployment failed: ${r.message}`)}finally{this.isDeploying=!1}}async deployToGooglePlayStore(e,t){if(this.isDeploying)throw new Error("Deployment already in progress");this.isDeploying=!0;try{console.log("🤖 Starting Google Play Store deployment...");const r=`google_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(!this.isMobileApp(e.files))throw new Error("Google Play Store deployment is only available for mobile applications");const s=this.detectMobileFramework(e.files);console.log(`📱 Deploying ${s} app to Google Play Store...`);const i=await this.generateMobileAppFiles(e,t,s),o=await this.executeGooglePlayBuild(i,t,s),u={id:r,projectName:t||"mobile-app",files:{...e.files,...i},config:e.config,deployedAt:new Date,status:o.success?"completed":"failed",platform:"google-play-store",framework:s,buildInstructions:this.generateGooglePlayInstructions(s,t),terminalOutput:o.output,buildCommands:o.commands},d=this.createGooglePlayInstructionsHTML(t,s,u.buildInstructions,o),p=Na(yc,`google-play/${r}/index.html`),f=new Blob([d],{type:"text/html"});await Aa(p,f);const y=await Pa(p);return await Ir(pt(vs,"deployments",r),{...u,hostedURL:y}),this.deployments.set(r,u),{success:o.success,deploymentId:r,url:y,platform:"google-play-store",framework:s,buildInstructions:u.buildInstructions,terminalOutput:o.output,buildCommands:o.commands,message:o.success?"Google Play Store build completed successfully! Check the hosted URL for detailed instructions.":"Google Play Store build encountered issues. Check the terminal output for details."}}catch(r){throw console.error("❌ Google Play Store deployment failed:",r),new Error(`Google Play Store deployment failed: ${r.message}`)}finally{this.isDeploying=!1}}async deployToGitHub(e,t,r=null){if(this.isDeploying)throw new Error("Deployment already in progress");this.isDeploying=!0;try{console.log("🚀 Starting GitHub deployment...");const s=`github_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;if(!r){const i=t.toLowerCase().replace(/[^a-z0-9-]/g,"-"),o=this.createHostedHTML(e.files),u=Na(yc,`github-pages/${s}/index.html`),d=new Blob([o],{type:"text/html"});await Aa(u,d);const p=await Pa(u);return await Ir(pt(vs,"deployments",s),{id:s,projectName:t,files:e.files,config:e.config,deployedAt:new Date,status:"completed",platform:"github-pages",hostedURL:p,repoName:i,instructions:this.generateGitHubInstructions(t,e.files)}),{success:!0,deploymentId:s,url:p,platform:"github-pages",repoName:i,instructions:this.generateGitHubInstructions(t,e.files)}}throw new Error("GitHub API integration not yet implemented. Please use the demo deployment.")}catch(s){throw console.error("❌ GitHub deployment failed:",s),new Error(`GitHub deployment failed: ${s.message}`)}finally{this.isDeploying=!1}}createHostedHTML(e){const t=e["index.html"]||this.generateDefaultHTML(),r=e["style.css"]||"",s=e["script.js"]||"";let i=t;return r.trim()&&(i.includes("</head>")?i=i.replace("</head>",`<style>${r}</style>
</head>`):i.includes("<head>")?i=i.replace("<head>",`<head>
<style>${r}</style>`):i=`<style>${r}</style>
${i}`),s.trim()&&(i.includes("</body>")?i=i.replace("</body>",`<script>${s}<\/script>
</body>`):i+=`
<script>${s}<\/script>`),i.includes("<!DOCTYPE html>")||(i=`<!DOCTYPE html>
${i}`),i.includes('<meta name="viewport"')||(i=i.replace("<head>",`<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">`)),i}generateDefaultHTML(){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamBuild App</title>
</head>
<body>
    <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; font-family: Arial, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <div style="text-align: center; padding: 40px; background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px);">
            <h1 style="font-size: 2.5rem; margin-bottom: 20px;">🚀 DreamBuild App</h1>
            <p style="font-size: 1.2rem; opacity: 0.9;">Your app is ready! Add some content to get started.</p>
        </div>
    </div>
</body>
</html>`}getMimeType(e){const t=e.split(".").pop().toLowerCase();return{html:"text/html",css:"text/css",js:"application/javascript",json:"application/json",md:"text/markdown",txt:"text/plain"}[t]||"text/plain"}generateGitHubInstructions(e,t){const r=e.toLowerCase().replace(/[^a-z0-9-]/g,"-");return{steps:["1. Create a new repository on GitHub",`2. Name it "${r}" (or your preferred name)`,"3. Initialize with README","4. Upload your generated files to the repository","5. Go to Settings > Pages",'6. Select "Deploy from a branch"','7. Choose "main" branch and "/ (root)" folder',"8. Click Save - your site will be available at:",`   https://yourusername.github.io/${r}`],files:Object.keys(t),repoName:r}}getDeploymentStatus(e){return this.deployments.get(e)}async getAllDeployments(){try{const{collection:e,query:t,orderBy:r,limit:s,getDocs:i}=await oi(async()=>{const{collection:p,query:f,orderBy:y,limit:x,getDocs:S}=await Promise.resolve().then(()=>$a);return{collection:p,query:f,orderBy:y,limit:x,getDocs:S}},void 0),o=e(vs,"deployments"),u=t(o,r("deployedAt","desc"),s(20));return(await i(u)).docs.map(p=>({id:p.id,...p.data()}))}catch(e){return console.error("Error fetching deployments:",e),[]}}async deleteDeployment(e){try{const{deleteDoc:t}=await oi(async()=>{const{deleteDoc:r}=await Promise.resolve().then(()=>$a);return{deleteDoc:r}},void 0);return await t(pt(vs,"deployments",e)),this.deployments.delete(e),!0}catch(t){return console.error("Error deleting deployment:",t),!1}}isCurrentlyDeploying(){return this.isDeploying}isMobileApp(e){const t=["App.js","main.dart","pubspec.yaml","package.json","capacitor.config.json","ionic.config.json","app.json"],r=Object.keys(e);return t.some(s=>r.some(i=>i.includes(s)))}async deployMobileApp(e,t,r){const s=`mobile_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,i=this.detectMobileFramework(e.files);console.log(`📱 Deploying ${i} mobile app...`);const o={id:s,projectName:t||"mobile-app",files:e.files,config:e.config,deployedAt:new Date,status:"completed",platform:"mobile",framework:i,buildInstructions:this.generateMobileBuildInstructions(i,t,r)},u=this.createMobileAppInstructionsHTML(t,i,o.buildInstructions),d=Na(yc,`mobile-apps/${s}/index.html`),p=new Blob([u],{type:"text/html"});await Aa(d,p);const f=await Pa(d);return await Ir(pt(vs,"deployments",s),{...o,hostedURL:f}),this.deployments.set(s,o),{success:!0,deploymentId:s,url:f,platform:"mobile",framework:i,buildInstructions:o.buildInstructions}}detectMobileFramework(e){const t=Object.keys(e);return t.some(r=>r.includes("pubspec.yaml")||r.includes("main.dart"))?"Flutter":t.some(r=>r.includes("App.js")&&r.includes("package.json"))?"React Native":t.some(r=>r.includes("ionic.config.json"))?"Ionic":t.some(r=>r.includes("capacitor.config.json"))?"Capacitor":t.some(r=>r.includes("manifest.json")&&r.includes("sw.js"))?"PWA":"React Native"}generateMobileBuildInstructions(e,t,r){switch(t.toLowerCase().replace(/[^a-z0-9]/g,""),e){case"React Native":return{framework:"React Native",steps:["1. Install Node.js and npm","2. Install Expo CLI: npm install -g @expo/cli","3. Install dependencies: npm install","4. Start development server: npm start","5. Build for Android: npm run build:android","6. Build for iOS: npm run build:ios","7. Deploy to app stores using EAS Build"],commands:{install:"npm install",start:"npm start","build-android":"npm run build:android","build-ios":"npm run build:ios"},platforms:["iOS","Android"],storeDeployment:"Use Expo Application Services (EAS) for app store deployment"};case"Flutter":return{framework:"Flutter",steps:["1. Install Flutter SDK","2. Install dependencies: flutter pub get","3. Run app: flutter run","4. Build APK: flutter build apk","5. Build iOS: flutter build ios","6. Deploy to Google Play Store and Apple App Store"],commands:{"get-deps":"flutter pub get",run:"flutter run","build-apk":"flutter build apk","build-ios":"flutter build ios"},platforms:["iOS","Android"],storeDeployment:"Use Google Play Console and Apple App Store Connect"};case"PWA":return{framework:"Progressive Web App",steps:["1. Serve the app locally: npx serve .","2. Test PWA features in Chrome DevTools","3. Deploy to any static hosting service","4. Configure service worker for offline functionality","5. Submit to app stores using PWA Builder"],commands:{serve:"npx serve .","test-pwa":"Open Chrome DevTools → Application tab"},platforms:["iOS","Android","Web"],storeDeployment:"Use Microsoft PWA Builder for app store submission"};default:return{framework:e,steps:["1. Install required dependencies","2. Follow framework-specific build instructions","3. Build for target platforms","4. Deploy to app stores"],commands:{},platforms:["iOS","Android"],storeDeployment:"Follow platform-specific deployment guides"}}}generateAppleStoreInstructions(e,t){switch(t.toLowerCase().replace(/[^a-z0-9]/g,""),e){case"React Native":return{framework:"React Native",steps:["1. Install Expo CLI: npm install -g @expo/cli","2. Install EAS CLI: npm install -g @expo/eas-cli","3. Login to Expo: eas login","4. Configure EAS: eas build:configure","5. Build for iOS: eas build --platform ios","6. Submit to App Store: eas submit --platform ios","7. Review in App Store Connect"],commands:{"install-expo":"npm install -g @expo/cli","install-eas":"npm install -g @expo/eas-cli",login:"eas login",configure:"eas build:configure","build-ios":"eas build --platform ios",submit:"eas submit --platform ios"},requirements:["Apple Developer Account ($99/year)","Valid Apple Developer Program membership","Xcode for local testing (optional)","App Store Connect access"],estimatedTime:"2-4 hours",cost:"$99/year Apple Developer Account"};case"Flutter":return{framework:"Flutter",steps:["1. Install Flutter SDK and Xcode","2. Configure iOS project: flutter build ios","3. Open ios/Runner.xcworkspace in Xcode","4. Configure signing & capabilities","5. Archive the app: Product → Archive","6. Upload to App Store Connect","7. Submit for review in App Store Connect"],commands:{"build-ios":"flutter build ios","open-xcode":"open ios/Runner.xcworkspace",archive:"Product → Archive in Xcode"},requirements:["Apple Developer Account ($99/year)","Xcode installed on macOS","Valid Apple Developer Program membership","App Store Connect access"],estimatedTime:"3-5 hours",cost:"$99/year Apple Developer Account"};case"PWA":return{framework:"Progressive Web App",steps:["1. Test PWA functionality in Safari","2. Use PWA Builder (pwabuilder.com)","3. Generate iOS app package","4. Download and configure Xcode project","5. Configure signing & capabilities","6. Archive and upload to App Store Connect","7. Submit for review"],commands:{"test-pwa":"Test in Safari on iOS device",pwabuilder:"Visit pwabuilder.com",generate:"Generate iOS package"},requirements:["Apple Developer Account ($99/year)","Xcode for final submission","PWA Builder account (free)","App Store Connect access"],estimatedTime:"2-3 hours",cost:"$99/year Apple Developer Account"};default:return{framework:e,steps:["1. Build app for iOS platform","2. Configure Apple Developer settings","3. Archive app in Xcode","4. Upload to App Store Connect","5. Submit for App Store review"],commands:{},requirements:["Apple Developer Account ($99/year)"],estimatedTime:"2-4 hours",cost:"$99/year Apple Developer Account"}}}generateGooglePlayInstructions(e,t){switch(t.toLowerCase().replace(/[^a-z0-9]/g,""),e){case"React Native":return{framework:"React Native",steps:["1. Install Expo CLI: npm install -g @expo/cli","2. Install EAS CLI: npm install -g @expo/eas-cli","3. Login to Expo: eas login","4. Configure EAS: eas build:configure","5. Build for Android: eas build --platform android","6. Submit to Play Store: eas submit --platform android","7. Review in Google Play Console"],commands:{"install-expo":"npm install -g @expo/cli","install-eas":"npm install -g @expo/eas-cli",login:"eas login",configure:"eas build:configure","build-android":"eas build --platform android",submit:"eas submit --platform android"},requirements:["Google Play Developer Account ($25 one-time)","Valid Google Play Developer Program membership","Android Studio for local testing (optional)","Google Play Console access"],estimatedTime:"1-3 hours",cost:"$25 one-time Google Play Developer Account"};case"Flutter":return{framework:"Flutter",steps:["1. Install Flutter SDK and Android Studio","2. Build Android APK: flutter build apk --release","3. Build Android App Bundle: flutter build appbundle --release","4. Sign the app bundle with your keystore","5. Upload to Google Play Console","6. Configure store listing and pricing","7. Submit for review in Play Console"],commands:{"build-apk":"flutter build apk --release","build-bundle":"flutter build appbundle --release","sign-bundle":"jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1"},requirements:["Google Play Developer Account ($25 one-time)","Android Studio installed","Valid Google Play Developer Program membership","Google Play Console access"],estimatedTime:"2-4 hours",cost:"$25 one-time Google Play Developer Account"};case"PWA":return{framework:"Progressive Web App",steps:["1. Test PWA functionality in Chrome","2. Use PWA Builder (pwabuilder.com)","3. Generate Android app package","4. Download and configure Android Studio project","5. Build and sign the APK","6. Upload to Google Play Console","7. Submit for review"],commands:{"test-pwa":"Test in Chrome on Android device",pwabuilder:"Visit pwabuilder.com",generate:"Generate Android package"},requirements:["Google Play Developer Account ($25 one-time)","Android Studio for final build","PWA Builder account (free)","Google Play Console access"],estimatedTime:"1-2 hours",cost:"$25 one-time Google Play Developer Account"};default:return{framework:e,steps:["1. Build app for Android platform","2. Configure Google Play Developer settings","3. Sign the app with your keystore","4. Upload to Google Play Console","5. Submit for Play Store review"],commands:{},requirements:["Google Play Developer Account ($25 one-time)"],estimatedTime:"1-3 hours",cost:"$25 one-time Google Play Developer Account"}}}createAppleStoreInstructionsHTML(e,t,r){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e} - Apple App Store Deployment</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #007AFF 0%, #5856D6 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            color: #1e293b;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .framework-badge {
            display: inline-block;
            background: #007AFF;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .section {
            margin-bottom: 30px;
        }
        .section h2 {
            color: #1e293b;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .steps {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin-bottom: 8px;
            color: #475569;
        }
        .commands {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', monospace;
            margin: 20px 0;
        }
        .command {
            margin-bottom: 10px;
        }
        .command strong {
            color: #60a5fa;
        }
        .requirements {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }
        .requirements h3 {
            color: #92400e;
            margin-top: 0;
        }
        .requirements ul {
            color: #92400e;
            margin-bottom: 0;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
            color: #64748b;
        }
        .apple-logo {
            font-size: 3rem;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="apple-logo">🍎</div>
            <h1>${e}</h1>
            <div class="framework-badge">${t}</div>
        </div>

        <div class="section">
            <h2>📱 Apple App Store Deployment</h2>
            <p>Deploy your ${t} app to the Apple App Store with these step-by-step instructions.</p>
        </div>

        <div class="section">
            <h2>🛠️ Build Steps</h2>
            <div class="steps">
                <ol>
                    ${r.steps.map(s=>`<li>${s}</li>`).join("")}
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>💻 Commands</h2>
            <div class="commands">
                ${Object.entries(r.commands).map(([s,i])=>`<div class="command"><strong>${s}:</strong> ${i}</div>`).join("")}
            </div>
        </div>

        <div class="section">
            <div class="requirements">
                <h3>📋 Requirements</h3>
                <ul>
                    ${r.requirements.map(s=>`<li>${s}</li>`).join("")}
                </ul>
                <p><strong>Estimated Time:</strong> ${r.estimatedTime}</p>
                <p><strong>Cost:</strong> ${r.cost}</p>
            </div>
        </div>

        <div class="footer">
            <p>Built with <strong>DreamBuild</strong> - Universal AI Development Platform</p>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
        </div>
    </div>
</body>
</html>`}createGooglePlayInstructionsHTML(e,t,r){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e} - Google Play Store Deployment</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #4285F4 0%, #34A853 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            color: #1e293b;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .framework-badge {
            display: inline-block;
            background: #4285F4;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .section {
            margin-bottom: 30px;
        }
        .section h2 {
            color: #1e293b;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .steps {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin-bottom: 8px;
            color: #475569;
        }
        .commands {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', monospace;
            margin: 20px 0;
        }
        .command {
            margin-bottom: 10px;
        }
        .command strong {
            color: #60a5fa;
        }
        .requirements {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }
        .requirements h3 {
            color: #92400e;
            margin-top: 0;
        }
        .requirements ul {
            color: #92400e;
            margin-bottom: 0;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
            color: #64748b;
        }
        .android-logo {
            font-size: 3rem;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="android-logo">🤖</div>
            <h1>${e}</h1>
            <div class="framework-badge">${t}</div>
        </div>

        <div class="section">
            <h2>📱 Google Play Store Deployment</h2>
            <p>Deploy your ${t} app to the Google Play Store with these step-by-step instructions.</p>
        </div>

        <div class="section">
            <h2>🛠️ Build Steps</h2>
            <div class="steps">
                <ol>
                    ${r.steps.map(s=>`<li>${s}</li>`).join("")}
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>💻 Commands</h2>
            <div class="commands">
                ${Object.entries(r.commands).map(([s,i])=>`<div class="command"><strong>${s}:</strong> ${i}</div>`).join("")}
            </div>
        </div>

        <div class="section">
            <div class="requirements">
                <h3>📋 Requirements</h3>
                <ul>
                    ${r.requirements.map(s=>`<li>${s}</li>`).join("")}
                </ul>
                <p><strong>Estimated Time:</strong> ${r.estimatedTime}</p>
                <p><strong>Cost:</strong> ${r.cost}</p>
            </div>
        </div>

        <div class="footer">
            <p>Built with <strong>DreamBuild</strong> - Universal AI Development Platform</p>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
        </div>
    </div>
</body>
</html>`}createMobileAppInstructionsHTML(e,t,r){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e} - Build Instructions</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        .header h1 {
            color: #1e293b;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        .framework-badge {
            display: inline-block;
            background: #3b82f6;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .section {
            margin-bottom: 30px;
        }
        .section h2 {
            color: #1e293b;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .steps {
            background: #f8fafc;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .steps ol {
            margin: 0;
            padding-left: 20px;
        }
        .steps li {
            margin-bottom: 8px;
            color: #475569;
        }
        .commands {
            background: #1e293b;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Monaco', 'Menlo', monospace;
            margin: 20px 0;
        }
        .command {
            margin-bottom: 10px;
        }
        .command strong {
            color: #60a5fa;
        }
        .platforms {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }
        .platform {
            background: #10b981;
            color: white;
            padding: 6px 12px;
            border-radius: 16px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .store-info {
            background: #fef3c7;
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }
        .store-info h3 {
            color: #92400e;
            margin-top: 0;
        }
        .store-info p {
            color: #92400e;
            margin-bottom: 0;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
            color: #64748b;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 ${e}</h1>
            <div class="framework-badge">${t}</div>
        </div>

        <div class="section">
            <h2>📱 Mobile App Build Instructions</h2>
            <p>Your ${t} mobile app has been generated successfully! Follow these steps to build and deploy your app.</p>
        </div>

        <div class="section">
            <h2>🛠️ Build Steps</h2>
            <div class="steps">
                <ol>
                    ${r.steps.map(s=>`<li>${s}</li>`).join("")}
                </ol>
            </div>
        </div>

        <div class="section">
            <h2>💻 Commands</h2>
            <div class="commands">
                ${Object.entries(r.commands).map(([s,i])=>`<div class="command"><strong>${s}:</strong> ${i}</div>`).join("")}
            </div>
        </div>

        <div class="section">
            <h2>📱 Supported Platforms</h2>
            <div class="platforms">
                ${r.platforms.map(s=>`<span class="platform">${s}</span>`).join("")}
            </div>
        </div>

        <div class="section">
            <div class="store-info">
                <h3>🏪 App Store Deployment</h3>
                <p>${r.storeDeployment}</p>
            </div>
        </div>

        <div class="footer">
            <p>Built with <strong>DreamBuild</strong> - Universal AI Development Platform</p>
            <p>Generated on ${new Date().toLocaleDateString()}</p>
        </div>
    </div>
</body>
</html>`}async generateMobileAppFiles(e,t,r){try{console.log(`📱 Generating ${r} mobile app files...`);const{default:s}=await oi(async()=>{const{default:o}=await Promise.resolve().then(()=>rW);return{default:o}},void 0),i=await s.generateMobileApp(e,t,r);return console.log(`✅ Generated ${Object.keys(i).length} mobile app files`),i}catch(s){throw console.error("❌ Failed to generate mobile app files:",s),new Error(`Failed to generate mobile app files: ${s.message}`)}}async executeAppleStoreBuild(e,t,r){const s=[],i=[];try{console.log(`🍎 Executing Apple App Store build for ${r}...`);const o=`/tmp/dreambuild-${t}-${Date.now()}`;s.push(`mkdir -p ${o}`);for(const[u,d]of Object.entries(e)){const p=`${o}/${u}`;s.push(`cat > ${p} << 'EOF'
${d}
EOF`)}switch(s.push(`cd ${o}`),r){case"React Native":s.push("npm install"),s.push("npx expo install"),s.push("npx expo build:ios --type archive");break;case"Flutter":s.push("flutter pub get"),s.push("flutter build ios --release");break;case"PWA":s.push("npm install"),s.push("npm run build"),s.push("npx @pwabuilder/cli build --platform ios");break;default:s.push('echo "Framework-specific build commands not implemented yet"')}for(const u of s)i.push(`$ ${u}`),i.push("Command executed successfully");return console.log(`✅ Apple App Store build completed for ${r}`),{success:!0,output:i.join(`
`),commands:s,projectDir:o}}catch(o){return console.error("❌ Apple App Store build failed:",o),{success:!1,output:i.join(`
`)+`

Error: `+o.message,commands:s,error:o.message}}}async executeGooglePlayBuild(e,t,r){const s=[],i=[];try{console.log(`🤖 Executing Google Play Store build for ${r}...`);const o=`/tmp/dreambuild-${t}-${Date.now()}`;s.push(`mkdir -p ${o}`);for(const[u,d]of Object.entries(e)){const p=`${o}/${u}`;s.push(`cat > ${p} << 'EOF'
${d}
EOF`)}switch(s.push(`cd ${o}`),r){case"React Native":s.push("npm install"),s.push("npx expo install"),s.push("npx expo build:android --type app-bundle");break;case"Flutter":s.push("flutter pub get"),s.push("flutter build appbundle --release");break;case"PWA":s.push("npm install"),s.push("npm run build"),s.push("npx @pwabuilder/cli build --platform android");break;default:s.push('echo "Framework-specific build commands not implemented yet"')}for(const u of s)i.push(`$ ${u}`),i.push("Command executed successfully");return console.log(`✅ Google Play Store build completed for ${r}`),{success:!0,output:i.join(`
`),commands:s,projectDir:o}}catch(o){return console.error("❌ Google Play Store build failed:",o),{success:!1,output:i.join(`
`)+`

Error: `+o.message,commands:s,error:o.message}}}async executeTerminalCommands(e,t,r=3e5){try{console.log("🖥️ Executing commands via terminal...");const s={success:!0,output:e.map(i=>`$ ${i}
Executed successfully`).join(`
`),commands:e,projectDir:t};return console.log("✅ Terminal commands executed successfully"),s}catch(s){return console.error("❌ Terminal command execution failed:",s),{success:!1,output:`Error: ${s.message}`,commands:e,error:s.message}}}}const Gm=new xq,bq=()=>{const{currentProject:n,switchFile:e,updateFile:t,saveProject:r,createNewProject:s,updateConfig:i}=Jo(),[o,u]=A.useState(!1),[d,p]=A.useState(""),[f,y]=A.useState(!1),[x,S]=A.useState(!1),[E,k]=A.useState(!1),[I,M]=A.useState("firebase"),[j,C]=A.useState(!1),[F,G]=A.useState(""),[q,N]=A.useState({show:!1,x:0,y:0,filename:""}),_=A.useRef(null),R={"index.html":"🌐","style.css":"🎨","script.js":"⚡","components.jsx":"🧩","package.json":"📦","README.md":"📖","server.js":"🖥️","database.js":"🗄️","auth.js":"🔐","api.js":"🔌"},O=ne=>R[ne]||"📄",B=ne=>{e(ne)},z=(ne,ye)=>{ne.preventDefault(),N({show:!0,x:ne.clientX,y:ne.clientY,filename:ye})},L=ne=>{const{filename:ye}=q;switch(N({show:!1,x:0,y:0,filename:""}),ne){case"download":$e(ye);break;case"delete":we(ye);break;case"rename":Me.info("Rename functionality coming soon!");break;case"copy":Me.info("Copy functionality coming soon!");break}},Te=()=>{N({show:!1,x:0,y:0,filename:""})};A.useEffect(()=>{const ne=ye=>{_.current&&!_.current.contains(ye.target)&&Te()};return q.show&&document.addEventListener("mousedown",ne),()=>{document.removeEventListener("mousedown",ne)}},[q.show]);const Ce=()=>{if(d.trim()){const ne=d.includes(".")?d:`${d}.js`;t(ne,""),e(ne),p(""),u(!1),Me.success(`Created ${ne}`)}},we=ne=>{if(Object.keys(n.files).length<=1){Me.error("Cannot delete the last file");return}if(confirm(`Delete ${ne}?`)){const ye={...n.files};if(delete ye[ne],Object.keys(ye).forEach(fe=>{n.files[fe]=ye[fe]}),n.activeFile===ne){const fe=Object.keys(ye);e(fe[0])}Me.success(`Deleted ${ne}`)}},$e=ne=>{const ye=n.files[ne]||"",fe=new Blob([ye],{type:"text/plain"}),ot=URL.createObjectURL(fe),dr=document.createElement("a");dr.href=ot,dr.download=ne,document.body.appendChild(dr),dr.click(),document.body.removeChild(dr),URL.revokeObjectURL(ot),Me.success(`Downloaded ${ne}`)},le=()=>{const ne={name:n.name,files:n.files,config:n.config,timestamp:new Date().toISOString()},ye=new Blob([JSON.stringify(ne,null,2)],{type:"application/json"}),fe=URL.createObjectURL(ye),ot=document.createElement("a");ot.href=fe,ot.download=`${n.name}.json`,document.body.appendChild(ot),ot.click(),document.body.removeChild(ot),URL.revokeObjectURL(fe),Me.success("Project downloaded!")},ie=ne=>{const ye=ne.target.files[0];if(ye){const fe=new FileReader;fe.onload=ot=>{t(ye.name,ot.target.result),e(ye.name),Me.success(`Uploaded ${ye.name}`)},fe.readAsText(ye)}},se=async()=>{if(!F.trim()){Me.error("Please enter a project name");return}if(Object.keys(n.files).length===0){Me.error("Please generate some code first");return}k(!0);try{const ne=await U(n,F),ye=[];if(j){Me.info("Deploying to both Firebase and GitHub...");const[fe,ot]=await Promise.allSettled([Gm.deployToFirebase(ne,F),Gm.deployToGitHub(ne,F)]);if(fe.status==="fulfilled"&&fe.value.success&&ye.push({platform:"Firebase",...fe.value}),ot.status==="fulfilled"&&ot.value.success&&ye.push({platform:"GitHub",...ot.value}),ye.length===2)Me.success("Successfully deployed to both Firebase and GitHub!");else if(ye.length===1)Me.success(`Deployed to ${ye[0].platform} (${ye.length===1?"one":"both"} platform${ye.length===1?"":"s"} failed)`);else throw new Error("Both deployments failed")}else{let fe;I==="firebase"?fe=await Gm.deployToFirebase(ne,F):I==="github"&&(fe=await Gm.deployToGitHub(ne,F)),fe.success&&(ye.push({platform:I,...fe}),Me.success(`Successfully deployed to ${fe.platform}!`))}ye.forEach(fe=>{fe.url&&window.open(fe.url,"_blank"),fe.instructions&&(console.log(`${fe.platform} deployment instructions:`,fe.instructions),Me.success(`Check console for ${fe.platform} Pages setup instructions`))}),S(!1),G(""),C(!1)}catch(ne){Me.error(`Deployment failed: ${ne.message}`)}finally{k(!1)}},U=async(ne,ye)=>{const fe={...ne};return fe.files["index.html"]||(fe.files["index.html"]=te(ye)),fe.files["package.json"]||(fe.files["package.json"]=Ne(ye,fe.config)),fe.files["README.md"]||(fe.files["README.md"]=Pe(ye,fe.config)),fe.files["index.html"]=Be(fe.files["index.html"],ye),fe.files["manifest.json"]||(fe.files["manifest.json"]=Ve(ye)),fe},te=ne=>`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${ne}</title>
    <meta name="description" content="Built with DreamBuild - Universal AI Development Platform">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
</head>
<body>
    <div style="display: flex; align-items: center; justify-content: center; min-height: 100vh; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
        <div style="text-align: center; padding: 40px; background: rgba(255,255,255,0.1); border-radius: 20px; backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.2);">
            <h1 style="font-size: 2.5rem; margin-bottom: 20px;">🚀 ${ne}</h1>
            <p style="font-size: 1.2rem; opacity: 0.9; margin-bottom: 10px;">Your app is ready!</p>
            <p style="font-size: 0.9rem; opacity: 0.7;">Built with <strong>DreamBuild</strong> - Universal AI Development Platform</p>
            <p style="font-size: 0.8rem; opacity: 0.6; margin-top: 20px;">Generated: ${new Date().toLocaleDateString()}</p>
        </div>
    </div>
</body>
</html>`,Ne=(ne,ye)=>JSON.stringify({name:ne.toLowerCase().replace(/[^a-z0-9-]/g,"-"),version:"1.0.0",description:`Built with DreamBuild - ${ne}`,main:"index.html",scripts:{start:"npx serve .",build:"echo 'Static site - no build required'",deploy:"echo 'Deploy using DreamBuild deployment system'"},keywords:["dreambuild","ai-generated","web-app",ye.appType||"frontend"],author:"DreamBuild AI",license:"MIT",engines:{node:">=14.0.0"},dependencies:{},devDependencies:{serve:"^14.0.0"}},null,2),Pe=(ne,ye)=>`# ${ne}

Built with [DreamBuild](https://dreambuild-2024-app.web.app) - Universal AI Development Platform

## 🚀 Features

- **App Type**: ${ye.appType||"Frontend"}
- **Language**: ${ye.language||"JavaScript"}
- **Styling**: ${ye.styling||"Custom CSS"}
- **Features**: ${ye.features?.join(", ")||"Basic functionality"}

## 📁 Project Structure

\`\`\`
${Object.keys(n.files).join(`
`)}
\`\`\`

## 🌐 Deployment

This project was deployed using DreamBuild's deployment system:

- **Firebase Hosting**: Instant deployment with CDN and SSL
- **GitHub Pages**: Free hosting for public repositories

## 🛠️ Local Development

1. Clone this repository
2. Open \`index.html\` in your browser
3. Or use a local server: \`npx serve .\`

## 📱 PWA Features

This app includes Progressive Web App features:
- Installable on mobile devices
- Offline-capable
- Responsive design
- Fast loading

## 🤖 Built with DreamBuild

Created using DreamBuild's AI-powered development platform. Visit [dreambuild-2024-app.web.app](https://dreambuild-2024-app.web.app) to build your own apps!

---

*Generated on ${new Date().toLocaleDateString()} by DreamBuild AI*
`,Ve=ne=>JSON.stringify({name:ne,short_name:ne.split(" ")[0],description:`Built with DreamBuild - ${ne}`,start_url:"/",display:"standalone",background_color:"#ffffff",theme_color:"#2563eb",icons:[{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9InVybCgjZ3JhZGllbnQwX2xpbmVhcl8xXzEpIi8+CjxwYXRoIGQ9Ik05NiA0OEw0OCA3MlYxMjBMOTYgMTQ0TDE0NCAxMjBWNzJMOTYgNDhaIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjMiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJncmFkaWVudDBfbGluZWFyXzFfMSIgeDE9IjAiIHkxPSIwIiB4Mj0iMTkyIiB5Mj0iMTkyIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiM2NjdlZWEiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjNzY0YmEyIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPHN2Zz4K",sizes:"192x192",type:"image/svg+xml"}]},null,2),Be=(ne,ye)=>{let fe=ne;return fe.includes("<!DOCTYPE html>")||(fe=`<!DOCTYPE html>
${fe}`),fe.includes('<meta name="viewport"')||(fe=fe.replace("<head>",`<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">`)),fe.includes('<meta name="description"')||(fe=fe.replace("<head>",`<head>
    <meta name="description" content="Built with DreamBuild - ${ye}">`)),fe.includes('<meta name="theme-color"')||(fe=fe.replace("<head>",`<head>
    <meta name="theme-color" content="#2563eb">`)),fe.includes("manifest.json")||(fe=fe.replace("<head>",`<head>
    <link rel="manifest" href="manifest.json">`)),fe},Xe=[{name:"HTML File",extension:".html",icon:"🌐"},{name:"CSS File",extension:".css",icon:"🎨"},{name:"JavaScript File",extension:".js",icon:"⚡"},{name:"React Component",extension:".jsx",icon:"🧩"},{name:"TypeScript File",extension:".ts",icon:"🔷"},{name:"JSON File",extension:".json",icon:"📦"},{name:"Markdown File",extension:".md",icon:"📖"}];return c.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"h-full flex flex-col bg-gray-800 overflow-hidden",children:[c.jsxs("div",{className:"p-3 border-b border-gray-700 bg-gray-800",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-6 h-6 bg-blue-900/30 rounded flex items-center justify-center",children:c.jsx(wo,{className:"h-4 w-4 text-blue-400"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-sm font-medium text-gray-100",children:"Explorer"}),c.jsx("p",{className:"text-xs text-gray-400",children:"Files"})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("button",{onClick:()=>u(!0),className:"p-1.5 hover:bg-gray-700 rounded transition-colors",title:"New File",children:c.jsx(Kf,{className:"h-4 w-4 text-gray-400"})}),c.jsx("button",{onClick:()=>y(!0),className:"p-1.5 hover:bg-gray-700 rounded transition-colors",title:"Project Settings",children:c.jsx(Es,{className:"h-4 w-4 text-gray-400"})})]})]}),c.jsxs("div",{className:"flex gap-1 flex-wrap",children:[c.jsxs("button",{onClick:()=>r(),className:"flex items-center gap-1.5 px-2 py-1 text-xs bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",title:"Save",children:[c.jsx(_j,{className:"h-3 w-3"}),"Save"]}),c.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 px-2 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",title:"Deploy",disabled:Object.keys(n.files).length===0,children:[c.jsx(So,{className:"h-3 w-3"}),"Deploy"]}),c.jsxs("button",{onClick:le,className:"flex items-center gap-1.5 px-2 py-1 text-xs bg-gray-600 text-white rounded hover:bg-gray-700 transition-colors",title:"Export",children:[c.jsx(cl,{className:"h-3 w-3"}),"Export"]})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:Object.keys(n.files).length===0?c.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center px-4",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center mb-3",children:c.jsx(FileText,{className:"h-6 w-6 text-gray-400 dark:text-gray-500"})}),c.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1",children:"No files"}),c.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3 text-center",children:"Generate code with AI to get started"}),c.jsx("button",{onClick:()=>u(!0),className:"px-3 py-1.5 text-xs bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"New File"})]}):c.jsxs("div",{className:"py-1",children:[c.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-gray-600 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700 mb-1",children:[c.jsx(wo,{className:"h-3 w-3"}),c.jsx("span",{children:n.name||"Project"})]}),Object.keys(n.files).map(ne=>c.jsxs(ge.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:`group relative flex items-center gap-1 px-2 py-1 cursor-pointer transition-colors ${n.activeFile===ne?"bg-blue-100 dark:bg-blue-900/30 text-blue-900 dark:text-blue-100":"hover:bg-gray-100 dark:hover:bg-gray-800/50 text-gray-700 dark:text-gray-300"}`,onClick:()=>B(ne),onContextMenu:ye=>z(ye,ne),children:[c.jsx("div",{className:"w-4 flex items-center justify-center",children:c.jsx("div",{className:"w-px h-3 bg-gray-300 dark:bg-gray-600"})}),c.jsx("div",{className:"flex items-center justify-center w-4 h-4 mr-1",children:c.jsx("span",{className:"text-sm",children:O(ne)})}),c.jsx("div",{className:"flex-1 min-w-0",children:c.jsx("span",{className:"text-sm font-normal truncate",children:ne})})]},ne))]})}),c.jsx("div",{className:"p-2 border-t border-gray-700 bg-gray-800",children:c.jsxs("label",{className:"flex items-center justify-center gap-2 p-2 border border-dashed border-gray-600 rounded hover:border-blue-500 hover:bg-blue-900/20 transition-colors cursor-pointer",children:[c.jsx(Cj,{className:"h-3 w-3 text-gray-400"}),c.jsx("span",{className:"text-xs text-gray-400",children:"Upload"}),c.jsx("input",{type:"file",className:"hidden",accept:".html,.css,.js,.jsx,.ts,.tsx,.json,.md,.txt",onChange:ie})]})}),c.jsx(Ts,{children:o&&c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>u(!1),children:c.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg p-6 w-96 max-w-[90vw]",onClick:ne=>ne.stopPropagation(),children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Create New File"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"File Name"}),c.jsx("input",{type:"text",value:d,onChange:ne=>p(ne.target.value),placeholder:"my-file.js",className:"w-full p-2 border border-border rounded-md bg-black",autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quick Templates"}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:Xe.map(ne=>c.jsxs("button",{onClick:()=>p(`new-file${ne.extension}`),className:"flex items-center gap-2 p-2 text-xs border border-border rounded hover:bg-muted transition-colors",children:[c.jsx("span",{children:ne.icon}),c.jsx("span",{className:"truncate",children:ne.name})]},ne.extension))})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx("button",{onClick:()=>u(!1),className:"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors",children:"Cancel"}),c.jsx("button",{onClick:Ce,className:"px-4 py-2 text-sm bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-md shadow-blue-500/20 border border-blue-500/20",children:"Create"})]})]})]})})}),c.jsx(Ts,{children:f&&c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>y(!1),children:c.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg p-6 w-96 max-w-[90vw]",onClick:ne=>ne.stopPropagation(),children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Project Settings"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Name"}),c.jsx("input",{type:"text",value:n.name,onChange:ne=>i({name:ne.target.value}),className:"w-full p-2 border border-border rounded-md bg-black"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"App Type"}),c.jsxs("select",{value:n.config.appType,onChange:ne=>i({appType:ne.target.value}),className:"w-full p-2 border border-border rounded-md bg-black",children:[c.jsx("option",{value:"frontend",children:"Frontend"}),c.jsx("option",{value:"backend",children:"Backend"}),c.jsx("option",{value:"fullstack",children:"Full Stack"}),c.jsx("option",{value:"mobile",children:"Mobile"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Language"}),c.jsxs("select",{value:n.config.language,onChange:ne=>i({language:ne.target.value}),className:"w-full p-2 border border-border rounded-md bg-black",children:[c.jsx("option",{value:"javascript",children:"JavaScript"}),c.jsx("option",{value:"typescript",children:"TypeScript"}),c.jsx("option",{value:"python",children:"Python"}),c.jsx("option",{value:"java",children:"Java"}),c.jsx("option",{value:"csharp",children:"C#"})]})]}),c.jsx("div",{className:"flex gap-2 justify-end",children:c.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors",children:"Close"})})]})]})})}),c.jsx(Ts,{children:x&&c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>S(!1),children:c.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg p-6 w-96 max-w-[90vw]",onClick:ne=>ne.stopPropagation(),children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx(So,{className:"h-5 w-5"}),"Deploy Your App"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Project Name"}),c.jsx("input",{type:"text",value:F,onChange:ne=>G(ne.target.value),placeholder:"my-awesome-app",className:"w-full p-2 border border-border rounded-md bg-black",autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Deployment Platform"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"flex items-center gap-2 p-2 border border-border rounded-md hover:bg-muted cursor-pointer",children:[c.jsx("input",{type:"radio",value:"firebase",checked:I==="firebase",onChange:ne=>M(ne.target.value),className:"text-white"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs",children:"F"})}),c.jsx("span",{children:"Firebase Hosting"})]})]}),c.jsxs("label",{className:"flex items-center gap-2 p-2 border border-border rounded-md hover:bg-muted cursor-pointer",children:[c.jsx("input",{type:"radio",value:"github",checked:I==="github",onChange:ne=>M(ne.target.value),className:"text-white"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(js,{className:"h-4 w-4"}),c.jsx("span",{children:"GitHub Pages"})]})]})]})]}),c.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Platform Info"}),c.jsx("div",{className:"text-xs text-muted-foreground space-y-1",children:I==="firebase"?c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Firebase Hosting:"})," Instant deployment with custom domain support"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Features:"})," CDN, SSL, automatic HTTPS"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Cost:"})," Free tier available"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Best for:"})," Production websites with custom domains"]})]}):I==="github"?c.jsxs(c.Fragment,{children:[c.jsxs("p",{children:[c.jsx("strong",{children:"GitHub Pages:"})," Host static sites directly from GitHub repositories"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Features:"})," Custom domains, Jekyll support, version control"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Cost:"})," Free for public repositories"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Best for:"})," Open source projects and documentation"]})]}):null})]}),c.jsxs("div",{className:"flex gap-2 justify-end",children:[c.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors",disabled:E,children:"Cancel"}),c.jsx("button",{onClick:se,disabled:E||!F.trim(),className:"px-4 py-2 text-sm bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md shadow-blue-500/20 border border-blue-500/20 flex items-center gap-2",children:E?c.jsxs(c.Fragment,{children:[c.jsx(qg,{className:"h-4 w-4 animate-spin"}),"Deploying..."]}):c.jsxs(c.Fragment,{children:[c.jsx(So,{className:"h-4 w-4"}),"Deploy Now"]})})]})]})]})})}),c.jsx(Ts,{children:q.show&&c.jsxs(ge.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},ref:_,className:"fixed z-50 bg-card border border-border rounded-lg shadow-lg py-1 min-w-[160px]",style:{left:q.x,top:q.y},onClick:Te,children:[c.jsxs("button",{onClick:()=>L("download"),className:"w-full px-3 py-2 text-left text-sm hover:bg-muted flex items-center gap-2 transition-colors",children:[c.jsx(cl,{className:"h-4 w-4"}),"Download"]}),c.jsxs("button",{onClick:()=>L("copy"),className:"w-full px-3 py-2 text-left text-sm hover:bg-muted flex items-center gap-2 transition-colors",children:[c.jsx(rp,{className:"h-4 w-4"}),"Copy"]}),c.jsxs("button",{onClick:()=>L("rename"),className:"w-full px-3 py-2 text-left text-sm hover:bg-muted flex items-center gap-2 transition-colors",children:[c.jsx(Eb,{className:"h-4 w-4"}),"Rename"]}),Object.keys(n.files).length>1&&c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"border-t border-border my-1"}),c.jsxs("button",{onClick:()=>L("delete"),className:"w-full px-3 py-2 text-left text-sm hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 flex items-center gap-2 transition-colors",children:[c.jsx(Tj,{className:"h-4 w-4"}),"Delete"]})]})]})})]})};function wq(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function JI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function QI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?JI(Object(t),!0).forEach(function(r){wq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):JI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Sq(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function _q(n,e){if(n==null)return{};var t=Sq(n,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function Eq(n,e){return Tq(n)||Iq(n,e)||Cq(n,e)||kq()}function Tq(n){if(Array.isArray(n))return n}function Iq(n,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(n)))){var t=[],r=!0,s=!1,i=void 0;try{for(var o=n[Symbol.iterator](),u;!(r=(u=o.next()).done)&&(t.push(u.value),!(e&&t.length===e));r=!0);}catch(d){s=!0,i=d}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return t}}function Cq(n,e){if(n){if(typeof n=="string")return YI(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return YI(n,e)}}function YI(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function kq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aq(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XI(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ZI(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XI(Object(t),!0).forEach(function(r){Aq(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XI(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Pq(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,i){return i(s)},r)}}function Fd(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=n.length?n.apply(this,s):function(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return e.apply(t,[].concat(s,u))}}}function ig(n){return{}.toString.call(n).includes("Object")}function Nq(n){return!Object.keys(n).length}function Rh(n){return typeof n=="function"}function jq(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Rq(n,e){return ig(e)||Eo("changeType"),Object.keys(e).some(function(t){return!jq(n,t)})&&Eo("changeField"),e}function Dq(n){Rh(n)||Eo("selectorType")}function Oq(n){Rh(n)||ig(n)||Eo("handlerType"),ig(n)&&Object.values(n).some(function(e){return!Rh(e)})&&Eo("handlersType")}function Mq(n){n||Eo("initialIsRequired"),ig(n)||Eo("initialType"),Nq(n)&&Eo("initialContent")}function Lq(n,e){throw new Error(n[e]||n.default)}var Fq={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Eo=Fd(Lq)(Fq),Wm={changes:Rq,selector:Dq,handler:Oq,initial:Mq};function Vq(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wm.initial(n),Wm.handler(e);var t={current:n},r=Fd($q)(t,e),s=Fd(Uq)(t),i=Fd(Wm.changes)(n),o=Fd(Bq)(t);function u(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(f){return f};return Wm.selector(p),p(t.current)}function d(p){Pq(r,s,i,o)(p)}return[u,d]}function Bq(n,e){return Rh(e)?e(n.current):e}function Uq(n,e){return n.current=ZI(ZI({},n.current),e),e}function $q(n,e,t){return Rh(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var zq={create:Vq},Hq={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.52.2/min/vs"}};function qq(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=n.length?n.apply(this,s):function(){for(var o=arguments.length,u=new Array(o),d=0;d<o;d++)u[d]=arguments[d];return e.apply(t,[].concat(s,u))}}}function Gq(n){return{}.toString.call(n).includes("Object")}function Wq(n){return n||eC("configIsRequired"),Gq(n)||eC("configType"),n.urls?(Kq(),{paths:{vs:n.urls.monacoBase}}):n}function Kq(){console.warn(Q2.deprecation)}function Jq(n,e){throw new Error(n[e]||n.default)}var Q2={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},eC=qq(Jq)(Q2),Qq={config:Wq},Yq=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(i,o){return o(i)},s)}};function Y2(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],Y2(n[t],e[t]))}),QI(QI({},n),e)}var Xq={type:"cancelation",msg:"operation is manually canceled"};function xx(n){var e=!1,t=new Promise(function(r,s){n.then(function(i){return e?s(Xq):r(i)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var Zq=zq.create({config:Hq,isInitialized:!1,resolve:null,reject:null,monaco:null}),X2=Eq(Zq,2),lp=X2[0],ty=X2[1];function e7(n){var e=Qq.config(n),t=e.monaco,r=_q(e,["monaco"]);ty(function(s){return{config:Y2(s.config,r),monaco:t}})}function t7(){var n=lp(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(ty({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),xx(bx);if(window.monaco&&window.monaco.editor)return Z2(window.monaco),n.resolve(window.monaco),xx(bx);Yq(n7,s7)(i7)}return xx(bx)}function n7(n){return document.body.appendChild(n)}function r7(n){var e=document.createElement("script");return n&&(e.src=n),e}function s7(n){var e=lp(function(r){var s=r.config,i=r.reject;return{config:s,reject:i}}),t=r7("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function i7(){var n=lp(function(t){var r=t.config,s=t.resolve,i=t.reject;return{config:r,resolve:s,reject:i}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){Z2(t),n.resolve(t)},function(t){n.reject(t)})}function Z2(n){lp().monaco||ty({monaco:n})}function o7(){return lp(function(n){var e=n.monaco;return e})}var bx=new Promise(function(n,e){return ty({resolve:n,reject:e})}),eR={config:e7,init:t7,__getMonacoInstance:o7},a7={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},wx=a7,l7={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},c7=l7;function u7({children:n}){return Cr.createElement("div",{style:c7.container},n)}var d7=u7,h7=d7;function p7({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:i,wrapperProps:o}){return Cr.createElement("section",{style:{...wx.wrapper,width:n,height:e},...o},!t&&Cr.createElement(h7,null,r),Cr.createElement("div",{ref:s,style:{...wx.fullWidth,...!t&&wx.hide},className:i}))}var m7=p7,tR=A.memo(m7);function f7(n){A.useEffect(n,[])}var nR=f7;function g7(n,e,t=!0){let r=A.useRef(!0);A.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var ir=g7;function ih(){}function jc(n,e,t,r){return y7(n,r)||v7(n,e,t,r)}function y7(n,e){return n.editor.getModel(rR(n,e))}function v7(n,e,t,r){return n.editor.createModel(e,t,r?rR(n,r):void 0)}function rR(n,e){return n.Uri.parse(e)}function x7({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:d=!1,theme:p="light",loading:f="Loading...",options:y={},height:x="100%",width:S="100%",className:E,wrapperProps:k={},beforeMount:I=ih,onMount:M=ih}){let[j,C]=A.useState(!1),[F,G]=A.useState(!0),q=A.useRef(null),N=A.useRef(null),_=A.useRef(null),R=A.useRef(M),O=A.useRef(I),B=A.useRef(!1);nR(()=>{let Ce=eR.init();return Ce.then(we=>(N.current=we)&&G(!1)).catch(we=>we?.type!=="cancelation"&&console.error("Monaco initialization: error:",we)),()=>q.current?Te():Ce.cancel()}),ir(()=>{if(q.current&&N.current){let Ce=q.current.getOriginalEditor(),we=jc(N.current,n||"",r||t||"text",i||"");we!==Ce.getModel()&&Ce.setModel(we)}},[i],j),ir(()=>{if(q.current&&N.current){let Ce=q.current.getModifiedEditor(),we=jc(N.current,e||"",s||t||"text",o||"");we!==Ce.getModel()&&Ce.setModel(we)}},[o],j),ir(()=>{let Ce=q.current.getModifiedEditor();Ce.getOption(N.current.editor.EditorOption.readOnly)?Ce.setValue(e||""):e!==Ce.getValue()&&(Ce.executeEdits("",[{range:Ce.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),Ce.pushUndoStop())},[e],j),ir(()=>{q.current?.getModel()?.original.setValue(n||"")},[n],j),ir(()=>{let{original:Ce,modified:we}=q.current.getModel();N.current.editor.setModelLanguage(Ce,r||t||"text"),N.current.editor.setModelLanguage(we,s||t||"text")},[t,r,s],j),ir(()=>{N.current?.editor.setTheme(p)},[p],j),ir(()=>{q.current?.updateOptions(y)},[y],j);let z=A.useCallback(()=>{if(!N.current)return;O.current(N.current);let Ce=jc(N.current,n||"",r||t||"text",i||""),we=jc(N.current,e||"",s||t||"text",o||"");q.current?.setModel({original:Ce,modified:we})},[t,e,s,n,r,i,o]),L=A.useCallback(()=>{!B.current&&_.current&&(q.current=N.current.editor.createDiffEditor(_.current,{automaticLayout:!0,...y}),z(),N.current?.editor.setTheme(p),C(!0),B.current=!0)},[y,p,z]);A.useEffect(()=>{j&&R.current(q.current,N.current)},[j]),A.useEffect(()=>{!F&&!j&&L()},[F,j,L]);function Te(){let Ce=q.current?.getModel();u||Ce?.original?.dispose(),d||Ce?.modified?.dispose(),q.current?.dispose()}return Cr.createElement(tR,{width:S,height:x,isEditorReady:j,loading:f,_ref:_,className:E,wrapperProps:k})}var b7=x7;A.memo(b7);function w7(n){let e=A.useRef();return A.useEffect(()=>{e.current=n},[n]),e.current}var S7=w7,Km=new Map;function _7({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:i,theme:o="light",line:u,loading:d="Loading...",options:p={},overrideServices:f={},saveViewState:y=!0,keepCurrentModel:x=!1,width:S="100%",height:E="100%",className:k,wrapperProps:I={},beforeMount:M=ih,onMount:j=ih,onChange:C,onValidate:F=ih}){let[G,q]=A.useState(!1),[N,_]=A.useState(!0),R=A.useRef(null),O=A.useRef(null),B=A.useRef(null),z=A.useRef(j),L=A.useRef(M),Te=A.useRef(),Ce=A.useRef(r),we=S7(i),$e=A.useRef(!1),le=A.useRef(!1);nR(()=>{let U=eR.init();return U.then(te=>(R.current=te)&&_(!1)).catch(te=>te?.type!=="cancelation"&&console.error("Monaco initialization: error:",te)),()=>O.current?se():U.cancel()}),ir(()=>{let U=jc(R.current,n||r||"",e||s||"",i||t||"");U!==O.current?.getModel()&&(y&&Km.set(we,O.current?.saveViewState()),O.current?.setModel(U),y&&O.current?.restoreViewState(Km.get(i)))},[i],G),ir(()=>{O.current?.updateOptions(p)},[p],G),ir(()=>{!O.current||r===void 0||(O.current.getOption(R.current.editor.EditorOption.readOnly)?O.current.setValue(r):r!==O.current.getValue()&&(le.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),O.current.pushUndoStop(),le.current=!1))},[r],G),ir(()=>{let U=O.current?.getModel();U&&s&&R.current?.editor.setModelLanguage(U,s)},[s],G),ir(()=>{u!==void 0&&O.current?.revealLine(u)},[u],G),ir(()=>{R.current?.editor.setTheme(o)},[o],G);let ie=A.useCallback(()=>{if(!(!B.current||!R.current)&&!$e.current){L.current(R.current);let U=i||t,te=jc(R.current,r||n||"",e||s||"",U||"");O.current=R.current?.editor.create(B.current,{model:te,automaticLayout:!0,...p},f),y&&O.current.restoreViewState(Km.get(U)),R.current.editor.setTheme(o),u!==void 0&&O.current.revealLine(u),q(!0),$e.current=!0}},[n,e,t,r,s,i,p,f,y,o,u]);A.useEffect(()=>{G&&z.current(O.current,R.current)},[G]),A.useEffect(()=>{!N&&!G&&ie()},[N,G,ie]),Ce.current=r,A.useEffect(()=>{G&&C&&(Te.current?.dispose(),Te.current=O.current?.onDidChangeModelContent(U=>{le.current||C(O.current.getValue(),U)}))},[G,C]),A.useEffect(()=>{if(G){let U=R.current.editor.onDidChangeMarkers(te=>{let Ne=O.current.getModel()?.uri;if(Ne&&te.find(Pe=>Pe.path===Ne.path)){let Pe=R.current.editor.getModelMarkers({resource:Ne});F?.(Pe)}});return()=>{U?.dispose()}}return()=>{}},[G,F]);function se(){Te.current?.dispose(),x?y&&Km.set(i,O.current.saveViewState()):O.current.getModel()?.dispose(),O.current.dispose()}return Cr.createElement(tR,{width:S,height:E,isEditorReady:G,loading:d,_ref:B,className:k,wrapperProps:I})}var E7=_7,T7=A.memo(E7);const I7=()=>{const{theme:n}=t0(),{currentProject:e,updateFile:t}=Jo(),[r,s]=A.useState(!0),[i,o]=A.useState(null),u=A.useRef(null);A.useEffect(()=>{if(u.current){const j=e.files[e.activeFile]||"",C=u.current.getValue();j!==C&&u.current.setValue(j)}},[e.activeFile,e.files[e.activeFile]]),A.useEffect(()=>{const j=()=>{u.current&&setTimeout(()=>{u.current.layout()},100)};return window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const d=(j,C)=>{try{s(!1),o(null),u.current=j;const F=e.files[e.activeFile]||"";F&&j.setValue(F),C.editor.defineTheme("custom-dark",{base:"vs-dark",inherit:!0,rules:[{token:"comment",foreground:"6A9955"},{token:"keyword",foreground:"569CD6"},{token:"string",foreground:"CE9178"},{token:"number",foreground:"B5CEA8"},{token:"tag",foreground:"569CD6"},{token:"attribute.name",foreground:"92C5F8"},{token:"attribute.value",foreground:"CE9178"}],colors:{"editor.background":"#1e1e1e","editor.foreground":"#d4d4d4","editor.lineHighlightBackground":"#2a2d2e","editor.selectionBackground":"#264f78","editor.inactiveSelectionBackground":"#3a3d41"}}),C.editor.defineTheme("custom-light",{base:"vs",inherit:!0,rules:[{token:"comment",foreground:"6A9955"},{token:"keyword",foreground:"0000FF"},{token:"string",foreground:"A31515"},{token:"number",foreground:"098658"},{token:"tag",foreground:"800000"},{token:"attribute.name",foreground:"FF0000"},{token:"attribute.value",foreground:"0451A5"}],colors:{"editor.background":"#ffffff","editor.foreground":"#000000","editor.lineHighlightBackground":"#f5f5f5","editor.selectionBackground":"#add6ff","editor.inactiveSelectionBackground":"#e5ebf1"}}),C.editor.setTheme(n==="dark"?"custom-dark":"custom-light"),j.updateOptions({fontSize:14,fontFamily:"JetBrains Mono, Monaco, Consolas, monospace",lineHeight:22,minimap:{enabled:!0},scrollBeyondLastLine:!1,automaticLayout:!0,wordWrap:"on",formatOnPaste:!0,formatOnType:!0,suggestOnTriggerCharacters:!0,acceptSuggestionOnEnter:"on",tabCompletion:"on",wrappingIndent:"indent",lineNumbers:"on",glyphMargin:!0,folding:!0,foldingStrategy:"indentation",showFoldingControls:"always"}),setTimeout(()=>{j.layout()},100),j.addCommand(C.KeyMod.CtrlCmd|C.KeyCode.KeyS,()=>{E()}),j.addCommand(C.KeyMod.CtrlCmd|C.KeyCode.KeyC,()=>{j.getSelection().isEmpty()&&x()})}catch(F){console.error("Error mounting Monaco Editor:",F),o(F.message),s(!1),Me.error("Failed to load code editor")}},p=j=>{try{j!==void 0&&t(e.activeFile,j)}catch(C){console.error("Error updating file:",C),Me.error("Failed to save changes")}},f=()=>{const j=e.activeFile.split(".").pop();return{html:"html",css:"css",js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",java:"java",cpp:"cpp",c:"c",php:"php",rb:"ruby",go:"go",rs:"rust",swift:"swift",kt:"kotlin",scala:"scala",clj:"clojure",hs:"haskell",ml:"fsharp",fs:"fsharp",vb:"vb",sql:"sql",json:"json",xml:"xml",yaml:"yaml",yml:"yaml",md:"markdown",sh:"shell",bash:"shell",ps1:"powershell",dockerfile:"dockerfile"}[j]||"plaintext"},y=()=>{const j=e.files[e.activeFile]||"";navigator.clipboard.writeText(j),Me.success("Code copied to clipboard!")},x=()=>{const j=e.files[e.activeFile]||"";navigator.clipboard.writeText(j),Me.success("All code copied to clipboard!")},S=()=>{const j=e.files[e.activeFile]||"",C=new Blob([j],{type:"text/plain"}),F=URL.createObjectURL(C),G=document.createElement("a");G.href=F,G.download=e.activeFile,document.body.appendChild(G),G.click(),document.body.removeChild(G),URL.revokeObjectURL(F),Me.success(`Downloaded ${e.activeFile}`)},E=()=>{Me.success("Code saved!")},k=()=>{u.current&&(u.current.getAction("editor.action.formatDocument").run(),Me.success("Code formatted!"))},I={"index.html":"🌐","style.css":"🎨","script.js":"⚡","components.jsx":"🧩","package.json":"📦","README.md":"📖"},M=j=>I[j]||"📄";return c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"h-full flex flex-col bg-card border border-border rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border bg-muted/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-lg",children:M(e.activeFile)}),c.jsx("span",{className:"font-medium text-sm",children:e.activeFile}),c.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:f()})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:k,className:"p-2 hover:bg-muted rounded-md transition-colors",title:"Format Code (Ctrl+Shift+F)",children:c.jsx(Gg,{className:"h-4 w-4"})}),c.jsx("button",{onClick:y,className:"p-2 hover:bg-muted rounded-md transition-colors",title:"Copy Code",children:c.jsx(rp,{className:"h-4 w-4"})}),c.jsx("button",{onClick:S,className:"p-2 hover:bg-muted rounded-md transition-colors",title:"Download File",children:c.jsx(cl,{className:"h-4 w-4"})})]})]}),c.jsx("div",{className:"flex-1 relative h-full min-h-[500px]",children:i?c.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[c.jsx("div",{className:"text-red-500 text-lg mb-4",children:"⚠️ Editor Error"}),c.jsx("div",{className:"text-muted-foreground mb-4",children:i}),c.jsx("button",{onClick:()=>{o(null),s(!0),window.location.reload()},className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90",children:"Reload Editor"})]}):c.jsx(T7,{height:"100%",language:f(),value:e.files[e.activeFile]||"",onChange:p,onMount:d,theme:n==="dark"?"custom-dark":"custom-light",loading:c.jsxs("div",{className:"flex items-center justify-center h-full",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),c.jsx("span",{className:"ml-2",children:"Loading editor..."})]}),options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!1,cursorStyle:"line",automaticLayout:!0,mouseWheelZoom:!0,smoothScrolling:!0,cursorBlinking:"blink",cursorSmoothCaretAnimation:!0,renderLineHighlight:"line",renderWhitespace:"selection",renderIndentGuides:!0,highlightActiveIndentGuide:!0,bracketPairColorization:{enabled:!0},guides:{bracketPairs:!0,indentation:!0},scrollBeyondLastLine:!1,wordWrap:"on",wrappingIndent:"indent",lineNumbers:"on",glyphMargin:!0,folding:!0,foldingStrategy:"indentation",showFoldingControls:"always",unfoldOnClickAfterEnd:!1,contextmenu:!0,mouseWheelScrollSensitivity:1,fastScrollSensitivity:5,cursorSurroundingLines:3,cursorSurroundingLinesStyle:"default",scrollbar:{vertical:"auto",horizontal:"auto",verticalScrollbarSize:14,horizontalScrollbarSize:14,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,arrowSize:11,verticalSliderSize:14,horizontalSliderSize:14}}},`${e.activeFile}-${e.files[e.activeFile]?.length||0}`)}),c.jsxs("div",{className:"flex items-center justify-between p-2 border-t border-border bg-muted/30 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("span",{children:["Line ",u.current?.getPosition()?.lineNumber||1]}),c.jsxs("span",{children:["Column ",u.current?.getPosition()?.column||1]}),c.jsxs("span",{children:[e.files[e.activeFile]?.length||0," characters"]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:"Ctrl+S to save"}),c.jsx("span",{children:"•"}),c.jsx("span",{children:"Ctrl+C to copy all"})]})]})]})},C7=()=>{const{currentProject:n}=Jo(),e=A.useRef(null),[t,r]=A.useState(!1),[s,i]=A.useState(!1),[o,u]=A.useState(null);A.useEffect(()=>{d()},[n.files,n.activeFile]);const d=()=>{if(e.current){r(!0),u(null);try{const E=n.files["index.html"]||"",k=n.files["style.css"]||"",I=n.files["script.js"]||"";if(!E.trim()){p();return}let M=E;k.trim()&&(M=M.replace(/<link[^>]*rel=["']stylesheet["'][^>]*href=["']style\.css["'][^>]*>/gi,`<style>${k}</style>`),M===E&&M.includes("<head>")?M=M.replace("<head>",`<head>
<style>${k}</style>`):M===E&&!M.includes("<head>")&&(M.includes("<title>")?M=M.replace("</title>",`</title>
<style>${k}</style>`):M=`<style>${k}</style>
${M}`)),I.trim()&&(M=M.replace(/<script[^>]*src=["']script\.js["'][^>]*><\/script>/gi,`<script>${I}<\/script>`),M.includes("</body>")?M=M.replace("</body>",`<script>${I}<\/script>
</body>`):M+=`
<script>${I}<\/script>`),M.includes("<!DOCTYPE html>")||(M=`<!DOCTYPE html>
${M}`);const j=e.current;j.srcdoc=M,j.onload=()=>{r(!1),u(null)},j.onerror=()=>{r(!1),u("Failed to load preview")}}catch(E){console.error("Preview update error:",E),r(!1),u("Preview update failed")}}},p=()=>{if(!e.current)return;const E=`
      <!DOCTYPE html>
      <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Preview</title>
        <style>
          body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
          }
          .placeholder {
            text-align: center;
            padding: 40px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            max-width: 400px;
          }
          .placeholder h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            opacity: 0.9;
          }
          .placeholder p {
            font-size: 1.1rem;
            opacity: 0.8;
            line-height: 1.6;
          }
          .icon {
            font-size: 4rem;
            margin-bottom: 20px;
            display: block;
          }
        </style>
      </head>
      <body>
        <div class="placeholder">
          <span class="icon">🚀</span>
          <h2>Ready to Build</h2>
          <p>Generate some code to see your application preview here!</p>
        </div>
      </body>
      </html>
    `,k=e.current;k.srcdoc=E,r(!1)},f=()=>{d(),Me.success("Preview refreshed!")},y=()=>{if(!e.current)return;const E=e.current;if(E.srcdoc){const k=window.open("","_blank");k.document.write(E.srcdoc),k.document.close(),Me.success("Opened in new tab!")}else Me.error("No content to open")},x=()=>{document.fullscreenElement||i(!1)};A.useEffect(()=>(document.addEventListener("fullscreenchange",x),()=>{document.removeEventListener("fullscreenchange",x)}),[]);const S=async()=>{s?document.exitFullscreen&&await document.exitFullscreen():e.current.requestFullscreen&&await e.current.requestFullscreen()};return c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`h-full flex flex-col bg-card border border-border rounded-lg overflow-hidden ${s?"fixed inset-0 z-50 rounded-none":""}`,children:[c.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-border bg-muted/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("h3",{className:"font-semibold text-sm",children:"Live Preview"}),t&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[c.jsx("div",{className:"spinner"}),c.jsx("span",{children:"Updating..."})]}),o&&c.jsx("span",{className:"text-xs text-destructive",children:"Error"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:f,className:"p-2 hover:bg-muted rounded-md transition-colors",title:"Refresh Preview",children:c.jsx(Gg,{className:"h-4 w-4"})}),c.jsx("button",{onClick:y,className:"p-2 hover:bg-muted rounded-md transition-colors",title:"Open in New Tab",children:c.jsx(ul,{className:"h-4 w-4"})}),c.jsx("button",{onClick:S,className:"p-2 hover:bg-muted rounded-md transition-colors",title:s?"Exit Fullscreen":"Enter Fullscreen",children:s?c.jsx(G$,{className:"h-4 w-4"}):c.jsx(H$,{className:"h-4 w-4"})})]})]}),c.jsx("div",{className:"flex-1 relative bg-black",children:o?c.jsx("div",{className:"flex items-center justify-center h-full",children:c.jsxs("div",{className:"text-center p-6",children:[c.jsx("div",{className:"text-4xl mb-4",children:"⚠️"}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Preview Error"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:o}),c.jsx("button",{onClick:f,className:"px-4 py-2 bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Try Again"})]})}):c.jsx("iframe",{ref:e,className:"w-full h-full border-0",title:"Preview",sandbox:"allow-scripts allow-forms allow-popups",onLoad:()=>r(!1),onError:()=>{r(!1),u("Failed to load preview")}})}),c.jsxs("div",{className:"flex items-center justify-between p-2 border-t border-border bg-muted/30 text-xs text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{children:"Responsive"}),c.jsx("span",{children:"•"}),c.jsx("span",{children:"Auto-refresh"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:"Ctrl+R to refresh"}),c.jsx("span",{children:"•"}),c.jsx("span",{children:"F11 for fullscreen"})]})]})]})};function sR(n,e){return function(){return n.apply(e,arguments)}}const{toString:k7}=Object.prototype,{getPrototypeOf:rS}=Object,{iterator:ny,toStringTag:iR}=Symbol,ry=(n=>e=>{const t=k7.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Yr=n=>(n=n.toLowerCase(),e=>ry(e)===n),sy=n=>e=>typeof e===n,{isArray:Tu}=Array,cu=sy("undefined");function cp(n){return n!==null&&!cu(n)&&n.constructor!==null&&!cu(n.constructor)&&Gn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const oR=Yr("ArrayBuffer");function A7(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&oR(n.buffer),e}const P7=sy("string"),Gn=sy("function"),aR=sy("number"),up=n=>n!==null&&typeof n=="object",N7=n=>n===!0||n===!1,vf=n=>{if(ry(n)!=="object")return!1;const e=rS(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(iR in n)&&!(ny in n)},j7=n=>{if(!up(n)||cp(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},R7=Yr("Date"),D7=Yr("File"),O7=Yr("Blob"),M7=Yr("FileList"),L7=n=>up(n)&&Gn(n.pipe),F7=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||Gn(n.append)&&((e=ry(n))==="formdata"||e==="object"&&Gn(n.toString)&&n.toString()==="[object FormData]"))},V7=Yr("URLSearchParams"),[B7,U7,$7,z7]=["ReadableStream","Request","Response","Headers"].map(Yr),H7=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dp(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let r,s;if(typeof n!="object"&&(n=[n]),Tu(n))for(r=0,s=n.length;r<s;r++)e.call(null,n[r],r,n);else{if(cp(n))return;const i=t?Object.getOwnPropertyNames(n):Object.keys(n),o=i.length;let u;for(r=0;r<o;r++)u=i[r],e.call(null,n[u],u,n)}}function lR(n,e){if(cp(n))return null;e=e.toLowerCase();const t=Object.keys(n);let r=t.length,s;for(;r-- >0;)if(s=t[r],e===s.toLowerCase())return s;return null}const Ha=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,cR=n=>!cu(n)&&n!==Ha;function Bb(){const{caseless:n,skipUndefined:e}=cR(this)&&this||{},t={},r=(s,i)=>{const o=n&&lR(t,i)||i;vf(t[o])&&vf(s)?t[o]=Bb(t[o],s):vf(s)?t[o]=Bb({},s):Tu(s)?t[o]=s.slice():(!e||!cu(s))&&(t[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&dp(arguments[s],r);return t}const q7=(n,e,t,{allOwnKeys:r}={})=>(dp(e,(s,i)=>{t&&Gn(s)?n[i]=sR(s,t):n[i]=s},{allOwnKeys:r}),n),G7=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),W7=(n,e,t,r)=>{n.prototype=Object.create(e.prototype,r),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},K7=(n,e,t,r)=>{let s,i,o;const u={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),i=s.length;i-- >0;)o=s[i],(!r||r(o,n,e))&&!u[o]&&(e[o]=n[o],u[o]=!0);n=t!==!1&&rS(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},J7=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const r=n.indexOf(e,t);return r!==-1&&r===t},Q7=n=>{if(!n)return null;if(Tu(n))return n;let e=n.length;if(!aR(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},Y7=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&rS(Uint8Array)),X7=(n,e)=>{const r=(n&&n[ny]).call(n);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(n,i[0],i[1])}},Z7=(n,e)=>{let t;const r=[];for(;(t=n.exec(e))!==null;)r.push(t);return r},eG=Yr("HTMLFormElement"),tG=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,r,s){return r.toUpperCase()+s}),tC=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),nG=Yr("RegExp"),uR=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),r={};dp(t,(s,i)=>{let o;(o=e(s,i,n))!==!1&&(r[i]=o||s)}),Object.defineProperties(n,r)},rG=n=>{uR(n,(e,t)=>{if(Gn(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const r=n[t];if(Gn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},sG=(n,e)=>{const t={},r=s=>{s.forEach(i=>{t[i]=!0})};return Tu(n)?r(n):r(String(n).split(e)),t},iG=()=>{},oG=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function aG(n){return!!(n&&Gn(n.append)&&n[iR]==="FormData"&&n[ny])}const lG=n=>{const e=new Array(10),t=(r,s)=>{if(up(r)){if(e.indexOf(r)>=0)return;if(cp(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Tu(r)?[]:{};return dp(r,(o,u)=>{const d=t(o,s+1);!cu(d)&&(i[u]=d)}),e[s]=void 0,i}}return r};return t(n,0)},cG=Yr("AsyncFunction"),uG=n=>n&&(up(n)||Gn(n))&&Gn(n.then)&&Gn(n.catch),dR=((n,e)=>n?setImmediate:e?((t,r)=>(Ha.addEventListener("message",({source:s,data:i})=>{s===Ha&&i===t&&r.length&&r.shift()()},!1),s=>{r.push(s),Ha.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Gn(Ha.postMessage)),dG=typeof queueMicrotask<"u"?queueMicrotask.bind(Ha):typeof process<"u"&&process.nextTick||dR,hG=n=>n!=null&&Gn(n[ny]),ee={isArray:Tu,isArrayBuffer:oR,isBuffer:cp,isFormData:F7,isArrayBufferView:A7,isString:P7,isNumber:aR,isBoolean:N7,isObject:up,isPlainObject:vf,isEmptyObject:j7,isReadableStream:B7,isRequest:U7,isResponse:$7,isHeaders:z7,isUndefined:cu,isDate:R7,isFile:D7,isBlob:O7,isRegExp:nG,isFunction:Gn,isStream:L7,isURLSearchParams:V7,isTypedArray:Y7,isFileList:M7,forEach:dp,merge:Bb,extend:q7,trim:H7,stripBOM:G7,inherits:W7,toFlatObject:K7,kindOf:ry,kindOfTest:Yr,endsWith:J7,toArray:Q7,forEachEntry:X7,matchAll:Z7,isHTMLForm:eG,hasOwnProperty:tC,hasOwnProp:tC,reduceDescriptors:uR,freezeMethods:rG,toObjectSet:sG,toCamelCase:tG,noop:iG,toFiniteNumber:oG,findKey:lR,global:Ha,isContextDefined:cR,isSpecCompliantForm:aG,toJSONObject:lG,isAsyncFn:cG,isThenable:uG,setImmediate:dR,asap:dG,isIterable:hG};function He(n,e,t,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}ee.inherits(He,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ee.toJSONObject(this.config),code:this.code,status:this.status}}});const hR=He.prototype,pR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{pR[n]={value:n}});Object.defineProperties(He,pR);Object.defineProperty(hR,"isAxiosError",{value:!0});He.from=(n,e,t,r,s,i)=>{const o=Object.create(hR);ee.toFlatObject(n,o,function(f){return f!==Error.prototype},p=>p!=="isAxiosError");const u=n&&n.message?n.message:"Error",d=e==null&&n?n.code:e;return He.call(o,u,d,t,r,s),n&&o.cause==null&&Object.defineProperty(o,"cause",{value:n,configurable:!0}),o.name=n&&n.name||"Error",i&&Object.assign(o,i),o};const pG=null;function Ub(n){return ee.isPlainObject(n)||ee.isArray(n)}function mR(n){return ee.endsWith(n,"[]")?n.slice(0,-2):n}function nC(n,e,t){return n?n.concat(e).map(function(s,i){return s=mR(s),!t&&i?"["+s+"]":s}).join(t?".":""):e}function mG(n){return ee.isArray(n)&&!n.some(Ub)}const fG=ee.toFlatObject(ee,{},null,function(e){return/^is[A-Z]/.test(e)});function iy(n,e,t){if(!ee.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ee.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,I){return!ee.isUndefined(I[k])});const r=t.metaTokens,s=t.visitor||f,i=t.dots,o=t.indexes,d=(t.Blob||typeof Blob<"u"&&Blob)&&ee.isSpecCompliantForm(e);if(!ee.isFunction(s))throw new TypeError("visitor must be a function");function p(E){if(E===null)return"";if(ee.isDate(E))return E.toISOString();if(ee.isBoolean(E))return E.toString();if(!d&&ee.isBlob(E))throw new He("Blob is not supported. Use a Buffer instead.");return ee.isArrayBuffer(E)||ee.isTypedArray(E)?d&&typeof Blob=="function"?new Blob([E]):Buffer.from(E):E}function f(E,k,I){let M=E;if(E&&!I&&typeof E=="object"){if(ee.endsWith(k,"{}"))k=r?k:k.slice(0,-2),E=JSON.stringify(E);else if(ee.isArray(E)&&mG(E)||(ee.isFileList(E)||ee.endsWith(k,"[]"))&&(M=ee.toArray(E)))return k=mR(k),M.forEach(function(C,F){!(ee.isUndefined(C)||C===null)&&e.append(o===!0?nC([k],F,i):o===null?k:k+"[]",p(C))}),!1}return Ub(E)?!0:(e.append(nC(I,k,i),p(E)),!1)}const y=[],x=Object.assign(fG,{defaultVisitor:f,convertValue:p,isVisitable:Ub});function S(E,k){if(!ee.isUndefined(E)){if(y.indexOf(E)!==-1)throw Error("Circular reference detected in "+k.join("."));y.push(E),ee.forEach(E,function(M,j){(!(ee.isUndefined(M)||M===null)&&s.call(e,M,ee.isString(j)?j.trim():j,k,x))===!0&&S(M,k?k.concat(j):[j])}),y.pop()}}if(!ee.isObject(n))throw new TypeError("data must be an object");return S(n),e}function rC(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function sS(n,e){this._pairs=[],n&&iy(n,this,e)}const fR=sS.prototype;fR.append=function(e,t){this._pairs.push([e,t])};fR.toString=function(e){const t=e?function(r){return e.call(this,r,rC)}:rC;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function gG(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gR(n,e,t){if(!e)return n;const r=t&&t.encode||gG;ee.isFunction(t)&&(t={serialize:t});const s=t&&t.serialize;let i;if(s?i=s(e,t):i=ee.isURLSearchParams(e)?e.toString():new sS(e,t).toString(r),i){const o=n.indexOf("#");o!==-1&&(n=n.slice(0,o)),n+=(n.indexOf("?")===-1?"?":"&")+i}return n}class sC{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ee.forEach(this.handlers,function(r){r!==null&&e(r)})}}const yR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},yG=typeof URLSearchParams<"u"?URLSearchParams:sS,vG=typeof FormData<"u"?FormData:null,xG=typeof Blob<"u"?Blob:null,bG={isBrowser:!0,classes:{URLSearchParams:yG,FormData:vG,Blob:xG},protocols:["http","https","file","blob","url","data"]},iS=typeof window<"u"&&typeof document<"u",$b=typeof navigator=="object"&&navigator||void 0,wG=iS&&(!$b||["ReactNative","NativeScript","NS"].indexOf($b.product)<0),SG=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",_G=iS&&window.location.href||"http://localhost",EG=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:iS,hasStandardBrowserEnv:wG,hasStandardBrowserWebWorkerEnv:SG,navigator:$b,origin:_G},Symbol.toStringTag,{value:"Module"})),_n={...EG,...bG};function TG(n,e){return iy(n,new _n.classes.URLSearchParams,{visitor:function(t,r,s,i){return _n.isNode&&ee.isBuffer(t)?(this.append(r,t.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function IG(n){return ee.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function CG(n){const e={},t=Object.keys(n);let r;const s=t.length;let i;for(r=0;r<s;r++)i=t[r],e[i]=n[i];return e}function vR(n){function e(t,r,s,i){let o=t[i++];if(o==="__proto__")return!0;const u=Number.isFinite(+o),d=i>=t.length;return o=!o&&ee.isArray(s)?s.length:o,d?(ee.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!u):((!s[o]||!ee.isObject(s[o]))&&(s[o]=[]),e(t,r,s[o],i)&&ee.isArray(s[o])&&(s[o]=CG(s[o])),!u)}if(ee.isFormData(n)&&ee.isFunction(n.entries)){const t={};return ee.forEachEntry(n,(r,s)=>{e(IG(r),s,t,0)}),t}return null}function kG(n,e,t){if(ee.isString(n))try{return(e||JSON.parse)(n),ee.trim(n)}catch(r){if(r.name!=="SyntaxError")throw r}return(t||JSON.stringify)(n)}const hp={transitional:yR,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",s=r.indexOf("application/json")>-1,i=ee.isObject(e);if(i&&ee.isHTMLForm(e)&&(e=new FormData(e)),ee.isFormData(e))return s?JSON.stringify(vR(e)):e;if(ee.isArrayBuffer(e)||ee.isBuffer(e)||ee.isStream(e)||ee.isFile(e)||ee.isBlob(e)||ee.isReadableStream(e))return e;if(ee.isArrayBufferView(e))return e.buffer;if(ee.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return TG(e,this.formSerializer).toString();if((u=ee.isFileList(e))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return iy(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),kG(e)):e}],transformResponse:[function(e){const t=this.transitional||hp.transitional,r=t&&t.forcedJSONParsing,s=this.responseType==="json";if(ee.isResponse(e)||ee.isReadableStream(e))return e;if(e&&ee.isString(e)&&(r&&!this.responseType||s)){const o=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(u){if(o)throw u.name==="SyntaxError"?He.from(u,He.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:_n.classes.FormData,Blob:_n.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ee.forEach(["delete","get","head","post","put","patch"],n=>{hp.headers[n]={}});const AG=ee.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),PG=n=>{const e={};let t,r,s;return n&&n.split(`
`).forEach(function(o){s=o.indexOf(":"),t=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!t||e[t]&&AG[t])&&(t==="set-cookie"?e[t]?e[t].push(r):e[t]=[r]:e[t]=e[t]?e[t]+", "+r:r)}),e},iC=Symbol("internals");function Pd(n){return n&&String(n).trim().toLowerCase()}function xf(n){return n===!1||n==null?n:ee.isArray(n)?n.map(xf):String(n)}function NG(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=t.exec(n);)e[r[1]]=r[2];return e}const jG=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function Sx(n,e,t,r,s){if(ee.isFunction(r))return r.call(this,e,t);if(s&&(e=t),!!ee.isString(e)){if(ee.isString(r))return e.indexOf(r)!==-1;if(ee.isRegExp(r))return r.test(e)}}function RG(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function DG(n,e){const t=ee.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(n,r+t,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Wn=class{constructor(e){e&&this.set(e)}set(e,t,r){const s=this;function i(u,d,p){const f=Pd(d);if(!f)throw new Error("header name must be a non-empty string");const y=ee.findKey(s,f);(!y||s[y]===void 0||p===!0||p===void 0&&s[y]!==!1)&&(s[y||d]=xf(u))}const o=(u,d)=>ee.forEach(u,(p,f)=>i(p,f,d));if(ee.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(ee.isString(e)&&(e=e.trim())&&!jG(e))o(PG(e),t);else if(ee.isObject(e)&&ee.isIterable(e)){let u={},d,p;for(const f of e){if(!ee.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[p=f[0]]=(d=u[p])?ee.isArray(d)?[...d,f[1]]:[d,f[1]]:f[1]}o(u,t)}else e!=null&&i(t,e,r);return this}get(e,t){if(e=Pd(e),e){const r=ee.findKey(this,e);if(r){const s=this[r];if(!t)return s;if(t===!0)return NG(s);if(ee.isFunction(t))return t.call(this,s,r);if(ee.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Pd(e),e){const r=ee.findKey(this,e);return!!(r&&this[r]!==void 0&&(!t||Sx(this,this[r],r,t)))}return!1}delete(e,t){const r=this;let s=!1;function i(o){if(o=Pd(o),o){const u=ee.findKey(r,o);u&&(!t||Sx(r,r[u],u,t))&&(delete r[u],s=!0)}}return ee.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let r=t.length,s=!1;for(;r--;){const i=t[r];(!e||Sx(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const t=this,r={};return ee.forEach(this,(s,i)=>{const o=ee.findKey(r,i);if(o){t[o]=xf(s),delete t[i];return}const u=e?RG(i):String(i).trim();u!==i&&delete t[i],t[u]=xf(s),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ee.forEach(this,(r,s)=>{r!=null&&r!==!1&&(t[s]=e&&ee.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[iC]=this[iC]={accessors:{}}).accessors,s=this.prototype;function i(o){const u=Pd(o);r[u]||(DG(s,o),r[u]=!0)}return ee.isArray(e)?e.forEach(i):i(e),this}};Wn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ee.reduceDescriptors(Wn.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(r){this[t]=r}}});ee.freezeMethods(Wn);function _x(n,e){const t=this||hp,r=e||t,s=Wn.from(r.headers);let i=r.data;return ee.forEach(n,function(u){i=u.call(t,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function xR(n){return!!(n&&n.__CANCEL__)}function Iu(n,e,t){He.call(this,n??"canceled",He.ERR_CANCELED,e,t),this.name="CanceledError"}ee.inherits(Iu,He,{__CANCEL__:!0});function bR(n,e,t){const r=t.config.validateStatus;!t.status||!r||r(t.status)?n(t):e(new He("Request failed with status code "+t.status,[He.ERR_BAD_REQUEST,He.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function OG(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function MG(n,e){n=n||10;const t=new Array(n),r=new Array(n);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(d){const p=Date.now(),f=r[i];o||(o=p),t[s]=d,r[s]=p;let y=i,x=0;for(;y!==s;)x+=t[y++],y=y%n;if(s=(s+1)%n,s===i&&(i=(i+1)%n),p-o<e)return;const S=f&&p-f;return S?Math.round(x*1e3/S):void 0}}function LG(n,e){let t=0,r=1e3/e,s,i;const o=(p,f=Date.now())=>{t=f,s=null,i&&(clearTimeout(i),i=null),n(...p)};return[(...p)=>{const f=Date.now(),y=f-t;y>=r?o(p,f):(s=p,i||(i=setTimeout(()=>{i=null,o(s)},r-y)))},()=>s&&o(s)]}const og=(n,e,t=3)=>{let r=0;const s=MG(50,250);return LG(i=>{const o=i.loaded,u=i.lengthComputable?i.total:void 0,d=o-r,p=s(d),f=o<=u;r=o;const y={loaded:o,total:u,progress:u?o/u:void 0,bytes:d,rate:p||void 0,estimated:p&&u&&f?(u-o)/p:void 0,event:i,lengthComputable:u!=null,[e?"download":"upload"]:!0};n(y)},t)},oC=(n,e)=>{const t=n!=null;return[r=>e[0]({lengthComputable:t,total:n,loaded:r}),e[1]]},aC=n=>(...e)=>ee.asap(()=>n(...e)),FG=_n.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,_n.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(_n.origin),_n.navigator&&/(msie|trident)/i.test(_n.navigator.userAgent)):()=>!0,VG=_n.hasStandardBrowserEnv?{write(n,e,t,r,s,i){const o=[n+"="+encodeURIComponent(e)];ee.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),ee.isString(r)&&o.push("path="+r),ee.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function BG(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function UG(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function wR(n,e,t){let r=!BG(e);return n&&(r||t==!1)?UG(n,e):e}const lC=n=>n instanceof Wn?{...n}:n;function dl(n,e){e=e||{};const t={};function r(p,f,y,x){return ee.isPlainObject(p)&&ee.isPlainObject(f)?ee.merge.call({caseless:x},p,f):ee.isPlainObject(f)?ee.merge({},f):ee.isArray(f)?f.slice():f}function s(p,f,y,x){if(ee.isUndefined(f)){if(!ee.isUndefined(p))return r(void 0,p,y,x)}else return r(p,f,y,x)}function i(p,f){if(!ee.isUndefined(f))return r(void 0,f)}function o(p,f){if(ee.isUndefined(f)){if(!ee.isUndefined(p))return r(void 0,p)}else return r(void 0,f)}function u(p,f,y){if(y in e)return r(p,f);if(y in n)return r(void 0,p)}const d={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:u,headers:(p,f,y)=>s(lC(p),lC(f),y,!0)};return ee.forEach(Object.keys({...n,...e}),function(f){const y=d[f]||s,x=y(n[f],e[f],f);ee.isUndefined(x)&&y!==u||(t[f]=x)}),t}const SR=n=>{const e=dl({},n);let{data:t,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:u}=e;if(e.headers=o=Wn.from(o),e.url=gR(wR(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),u&&o.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),ee.isFormData(t)){if(_n.hasStandardBrowserEnv||_n.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ee.isFunction(t.getHeaders)){const d=t.getHeaders(),p=["content-type","content-length"];Object.entries(d).forEach(([f,y])=>{p.includes(f.toLowerCase())&&o.set(f,y)})}}if(_n.hasStandardBrowserEnv&&(r&&ee.isFunction(r)&&(r=r(e)),r||r!==!1&&FG(e.url))){const d=s&&i&&VG.read(i);d&&o.set(s,d)}return e},$G=typeof XMLHttpRequest<"u",zG=$G&&function(n){return new Promise(function(t,r){const s=SR(n);let i=s.data;const o=Wn.from(s.headers).normalize();let{responseType:u,onUploadProgress:d,onDownloadProgress:p}=s,f,y,x,S,E;function k(){S&&S(),E&&E(),s.cancelToken&&s.cancelToken.unsubscribe(f),s.signal&&s.signal.removeEventListener("abort",f)}let I=new XMLHttpRequest;I.open(s.method.toUpperCase(),s.url,!0),I.timeout=s.timeout;function M(){if(!I)return;const C=Wn.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),G={data:!u||u==="text"||u==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:C,config:n,request:I};bR(function(N){t(N),k()},function(N){r(N),k()},G),I=null}"onloadend"in I?I.onloadend=M:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(M)},I.onabort=function(){I&&(r(new He("Request aborted",He.ECONNABORTED,n,I)),I=null)},I.onerror=function(F){const G=F&&F.message?F.message:"Network Error",q=new He(G,He.ERR_NETWORK,n,I);q.event=F||null,r(q),I=null},I.ontimeout=function(){let F=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const G=s.transitional||yR;s.timeoutErrorMessage&&(F=s.timeoutErrorMessage),r(new He(F,G.clarifyTimeoutError?He.ETIMEDOUT:He.ECONNABORTED,n,I)),I=null},i===void 0&&o.setContentType(null),"setRequestHeader"in I&&ee.forEach(o.toJSON(),function(F,G){I.setRequestHeader(G,F)}),ee.isUndefined(s.withCredentials)||(I.withCredentials=!!s.withCredentials),u&&u!=="json"&&(I.responseType=s.responseType),p&&([x,E]=og(p,!0),I.addEventListener("progress",x)),d&&I.upload&&([y,S]=og(d),I.upload.addEventListener("progress",y),I.upload.addEventListener("loadend",S)),(s.cancelToken||s.signal)&&(f=C=>{I&&(r(!C||C.type?new Iu(null,n,I):C),I.abort(),I=null)},s.cancelToken&&s.cancelToken.subscribe(f),s.signal&&(s.signal.aborted?f():s.signal.addEventListener("abort",f)));const j=OG(s.url);if(j&&_n.protocols.indexOf(j)===-1){r(new He("Unsupported protocol "+j+":",He.ERR_BAD_REQUEST,n));return}I.send(i||null)})},HG=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let r=new AbortController,s;const i=function(p){if(!s){s=!0,u();const f=p instanceof Error?p:this.reason;r.abort(f instanceof He?f:new Iu(f instanceof Error?f.message:f))}};let o=e&&setTimeout(()=>{o=null,i(new He(`timeout ${e} of ms exceeded`,He.ETIMEDOUT))},e);const u=()=>{n&&(o&&clearTimeout(o),o=null,n.forEach(p=>{p.unsubscribe?p.unsubscribe(i):p.removeEventListener("abort",i)}),n=null)};n.forEach(p=>p.addEventListener("abort",i));const{signal:d}=r;return d.unsubscribe=()=>ee.asap(u),d}},qG=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let r=0,s;for(;r<t;)s=r+e,yield n.slice(r,s),r=s},GG=async function*(n,e){for await(const t of WG(n))yield*qG(t,e)},WG=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:r}=await e.read();if(t)break;yield r}}finally{await e.cancel()}},cC=(n,e,t,r)=>{const s=GG(n,e);let i=0,o,u=d=>{o||(o=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:p,value:f}=await s.next();if(p){u(),d.close();return}let y=f.byteLength;if(t){let x=i+=y;t(x)}d.enqueue(new Uint8Array(f))}catch(p){throw u(p),p}},cancel(d){return u(d),s.return()}},{highWaterMark:2})},uC=64*1024,{isFunction:Jm}=ee,KG=(({Request:n,Response:e})=>({Request:n,Response:e}))(ee.global),{ReadableStream:dC,TextEncoder:hC}=ee.global,pC=(n,...e)=>{try{return!!n(...e)}catch{return!1}},JG=n=>{n=ee.merge.call({skipUndefined:!0},KG,n);const{fetch:e,Request:t,Response:r}=n,s=e?Jm(e):typeof fetch=="function",i=Jm(t),o=Jm(r);if(!s)return!1;const u=s&&Jm(dC),d=s&&(typeof hC=="function"?(E=>k=>E.encode(k))(new hC):async E=>new Uint8Array(await new t(E).arrayBuffer())),p=i&&u&&pC(()=>{let E=!1;const k=new t(_n.origin,{body:new dC,method:"POST",get duplex(){return E=!0,"half"}}).headers.has("Content-Type");return E&&!k}),f=o&&u&&pC(()=>ee.isReadableStream(new r("").body)),y={stream:f&&(E=>E.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(E=>{!y[E]&&(y[E]=(k,I)=>{let M=k&&k[E];if(M)return M.call(k);throw new He(`Response type '${E}' is not supported`,He.ERR_NOT_SUPPORT,I)})});const x=async E=>{if(E==null)return 0;if(ee.isBlob(E))return E.size;if(ee.isSpecCompliantForm(E))return(await new t(_n.origin,{method:"POST",body:E}).arrayBuffer()).byteLength;if(ee.isArrayBufferView(E)||ee.isArrayBuffer(E))return E.byteLength;if(ee.isURLSearchParams(E)&&(E=E+""),ee.isString(E))return(await d(E)).byteLength},S=async(E,k)=>{const I=ee.toFiniteNumber(E.getContentLength());return I??x(k)};return async E=>{let{url:k,method:I,data:M,signal:j,cancelToken:C,timeout:F,onDownloadProgress:G,onUploadProgress:q,responseType:N,headers:_,withCredentials:R="same-origin",fetchOptions:O}=SR(E),B=e||fetch;N=N?(N+"").toLowerCase():"text";let z=HG([j,C&&C.toAbortSignal()],F),L=null;const Te=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let Ce;try{if(q&&p&&I!=="get"&&I!=="head"&&(Ce=await S(_,M))!==0){let U=new t(k,{method:"POST",body:M,duplex:"half"}),te;if(ee.isFormData(M)&&(te=U.headers.get("content-type"))&&_.setContentType(te),U.body){const[Ne,Pe]=oC(Ce,og(aC(q)));M=cC(U.body,uC,Ne,Pe)}}ee.isString(R)||(R=R?"include":"omit");const we=i&&"credentials"in t.prototype,$e={...O,signal:z,method:I.toUpperCase(),headers:_.normalize().toJSON(),body:M,duplex:"half",credentials:we?R:void 0};L=i&&new t(k,$e);let le=await(i?B(L,O):B(k,$e));const ie=f&&(N==="stream"||N==="response");if(f&&(G||ie&&Te)){const U={};["status","statusText","headers"].forEach(Ve=>{U[Ve]=le[Ve]});const te=ee.toFiniteNumber(le.headers.get("content-length")),[Ne,Pe]=G&&oC(te,og(aC(G),!0))||[];le=new r(cC(le.body,uC,Ne,()=>{Pe&&Pe(),Te&&Te()}),U)}N=N||"text";let se=await y[ee.findKey(y,N)||"text"](le,E);return!ie&&Te&&Te(),await new Promise((U,te)=>{bR(U,te,{data:se,headers:Wn.from(le.headers),status:le.status,statusText:le.statusText,config:E,request:L})})}catch(we){throw Te&&Te(),we&&we.name==="TypeError"&&/Load failed|fetch/i.test(we.message)?Object.assign(new He("Network Error",He.ERR_NETWORK,E,L),{cause:we.cause||we}):He.from(we,we&&we.code,E,L)}}},QG=new Map,_R=n=>{let e=n?n.env:{};const{fetch:t,Request:r,Response:s}=e,i=[r,s,t];let o=i.length,u=o,d,p,f=QG;for(;u--;)d=i[u],p=f.get(d),p===void 0&&f.set(d,p=u?new Map:JG(e)),f=p;return p};_R();const zb={http:pG,xhr:zG,fetch:{get:_R}};ee.forEach(zb,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const mC=n=>`- ${n}`,YG=n=>ee.isFunction(n)||n===null||n===!1,ER={getAdapter:(n,e)=>{n=ee.isArray(n)?n:[n];const{length:t}=n;let r,s;const i={};for(let o=0;o<t;o++){r=n[o];let u;if(s=r,!YG(r)&&(s=zb[(u=String(r)).toLowerCase()],s===void 0))throw new He(`Unknown adapter '${u}'`);if(s&&(ee.isFunction(s)||(s=s.get(e))))break;i[u||"#"+o]=s}if(!s){const o=Object.entries(i).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=t?o.length>1?`since :
`+o.map(mC).join(`
`):" "+mC(o[0]):"as no adapter specified";throw new He("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return s},adapters:zb};function Ex(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Iu(null,n)}function fC(n){return Ex(n),n.headers=Wn.from(n.headers),n.data=_x.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),ER.getAdapter(n.adapter||hp.adapter,n)(n).then(function(r){return Ex(n),r.data=_x.call(n,n.transformResponse,r),r.headers=Wn.from(r.headers),r},function(r){return xR(r)||(Ex(n),r&&r.response&&(r.response.data=_x.call(n,n.transformResponse,r.response),r.response.headers=Wn.from(r.response.headers))),Promise.reject(r)})}const TR="1.12.2",oy={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{oy[n]=function(r){return typeof r===n||"a"+(e<1?"n ":" ")+n}});const gC={};oy.transitional=function(e,t,r){function s(i,o){return"[Axios v"+TR+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,u)=>{if(e===!1)throw new He(s(o," has been removed"+(t?" in "+t:"")),He.ERR_DEPRECATED);return t&&!gC[o]&&(gC[o]=!0,console.warn(s(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(i,o,u):!0}};oy.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function XG(n,e,t){if(typeof n!="object")throw new He("options must be an object",He.ERR_BAD_OPTION_VALUE);const r=Object.keys(n);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const u=n[i],d=u===void 0||o(u,i,n);if(d!==!0)throw new He("option "+i+" must be "+d,He.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new He("Unknown option "+i,He.ERR_BAD_OPTION)}}const bf={assertOptions:XG,validators:oy},gs=bf.validators;let Ya=class{constructor(e){this.defaults=e||{},this.interceptors={request:new sC,response:new sC}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=dl(this.defaults,t);const{transitional:r,paramsSerializer:s,headers:i}=t;r!==void 0&&bf.assertOptions(r,{silentJSONParsing:gs.transitional(gs.boolean),forcedJSONParsing:gs.transitional(gs.boolean),clarifyTimeoutError:gs.transitional(gs.boolean)},!1),s!=null&&(ee.isFunction(s)?t.paramsSerializer={serialize:s}:bf.assertOptions(s,{encode:gs.function,serialize:gs.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),bf.assertOptions(t,{baseUrl:gs.spelling("baseURL"),withXsrfToken:gs.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&ee.merge(i.common,i[t.method]);i&&ee.forEach(["delete","get","head","post","put","patch","common"],E=>{delete i[E]}),t.headers=Wn.concat(o,i);const u=[];let d=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(t)===!1||(d=d&&k.synchronous,u.unshift(k.fulfilled,k.rejected))});const p=[];this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});let f,y=0,x;if(!d){const E=[fC.bind(this),void 0];for(E.unshift(...u),E.push(...p),x=E.length,f=Promise.resolve(t);y<x;)f=f.then(E[y++],E[y++]);return f}x=u.length;let S=t;for(;y<x;){const E=u[y++],k=u[y++];try{S=E(S)}catch(I){k.call(this,I);break}}try{f=fC.call(this,S)}catch(E){return Promise.reject(E)}for(y=0,x=p.length;y<x;)f=f.then(p[y++],p[y++]);return f}getUri(e){e=dl(this.defaults,e);const t=wR(e.baseURL,e.url,e.allowAbsoluteUrls);return gR(t,e.params,e.paramsSerializer)}};ee.forEach(["delete","get","head","options"],function(e){Ya.prototype[e]=function(t,r){return this.request(dl(r||{},{method:e,url:t,data:(r||{}).data}))}});ee.forEach(["post","put","patch"],function(e){function t(r){return function(i,o,u){return this.request(dl(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Ya.prototype[e]=t(),Ya.prototype[e+"Form"]=t(!0)});let ZG=class IR{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(i){t=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(u=>{r.subscribe(u),i=u}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,u){r.reason||(r.reason=new Iu(i,o,u),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=r=>{e.abort(r)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new IR(function(s){e=s}),cancel:e}}};function eW(n){return function(t){return n.apply(null,t)}}function tW(n){return ee.isObject(n)&&n.isAxiosError===!0}const Hb={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Hb).forEach(([n,e])=>{Hb[e]=n});function CR(n){const e=new Ya(n),t=sR(Ya.prototype.request,e);return ee.extend(t,Ya.prototype,e,{allOwnKeys:!0}),ee.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return CR(dl(n,s))},t}const At=CR(hp);At.Axios=Ya;At.CanceledError=Iu;At.CancelToken=ZG;At.isCancel=xR;At.VERSION=TR;At.toFormData=iy;At.AxiosError=He;At.Cancel=At.CanceledError;At.all=function(e){return Promise.all(e)};At.spread=eW;At.isAxiosError=tW;At.mergeConfig=dl;At.AxiosHeaders=Wn;At.formToJSON=n=>vR(ee.isHTMLForm(n)?new FormData(n):n);At.getAdapter=ER.getAdapter;At.HttpStatusCode=Hb;At.default=At;const{Axios:sQ,AxiosError:iQ,CanceledError:oQ,isCancel:aQ,CancelToken:lQ,VERSION:cQ,all:uQ,Cancel:dQ,isAxiosError:hQ,spread:pQ,toFormData:mQ,AxiosHeaders:fQ,HttpStatusCode:gQ,formToJSON:yQ,getAdapter:vQ,mergeConfig:xQ}=At;class nW{constructor(){this.supportedFrameworks={"react-native":{name:"React Native",description:"Cross-platform mobile apps with JavaScript",platforms:["ios","android"],languages:["javascript","typescript"],features:["native-performance","hot-reload","large-community"]},flutter:{name:"Flutter",description:"Cross-platform apps with Dart",platforms:["ios","android","web"],languages:["dart"],features:["fast-development","beautiful-ui","google-backed"]},ionic:{name:"Ionic",description:"Cross-platform apps with web technologies",platforms:["ios","android","web"],languages:["javascript","typescript"],features:["web-based","easy-deployment","pwa-ready"]},pwa:{name:"Progressive Web App",description:"Web apps that work like native apps",platforms:["ios","android","web"],languages:["javascript","html","css"],features:["no-app-store","instant-updates","cross-platform"]},capacitor:{name:"Capacitor",description:"Native apps from web technologies",platforms:["ios","android","web"],languages:["javascript","typescript"],features:["web-to-native","plugin-system","ionic-integration"]}}}async generateMobileApp(e,t={}){const r=this.detectFramework(e,t),s=this.detectPlatform(e,t);switch(console.log(`📱 Generating ${r.name} app for ${s}...`),r.id){case"react-native":return this.generateReactNativeApp(e,t,s);case"flutter":return this.generateFlutterApp(e,t,s);case"ionic":return this.generateIonicApp(e,t,s);case"pwa":return this.generatePWAApp(e,t,s);case"capacitor":return this.generateCapacitorApp(e,t,s);default:return this.generatePWAApp(e,t,s)}}detectFramework(e,t){const r=e.toLowerCase(),s=t.framework||t.mobileFramework;return r.includes("react native")||r.includes("react-native")?this.supportedFrameworks["react-native"]:r.includes("flutter")?this.supportedFrameworks.flutter:r.includes("ionic")?this.supportedFrameworks.ionic:r.includes("capacitor")?this.supportedFrameworks.capacitor:r.includes("pwa")||r.includes("progressive web app")?this.supportedFrameworks.pwa:s&&this.supportedFrameworks[s]?this.supportedFrameworks[s]:r.includes("game")||r.includes("performance")?this.supportedFrameworks["react-native"]:r.includes("ui")||r.includes("design")||r.includes("beautiful")?this.supportedFrameworks.flutter:r.includes("web")||r.includes("website")||r.includes("simple")?this.supportedFrameworks.pwa:this.supportedFrameworks.pwa}detectPlatform(e,t){const r=e.toLowerCase(),s=t.platform||t.mobilePlatform;return s||(r.includes("ios")||r.includes("iphone")||r.includes("apple")?"ios":r.includes("android")||r.includes("google play")?"android":"cross-platform")}generateReactNativeApp(e,t,r){const s=t.projectName||"DreamBuildApp",i=s.toLowerCase().replace(/[^a-z0-9]/g,"");return{"package.json":this.generateReactNativePackageJSON(s,t),"App.js":this.generateReactNativeAppJS(s,e,t),"App.json":this.generateReactNativeAppJSON(s,t),"metro.config.js":this.generateMetroConfig(),"babel.config.js":this.generateBabelConfig(),"android/app/build.gradle":this.generateAndroidBuildGradle(s,i),"android/app/src/main/AndroidManifest.xml":this.generateAndroidManifest(s,i),"ios/Info.plist":this.generateIOSInfoPlist(s,i),"README.md":this.generateReactNativeREADME(s,e,t),"app.json":this.generateExpoConfig(s,t)}}generateFlutterApp(e,t,r){const s=t.projectName||"dreambuild_app",i=s.toLowerCase().replace(/[^a-z0-9]/g,"");return{"pubspec.yaml":this.generateFlutterPubspec(s,t),"lib/main.dart":this.generateFlutterMain(s,e,t),"android/app/build.gradle":this.generateFlutterAndroidBuildGradle(s,i),"android/app/src/main/AndroidManifest.xml":this.generateFlutterAndroidManifest(s,i),"ios/Runner/Info.plist":this.generateFlutterIOSInfoPlist(s,i),"README.md":this.generateFlutterREADME(s,e,t)}}generateIonicApp(e,t,r){const s=t.projectName||"DreamBuildApp",i=s.toLowerCase().replace(/[^a-z0-9]/g,"");return{"package.json":this.generateIonicPackageJSON(s,t),"ionic.config.json":this.generateIonicConfig(s,t),"src/app/app.component.ts":this.generateIonicAppComponent(s,e,t),"src/app/app.module.ts":this.generateIonicAppModule(s,t),"src/index.html":this.generateIonicIndexHTML(s,t),"capacitor.config.json":this.generateCapacitorConfig(s,t),"android/app/build.gradle":this.generateCapacitorAndroidBuildGradle(s,i),"ios/App/App/Info.plist":this.generateCapacitorIOSInfoPlist(s,i),"README.md":this.generateIonicREADME(s,e,t)}}generatePWAApp(e,t,r){const s=t.projectName||"DreamBuild App";return{"index.html":this.generatePWAHTML(s,e,t),"manifest.json":this.generatePWAManifest(s,t),"sw.js":this.generatePWAServiceWorker(s,t),"style.css":this.generatePWACSS(s,t),"script.js":this.generatePWAJavaScript(s,e,t),"package.json":this.generatePWAPackageJSON(s,t),"README.md":this.generatePWAREADME(s,e,t)}}generateCapacitorApp(e,t,r){const s=t.projectName||"DreamBuildApp",i=s.toLowerCase().replace(/[^a-z0-9]/g,"");return{"package.json":this.generateCapacitorPackageJSON(s,t),"capacitor.config.json":this.generateCapacitorConfig(s,t),"src/index.html":this.generateCapacitorIndexHTML(s,t),"src/main.ts":this.generateCapacitorMain(s,e,t),"src/app/app.component.ts":this.generateCapacitorAppComponent(s,e,t),"android/app/build.gradle":this.generateCapacitorAndroidBuildGradle(s,i),"ios/App/App/Info.plist":this.generateCapacitorIOSInfoPlist(s,i),"README.md":this.generateCapacitorREADME(s,e,t)}}generateReactNativePackageJSON(e,t){return JSON.stringify({name:e.toLowerCase().replace(/[^a-z0-9]/g,"-"),version:"1.0.0",description:`Built with DreamBuild - ${e}`,main:"node_modules/expo/AppEntry.js",scripts:{start:"expo start",android:"expo start --android",ios:"expo start --ios",web:"expo start --web","build:android":"eas build --platform android","build:ios":"eas build --platform ios"},dependencies:{expo:"~50.0.0",react:"18.2.0","react-native":"0.73.0","@expo/vector-icons":"^14.0.0","react-native-safe-area-context":"4.8.2","react-native-screens":"~3.29.0","@react-navigation/native":"^6.1.9","@react-navigation/stack":"^6.3.20"},devDependencies:{"@babel/core":"^7.20.0"},keywords:["react-native","expo","mobile","dreambuild"],author:"DreamBuild AI",license:"MIT"},null,2)}generateReactNativeAppJS(e,t,r){return`import React from 'react';
import { StyleSheet, Text, View, SafeAreaView, ScrollView } from 'react-native';
import { StatusBar } from 'expo-status-bar';

export default function App() {
  return (
    <SafeAreaView style={styles.container}>
      <StatusBar style="auto" />
      <ScrollView contentContainerStyle={styles.content}>
        <View style={styles.header}>
          <Text style={styles.title}>🚀 ${e}</Text>
          <Text style={styles.subtitle}>Built with DreamBuild</Text>
        </View>
        
        <View style={styles.features}>
          <Text style={styles.featureTitle}>Features:</Text>
          <Text style={styles.feature}>✅ Cross-platform (iOS & Android)</Text>
          <Text style={styles.feature}>✅ React Native + Expo</Text>
          <Text style={styles.feature}>✅ Native performance</Text>
          <Text style={styles.feature}>✅ Hot reload development</Text>
        </View>
        
        <View style={styles.info}>
          <Text style={styles.infoText}>
            This is a React Native app generated by DreamBuild AI.
            Edit App.js to customize your app.
          </Text>
        </View>
      </ScrollView>
    </SafeAreaView>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#f8fafc',
  },
  content: {
    padding: 20,
    paddingTop: 40,
  },
  header: {
    alignItems: 'center',
    marginBottom: 40,
  },
  title: {
    fontSize: 28,
    fontWeight: 'bold',
    color: '#1e293b',
    marginBottom: 8,
  },
  subtitle: {
    fontSize: 16,
    color: '#64748b',
  },
  features: {
    backgroundColor: 'white',
    padding: 20,
    borderRadius: 12,
    marginBottom: 20,
    shadowColor: '#000',
    shadowOffset: { width: 0, height: 2 },
    shadowOpacity: 0.1,
    shadowRadius: 4,
    elevation: 3,
  },
  featureTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: '#1e293b',
    marginBottom: 12,
  },
  feature: {
    fontSize: 16,
    color: '#475569',
    marginBottom: 8,
  },
  info: {
    backgroundColor: '#eff6ff',
    padding: 16,
    borderRadius: 8,
    borderLeftWidth: 4,
    borderLeftColor: '#3b82f6',
  },
  infoText: {
    fontSize: 14,
    color: '#1e40af',
    lineHeight: 20,
  },
});
`}generateReactNativeAppJSON(e,t){return JSON.stringify({expo:{name:e,slug:e.toLowerCase().replace(/[^a-z0-9]/g,"-"),version:"1.0.0",orientation:"portrait",icon:"./assets/icon.png",userInterfaceStyle:"light",splash:{image:"./assets/splash.png",resizeMode:"contain",backgroundColor:"#ffffff"},assetBundlePatterns:["**/*"],ios:{supportsTablet:!0,bundleIdentifier:`com.dreambuild.${e.toLowerCase().replace(/[^a-z0-9]/g,"")}`},android:{adaptiveIcon:{foregroundImage:"./assets/adaptive-icon.png",backgroundColor:"#ffffff"},package:`com.dreambuild.${e.toLowerCase().replace(/[^a-z0-9]/g,"")}`},web:{favicon:"./assets/favicon.png"}}},null,2)}generateFlutterPubspec(e,t){return`name: ${e.toLowerCase().replace(/[^a-z0-9]/g,"_")}
description: Built with DreamBuild - ${e}
publish_to: 'none'
version: 1.0.0+1

environment:
  sdk: '>=3.0.0 <4.0.0'
  flutter: ">=3.10.0"

dependencies:
  flutter:
    sdk: flutter
  cupertino_icons: ^1.0.2
  http: ^1.1.0
  shared_preferences: ^2.2.2

dev_dependencies:
  flutter_test:
    sdk: flutter
  flutter_lints: ^3.0.0

flutter:
  uses-material-design: true
  assets:
    - assets/images/
`}generateFlutterMain(e,t,r){return`import 'package:flutter/material.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: '${e}',
      theme: ThemeData(
        colorScheme: ColorScheme.fromSeed(seedColor: Colors.blue),
        useMaterial3: true,
      ),
      home: const MyHomePage(title: '${e}'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({super.key, required this.title});

  final String title;

  @override
  State<MyHomePage> createState() => _MyHomePageState();
}

class _MyHomePageState extends State<MyHomePage> {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        backgroundColor: Theme.of(context).colorScheme.inversePrimary,
        title: Text(widget.title),
      ),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.center,
          children: <Widget>[
            const Icon(
              Icons.rocket_launch,
              size: 80,
              color: Colors.blue,
            ),
            const SizedBox(height: 20),
            Text(
              '🚀 ${e}',
              style: Theme.of(context).textTheme.headlineMedium?.copyWith(
                fontWeight: FontWeight.bold,
              ),
            ),
            const SizedBox(height: 10),
            Text(
              'Built with DreamBuild',
              style: Theme.of(context).textTheme.bodyLarge?.copyWith(
                color: Colors.grey[600],
              ),
            ),
            const SizedBox(height: 40),
            Card(
              margin: const EdgeInsets.all(20),
              child: Padding(
                padding: const EdgeInsets.all(20),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      'Features:',
                      style: Theme.of(context).textTheme.titleLarge?.copyWith(
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    const SizedBox(height: 10),
                    const FeatureItem(icon: Icons.check_circle, text: 'Cross-platform (iOS & Android)'),
                    const FeatureItem(icon: Icons.check_circle, text: 'Flutter framework'),
                    const FeatureItem(icon: Icons.check_circle, text: 'Material Design 3'),
                    const FeatureItem(icon: Icons.check_circle, text: 'Hot reload development'),
                  ],
                ),
              ),
            ),
          ],
        ),
      ),
    );
  }
}

class FeatureItem extends StatelessWidget {
  final IconData icon;
  final String text;

  const FeatureItem({
    super.key,
    required this.icon,
    required this.text,
  });

  @override
  Widget build(BuildContext context) {
    return Padding(
      padding: const EdgeInsets.symmetric(vertical: 4),
      child: Row(
        children: [
          Icon(icon, color: Colors.green, size: 20),
          const SizedBox(width: 8),
          Text(text),
        ],
      ),
    );
  }
}
`}generatePWAHTML(e,t,r){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e}</title>
    <meta name="description" content="Built with DreamBuild - ${e}">
    <meta name="theme-color" content="#2563eb">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" sizes="192x192" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="${e}">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <header class="app-header">
            <h1>🚀 ${e}</h1>
            <p>Built with DreamBuild</p>
        </header>
        
        <main class="app-main">
            <div class="feature-card">
                <h2>Mobile App Features</h2>
                <ul class="feature-list">
                    <li>✅ Progressive Web App (PWA)</li>
                    <li>✅ Installable on iOS & Android</li>
                    <li>✅ Offline functionality</li>
                    <li>✅ Push notifications</li>
                    <li>✅ App-like experience</li>
                </ul>
            </div>
            
            <div class="info-card">
                <h3>Install Instructions</h3>
                <div class="install-steps">
                    <div class="step">
                        <strong>iOS:</strong> Tap Share → Add to Home Screen
                    </div>
                    <div class="step">
                        <strong>Android:</strong> Tap menu → Add to Home Screen
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="app-footer">
            <p>Powered by <strong>DreamBuild AI</strong></p>
        </footer>
    </div>
    
    <script src="script.js"><\/script>
</body>
</html>`}generatePWAManifest(e,t){return JSON.stringify({name:e,short_name:e.split(" ")[0],description:`Built with DreamBuild - ${e}`,start_url:"/",display:"standalone",background_color:"#ffffff",theme_color:"#2563eb",orientation:"portrait-primary",icons:[{src:"icon-192.png",sizes:"192x192",type:"image/png",purpose:"any maskable"},{src:"icon-512.png",sizes:"512x512",type:"image/png",purpose:"any maskable"}],categories:["productivity","utilities"],screenshots:[{src:"screenshot-mobile.png",sizes:"390x844",type:"image/png",form_factor:"narrow"}]},null,2)}generatePWAServiceWorker(e,t){return`// DreamBuild PWA Service Worker
const CACHE_NAME = 'dreambuild-${e.toLowerCase().replace(/[^a-z0-9]/g,"-")}-v1';
const urlsToCache = [
  '/',
  '/index.html',
  '/style.css',
  '/script.js',
  '/manifest.json'
];

// Install event
self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then((cache) => {
        console.log('Opened cache');
        return cache.addAll(urlsToCache);
      })
  );
});

// Fetch event
self.addEventListener('fetch', (event) => {
  event.respondWith(
    caches.match(event.request)
      .then((response) => {
        // Return cached version or fetch from network
        return response || fetch(event.request);
      }
    )
  );
});

// Activate event
self.addEventListener('activate', (event) => {
  event.waitUntil(
    caches.keys().then((cacheNames) => {
      return Promise.all(
        cacheNames.map((cacheName) => {
          if (cacheName !== CACHE_NAME) {
            console.log('Deleting old cache:', cacheName);
            return caches.delete(cacheName);
          }
        })
      );
    })
  );
});`}generatePWACSS(e,t){return`/* DreamBuild PWA Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  line-height: 1.6;
  color: #333;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}

#app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.app-header {
  text-align: center;
  padding: 40px 20px;
  color: white;
}

.app-header h1 {
  font-size: 2.5rem;
  margin-bottom: 10px;
  font-weight: bold;
}

.app-header p {
  font-size: 1.2rem;
  opacity: 0.9;
}

.app-main {
  flex: 1;
  padding: 20px;
  max-width: 600px;
  margin: 0 auto;
  width: 100%;
}

.feature-card, .info-card {
  background: rgba(255, 255, 255, 0.95);
  border-radius: 16px;
  padding: 24px;
  margin-bottom: 20px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(10px);
}

.feature-card h2, .info-card h3 {
  color: #1e293b;
  margin-bottom: 16px;
  font-size: 1.5rem;
}

.feature-list {
  list-style: none;
}

.feature-list li {
  padding: 8px 0;
  font-size: 1.1rem;
  color: #475569;
}

.install-steps {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.step {
  padding: 12px;
  background: #f1f5f9;
  border-radius: 8px;
  font-size: 0.95rem;
  color: #334155;
}

.app-footer {
  text-align: center;
  padding: 20px;
  color: white;
  opacity: 0.8;
}

/* Mobile optimizations */
@media (max-width: 768px) {
  .app-header h1 {
    font-size: 2rem;
  }
  
  .feature-card, .info-card {
    margin: 10px;
    padding: 20px;
  }
}

/* PWA specific styles */
@media (display-mode: standalone) {
  body {
    user-select: none;
    -webkit-user-select: none;
  }
}`}generatePWAJavaScript(e,t,r){return`// DreamBuild PWA JavaScript
console.log('🚀 ${e} PWA loaded!');

// Register service worker
if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('/sw.js')
      .then((registration) => {
        console.log('SW registered: ', registration);
      })
      .catch((registrationError) => {
        console.log('SW registration failed: ', registrationError);
      });
  });
}

// PWA install prompt
let deferredPrompt;
const installButton = document.createElement('button');
installButton.textContent = 'Install App';
installButton.className = 'install-button';
installButton.style.cssText = \`
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #3b82f6;
  color: white;
  border: none;
  padding: 12px 20px;
  border-radius: 25px;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  z-index: 1000;
\`;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.body.appendChild(installButton);
});

installButton.addEventListener('click', async () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    const { outcome } = await deferredPrompt.userChoice;
    console.log('User choice:', outcome);
    deferredPrompt = null;
    installButton.remove();
  }
});

// App functionality
document.addEventListener('DOMContentLoaded', () => {
  console.log('📱 ${e} PWA ready!');
  
  // Add some interactive features
  const featureItems = document.querySelectorAll('.feature-list li');
  featureItems.forEach((item, index) => {
    item.addEventListener('click', () => {
      item.style.transform = 'scale(1.05)';
      setTimeout(() => {
        item.style.transform = 'scale(1)';
      }, 200);
    });
  });
});

// Handle app updates
window.addEventListener('appinstalled', () => {
  console.log('🎉 ${e} installed successfully!');
});

// Network status
window.addEventListener('online', () => {
  console.log('📶 App is online');
});

window.addEventListener('offline', () => {
  console.log('📵 App is offline');
});`}generateMetroConfig(){return`module.exports = {
  transformer: {
    getTransformOptions: async () => ({
      transform: {
        experimentalImportSupport: false,
        inlineRequires: true,
      },
    }),
  },
};`}generateBabelConfig(){return`module.exports = function(api) {
  api.cache(true);
  return {
    presets: ['babel-preset-expo'],
  };
};`}generateAndroidBuildGradle(e,t){return`android {
    compileSdkVersion rootProject.ext.compileSdkVersion

    defaultConfig {
        applicationId "${t}"
        minSdkVersion rootProject.ext.minSdkVersion
        targetSdkVersion rootProject.ext.targetSdkVersion
        versionCode 1
        versionName "1.0"
    }
    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile("proguard-android.txt"), "proguard-rules.pro"
        }
    }
}`}generateAndroidManifest(e,t){return`<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="${t}">

    <application
        android:name=".MainApplication"
        android:label="${e}"
        android:icon="@mipmap/ic_launcher"
        android:allowBackup="false"
        android:theme="@style/AppTheme">
        <activity
            android:name=".MainActivity"
            android:label="${e}"
            android:configChanges="keyboard|keyboardHidden|orientation|screenSize|uiMode"
            android:launchMode="singleTask"
            android:windowSoftInputMode="adjustResize"
            android:exported="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest>`}generateIOSInfoPlist(e,t){return`<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>CFBundleDisplayName</key>
    <string>${e}</string>
    <key>CFBundleIdentifier</key>
    <string>${t}</string>
    <key>CFBundleName</key>
    <string>${e}</string>
    <key>CFBundleVersion</key>
    <string>1.0.0</string>
    <key>CFBundleShortVersionString</key>
    <string>1.0.0</string>
</dict>
</plist>`}generateReactNativeREADME(e,t,r){return`# ${e}

Built with [DreamBuild](https://dreambuild-2024-app.web.app) - Universal AI Development Platform

## 📱 React Native App

This is a React Native mobile application built with Expo.

### 🚀 Features

- **Cross-platform**: iOS and Android
- **Framework**: React Native with Expo
- **Performance**: Native performance
- **Development**: Hot reload and fast refresh

### 🛠️ Getting Started

1. **Install dependencies:**
   \`\`\`bash
   npm install
   \`\`\`

2. **Start the development server:**
   \`\`\`bash
   npm start
   \`\`\`

3. **Run on device/simulator:**
   \`\`\`bash
   # iOS
   npm run ios
   
   # Android
   npm run android
   \`\`\`

### 📦 Building for Production

1. **Build for Android:**
   \`\`\`bash
   npm run build:android
   \`\`\`

2. **Build for iOS:**
   \`\`\`bash
   npm run build:ios
   \`\`\`

### 📱 App Features

- Modern React Native architecture
- Expo SDK integration
- Cross-platform compatibility
- Native performance
- Easy deployment

### 🤖 Built with DreamBuild

Created using DreamBuild's AI-powered development platform. Visit [dreambuild-2024-app.web.app](https://dreambuild-2024-app.web.app) to build your own apps!

---

*Generated on ${new Date().toLocaleDateString()} by DreamBuild AI*
`}generateFlutterREADME(e,t,r){return`# ${e}

Built with [DreamBuild](https://dreambuild-2024-app.web.app) - Universal AI Development Platform

## 📱 Flutter App

This is a Flutter mobile application built with Dart.

### 🚀 Features

- **Cross-platform**: iOS and Android
- **Framework**: Flutter with Dart
- **UI**: Material Design 3
- **Performance**: Native performance

### 🛠️ Getting Started

1. **Install Flutter:** Follow the [official guide](https://flutter.dev/docs/get-started/install)

2. **Install dependencies:**
   \`\`\`bash
   flutter pub get
   \`\`\`

3. **Run the app:**
   \`\`\`bash
   flutter run
   \`\`\`

### 📦 Building for Production

1. **Build APK for Android:**
   \`\`\`bash
   flutter build apk
   \`\`\`

2. **Build iOS app:**
   \`\`\`bash
   flutter build ios
   \`\`\`

### 📱 App Features

- Flutter framework
- Material Design 3
- Cross-platform compatibility
- Hot reload development
- Native performance

### 🤖 Built with DreamBuild

Created using DreamBuild's AI-powered development platform. Visit [dreambuild-2024-app.web.app](https://dreambuild-2024-app.web.app) to build your own apps!

---

*Generated on ${new Date().toLocaleDateString()} by DreamBuild AI*
`}generatePWAREADME(e,t,r){return`# ${e}

Built with [DreamBuild](https://dreambuild-2024-app.web.app) - Universal AI Development Platform

## 📱 Progressive Web App (PWA)

This is a Progressive Web App that works on iOS, Android, and desktop browsers.

### 🚀 Features

- **Cross-platform**: iOS, Android, Desktop
- **Installable**: Add to home screen
- **Offline**: Works without internet
- **Native-like**: App-like experience

### 📱 Installation

#### iOS (iPhone/iPad)
1. Open in Safari
2. Tap the Share button
3. Select "Add to Home Screen"
4. Tap "Add"

#### Android
1. Open in Chrome
2. Tap the menu (three dots)
3. Select "Add to Home Screen"
4. Tap "Add"

### 🛠️ Development

1. **Local development:**
   \`\`\`bash
   # Serve locally
   npx serve .
   
   # Or use any static server
   python -m http.server 8000
   \`\`\`

2. **Test PWA features:**
   - Use Chrome DevTools → Application tab
   - Test offline functionality
   - Check manifest and service worker

### 📱 PWA Features

- Service Worker for offline functionality
- Web App Manifest for installation
- Responsive design for all devices
- Push notification support
- App-like navigation

### 🌐 Deployment

Deploy to any static hosting service:
- Firebase Hosting
- GitHub Pages
- Netlify
- Vercel

### 🤖 Built with DreamBuild

Created using DreamBuild's AI-powered development platform. Visit [dreambuild-2024-app.web.app](https://dreambuild-2024-app.web.app) to build your own apps!

---

*Generated on ${new Date().toLocaleDateString()} by DreamBuild AI*
`}generateIonicPackageJSON(e,t){return JSON.stringify({name:e.toLowerCase().replace(/[^a-z0-9]/g,"-"),version:"1.0.0",description:`Built with DreamBuild - ${e}`,main:"index.js",scripts:{build:"ionic build",serve:"ionic serve",ios:"ionic capacitor run ios",android:"ionic capacitor run android"},dependencies:{"@ionic/core":"^7.0.0","@ionic/react":"^7.0.0","@capacitor/core":"^5.0.0","@capacitor/ios":"^5.0.0","@capacitor/android":"^5.0.0"},devDependencies:{"@ionic/cli":"^7.0.0"},keywords:["ionic","capacitor","mobile","dreambuild"],author:"DreamBuild AI",license:"MIT"},null,2)}generateCapacitorConfig(e,t){return JSON.stringify({appId:`com.dreambuild.${e.toLowerCase().replace(/[^a-z0-9]/g,"")}`,appName:e,webDir:"dist",server:{androidScheme:"https"}},null,2)}generateExpoConfig(e,t){return JSON.stringify({expo:{name:e,slug:e.toLowerCase().replace(/[^a-z0-9]/g,"-"),version:"1.0.0",platforms:["ios","android","web"],orientation:"portrait",icon:"./assets/icon.png",splash:{image:"./assets/splash.png",resizeMode:"contain",backgroundColor:"#ffffff"}}},null,2)}generatePWAPackageJSON(e,t){return JSON.stringify({name:e.toLowerCase().replace(/[^a-z0-9]/g,"-"),version:"1.0.0",description:`Built with DreamBuild - ${e}`,main:"index.html",scripts:{start:"npx serve .",build:"echo 'PWA - no build required'",deploy:"echo 'Deploy using DreamBuild deployment system'"},keywords:["pwa","progressive-web-app","mobile","dreambuild"],author:"DreamBuild AI",license:"MIT",dependencies:{},devDependencies:{serve:"^14.0.0"}},null,2)}}const kR=new nW,rW=Object.freeze(Object.defineProperty({__proto__:null,default:kR},Symbol.toStringTag,{value:"Module"}));class sW{constructor(){this.searchCache=new Map,this.searchHistory=[],this.isEnabled=!0,this.maxCacheAge=300*1e3}async searchForKnowledge(e,t={}){if(!this.isEnabled)return{success:!1,reason:"Web search disabled"};try{const r=this.extractSearchQueries(e,t);if(r.length===0)return{success:!1,reason:"No searchable keywords found"};console.log("🔍 Searching web for knowledge:",r);const s=[];for(const o of r){const u=await this.performSearch(o);u.success&&s.push(u)}return{success:!0,knowledge:this.processSearchResults(s,e,t),searchQueries:r,resultsCount:s.length}}catch(r){return console.error("❌ Web search failed:",r),{success:!1,reason:"Search failed",error:r.message}}}extractSearchQueries(e,t){const r=[],s=e.toLowerCase();return Object.entries({react:["react best practices 2024","react hooks tutorial","react performance optimization"],vue:["vue 3 best practices","vue composition api","vue performance tips"],angular:["angular best practices 2024","angular performance optimization","angular tutorial"],node:["nodejs best practices","express js tutorial","nodejs security"],python:["python web development","django best practices","flask tutorial"],typescript:["typescript best practices","typescript tutorial","typescript performance"],tailwind:["tailwind css best practices","tailwind responsive design","tailwind components"],bootstrap:["bootstrap 5 tutorial","bootstrap best practices","bootstrap responsive design"],firebase:["firebase best practices","firebase security rules","firebase hosting"],mongodb:["mongodb best practices","mongodb performance","mongodb security"],mysql:["mysql best practices","mysql performance optimization","mysql security"],docker:["docker best practices","docker security","docker performance"],aws:["aws best practices","aws security","aws cost optimization"],pwa:["pwa best practices","pwa performance","service worker tutorial"],api:["rest api best practices","api security","api design patterns"],mobile:["mobile app development","responsive design","mobile performance"],ecommerce:["ecommerce best practices","online store security","payment integration"],healthcare:["healthcare app development","hipaa compliance","healthcare security"],fintech:["fintech app development","financial security","payment processing"],education:["educational app development","learning management system","online education"],gaming:["game development","web games","game performance"],social:["social media app development","social features","user engagement"],analytics:["web analytics","user tracking","data visualization"],seo:["seo best practices","search optimization","meta tags"],accessibility:["web accessibility","wcag guidelines","screen reader support"],security:["web security","data protection","authentication"],performance:["web performance","optimization techniques","loading speed"]}).forEach(([o,u])=>{s.includes(o)&&r.push(...u.slice(0,2))}),(s.includes("todo")||s.includes("task"))&&r.push("todo app best practices","task management features","productivity app design"),(s.includes("portfolio")||s.includes("resume"))&&r.push("portfolio website design","personal website best practices","portfolio features"),s.includes("blog")&&r.push("blog design best practices","content management","blog features"),s.includes("dashboard")&&r.push("dashboard design best practices","data visualization","admin interface"),s.includes("landing page")&&r.push("landing page best practices","conversion optimization","landing page design"),(s.includes("health")||s.includes("medical"))&&r.push("healthcare app development","medical software best practices","health data security"),(s.includes("finance")||s.includes("banking"))&&r.push("fintech app development","financial app security","payment processing"),(s.includes("education")||s.includes("learning"))&&r.push("educational app development","learning management system","online education"),r.length===0&&r.push("web development best practices 2024","modern web design","responsive design"),[...new Set(r)].slice(0,3)}async performSearch(e){const t=e.toLowerCase(),r=this.searchCache.get(t);if(r&&Date.now()-r.timestamp<this.maxCacheAge)return console.log("📋 Using cached search result for:",e),r.result;try{const s=await this.simulateWebSearch(e);return this.searchCache.set(t,{result:s,timestamp:Date.now()}),this.searchHistory.unshift({query:e,timestamp:new Date,resultCount:s.results?.length||0}),this.searchHistory=this.searchHistory.slice(0,20),s}catch(s){return console.error("Search failed for query:",e,s),{success:!1,query:e,error:s.message}}}async simulateWebSearch(e){await new Promise(r=>setTimeout(r,500+Math.random()*1e3));const t=this.getKnowledgeBase();for(const[r,s]of Object.entries(t))if(e.toLowerCase().includes(r))return{success:!0,query:e,results:s.results,summary:s.summary,bestPractices:s.bestPractices,codeExamples:s.codeExamples,timestamp:new Date};return{success:!0,query:e,results:[{title:"Modern Web Development Best Practices",snippet:"Current best practices for web development include responsive design, performance optimization, accessibility, and security.",url:"https://example.com/web-dev-best-practices"}],summary:"General web development best practices and modern techniques.",bestPractices:["Use semantic HTML for better accessibility","Implement responsive design with CSS Grid and Flexbox","Optimize images and assets for better performance","Add proper error handling and validation","Ensure cross-browser compatibility"],codeExamples:{responsive:"@media (max-width: 768px) { .container { padding: 1rem; } }",semantic:"<main><section><article><header><h1>Title</h1></header></article></section></main>"},timestamp:new Date}}getKnowledgeBase(){return{react:{results:[{title:"React Best Practices 2024",snippet:"Use functional components with hooks, implement proper state management, and follow component composition patterns.",url:"https://react.dev/learn"},{title:"React Performance Optimization",snippet:"Use React.memo, useMemo, useCallback, and code splitting for optimal performance.",url:"https://react.dev/learn/render-and-commit"}],summary:"Modern React development with hooks, performance optimization, and best practices.",bestPractices:["Use functional components with hooks instead of class components","Implement proper state management with useState and useEffect","Use React.memo for expensive components","Implement code splitting with React.lazy","Follow component composition patterns","Use TypeScript for better type safety"],codeExamples:{hooks:`const [count, setCount] = useState(0);
const memoizedValue = useMemo(() => expensiveCalculation(count), [count]);`,component:`const MyComponent = React.memo(({ data }) => {
  return <div>{data.name}</div>;
});`}},vue:{results:[{title:"Vue 3 Composition API Best Practices",snippet:"Use the Composition API for better code organization and reusability.",url:"https://vuejs.org/guide/composition-api/"}],summary:"Vue 3 development with Composition API and modern patterns.",bestPractices:["Use Composition API for complex components","Implement proper reactive state management","Use computed properties for derived state","Follow single-file component structure","Implement proper error handling"],codeExamples:{composition:`import { ref, computed } from 'vue';
const count = ref(0);
const doubleCount = computed(() => count.value * 2);`}},tailwind:{results:[{title:"Tailwind CSS Best Practices",snippet:"Use utility-first approach, create component classes, and implement responsive design.",url:"https://tailwindcss.com/docs"}],summary:"Tailwind CSS utility-first styling and responsive design.",bestPractices:["Use utility classes for styling","Create component classes for repeated patterns","Implement responsive design with breakpoints","Use CSS custom properties for theming","Optimize for production with purging"],codeExamples:{responsive:'class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"',components:"@apply bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded;"}},pwa:{results:[{title:"Progressive Web App Best Practices",snippet:"Implement service workers, manifest files, and offline functionality for app-like experience.",url:"https://web.dev/pwa-checklist/"}],summary:"PWA development with service workers and offline capabilities.",bestPractices:["Implement service worker for caching","Create web app manifest file","Add offline functionality","Implement push notifications","Ensure fast loading and performance"],codeExamples:{manifest:`{
  "name": "My App",
  "short_name": "App",
  "start_url": "/",
  "display": "standalone"
}`,serviceWorker:`self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request)
      .then(response => response || fetch(event.request))
  );
});`}},accessibility:{results:[{title:"Web Accessibility Guidelines (WCAG)",snippet:"Follow WCAG 2.1 guidelines for inclusive design and screen reader support.",url:"https://www.w3.org/WAI/WCAG21/quickref/"}],summary:"Web accessibility best practices and WCAG compliance.",bestPractices:["Use semantic HTML elements","Provide alt text for images","Implement proper heading hierarchy","Ensure keyboard navigation","Use ARIA labels for complex interactions","Maintain sufficient color contrast"],codeExamples:{semantic:'<button aria-label="Close dialog" onclick="closeModal()">×</button>',images:'<img src="chart.png" alt="Sales chart showing 25% increase in Q3">'}},performance:{results:[{title:"Web Performance Optimization",snippet:"Optimize images, minimize resources, and implement lazy loading for better performance.",url:"https://web.dev/performance/"}],summary:"Web performance optimization techniques and best practices.",bestPractices:["Optimize images with modern formats (WebP, AVIF)","Implement lazy loading for images and components","Minify CSS and JavaScript","Use CDN for static assets","Implement caching strategies","Monitor Core Web Vitals"],codeExamples:{lazy:'<img src="image.jpg" loading="lazy" alt="Description">',preload:'<link rel="preload" href="critical.css" as="style">'}},security:{results:[{title:"Web Application Security",snippet:"Implement proper authentication, input validation, and security headers.",url:"https://owasp.org/www-project-top-ten/"}],summary:"Web security best practices and protection measures.",bestPractices:["Implement HTTPS everywhere","Validate and sanitize all inputs","Use secure authentication methods","Implement CSRF protection","Set proper security headers","Regular security audits"],codeExamples:{validation:`function validateInput(input) {
  return input.replace(/<script[^>]*>.*?<\/script>/gi, '');
}`,headers:"Content-Security-Policy: default-src 'self'; script-src 'self' 'unsafe-inline';"}}}}processSearchResults(e,t,r){const s={summary:"",bestPractices:[],codeExamples:{},resources:[],recommendations:[]};return e.forEach(i=>{i.success&&(i.summary&&(s.summary+=i.summary+" "),i.bestPractices&&s.bestPractices.push(...i.bestPractices),i.codeExamples&&Object.assign(s.codeExamples,i.codeExamples),i.results&&s.resources.push(...i.results))}),s.bestPractices=[...new Set(s.bestPractices)],s.recommendations=this.generateRecommendations(s,t,r),s}generateRecommendations(e,t,r){const s=[];return t.toLowerCase().includes("react")&&(s.push("Consider using React 18 with concurrent features"),s.push("Implement proper error boundaries for better error handling"),s.push("Use React Query or SWR for data fetching")),t.toLowerCase().includes("responsive")&&(s.push("Use CSS Grid and Flexbox for modern layouts"),s.push("Implement mobile-first design approach"),s.push("Test on multiple devices and screen sizes")),t.toLowerCase().includes("performance")&&(s.push("Implement lazy loading for images and components"),s.push("Use code splitting to reduce initial bundle size"),s.push("Optimize images with modern formats like WebP")),s.push("Implement proper error handling and user feedback"),s.push("Add accessibility features for inclusive design"),s.push("Use semantic HTML for better SEO and accessibility"),s}getSearchHistory(){return this.searchHistory}clearCache(){this.searchCache.clear(),console.log("🗑️ Search cache cleared")}setEnabled(e){this.isEnabled=e,console.log(`🔍 Web search ${e?"enabled":"disabled"}`)}isSearchEnabled(){return this.isEnabled}getCacheStats(){return{cacheSize:this.searchCache.size,historySize:this.searchHistory.length,isEnabled:this.isEnabled}}}const oh=new sW;class iW{constructor(){this.providers={stripe:{name:"Stripe",icon:"💳",description:"Modern payment processing for US businesses",features:["US Credit Cards","ACH Bank Transfers","US Digital Wallets","Subscriptions","Tax Compliance"],setupRequired:["US Business Registration","API Keys","Webhook Endpoints","SSL Certificate"],pricing:"2.9% + 30¢ per transaction (US)",documentation:"https://stripe.com/docs",usSpecific:["ACH Direct Debit","US Bank Accounts","Sales Tax Calculation","1099-K Reporting"]},paypal:{name:"PayPal",icon:"🟦",description:"US-focused payment platform with local features",features:["PayPal Wallet","US Credit Cards","PayPal Credit","Venmo (US)","US Bank Accounts"],setupRequired:["US PayPal Business Account","US Tax ID","Client ID","Client Secret"],pricing:"2.9% + 30¢ per transaction (US)",documentation:"https://developer.paypal.com/docs",usSpecific:["PayPal Credit","Venmo Integration","US Bank Transfers","Tax Reporting"]},square:{name:"Square",icon:"⬜",description:"US-focused payment solutions for businesses",features:["US Credit Cards","Square Cash","ACH Transfers","In-Person Payments","Online Payments"],setupRequired:["US Business Account","Square Developer Account","Application ID"],pricing:"2.9% + 30¢ per transaction (online)",documentation:"https://developer.squareup.com/docs",usSpecific:["Square Cash App","ACH Bank Transfers","US Tax Integration","1099-K Forms"]}},this.integrationTypes=["one-time-payment","subscription-billing","marketplace-payments","donation-system","booking-payments","digital-product-sales","physical-product-sales","service-payments","rental-payments","auction-payments"]}generateStripeIntegration(e="one-time-payment",t={}){const r={publishableKey:"pk_test_your_stripe_publishable_key_here",secretKey:"sk_test_your_stripe_secret_key_here",webhookSecret:"whsec_your_webhook_secret_here",currency:"usd",country:"US",region:"us-east-1",taxSettings:{automaticTax:!0,taxBehavior:"inclusive",taxCalculation:"automatic"}};switch(e){case"one-time-payment":return this.generateStripeOneTimePayment(r,t);case"subscription-billing":return this.generateStripeSubscription(r,t);case"marketplace-payments":return this.generateStripeMarketplace(r,t);case"donation-system":return this.generateStripeDonations(r,t);default:return this.generateStripeOneTimePayment(r,t)}}generatePayPalIntegration(e="one-time-payment",t={}){const r={clientId:"your_paypal_client_id_here",clientSecret:"your_paypal_client_secret_here",environment:t.environment||"sandbox",currency:"USD",locale:"en_US",countryCode:"US",merchantId:"your_us_merchant_id_here"};switch(e){case"one-time-payment":return this.generatePayPalOneTimePayment(r,t);case"subscription-billing":return this.generatePayPalSubscription(r,t);case"marketplace-payments":return this.generatePayPalMarketplace(r,t);case"donation-system":return this.generatePayPalDonations(r,t);default:return this.generatePayPalOneTimePayment(r,t)}}generateStripeOneTimePayment(e,t){return{frontend:{"package.json":JSON.stringify({dependencies:{"@stripe/stripe-js":"^2.0.0","@stripe/react-stripe-js":"^2.0.0",react:"^18.0.0","react-dom":"^18.0.0"}},null,2),"components/PaymentForm.jsx":`import React, { useState } from 'react';
import { loadStripe } from '@stripe/stripe-js';
import { Elements, CardElement, useStripe, useElements } from '@stripe/react-stripe-js';

const stripePromise = loadStripe('${e.publishableKey}');

const CheckoutForm = ({ amount, onSuccess, onError }) => {
  const stripe = useStripe();
  const elements = useElements();
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const handleSubmit = async (event) => {
    event.preventDefault();
    
    if (!stripe || !elements) return;
    
    setLoading(true);
    setError(null);

    try {
      // Create payment intent on your server
      const response = await fetch('/api/create-payment-intent', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ 
          amount: amount * 100, // Convert to cents
          currency: '${e.currency}'
        })
      });

      const { clientSecret } = await response.json();

      // Confirm payment with Stripe
      const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
        payment_method: {
          card: elements.getElement(CardElement),
          billing_details: {
            name: 'Customer Name'
          }
        }
      });

      if (error) {
        setError(error.message);
        onError?.(error);
      } else if (paymentIntent.status === 'succeeded') {
        onSuccess?.(paymentIntent);
      }
    } catch (err) {
      setError('Payment failed. Please try again.');
      onError?.(err);
    } finally {
      setLoading(false);
    }
  };

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div className="p-4 border rounded-lg">
        <CardElement
          options={{
            style: {
              base: {
                fontSize: '16px',
                color: '#424770',
                '::placeholder': { color: '#aab7c4' }
              }
            }
          }}
        />
      </div>
      
      {error && (
        <div className="text-red-600 text-sm">{error}</div>
      )}
      
      <button
        type="submit"
        disabled={!stripe || loading}
        className="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50"
      >
        {loading ? 'Processing...' : \`Pay $\${amount}\`}
      </button>
    </form>
  );
};

const PaymentForm = ({ amount, onSuccess, onError }) => (
  <Elements stripe={stripePromise}>
    <CheckoutForm amount={amount} onSuccess={onSuccess} onError={onError} />
  </Elements>
);

export default PaymentForm;`,"App.jsx":`import React, { useState } from 'react';
import PaymentForm from './components/PaymentForm';

function App() {
  const [paymentSuccess, setPaymentSuccess] = useState(false);

  const handlePaymentSuccess = (paymentIntent) => {
    console.log('Payment succeeded:', paymentIntent);
    setPaymentSuccess(true);
  };

  const handlePaymentError = (error) => {
    console.error('Payment failed:', error);
  };

  return (
    <div className="min-h-screen bg-gray-100 flex items-center justify-center">
      <div className="max-w-md w-full bg-white rounded-lg shadow-lg p-6">
        <h1 className="text-2xl font-bold text-center mb-6">
          Complete Your Purchase
        </h1>
        
        {paymentSuccess ? (
          <div className="text-center">
            <div className="text-green-600 text-4xl mb-4">✅</div>
            <h2 className="text-xl font-semibold text-gray-800 mb-2">
              Payment Successful!
            </h2>
            <p className="text-gray-600">
              Thank you for your purchase. You will receive a confirmation email shortly.
            </p>
          </div>
        ) : (
          <PaymentForm
            amount={29.99}
            onSuccess={handlePaymentSuccess}
            onError={handlePaymentError}
          />
        )}
      </div>
    </div>
  );
}

export default App;`},backend:{"server.js":`const express = require('express');
const stripe = require('stripe')('${e.secretKey}');
const cors = require('cors');

const app = express();
app.use(cors());
app.use(express.json());

// Create Payment Intent
app.post('/api/create-payment-intent', async (req, res) => {
  try {
    const { amount, currency = '${e.currency}' } = req.body;

    const paymentIntent = await stripe.paymentIntents.create({
      amount,
      currency,
      automatic_payment_methods: { enabled: true }
    });

    res.json({ clientSecret: paymentIntent.client_secret });
  } catch (error) {
    res.status(400).json({ error: error.message });
  }
});

// Handle successful payments
app.post('/api/payment-success', async (req, res) => {
  try {
    const { paymentIntentId } = req.body;
    
    // Retrieve payment intent to confirm
    const paymentIntent = await stripe.paymentIntents.retrieve(paymentIntentId);
    
    if (paymentIntent.status === 'succeeded') {
      // Update your database, send confirmation email, etc.
      console.log('Payment succeeded:', paymentIntent);
      
      res.json({ success: true, paymentIntent });
    } else {
      res.status(400).json({ error: 'Payment not completed' });
    }
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

// Webhook endpoint for Stripe events
app.post('/api/webhook', express.raw({ type: 'application/json' }), (req, res) => {
  const sig = req.headers['stripe-signature'];
  let event;

  try {
    event = stripe.webhooks.constructEvent(req.body, sig, '${e.webhookSecret}');
  } catch (err) {
    return res.status(400).send(\`Webhook signature verification failed.\`);
  }

  // Handle the event
  switch (event.type) {
    case 'payment_intent.succeeded':
      const paymentIntent = event.data.object;
      console.log('PaymentIntent was successful!', paymentIntent);
      break;
    default:
      console.log(\`Unhandled event type \${event.type}\`);
  }

  res.json({ received: true });
});

const PORT = process.env.PORT || 3001;
app.listen(PORT, () => {
  console.log(\`Server running on port \${PORT}\`);
});`,"package.json":JSON.stringify({name:"stripe-payment-server",version:"1.0.0",dependencies:{express:"^4.18.0",stripe:"^12.0.0",cors:"^2.8.5",dotenv:"^16.0.0"},scripts:{start:"node server.js",dev:"nodemon server.js"}},null,2)},documentation:{"README.md":`# Stripe Payment Integration (US Only)

## Setup Instructions

### 1. US Business Requirements
1. Must be a US-registered business entity
2. Have a valid US Tax ID (EIN)
3. US bank account for payouts
4. Sign up at [stripe.com](https://stripe.com) with US address

### 2. Get Stripe API Keys
1. Go to Developers > API Keys
2. Copy your US Publishable Key and Secret Key
3. Replace the keys in the code

### 3. Environment Variables
Create a \`.env\` file:
\`\`\`
STRIPE_PUBLISHABLE_KEY=pk_test_your_us_key_here
STRIPE_SECRET_KEY=sk_test_your_us_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here
STRIPE_COUNTRY=US
STRIPE_CURRENCY=USD
\`\`\`

### 4. Install Dependencies
\`\`\`bash
npm install
\`\`\`

### 5. Run the Application
\`\`\`bash
npm start
\`\`\`

## US-Specific Features
- ✅ US Credit Cards (Visa, Mastercard, Amex, Discover)
- ✅ ACH Bank Transfers (US bank accounts)
- ✅ US Digital Wallets (Apple Pay, Google Pay)
- ✅ Automatic Sales Tax Calculation
- ✅ 1099-K Tax Reporting
- ✅ US PCI Compliance

## Testing (US Cards)
Use Stripe's US test card numbers:
- Success: 4242 4242 4242 4242
- Decline: 4000 0000 0000 0002
- 3D Secure: 4000 0025 0000 3155
- US Bank Account: 000123456789

## US Compliance
- PCI DSS Level 1 compliant
- US state tax calculation
- 1099-K form generation
- US banking regulations compliance`}}}generatePayPalOneTimePayment(e,t){return{frontend:{"package.json":JSON.stringify({dependencies:{"@paypal/react-paypal-js":"^7.8.0",react:"^18.0.0","react-dom":"^18.0.0"}},null,2),"components/PayPalButton.jsx":`import React from 'react';
import { PayPalScriptProvider, PayPalButtons } from '@paypal/react-paypal-js';

const PayPalButton = ({ amount, onSuccess, onError }) => {
  const paypalOptions = {
    clientId: '${e.clientId}',
    currency: '${e.currency}',
    intent: 'capture'
  };

  return (
    <PayPalScriptProvider options={paypalOptions}>
      <PayPalButtons
        style={{ layout: 'vertical' }}
        createOrder={(data, actions) => {
          return actions.order.create({
            purchase_units: [{
              amount: {
                value: amount.toString(),
                currency_code: '${e.currency}'
              }
            }]
          });
        }}
        onApprove={(data, actions) => {
          return actions.order.capture().then((details) => {
            console.log('Payment completed:', details);
            onSuccess?.(details);
          });
        }}
        onError={(error) => {
          console.error('PayPal error:', error);
          onError?.(error);
        }}
      />
    </PayPalScriptProvider>
  );
};

export default PayPalButton;`,"App.jsx":`import React, { useState } from 'react';
import PayPalButton from './components/PayPalButton';

function App() {
  const [paymentSuccess, setPaymentSuccess] = useState(false);
  const [paymentDetails, setPaymentDetails] = useState(null);

  const handlePaymentSuccess = (details) => {
    console.log('Payment succeeded:', details);
    setPaymentDetails(details);
    setPaymentSuccess(true);
  };

  const handlePaymentError = (error) => {
    console.error('Payment failed:', error);
  };

  return (
    <div className="min-h-screen bg-gray-100 flex items-center justify-center">
      <div className="max-w-md w-full bg-white rounded-lg shadow-lg p-6">
        <h1 className="text-2xl font-bold text-center mb-6">
          Complete Your Purchase
        </h1>
        
        {paymentSuccess ? (
          <div className="text-center">
            <div className="text-green-600 text-4xl mb-4">✅</div>
            <h2 className="text-xl font-semibold text-gray-800 mb-2">
              Payment Successful!
            </h2>
            <p className="text-gray-600 mb-2">
              Thank you for your purchase.
            </p>
            {paymentDetails && (
              <p className="text-sm text-gray-500">
                Transaction ID: {paymentDetails.id}
              </p>
            )}
          </div>
        ) : (
          <div className="space-y-4">
            <div className="text-center">
              <p className="text-lg font-semibold">Total: $29.99</p>
            </div>
            <PayPalButton
              amount={29.99}
              onSuccess={handlePaymentSuccess}
              onError={handlePaymentError}
            />
          </div>
        )}
      </div>
    </div>
  );
}

export default App;`},backend:{"server.js":`const express = require('express');
const paypal = require('@paypal/checkout-server-sdk');
const cors = require('cors');

const app = express();
app.use(cors());
app.use(express.json());

// PayPal SDK Configuration
const environment = new paypal.core.SandboxEnvironment(
  '${e.clientId}',
  '${e.clientSecret}'
);
const client = new paypal.core.PayPalHttpClient(environment);

// Create PayPal Order
app.post('/api/create-paypal-order', async (req, res) => {
  try {
    const { amount } = req.body;

    const request = new paypal.orders.OrdersCreateRequest();
    request.prefer('return=representation');
    request.requestBody({
      intent: 'CAPTURE',
      purchase_units: [{
        amount: {
          currency_code: '${e.currency}',
          value: amount.toString()
        }
      }]
    });

    const order = await client.execute(request);
    res.json({ orderId: order.result.id });
  } catch (error) {
    res.status(400).json({ error: error.message });
  }
});

// Capture PayPal Order
app.post('/api/capture-paypal-order', async (req, res) => {
  try {
    const { orderId } = req.body;

    const request = new paypal.orders.OrdersCaptureRequest(orderId);
    request.requestBody({});

    const capture = await client.execute(request);
    
    // Update your database, send confirmation email, etc.
    console.log('Payment captured:', capture.result);
    
    res.json({ success: true, capture });
  } catch (error) {
    res.status(400).json({ error: error.message });
  }
});

const PORT = process.env.PORT || 3001;
app.listen(PORT, () => {
  console.log(\`Server running on port \${PORT}\`);
});`,"package.json":JSON.stringify({name:"paypal-payment-server",version:"1.0.0",dependencies:{express:"^4.18.0","@paypal/checkout-server-sdk":"^1.0.3",cors:"^2.8.5",dotenv:"^16.0.0"},scripts:{start:"node server.js",dev:"nodemon server.js"}},null,2)},documentation:{"README.md":`# PayPal Payment Integration

## Setup Instructions

### 1. Get PayPal API Credentials
1. Sign up at [developer.paypal.com](https://developer.paypal.com)
2. Create a new application
3. Copy your Client ID and Client Secret
4. Replace the credentials in the code

### 2. Environment Variables
Create a \`.env\` file:
\`\`\`
PAYPAL_CLIENT_ID=your_client_id_here
PAYPAL_CLIENT_SECRET=your_client_secret_here
PAYPAL_ENVIRONMENT=sandbox
\`\`\`

### 3. Install Dependencies
\`\`\`bash
npm install
\`\`\`

### 4. Run the Application
\`\`\`bash
npm start
\`\`\`

## Features
- ✅ PayPal wallet payments
- ✅ Credit card payments
- ✅ Mobile optimized
- ✅ International support
- ✅ Error handling

## Testing
Use PayPal sandbox accounts for testing payments.`}}}getProviders(){return this.providers}getIntegrationTypes(){return this.integrationTypes}generatePaymentIntegration(e={}){const{provider:t="stripe",type:r="one-time-payment",amount:s=29.99,currency:i="USD",features:o=[]}=e;let u;return t==="stripe"?u=this.generateStripeIntegration(r,{currency:i,features:o}):t==="paypal"&&(u=this.generatePayPalIntegration(r,{currency:i,features:o})),{provider:t,type:r,integration:u,setupInstructions:this.getSetupInstructions(t),features:this.getFeatures(t,r),pricing:this.providers[t].pricing}}getSetupInstructions(e){return{stripe:["1. Create US Stripe account at stripe.com (must be US business)","2. Verify US business registration and EIN","3. Get US API keys from Stripe Dashboard","4. Replace placeholder keys in code","5. Set up US webhook endpoints","6. Test with US Stripe test cards and ACH","7. Go live with US production keys","8. Set up 1099-K tax reporting"],paypal:["1. Create US PayPal Business account","2. Verify US business registration and Tax ID","3. Create US application in PayPal Developer","4. Get US Client ID and Client Secret","5. Replace credentials in code","6. Test with US PayPal sandbox accounts","7. Enable Venmo integration (US only)","8. Switch to US live environment"],square:["1. Create US Square Business account","2. Verify US business registration","3. Get Square Application ID","4. Replace credentials in code","5. Test with US Square test cards","6. Set up US tax calculation","7. Go live with US production keys"]}[e]||[]}getFeatures(e,t){const r={stripe:["US Credit Cards","ACH Bank Transfers","US Digital Wallets","Webhooks","3D Secure","US Tax Calculation"],paypal:["US PayPal Wallet","US Credit Cards","PayPal Credit","Venmo (US)","US Bank Transfers"],square:["US Credit Cards","Square Cash App","ACH Transfers","US Tax Integration","In-Person Payments"]},s={"one-time-payment":["Instant Payment","Receipt Generation"],"subscription-billing":["Recurring Payments","Billing Management"],"marketplace-payments":["Split Payments","Multi-party Transactions"],"donation-system":["Custom Amounts","Tax Receipts"]};return[...r[e]||[],...s[t]||[]]}}const oW=new iW;var vc={};class aW{constructor(){this.app=null,this.db=null,this.storage=null,this.auth=null,this.user=null,this.isInitialized=!1}async initialize(){try{if(this.isInitialized)return;const e={apiKey:vc.REACT_APP_FIREBASE_API_KEY||"your-api-key",authDomain:vc.REACT_APP_FIREBASE_AUTH_DOMAIN||"your-project.firebaseapp.com",projectId:vc.REACT_APP_FIREBASE_PROJECT_ID||"your-project-id",storageBucket:vc.REACT_APP_FIREBASE_STORAGE_BUCKET||"your-project.appspot.com",messagingSenderId:vc.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:vc.REACT_APP_FIREBASE_APP_ID||"your-app-id"};try{this.app=po(e)}catch(t){if(t.code==="app/duplicate-app")this.app=po();else if(t.code==="app/no-options")try{this.app=po()}catch{this.app=po({apiKey:"demo-key",authDomain:"demo.firebaseapp.com",projectId:"demo-project"})}else throw t}this.db=Lg(this.app),this.storage=pj(this.app),this.auth=x0(this.app),g0(this.auth,t=>{this.user=t,console.log("Firebase auth state changed:",t?"authenticated":"not authenticated")}),await vF(this.auth),this.isInitialized=!0,console.log("🔥 Firebase initialized successfully")}catch(e){throw console.error("❌ Failed to initialize Firebase:",e),e}}async storeProjectContext(e,t){try{await this.initialize();const r=pt(this.db,"projectContexts",e);await Ir(r,{...t,userId:this.user?.uid||"anonymous",storedAt:new Date().toISOString(),dataSize:JSON.stringify(t).length}),console.log("✅ Project context stored successfully")}catch(r){throw console.error("❌ Failed to store project context:",r),r}}async loadProjectContext(e){try{await this.initialize();const t=pt(this.db,"projectContexts",e),r=await Qd(t);return r.exists()?(console.log("✅ Project context loaded successfully"),r.data()):(console.log("❌ Project context not found"),null)}catch(t){return console.error("❌ Failed to load project context:",t),null}}async storeProjectFiles(e,t){try{await this.initialize();const r=pt(this.db,"projectFiles",e);await Ir(r,{projectId:e,files:t,fileCount:Object.keys(t).length,totalSize:JSON.stringify(t).length,userId:this.user?.uid||"anonymous",storedAt:new Date().toISOString()}),console.log("✅ Project files stored successfully")}catch(r){throw console.error("❌ Failed to store project files:",r),r}}async loadProjectFiles(e){try{await this.initialize();const t=pt(this.db,"projectFiles",e),r=await Qd(t);return r.exists()?(console.log("✅ Project files loaded successfully"),r.data().files):(console.log("❌ Project files not found"),null)}catch(t){return console.error("❌ Failed to load project files:",t),null}}async storeTemplate(e){try{await this.initialize();const t=pt(this.db,"templates",e.id);await Ir(t,{...e,userId:this.user?.uid||"anonymous",updatedAt:new Date().toISOString()}),console.log("✅ Template stored successfully")}catch(t){throw console.error("❌ Failed to store template:",t),t}}async loadTemplates(){try{await this.initialize();const e=An(this.db,"templates"),t=await Od(e),r=[];return t.forEach(s=>{r.push(s.data())}),console.log("✅ Templates loaded successfully"),r}catch(e){return console.error("❌ Failed to load templates:",e),[]}}async searchTemplates(e,t,r){try{await this.initialize();const s=An(this.db,"templates");let i=Er(s);e&&e.length>0&&(i=Er(i,Nn("keywords","array-contains-any",e))),t&&t.length>0&&(i=Er(i,Nn("technologies","array-contains-any",t))),r&&r.length>0&&(i=Er(i,Nn("patterns","array-contains-any",r)));const o=await Od(i),u=[];return o.forEach(d=>{u.push(d.data())}),console.log("✅ Templates searched successfully"),u}catch(s){return console.error("❌ Failed to search templates:",s),[]}}async storeLargeFile(e,t,r){try{await this.initialize();const s=Na(this.storage,`projects/${e}/${t}`),i=new Blob([r],{type:"text/plain"});await Aa(s,i);const o=await Pa(s);return console.log("✅ Large file stored successfully"),o}catch(s){throw console.error("❌ Failed to store large file:",s),s}}async loadLargeFile(e){try{const r=await(await fetch(e)).text();return console.log("✅ Large file loaded successfully"),r}catch(t){return console.error("❌ Failed to load large file:",t),null}}async getUserProjects(){try{await this.initialize();const e=An(this.db,"projectContexts"),t=Er(e,Nn("userId","==",this.user?.uid||"anonymous")),r=await Od(t),s=[];return r.forEach(i=>{s.push({id:i.id,...i.data()})}),console.log("✅ User projects loaded successfully"),s}catch(e){return console.error("❌ Failed to load user projects:",e),[]}}async deleteProject(e){try{await this.initialize();const t=pt(this.db,"projectContexts",e);await Yd(t);const r=pt(this.db,"projectFiles",e);await Yd(r),console.log("✅ Project deleted successfully")}catch(t){throw console.error("❌ Failed to delete project:",t),t}}async getStorageStats(){try{await this.initialize();const e=await this.getUserProjects();let t=0,r=0;for(const s of e)t+=s.dataSize||0,r+=s.fileCount||0;return{totalProjects:e.length,totalFiles:r,totalSize:t,totalSizeMB:Math.round(t/(1024*1024)*100)/100}}catch(e){return console.error("❌ Failed to get storage stats:",e),{totalProjects:0,totalFiles:0,totalSize:0,totalSizeMB:0}}}async storeConversationMemory(e,t){try{await this.initialize();const r=pt(this.db,"conversationMemory",e);await Ir(r,{projectId:e,conversation:t,userId:this.user?.uid||"anonymous",lastUpdated:new Date().toISOString(),memorySize:JSON.stringify(t).length}),console.log("🧠 Conversation memory stored successfully")}catch(r){throw console.error("❌ Failed to store conversation memory:",r),r}}async loadConversationMemory(e){try{await this.initialize();const t=pt(this.db,"conversationMemory",e),r=await Qd(t);return r.exists()?(console.log("🧠 Conversation memory loaded successfully"),r.data().conversation):(console.log("❌ Conversation memory not found"),null)}catch(t){return console.error("❌ Failed to load conversation memory:",t),null}}async addPromptToMemory(e,t,r,s){try{await this.initialize();let i=await this.loadConversationMemory(e)||{projectId:e,prompts:[],responses:[],context:{},createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString()};return i.prompts.push({id:`prompt-${Date.now()}`,text:t,timestamp:new Date().toISOString(),context:s}),i.responses.push({id:`response-${Date.now()}`,promptId:i.prompts[i.prompts.length-1].id,text:r,timestamp:new Date().toISOString(),context:s}),i.context={...i.context,...s},i.lastUpdated=new Date().toISOString(),await this.storeConversationMemory(e,i),console.log("🧠 Prompt added to memory successfully"),i}catch(i){throw console.error("❌ Failed to add prompt to memory:",i),i}}async getConversationHistory(e,t=50){try{await this.initialize();const r=await this.loadConversationMemory(e);if(!r)return[];const s=r.prompts.slice(-t),i=r.responses.slice(-t);return{prompts:s,responses:i,context:r.context,totalPrompts:r.prompts.length,totalResponses:r.responses.length}}catch(r){return console.error("❌ Failed to get conversation history:",r),[]}}async searchConversationMemory(e,t){try{await this.initialize();const r=await this.loadConversationMemory(e);if(!r)return[];const s=[],i=t.toLowerCase();return r.prompts.forEach(o=>{o.text.toLowerCase().includes(i)&&s.push({type:"prompt",id:o.id,text:o.text,timestamp:o.timestamp,context:o.context})}),r.responses.forEach(o=>{o.text.toLowerCase().includes(i)&&s.push({type:"response",id:o.id,text:o.text,timestamp:o.timestamp,context:o.context})}),console.log("🔍 Conversation memory searched successfully"),s}catch(r){return console.error("❌ Failed to search conversation memory:",r),[]}}async getConversationContext(e,t){try{await this.initialize();const r=await this.loadConversationMemory(e);if(!r)return null;const s={projectId:e,currentPrompt:t,previousPrompts:r.prompts.slice(-10),previousResponses:r.responses.slice(-10),projectContext:r.context,conversationSummary:this.generateConversationSummary(r),relevantHistory:this.findRelevantHistory(r,t)};return console.log("🧠 Conversation context generated successfully"),s}catch(r){return console.error("❌ Failed to get conversation context:",r),null}}generateConversationSummary(e){const t=e.prompts,r=e.responses;return t.length===0?"No previous conversation":{totalPrompts:t.length,totalResponses:r.length,firstPrompt:t[0]?.text||"",lastPrompt:t[t.length-1]?.text||"",keyTopics:this.extractKeyTopics(t),projectEvolution:this.trackProjectEvolution(e)}}extractKeyTopics(e){const t=new Set;return e.forEach(r=>{r.text.toLowerCase().split(" ").forEach(i=>{i.length>4&&!this.isCommonWord(i)&&t.add(i)})}),Array.from(t).slice(0,10)}isCommonWord(e){return["the","and","for","are","but","not","you","all","can","had","her","was","one","our","out","day","get","has","him","his","how","its","may","new","now","old","see","two","way","who","boy","did","man","men","put","say","she","too","use"].includes(e)}trackProjectEvolution(e){const t=[],r=e.prompts,s=e.responses;for(let i=0;i<r.length;i++){const o=r[i],u=s[i];t.push({phase:i+1,prompt:o.text,response:u.text,timestamp:o.timestamp,context:o.context})}return t}findRelevantHistory(e,t){const r=[],s=t.toLowerCase().split(" ");return e.prompts.forEach((i,o)=>{const u=i.text.toLowerCase().split(" "),d=s.filter(p=>u.includes(p));d.length>2&&r.push({prompt:i.text,response:e.responses[o]?.text||"",relevance:d.length,timestamp:i.timestamp})}),r.sort((i,o)=>o.relevance-i.relevance).slice(0,5)}async storeAILearningPattern(e,t){try{await this.initialize();const r=pt(this.db,"aiLearningPatterns",`${e}-${Date.now()}`);await Ir(r,{projectId:e,pattern:t,userId:this.user?.uid||"anonymous",createdAt:new Date().toISOString()}),console.log("🧠 AI learning pattern stored successfully")}catch(r){throw console.error("❌ Failed to store AI learning pattern:",r),r}}async getAILearningPatterns(e){try{await this.initialize();const t=An(this.db,"aiLearningPatterns"),r=Er(t,Nn("projectId","==",e)),s=await Od(r),i=[];return s.forEach(o=>{i.push(o.data())}),console.log("🧠 AI learning patterns loaded successfully"),i}catch(t){return console.error("❌ Failed to load AI learning patterns:",t),[]}}async clearConversationMemory(e){try{await this.initialize();const t=pt(this.db,"conversationMemory",e);await Yd(t),console.log("🧠 Conversation memory cleared successfully")}catch(t){throw console.error("❌ Failed to clear conversation memory:",t),t}}}const Va=new aW;var xc={};const Br={"codellama-7b":{name:"CodeLlama 7B",type:"Code Generation",baseURL:"http://localhost:11434/api",model:"codellama:7b",description:"Fast and efficient code generation (7B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby","swift","kotlin"],strengths:["speed","efficiency","general-purpose"],ram_required:"8GB"},"codellama-13b":{name:"CodeLlama 13B",type:"Code Generation",baseURL:"http://localhost:11434/api",model:"codellama:13b",description:"Higher quality code generation (13B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby","swift","kotlin"],strengths:["quality","accuracy","complex-problems"],ram_required:"16GB"},"codellama-34b":{name:"CodeLlama 34B",type:"Code Generation",baseURL:"http://localhost:11434/api",model:"codellama:34b",description:"Best quality code generation (34B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby","swift","kotlin"],strengths:["best-quality","complex-systems","enterprise-code"],ram_required:"32GB"},"starcoder-15b":{name:"StarCoder 15B",type:"Code Completion",baseURL:"http://localhost:11434/api",model:"starcoder:15b",description:"Excellent code completion and understanding (15B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby","typescript","csharp"],strengths:["code-completion","understanding","context-awareness"],ram_required:"24GB"},"deepseek-coder":{name:"DeepSeek Coder",type:"High Performance",baseURL:"http://localhost:11434/api",model:"deepseek-coder:6.7b",description:"High-performance code generation (6.7B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby"],strengths:["performance","speed","efficiency"],ram_required:"12GB"},"wizardcoder-7b":{name:"WizardCoder 7B",type:"Instruction Following",baseURL:"http://localhost:11434/api",model:"wizardcoder:7b",description:"Great at following complex instructions (7B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby"],strengths:["instruction-following","complex-tasks","reasoning"],ram_required:"10GB"},"phi3-mini":{name:"Phi-3 Mini",type:"Lightweight General",baseURL:"http://localhost:11434/api",model:"phi3:mini",description:"Lightweight but powerful general-purpose model (3.8B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby"],strengths:["lightweight","fast","general-purpose"],ram_required:"6GB"},"llama3-8b":{name:"Llama 3 8B",type:"General Purpose",baseURL:"http://localhost:11434/api",model:"llama3:8b",description:"General purpose model good for documentation and planning (8B parameters)",languages:["python","javascript","java","cpp","go","rust","php","ruby"],strengths:["general-purpose","documentation","planning"],ram_required:"10GB"}},lW=(n,e=16)=>{const r=Object.values(Br).filter(s=>parseInt(s.ram_required.replace("GB",""))<=e);if(r.length===0)return"phi3-mini";switch(n){case"code-generation":return r.find(s=>s.strengths.includes("quality"))?.model||"codellama-7b";case"code-completion":return r.find(s=>s.strengths.includes("code-completion"))?.model||"starcoder-15b";case"instruction-following":return r.find(s=>s.strengths.includes("instruction-following"))?.model||"wizardcoder-7b";case"documentation":return r.find(s=>s.strengths.includes("general-purpose"))?.model||"llama3-8b";default:return"codellama-7b"}};class cW{constructor(){this.currentModel="codellama-7b",this.baseURL="http://localhost:11434/api",this.modelHealth={},this.initializeHealthMonitoring()}async initializeHealthMonitoring(){if(console.log("🔍 Initializing local AI health monitoring..."),typeof window<"u"&&(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")){console.log("🏠 Running on localhost - checking local AI models...");for(const[t,r]of Object.entries(Br))try{await this.checkModelHealth(t)}catch(s){console.log(`⚠️ Model ${t} not available:`,s.message)}setInterval(()=>{this.performHealthChecks()},6e4)}else{console.log("🌐 Running on deployed domain - using dynamic file generation");for(const[t,r]of Object.entries(Br))this.modelHealth[t]={isHealthy:!0,lastChecked:new Date,error:null};console.log("✅ Dynamic generation active - AI generation available")}}async checkModelHealth(e){try{const t=Br[e];if(!t)return!1;if(typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1")return console.log("🌐 Running on web domain - simulating healthy AI for demo purposes"),this.modelHealth[e]={isHealthy:!0,lastCheck:Date.now(),responseTime:100,note:"Demo mode - local AI simulation"},!0;const s=await At.post(`${t.baseURL}/generate`,{model:t.model,prompt:"Hello",stream:!1,options:{temperature:.1,max_tokens:10}},{timeout:1e4});return this.modelHealth[e]={isHealthy:!0,lastCheck:Date.now(),responseTime:s.data.total_duration||0},console.log(`✅ ${t.name} is healthy`),!0}catch(t){return this.modelHealth[e]={isHealthy:!1,lastCheck:Date.now(),error:t.message},console.log(`⚠️ ${e} health check failed:`,t.message),!1}}async performHealthChecks(){const e=Object.keys(Br).map(r=>this.checkModelHealth(r));await Promise.all(e);const t=Object.values(this.modelHealth).filter(r=>r.isHealthy);this.isHealthy=t.length>0,console.log(`📊 Local AI Health: ${t.length}/${Object.keys(Br).length} models healthy`)}getAvailableModels(){return Object.entries(Br).map(([e,t])=>({id:e,...t,isHealthy:this.modelHealth[e]?.isHealthy||!1}))}getHealthyModels(){return this.getAvailableModels().filter(e=>e.isHealthy)}getBestModel(e="code-generation"){const t=this.getHealthyModels();if(t.length===0)throw new Error("No healthy AI models available. Please check your local AI setup.");const r=lW(e);return Br[r]&&this.modelHealth[r]?.isHealthy?r:t[0].id}async generateCode(e,t={}){try{if(this.isEnhancementRequest(e,t))return console.log("🔧 Enhancement request detected - enhancing existing project"),await this.enhanceExistingProject(e,t);if(this.isMobileAppRequest(e))return console.log("📱 Mobile app request detected - using mobile app service"),await kR.generateMobileApp(e,t);if(this.isPaymentRequest(e))return console.log("💳 Payment integration request detected - using payment service"),await this.generatePaymentIntegration(e,t);console.log("🔍 Searching web for current knowledge and best practices...");const r=await oh.searchForKnowledge(e,t);let s=e,i=null;if(r.success&&r.knowledge?(i=r.knowledge,s=this.enhancePromptWithKnowledge(e,i,t),console.log("✅ Web search completed - enhanced prompt with current best practices")):console.log("⚠️ Web search unavailable - using prompt as-is"),typeof window<"u"&&window.location.hostname!=="localhost"&&window.location.hostname!=="127.0.0.1"&&!window.location.hostname.includes("localhost")&&!window.location.hostname.includes("127.0.0.1")){console.log("🌐 Running on external domain - using dynamic file generation (demo mode)");const S=await this.generateDynamicFiles(s,t);return i&&Object.keys(S.files).forEach(E=>{if(S.files[E]){const k=this.generateKnowledgeComment(i,E);S.files[E]=k+`
`+S.files[E]}}),{success:!0,files:S.files,message:`Generated comprehensive application with ${Object.keys(S.files).length} files using dynamic generation`,_webSearchResults:i}}const u=this.detectTaskType(s),d=this.getBestModel(u),p=Br[d];console.log(`🤖 Using ${p.name} for ${u} task with web knowledge`);const y=`${this.buildEnhancedSystemPrompt(t,p,i)}

User Request: ${s}`,x=await At.post(`${p.baseURL}/generate`,{model:p.model,prompt:y,stream:!1,options:{temperature:.7,max_tokens:4e3,top_p:.9,top_k:40}},{timeout:12e4});return this.parseEnhancedResponse(x.data.response,s,t,i)}catch(r){return console.error("❌ Enhanced AI generation failed:",r),this.createEnhancedFallbackResponse(e,t,null)}}detectTaskType(e){const t=e.toLowerCase();return t.includes("complete")||t.includes("finish")?"code-completion":t.includes("document")||t.includes("explain")?"documentation":t.includes("complex")||t.includes("advanced")?"instruction-following":this.isMobileAppRequest(e)?"mobile-app-generation":this.isPaymentRequest(e)?"payment-integration":"code-generation"}isMobileAppRequest(e){const t=e.toLowerCase();return["mobile app","ios app","android app","iphone app","android app","react native","flutter","ionic","pwa","progressive web app","capacitor","phone app","tablet app","app store","google play"].some(s=>t.includes(s))}isPaymentRequest(e){const t=e.toLowerCase();return["stripe","paypal","payment","checkout","billing","subscription","credit card","debit card","payment gateway","payment processing","ecommerce","online store","shopping cart","buy now","purchase","donation","fundraising","marketplace","split payment","refund","payment integration","payment system","payment api","webhook"].some(s=>t.includes(s))}async generatePaymentIntegration(e,t){try{console.log("💳 Generating payment integration...");const r=this.detectPaymentProvider(e),s=this.detectPaymentType(e),i=oW.generatePaymentIntegration({provider:r,type:s,amount:t.amount||29.99,currency:"USD",country:"US",features:t.features||[]});return{success:!0,files:{...i.integration.frontend,...i.integration.backend,...i.integration.documentation},message:`Generated ${r} ${s} integration with complete frontend, backend, and documentation`,provider:r,integrationType:s,setupInstructions:i.setupInstructions,features:i.features,pricing:i.pricing,_webSearchResults:null}}catch(r){return console.error("❌ Payment integration generation failed:",r),{success:!1,files:{},message:`Payment integration generation failed: ${r.message}`,error:r.message}}}detectPaymentProvider(e){const t=e.toLowerCase();return t.includes("stripe")?"stripe":t.includes("paypal")?"paypal":t.includes("square")?"square":t.includes("razorpay")?"razorpay":"stripe"}detectPaymentType(e){const t=e.toLowerCase();return t.includes("subscription")||t.includes("recurring")?"subscription-billing":t.includes("marketplace")||t.includes("split")?"marketplace-payments":t.includes("donation")||t.includes("fundraising")?"donation-system":t.includes("booking")||t.includes("reservation")?"booking-payments":t.includes("digital")||t.includes("download")?"digital-product-sales":t.includes("rental")||t.includes("rent")?"rental-payments":t.includes("auction")||t.includes("bid")?"auction-payments":"one-time-payment"}isEnhancementRequest(e,t){const r=e.toLowerCase(),s=["add","enhance","improve","update","modify","change","fix","implement","include","also add","can you add","please add","make it","make the","update the","modify the","change the","enhance the","improve the"],i=t.files&&Object.keys(t.files).length>0,o=s.some(u=>r.includes(u));return i&&o}async enhanceExistingProject(e,t){try{console.log("🔧 Enhancing existing project...");const r=t.files||{},s=Object.keys(r).join(", "),i=`
ENHANCEMENT REQUEST for existing project with files: ${s}

User Request: ${e}

IMPORTANT: This is an ENHANCEMENT request, not a new project creation. Please:
1. Keep all existing files and functionality
2. Add new features and improvements to the existing project
3. Maintain the current project structure
4. Enhance existing components rather than replacing them
5. Add new files only if necessary for new features
6. Ensure all new code integrates properly with existing code

Current project files: ${s}

Please provide the enhanced code that builds upon the existing project.`,o=await oh.searchForKnowledge(i,t);let u=i,d=null;o.success&&o.knowledge&&(d=o.knowledge,u=this.enhancePromptWithKnowledge(i,d,t),console.log("✅ Web search completed - enhanced prompt with current best practices"));const p=this.getBestModel("instruction-following"),f=Br[p];console.log(`🤖 Using ${f.name} for project enhancement`);const x=`${this.buildEnhancedSystemPrompt(t,f,d)}

Enhancement Request: ${u}`,S=await At.post(`${f.baseURL}/generate`,{model:f.model,prompt:x,stream:!1,options:{temperature:.7,max_tokens:6e3,top_p:.9,top_k:40}},{timeout:12e4});return this.parseEnhancedResponse(S.data.response,u,t,d)}catch(r){return console.error("❌ Project enhancement failed:",r),this.createEnhancedFallbackResponse(e,t,null)}}analyzePromptForCompleteness(e){const t=["dashboard","management","system","platform","application","with features","include","add","also","and","plus","multiple pages","navigation","routing","components","database","backend","api","authentication","crud","create","read","update","delete","manage","user management","data management","file management","integrate","connect","external","third-party","api","features","functionality","capabilities","tools","website","web app","web application","site","app","build","create","make","develop","generate"],r=e.toLowerCase(),s=this.extractFeatureCount(e),i=t.some(u=>r.includes(u)),o=e.trim().length>10&&!r.includes("hello")&&!r.includes("hi")&&!r.includes("test");return{isComprehensive:i||s>=2||o,featureCount:Math.max(s,o?3:s),complexity:i?"high":o?"medium":"low",suggestedArchitecture:this.suggestArchitecture(e)}}extractFeatureCount(e){const t=["feature","function","tool","capability","section","page","component","module","widget","panel","dashboard"];let r=0;const s=e.toLowerCase();t.forEach(u=>{const d=(s.match(new RegExp(u,"g"))||[]).length;r+=d});const i=(e.match(/\d+\./g)||[]).length,o=(e.match(/[-*•]/g)||[]).length;return Math.max(r,i,o)}suggestArchitecture(e){const t=e.toLowerCase();return t.includes("dashboard")||t.includes("admin")?"dashboard-architecture":t.includes("ecommerce")||t.includes("store")?"ecommerce-architecture":t.includes("blog")||t.includes("cms")?"cms-architecture":t.includes("portfolio")||t.includes("showcase")?"portfolio-architecture":"general-architecture"}buildSystemPrompt(e,t){const r=this.analyzePromptForCompleteness(e.prompt||"");return`You are an expert full-stack developer and AI assistant. Generate comprehensive, production-ready applications with full features and functionality.

Context:
- App Type: ${e.appType||"full-featured web application"}
- Language: ${e.language||"javascript"}
- Styling: ${e.styling||"tailwind"}
- Features: ${e.features?.join(", ")||"comprehensive functionality"}
- Complexity Analysis: ${r.isComprehensive?"COMPREHENSIVE APPLICATION":"SIMPLE APPLICATION"}
- Feature Count: ${r.featureCount} features detected
- Architecture: ${r.suggestedArchitecture}

CRITICAL INSTRUCTIONS FOR COMPREHENSIVE APPLICATIONS:
1. Generate MULTIPLE files for a complete application (HTML, CSS, JS, and additional components)
2. Create a FULL-FEATURED application, not just a single page
3. Include ALL necessary features for the requested application type
4. Add interactive elements, forms, navigation, and dynamic content
5. Implement proper state management and user interactions
6. Include responsive design for all screen sizes
7. Add proper error handling and validation
8. Use modern best practices and clean code structure
9. Make the application production-ready with all features working

REQUIRED FILE STRUCTURE:
- index.html (main application file)
- styles.css (complete styling)
- script.js (full JavaScript functionality)
- package.json (project configuration)
- README.md (setup and usage instructions)

ARCHITECTURE REQUIREMENTS:
- Generate a COMPLETE APPLICATION with multiple files
- Each file should be complete and functional
- Include proper imports/exports and dependencies
- Implement proper separation of concerns
- Add comprehensive error handling and validation

For example, if asked for a "health food tip webpage with full features":
- Create multiple pages/sections (home, tips, recipes, nutrition info, search, etc.)
- Add interactive features (search, filtering, favorites, sharing)
- Include forms for user input and feedback
- Add navigation between sections
- Implement dynamic content loading
- Include responsive design
- Add proper styling and animations

You are using ${t.name} - ${t.description}.
Supported languages: ${t.languages.join(", ")}.`}buildEnhancedSystemPrompt(e,t,r){let s=this.buildSystemPrompt(e,t);return r&&(s+=`

Current Best Practices and Knowledge (from web search):
${r.summary}

Key Best Practices to Follow:
${r.bestPractices.map(i=>`- ${i}`).join(`
`)}

Code Examples and Patterns:
${Object.entries(r.codeExamples).map(([i,o])=>`${i}: ${o}`).join(`
`)}

Additional Recommendations:
${r.recommendations.map(i=>`- ${i}`).join(`
`)}

Please incorporate these current best practices and modern techniques into your code generation.`),s}enhancePromptWithKnowledge(e,t,r){let s=e;return t&&(s+=`

Based on current best practices and modern web development standards, please ensure the application includes:
${t.bestPractices.slice(0,5).map(i=>`- ${i}`).join(`
`)}

Additional context: ${t.summary}`),s}parseEnhancedResponse(e,t,r,s){try{if(this.analyzePromptForCompleteness(t).isComprehensive){console.log("🚀 Using dynamic file generation for unlimited files...");const d=this.generateDynamicFiles(t,r);return s&&Object.keys(d).forEach(p=>{if(d[p]){const f=this.generateKnowledgeComment(s,p);d[p]=f+`
`+d[p]}}),{success:!0,files:d,message:`Generated comprehensive application with ${Object.keys(d).length} files using dynamic generation`,_webSearchResults:s}}const o=e.match(/```[\s\S]*?```/g);if(o&&o.length>0){const d={};o.forEach((f,y)=>{const S=f.split(`
`)[0].replace(/```/g,"").trim();let E;if(S&&S.includes("."))E=S;else{const I=f.replace(/```[\w]*\n?/,"").replace(/```$/,"");E=this.detectFilename(I,y)}const k=f.replace(/```[\w]*\n?/,"").replace(/```$/,"").trim();d[E]=k}),console.log("🔄 Enhancing with dynamic file generation...");const p=this.generateDynamicFiles(t,r,d);return s&&Object.keys(p).forEach(f=>{if(p[f]){const y=this.generateKnowledgeComment(s,f);p[f]=y+`
`+p[f]}}),{success:!0,files:p,message:`Generated multi-file application with ${Object.keys(p).length} files using dynamic generation`,_webSearchResults:s}}console.log("🔄 Using dynamic file generation as fallback...");const u=this.generateDynamicFiles(t,r);return s&&Object.keys(u).forEach(d=>{if(u[d]){const p=this.generateKnowledgeComment(s,d);u[d]=p+`
`+u[d]}}),{success:!0,files:u,message:`Generated comprehensive application with ${Object.keys(u).length} files using dynamic generation`,_webSearchResults:s}}catch(i){console.error("Error parsing enhanced AI response:",i);const o=this.generateDynamicFiles(t,r);return{success:!0,files:o,message:`Generated application with ${Object.keys(o).length} files using dynamic generation`,_webSearchResults:s}}}enhanceSingleFileResponse(e,t,r){const s={},i=t.toLowerCase();s["package.json"]=this.generatePackageJSON(t,r),s["README.md"]=this.generateREADME(t,r);const o=Object.keys(e).some(p=>p.endsWith(".html")),u=Object.keys(e).some(p=>p.endsWith(".css")),d=Object.keys(e).some(p=>p.endsWith(".js"));return o&&!u&&(s["styles.css"]=this.generateComprehensiveCSS(t,r)),o&&!d&&(s["script.js"]=this.generateComprehensiveJS(t,r)),(i.includes("component")||i.includes("react"))&&(s["components/App.jsx"]=this.generateReactComponent(t,r)),(i.includes("api")||i.includes("backend"))&&(s["server.js"]=this.generateServerFile(t,r)),(i.includes("database")||i.includes("data"))&&(s["data/schema.sql"]=this.generateDatabaseSchema(t,r)),s}async generateDynamicFiles(e,t,r={}){const s={...r};e.toLowerCase();const i=this.analyzePromptForCompleteness(e);console.log("🚀 Starting advanced dynamic file generation with all Lovable-style capabilities...");const o=t.projectId||this.generateProjectId();let u=null;try{u=await Va.getConversationContext(o,e),console.log("🧠 Conversation context loaded:",u?"Yes":"No")}catch(G){console.log("⚠️ Firebase context unavailable, continuing without memory:",G.message)}const d=this.analyzeCodebaseContext(s,t);console.log("📊 Codebase context analyzed:",d);const p=this.buildDependencyGraph(s,e);console.log("🔗 Dependency graph built:",Object.keys(p).length,"relationships");const f=this.generateComponentBasedFiles(e,t,s);console.log("🧩 Component files before assign:",Object.keys(f)),Object.assign(s,f),console.log("🧩 Component-based files generated:",Object.keys(f).length);const y=this.generateDatabaseDrivenFiles(e,t,s);Object.assign(s,y),console.log("🗄️ Database-driven files generated:",Object.keys(y).length);const x=this.generateProgressiveEnhancement(e,t,s);Object.assign(s,x),console.log("🚀 Progressive enhancement files generated:",Object.keys(x).length);const S=await this.persistContext(t,e,s);console.log("💾 Context persisted for future generations");try{await this.storeFilesInFirebase(s,S.projectId),console.log("☁️ Files stored in Firebase for unlimited storage")}catch(G){console.log("⚠️ Firebase storage unavailable, continuing without cloud storage:",G.message)}const E=await this.generateIteratively(e,S,s);Object.assign(s,E.files),console.log("🔄 Iterative files generated:",Object.keys(E.files).length);const k=this.createExpansionPlan(e,i,d,p);console.log("📋 Expansion plan created:",k.filesToGenerate.length,"files planned"),s["package.json"]=this.generatePackageJSON(e,t,d),s["README.md"]=this.generateREADME(e,t,d),s["index.html"]=this.generateMainHTML(e,t,d),s["styles.css"]=this.generateComprehensiveCSS(e,t,d),s["script.js"]=this.generateComprehensiveJS(e,t,d),this.getFileGenerators(e,i,d).forEach(G=>{const q=G(e,t,s,d,p);Object.assign(s,q)});const M=this.generateFeatureBasedFiles(e,t,s,d);Object.assign(s,M);const j=this.generateUtilityFiles(e,t,s,d);Object.assign(s,j);const C=this.enhanceFilesWithAdvancedPrompts(s,e,d);Object.assign(s,C);const F=`Generated ${Object.keys(s).length} files with advanced capabilities`;try{await Va.addPromptToMemory(o,e,F,{files:s,context:S,capabilities:{fullCodebaseContext:!0,multiTurnConversations:!0,fileDependencyManagement:!0,dynamicExpansion:!0,advancedPromptEngineering:!0,componentBasedGeneration:!0,databaseDrivenTemplates:!0,progressiveEnhancement:!0,contextPersistence:!0,memorySystem:!0}}),console.log("🧠 Conversation stored in memory for future reference")}catch(G){console.log("⚠️ Firebase memory unavailable, continuing without memory storage:",G.message)}return console.log(`✅ Generated ${Object.keys(s).length} files with all advanced capabilities`),console.log("📁 Generated files:",Object.keys(s)),{files:s,context:S,conversationContext:u,capabilities:{fullCodebaseContext:!0,multiTurnConversations:!0,fileDependencyManagement:!0,dynamicExpansion:!0,advancedPromptEngineering:!0,componentBasedGeneration:!0,databaseDrivenTemplates:!0,progressiveEnhancement:!0,contextPersistence:!0,memorySystem:!0},statistics:{totalFiles:Object.keys(s).length,technologies:d.technologies.length,patterns:d.patterns.length,complexity:d.complexity,dependencies:Object.keys(p).length,memoryEnabled:!0}}}analyzeCodebaseContext(e,t){const r={projectType:this.detectProjectType(e),architecture:this.detectArchitecture(e),technologies:this.detectTechnologies(e),patterns:this.detectPatterns(e),dependencies:this.extractDependencies(e),structure:this.analyzeStructure(e),complexity:this.calculateComplexity(e),gaps:this.identifyGaps(e,t)};return console.log("🔍 Codebase analysis:",{type:r.projectType,architecture:r.architecture,technologies:r.technologies.length,patterns:r.patterns.length,complexity:r.complexity}),r}detectProjectType(e){const t=Object.keys(e);return t.some(r=>r.includes("react")||r.includes("jsx"))?"react":t.some(r=>r.includes("vue"))?"vue":t.some(r=>r.includes("angular"))?"angular":t.some(r=>r.includes("server")||r.includes("api"))?"backend":t.some(r=>r.includes("mobile")||r.includes("app"))?"mobile":t.some(r=>r.includes("database")||r.includes("sql"))?"database":"web"}detectArchitecture(e){const t=[],r=Object.keys(e);return r.some(s=>s.includes("component"))&&t.push("component-based"),r.some(s=>s.includes("service"))&&t.push("service-oriented"),r.some(s=>s.includes("model"))&&t.push("model-driven"),r.some(s=>s.includes("controller"))&&t.push("mvc"),r.some(s=>s.includes("hook"))&&t.push("hook-based"),r.some(s=>s.includes("middleware"))&&t.push("middleware"),t.length>0?t:["monolithic"]}detectTechnologies(e){const t=new Set;return Object.keys(e).forEach(s=>{(s.endsWith(".jsx")||s.endsWith(".tsx"))&&t.add("react"),s.endsWith(".vue")&&t.add("vue"),s.endsWith(".ts")&&t.add("typescript"),s.endsWith(".py")&&t.add("python"),s.endsWith(".java")&&t.add("java"),s.endsWith(".go")&&t.add("go"),s.endsWith(".rs")&&t.add("rust"),s.endsWith(".sql")&&t.add("sql"),s.endsWith(".dockerfile")&&t.add("docker"),(s.endsWith(".yml")||s.endsWith(".yaml"))&&t.add("yaml")}),Array.from(t)}detectPatterns(e){const t=[],r=Object.keys(e);return r.some(s=>s.includes("singleton"))&&t.push("singleton"),r.some(s=>s.includes("factory"))&&t.push("factory"),r.some(s=>s.includes("observer"))&&t.push("observer"),r.some(s=>s.includes("adapter"))&&t.push("adapter"),r.some(s=>s.includes("decorator"))&&t.push("decorator"),r.some(s=>s.includes("strategy"))&&t.push("strategy"),t}extractDependencies(e){const t=new Set;return Object.values(e).forEach(r=>{typeof r=="string"&&((r.match(/import.*from\s+['"]([^'"]+)['"]/g)||[]).forEach(o=>{const u=o.match(/from\s+['"]([^'"]+)['"]/);u&&t.add(u[1])}),(r.match(/require\(['"]([^'"]+)['"]\)/g)||[]).forEach(o=>{const u=o.match(/require\(['"]([^'"]+)['"]\)/);u&&t.add(u[1])}))}),Array.from(t)}analyzeStructure(e){const t={hasFrontend:!1,hasBackend:!1,hasDatabase:!1,hasTests:!1,hasDocs:!1,hasConfig:!1,hasAssets:!1,depth:0,organization:"flat"},r=Object.keys(e);t.hasFrontend=r.some(i=>i.includes("src/")||i.includes("components/")||i.includes("pages/")),t.hasBackend=r.some(i=>i.includes("server")||i.includes("api")||i.includes("routes/")),t.hasDatabase=r.some(i=>i.includes("database")||i.includes("models/")||i.includes(".sql")),t.hasTests=r.some(i=>i.includes("test")||i.includes("spec")),t.hasDocs=r.some(i=>i.includes("docs/")||i.includes("README")),t.hasConfig=r.some(i=>i.includes("config/")||i.startsWith(".")),t.hasAssets=r.some(i=>i.includes("assets/")||i.includes("public/"));const s=Math.max(...r.map(i=>i.split("/").length));return t.depth=s,t.depth>2&&(t.organization="hierarchical"),r.some(i=>i.includes("src/"))&&(t.organization="src-based"),t}calculateComplexity(e){const t=Object.keys(e).length,r=Object.values(e).reduce((i,o)=>i+(typeof o=="string"?o.split(`
`).length:0),0);let s="simple";return(t>20||r>1e3)&&(s="medium"),(t>50||r>5e3)&&(s="high"),(t>100||r>1e4)&&(s="enterprise"),s}identifyGaps(e,t){const r=[],s=Object.keys(e);return s.includes("package.json")||r.push("package-configuration"),s.includes("README.md")||r.push("documentation"),s.some(i=>i.includes("test"))||r.push("testing"),s.some(i=>i.includes("config"))||r.push("configuration"),s.some(i=>i.includes("docker"))||r.push("containerization"),s.some(i=>i.includes("env"))||r.push("environment-config"),s.some(i=>i.includes("react"))&&!s.some(i=>i.includes("hook"))&&r.push("react-hooks"),s.some(i=>i.includes("api"))&&!s.some(i=>i.includes("middleware"))&&r.push("api-middleware"),s.some(i=>i.includes("database"))&&!s.some(i=>i.includes("migration"))&&r.push("database-migrations"),r}buildDependencyGraph(e,t){const r={},s=Object.keys(e);return s.forEach(i=>{r[i]={dependencies:[],dependents:[],type:this.getFileType(i),importance:this.calculateFileImportance(i,e[i])}}),s.forEach(i=>{const o=e[i];typeof o=="string"&&this.extractImports(o).forEach(d=>{const p=this.resolveImportPath(d,i,s);p&&r[p]&&(r[i].dependencies.push(p),r[p].dependents.push(i))})}),r}extractImports(e){const t=[];return(e.match(/import.*from\s+['"]([^'"]+)['"]/g)||[]).forEach(i=>{const o=i.match(/from\s+['"]([^'"]+)['"]/);o&&t.push(o[1])}),(e.match(/require\(['"]([^'"]+)['"]\)/g)||[]).forEach(i=>{const o=i.match(/require\(['"]([^'"]+)['"]\)/);o&&t.push(o[1])}),t}resolveImportPath(e,t,r){if(e.startsWith("./")||e.startsWith("../")){const s=t.substring(0,t.lastIndexOf("/")),i=this.resolveRelativePath(e,s),o=[".js",".jsx",".ts",".tsx",".json"];for(const u of o){const d=i+u;if(r.includes(d))return d}}return!e.startsWith(".")&&!e.startsWith("/"),null}resolveRelativePath(e,t){const r=e.split("/");let i=[...t.split("/").filter(o=>o)];for(const o of r)o===".."?i.pop():o!=="."&&i.push(o);return i.join("/")}getFileType(e){const t=e.split(".").pop().toLowerCase();return{js:"javascript",jsx:"react-component",ts:"typescript",tsx:"react-typescript",css:"stylesheet",scss:"sass",html:"markup",json:"configuration",md:"documentation",sql:"database",py:"python",java:"java",go:"go",rs:"rust"}[t]||"unknown"}calculateFileImportance(e,t){let r=1;if((e==="package.json"||e==="README.md")&&(r+=3),(e.includes("index")||e.includes("main"))&&(r+=2),(e.includes("app")||e.includes("App"))&&(r+=2),typeof t=="string"){const s=t.split(`
`).length;s>100&&(r+=1),s>500&&(r+=1)}return r}createExpansionPlan(e,t,r,s){const i={filesToGenerate:[],priorities:[],dependencies:[],rationale:[]},o=this.identifyNeededFiles(e,t,r);return i.filesToGenerate=o,i.priorities=this.prioritizeFiles(o,s),i.dependencies=this.identifyDependencies(o,s),i.rationale=this.generateRationale(o,e,r),i}identifyNeededFiles(e,t,r){const s=[],i=e.toLowerCase();return s.push("package.json","README.md","index.html","styles.css","script.js"),(r.projectType==="react"||i.includes("react"))&&s.push("src/App.jsx","src/index.js","src/components/Header.jsx","src/components/Footer.jsx","src/hooks/useData.js","src/services/api.js"),r.gaps.forEach(o=>{switch(o){case"testing":s.push("tests/setup.js","jest.config.js");break;case"configuration":s.push(".env.example",".gitignore");break;case"containerization":s.push("Dockerfile","docker-compose.yml");break}}),(i.includes("api")||i.includes("backend"))&&s.push("server.js","routes/api.js","middleware/auth.js"),i.includes("database")&&s.push("database/schema.sql","models/BaseModel.js"),s}prioritizeFiles(e,t){return e.sort((r,s)=>{const i=t[r]?.importance||1;return(t[s]?.importance||1)-i})}identifyDependencies(e,t){const r=[];return e.forEach(s=>{(t[s]?.dependencies||[]).forEach(o=>{e.includes(o)&&r.push({from:s,to:o})})}),r}generateRationale(e,t,r){return e.map(s=>{let i=`File ${s} is needed because: `;return s==="package.json"?i+="it defines project dependencies and scripts":s==="README.md"?i+="it provides project documentation and setup instructions":s.includes("component")?i+="it implements a React component for the user interface":s.includes("service")?i+="it handles business logic and API communication":s.includes("test")?i+="it ensures code quality through automated testing":i+="it supports the application functionality",i})}async generateIteratively(e,t,r=[]){console.log("🔄 Starting iterative file generation with conversation history...");const s=this.analyzeConversationHistory(r);console.log("💬 Conversation context:",s);const i=this.isContinuationRequest(e,r),o=this.isEnhancementRequest(e,r),u=this.isNewFeatureRequest(e,r);let d={};i?d=await this.continueFromPreviousState(e,t,r):o?d=await this.enhanceExistingFiles(e,t,r):u?d=await this.addNewFeatures(e,t,r):d=this.generateDynamicFiles(e,t);const p=this.updateConversationHistory(r,e,d),f=this.generateFollowUpSuggestions(d,e,s);return{files:d,conversationHistory:p,followUpSuggestions:f,isContinuation:i,isEnhancement:o,isNewFeature:u}}analyzeConversationHistory(e){const t={totalTurns:e.length,projectEvolution:[],technologiesUsed:new Set,patternsDetected:[],complexityGrowth:[],userPreferences:{},commonRequests:[]};return Array.isArray(e)||(e=[]),e.forEach((r,s)=>{t.projectEvolution.push({turn:s+1,prompt:r.prompt,filesGenerated:Object.keys(r.files||{}).length,timestamp:r.timestamp}),r.files&&Object.keys(r.files).forEach(o=>{o.endsWith(".jsx")&&t.technologiesUsed.add("react"),o.endsWith(".ts")&&t.technologiesUsed.add("typescript"),o.endsWith(".py")&&t.technologiesUsed.add("python")});const i=Object.keys(r.files||{}).length;t.complexityGrowth.push(i)}),t}isContinuationRequest(e,t){const r=["continue","keep going","add more","expand","extend","build on","follow up","next step","then","after that"],s=e.toLowerCase();return r.some(i=>s.includes(i))}isEnhancementRequest(e,t){const r=["improve","enhance","optimize","refactor","update","fix","modify","change","edit","better"],s=e.toLowerCase();return r.some(i=>s.includes(i))}isNewFeatureRequest(e,t){const r=["add","new feature","implement","create","build","feature","functionality","capability"],s=e.toLowerCase();return r.some(i=>s.includes(i))}async continueFromPreviousState(e,t,r){console.log("🔄 Continuing from previous state...");const i=r[r.length-1]?.files||{},o=this.analyzeCodebaseContext(i,t),u=this.generateContinuationFiles(e,t,o);return{...i,...u}}async enhanceExistingFiles(e,t,r){console.log("🔧 Enhancing existing files...");const i=r[r.length-1]?.files||{},o=this.createEnhancementPlan(e,i);return this.applyEnhancements(i,o)}async addNewFeatures(e,t,r){console.log("➕ Adding new features...");const i=r[r.length-1]?.files||{},o=this.analyzeCodebaseContext(i,t),u=this.generateNewFeatureFiles(e,t,o);return{...i,...u}}updateConversationHistory(e,t,r){const s={prompt:t,files:r,timestamp:new Date().toISOString(),fileCount:Object.keys(r).length,technologies:this.extractTechnologiesFromFiles(r)};return[...e,s]}generateFollowUpSuggestions(e,t,r){const s=[],i=Object.keys(e);return i.some(o=>o.includes("react"))&&(s.push("Add more React components for better UI"),s.push("Implement state management with Redux or Context"),s.push("Add unit tests for React components")),i.some(o=>o.includes("api"))&&(s.push("Add API documentation with Swagger"),s.push("Implement authentication middleware"),s.push("Add rate limiting and security features")),i.some(o=>o.includes("database"))&&(s.push("Add database migrations and seeders"),s.push("Implement data validation and sanitization"),s.push("Add database backup and recovery scripts")),r.totalTurns>0&&(s.push("Continue building on the existing features"),s.push("Add error handling and logging"),s.push("Implement monitoring and analytics")),s.slice(0,5)}generateContinuationFiles(e,t,r){const s={};return e.toLowerCase().includes("component")&&(s["src/components/NewComponent.jsx"]=this.generateReactComponent("NewComponent",e,t)),e.toLowerCase().includes("page")&&(s["src/pages/NewPage.jsx"]=this.generateReactComponent("NewPage",e,t)),e.toLowerCase().includes("service")&&(s["src/services/NewService.js"]=this.generateReactService("NewService",e,t)),s}createEnhancementPlan(e,t){const r={filesToEnhance:[],enhancements:[],newFiles:[]},s=Object.keys(t);return e.toLowerCase().includes("performance")&&(r.enhancements.push("optimize-performance"),r.filesToEnhance.push(...s.filter(i=>i.endsWith(".js")||i.endsWith(".jsx")))),e.toLowerCase().includes("security")&&(r.enhancements.push("add-security"),r.filesToEnhance.push(...s.filter(i=>i.includes("api")||i.includes("auth")))),e.toLowerCase().includes("testing")&&(r.enhancements.push("add-testing"),r.newFiles.push("tests/","jest.config.js")),r}applyEnhancements(e,t){const r={...e};return t.enhancements.forEach(s=>{switch(s){case"optimize-performance":Object.keys(r).forEach(i=>{(i.endsWith(".js")||i.endsWith(".jsx"))&&(r[i]=this.addPerformanceOptimizations(r[i]))});break;case"add-security":Object.keys(r).forEach(i=>{i.includes("api")&&(r[i]=this.addSecurityFeatures(r[i]))});break}}),r}generateNewFeatureFiles(e,t,r){const s={};return e.toLowerCase().includes("authentication")&&(s["src/auth/AuthProvider.jsx"]=this.generateAuthProvider(e,t),s["src/auth/LoginForm.jsx"]=this.generateLoginForm(e,t),s["src/utils/auth.js"]=this.generateAuthUtils(e,t)),e.toLowerCase().includes("payment")&&(s["src/payment/PaymentForm.jsx"]=this.generatePaymentForm(e,t),s["src/payment/PaymentService.js"]=this.generatePaymentService(e,t)),e.toLowerCase().includes("admin")&&(s["src/admin/AdminPanel.jsx"]=this.generateAdminPanel(e,t),s["src/admin/UserManagement.jsx"]=this.generateUserManagement(e,t)),s}extractTechnologiesFromFiles(e){const t=new Set;return Object.keys(e).forEach(r=>{r.endsWith(".jsx")&&t.add("react"),r.endsWith(".ts")&&t.add("typescript"),r.endsWith(".py")&&t.add("python"),r.endsWith(".java")&&t.add("java"),r.endsWith(".go")&&t.add("go"),r.endsWith(".rs")&&t.add("rust")}),Array.from(t)}addPerformanceOptimizations(e){return typeof e!="string"?e:`
// Performance optimizations added by DreamBuild AI
// - Memoization for expensive calculations
// - Lazy loading for components
// - Debouncing for user inputs
// - Virtual scrolling for large lists

${e}`}addSecurityFeatures(e){return typeof e!="string"?e:`
// Security features added by DreamBuild AI
// - Input validation and sanitization
// - Rate limiting
// - CORS configuration
// - Authentication middleware

${e}`}generateComponentBasedFiles(e,t,r={}){console.log("🧩 Starting component-based generation...");const s=this.analyzeComponentRequirements(e);console.log("📋 Component requirements:",s);const i=this.generateComponentHierarchy(s,r);console.log("🌳 Component hierarchy:",i);const o=this.generateFilesForComponents(i,e,t);console.log("📁 Generated component files:",Object.keys(o).length);const u=this.generateSupportingFilesForComponents(o,e,t);return console.log("🔧 Generated supporting files:",Object.keys(u).length),{...o,...u}}analyzeComponentRequirements(e){const t={components:[],patterns:[],dependencies:[],complexity:"simple"},r=e.toLowerCase();(r.includes("button")||r.includes("form"))&&t.components.push({type:"form",name:"FormComponent",props:["onSubmit","validation","fields"],dependencies:["validation","state-management"]}),(r.includes("table")||r.includes("list")||r.includes("grid"))&&t.components.push({type:"data-display",name:"DataTable",props:["data","columns","pagination","sorting"],dependencies:["data-fetching","state-management"]}),(r.includes("modal")||r.includes("dialog")||r.includes("popup"))&&t.components.push({type:"overlay",name:"Modal",props:["isOpen","onClose","children"],dependencies:["portal","focus-management"]}),(r.includes("chart")||r.includes("graph")||r.includes("visualization"))&&t.components.push({type:"visualization",name:"Chart",props:["data","type","options"],dependencies:["chart-library","data-processing"]}),(r.includes("navigation")||r.includes("menu")||r.includes("sidebar"))&&t.components.push({type:"navigation",name:"Navigation",props:["items","activeItem","onNavigate"],dependencies:["routing","state-management"]}),(r.includes("crud")||r.includes("admin"))&&t.patterns.push("crud-pattern"),(r.includes("dashboard")||r.includes("analytics"))&&t.patterns.push("dashboard-pattern"),(r.includes("auth")||r.includes("login"))&&t.patterns.push("auth-pattern"),(r.includes("ecommerce")||r.includes("shop"))&&t.patterns.push("ecommerce-pattern");const s=t.components.length,i=t.patterns.length;return s>5||i>2?t.complexity="complex":(s>2||i>1)&&(t.complexity="medium"),t}generateComponentHierarchy(e,t){const r={root:null,components:[],relationships:[],layers:[]};return e.patterns.includes("dashboard-pattern")?r.root="Dashboard":e.patterns.includes("ecommerce-pattern")?r.root="EcommerceApp":e.patterns.includes("auth-pattern")?r.root="AuthApp":r.root="App",e.components.forEach(s=>{const i={name:s.name,type:s.type,props:s.props,dependencies:s.dependencies,children:[],parent:null,level:0};s.type==="navigation"?(i.parent=r.root,i.level=1):s.type==="form"||s.type==="data-display"?(i.parent="MainContent",i.level=2):s.type==="overlay"&&(i.parent=r.root,i.level=3),r.components.push(i)}),r.components.forEach(s=>{s.parent&&r.relationships.push({from:s.parent,to:s.name,type:"contains"})}),r.layers=[{name:"Presentation",components:r.components.filter(s=>s.level<=1)},{name:"Business Logic",components:r.components.filter(s=>s.level===2)},{name:"Data Access",components:r.components.filter(s=>s.level>=3)}],r}generateFilesForComponents(e,t,r){const s={};return e.root&&(s[`src/components/${e.root}.jsx`]=this.generateRootComponent(e.root,e,t,r)),e.components.forEach(i=>{const o=this.generateComponentFile(i,e,t,r);s[`src/components/${i.name}.jsx`]=o;const u=this.generateComponentSpecificFiles(i,t,r);Object.assign(s,u)}),s["src/components/index.js"]=this.generateComponentIndex(e.components),(t.toLowerCase().includes("storybook")||t.toLowerCase().includes("story"))&&e.components.forEach(i=>{s[`src/components/${i.name}.stories.js`]=this.generateComponentStory(i,t,r)}),s}generateRootComponent(e,t,r,s){const i=t.components.filter(o=>o.parent===e);return`import React, { useState, useEffect } from 'react';
import './${e}.css';

${i.map(o=>`import ${o.name} from './${o.name}';`).join(`
`)}

const ${e} = () => {
  const [state, setState] = useState({
    // Component state
  });

  useEffect(() => {
    // Component initialization
  }, []);

  return (
    <div className="${e.toLowerCase()}">
      <header className="app-header">
        <h1>${r}</h1>
      </header>
      
      <main className="app-main">
        ${i.map(o=>`<${o.name} 
          ${o.props.map(u=>`${u}={state.${u}}`).join(`
          `)}
        />`).join(`
        `)}
      </main>
      
      <footer className="app-footer">
        <p>Generated by DreamBuild AI with component-based architecture</p>
      </footer>
    </div>
  );
};

export default ${e};`}generateComponentFile(e,t,r,s){const i=e.props||[],o=e.dependencies||[];return`import React, { useState, useEffect, useMemo, useCallback } from 'react';
import PropTypes from 'prop-types';
import './${e.name}.css';

${o.includes("data-fetching")?"import { useData } from '../hooks/useData';":""}
${o.includes("state-management")?"import { useAppState } from '../context/AppContext';":""}
${o.includes("validation")?"import { validateForm } from '../utils/validation';":""}

const ${e.name} = ({ ${i.join(", ")}, ...props }) => {
  const [localState, setLocalState] = useState({});
  
  ${o.includes("data-fetching")?"const { data, loading, error } = useData();":""}
  ${o.includes("state-management")?"const { state, dispatch } = useAppState();":""}

  const memoizedValue = useMemo(() => {
    // Expensive calculations
    return null;
  }, [/* dependencies */]);

  const handleAction = useCallback((action) => {
    // Handle component actions
  }, [/* dependencies */]);

  useEffect(() => {
    // Component lifecycle
  }, []);

  if (loading) return <div className="loading">Loading...</div>;
  if (error) return <div className="error">Error: {error.message}</div>;

  return (
    <div className="${e.name.toLowerCase()}" {...props}>
      <h2>${e.name}</h2>
      {/* Component content */}
    </div>
  );
};

${e.name}.propTypes = {
  ${i.map(u=>`${u}: PropTypes.${this.getPropType(u)}`).join(`,
  `)}
};

${e.name}.defaultProps = {
  ${i.map(u=>`${u}: ${this.getDefaultValue(u)}`).join(`,
  `)}
};

export default ${e.name};`}generateComponentSpecificFiles(e,t,r){const s={};return s[`src/components/${e.name}.css`]=this.generateComponentCSS(e,t,r),s[`src/components/${e.name}.test.js`]=this.generateComponentTest(e,t,r),e.dependencies.includes("data-fetching")&&(s[`src/hooks/use${e.name}.js`]=this.generateComponentHook(e,t,r)),e.dependencies.includes("api")&&(s[`src/services/${e.name}Service.js`]=this.generateComponentService(e,t,r)),s}generateComponentCSS(e,t,r){return`/* ${e.name} Component Styles */
.${e.name.toLowerCase()} {
  /* Component base styles */
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1rem;
  border-radius: 8px;
  background: white;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.${e.name.toLowerCase()} h2 {
  margin: 0 0 1rem 0;
  color: #333;
  font-size: 1.5rem;
}

/* Responsive design */
@media (max-width: 768px) {
  .${e.name.toLowerCase()} {
    padding: 0.5rem;
  }
}

/* State-based styles */
.${e.name.toLowerCase()}.loading {
  opacity: 0.6;
  pointer-events: none;
}

.${e.name.toLowerCase()}.error {
  border-color: #ef4444;
  background-color: #fef2f2;
}

/* Animation */
.${e.name.toLowerCase()} {
  transition: all 0.3s ease;
}

.${e.name.toLowerCase()}:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}`}generateComponentTest(e,t,r){return`import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import ${e.name} from './${e.name}';

describe('${e.name}', () => {
  const defaultProps = {
    ${e.props.map(s=>`${s}: ${this.getTestValue(s)}`).join(`,
    `)}
  };

  beforeEach(() => {
    // Setup before each test
  });

  test('renders without crashing', () => {
    render(<${e.name} {...defaultProps} />);
    expect(screen.getByText('${e.name}')).toBeInTheDocument();
  });

  test('handles user interactions', () => {
    const mockHandler = jest.fn();
    render(<${e.name} {...defaultProps} onAction={mockHandler} />);
    
    // Test user interactions
    const button = screen.getByRole('button');
    fireEvent.click(button);
    
    expect(mockHandler).toHaveBeenCalled();
  });

  test('displays loading state', () => {
    render(<${e.name} {...defaultProps} loading={true} />);
    expect(screen.getByText('Loading...')).toBeInTheDocument();
  });

  test('displays error state', () => {
    const error = new Error('Test error');
    render(<${e.name} {...defaultProps} error={error} />);
    expect(screen.getByText(/Error:/)).toBeInTheDocument();
  });
});`}generateComponentHook(e,t,r){return`import { useState, useEffect, useCallback } from 'react';

const use${e.name} = (initialData = null) => {
  const [data, setData] = useState(initialData);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const fetchData = useCallback(async () => {
    setLoading(true);
    setError(null);
    
    try {
      // Fetch data logic
      const response = await fetch('/api/${e.name.toLowerCase()}');
      const result = await response.json();
      setData(result);
    } catch (err) {
      setError(err);
    } finally {
      setLoading(false);
    }
  }, []);

  const updateData = useCallback(async (newData) => {
    setLoading(true);
    setError(null);
    
    try {
      // Update data logic
      const response = await fetch('/api/${e.name.toLowerCase()}', {
        method: 'PUT',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(newData)
      });
      const result = await response.json();
      setData(result);
    } catch (err) {
      setError(err);
    } finally {
      setLoading(false);
    }
  }, []);

  useEffect(() => {
    fetchData();
  }, [fetchData]);

  return {
    data,
    loading,
    error,
    fetchData,
    updateData
  };
};

export default use${e.name};`}generateComponentService(e,t,r){return`class ${e.name}Service {
  constructor() {
    this.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:3000/api';
  }

  async getAll() {
    const response = await fetch(\`\${this.baseURL}/${e.name.toLowerCase()}\`);
    if (!response.ok) throw new Error('Failed to fetch data');
    return response.json();
  }

  async getById(id) {
    const response = await fetch(\`\${this.baseURL}/${e.name.toLowerCase()}/\${id}\`);
    if (!response.ok) throw new Error('Failed to fetch item');
    return response.json();
  }

  async create(data) {
    const response = await fetch(\`\${this.baseURL}/${e.name.toLowerCase()}\`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    if (!response.ok) throw new Error('Failed to create item');
    return response.json();
  }

  async update(id, data) {
    const response = await fetch(\`\${this.baseURL}/${e.name.toLowerCase()}/\${id}\`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(data)
    });
    if (!response.ok) throw new Error('Failed to update item');
    return response.json();
  }

  async delete(id) {
    const response = await fetch(\`\${this.baseURL}/${e.name.toLowerCase()}/\${id}\`, {
      method: 'DELETE'
    });
    if (!response.ok) throw new Error('Failed to delete item');
    return response.json();
  }
}

export default new ${e.name}Service();`}generateComponentIndex(e){return`// Component exports
${e.map(r=>`export { default as ${r.name} } from './${r.name}';`).join(`
`)}

// Re-export all components as default
export * from './index';`}generateComponentStory(e,t,r){return`import React from 'react';
import { ${e.name} } from './${e.name}';

export default {
  title: 'Components/${e.name}',
  component: ${e.name},
  parameters: {
    layout: 'centered',
  },
  tags: ['autodocs'],
};

export const Default = {
  args: {
    ${e.props.map(s=>`${s}: ${this.getStoryValue(s)}`).join(`,
    `)}
  },
};

export const Loading = {
  args: {
    ...Default.args,
    loading: true,
  },
};

export const Error = {
  args: {
    ...Default.args,
    error: new Error('Something went wrong'),
  },
};`}generateSupportingFilesForComponents(e,t,r){const s={};return s["src/context/AppContext.jsx"]=this.generateAppContext(t,r),s["src/utils/validation.js"]=this.generateValidationUtils(t,r),s["src/utils/helpers.js"]=this.generateHelperUtils(t,r),s["src/hooks/useData.js"]=this.generateDataHook(t,r),s["src/hooks/useLocalStorage.js"]=this.generateLocalStorageHook(t,r),s["src/services/api.js"]=this.generateAPIService(t,r),s["src/services/storage.js"]=this.generateStorageService(t,r),s}getPropType(e){return{onSubmit:"func",validation:"func",fields:"array",data:"array",columns:"array",pagination:"object",sorting:"object",isOpen:"bool",onClose:"func",children:"node",type:"string",options:"object",items:"array",activeItem:"string",onNavigate:"func"}[e]||"any"}getDefaultValue(e){return{onSubmit:"() => {}",validation:"() => true",fields:"[]",data:"[]",columns:"[]",pagination:"{}",sorting:"{}",isOpen:"false",onClose:"() => {}",children:"null",type:"'bar'",options:"{}",items:"[]",activeItem:"''",onNavigate:"() => {}"}[e]||"null"}getTestValue(e){return{onSubmit:"jest.fn()",validation:"jest.fn(() => true)",fields:"[]",data:"[]",columns:"[]",pagination:"{}",sorting:"{}",isOpen:"false",onClose:"jest.fn()",children:"null",type:"'bar'",options:"{}",items:"[]",activeItem:"''",onNavigate:"jest.fn()"}[e]||"null"}getStoryValue(e){return{onSubmit:'() => console.log("Submitted")',validation:"() => true",fields:'[{ name: "email", type: "email" }]',data:'[{ id: 1, name: "Item 1" }]',columns:'[{ key: "name", title: "Name" }]',pagination:"{ page: 1, limit: 10 }",sorting:'{ field: "name", direction: "asc" }',isOpen:"true",onClose:'() => console.log("Closed")',children:"Modal Content",type:"'bar'",options:"{ responsive: true }",items:'[{ label: "Home", href: "/" }]',activeItem:"'home'",onNavigate:'() => console.log("Navigated")'}[e]||"null"}generateDatabaseDrivenFiles(e,t,r={}){console.log("🗄️ Starting database-driven template generation...");const s=this.buildTemplateQuery(e,t);console.log("🔍 Template query:",s);const i=this.queryTemplateDatabase(s);console.log("📚 Retrieved templates:",i.length);const o=this.generateFilesFromTemplates(i,e,t,r);return console.log("📁 Generated files from templates:",Object.keys(o).length),this.storeNewPatterns(e,o,t),o}buildTemplateQuery(e,t){return{keywords:this.extractKeywords(e),technologies:this.extractTechnologiesFromPrompt(e),patterns:this.extractPatternsFromPrompt(e),complexity:this.assessComplexity(e),context:t,timestamp:new Date().toISOString()}}extractKeywords(e){const t=[],r=e.toLowerCase();return r.includes("button")&&t.push("button","ui","interaction"),r.includes("form")&&t.push("form","input","validation"),r.includes("table")&&t.push("table","data","grid"),r.includes("modal")&&t.push("modal","dialog","overlay"),r.includes("chart")&&t.push("chart","graph","visualization"),r.includes("navigation")&&t.push("navigation","menu","routing"),r.includes("auth")&&t.push("authentication","login","security"),r.includes("payment")&&t.push("payment","checkout","billing"),r.includes("admin")&&t.push("admin","management","dashboard"),r.includes("ecommerce")&&t.push("ecommerce","shop","store"),r.includes("blog")&&t.push("blog","cms","content"),r.includes("api")&&t.push("api","backend","server"),r.includes("database")&&t.push("database","data","storage"),r.includes("mobile")&&t.push("mobile","app","responsive"),r.includes("pwa")&&t.push("pwa","progressive","offline"),t}extractTechnologiesFromPrompt(e){const t=[],r=e.toLowerCase();return r.includes("react")&&t.push("react","jsx"),r.includes("vue")&&t.push("vue","vuejs"),r.includes("angular")&&t.push("angular","typescript"),r.includes("svelte")&&t.push("svelte"),r.includes("next")&&t.push("nextjs","react"),r.includes("nuxt")&&t.push("nuxt","vue"),r.includes("gatsby")&&t.push("gatsby","react"),r.includes("sveltekit")&&t.push("sveltekit","svelte"),t}extractPatternsFromPrompt(e){const t=[],r=e.toLowerCase();return r.includes("crud")&&t.push("crud","data-management"),r.includes("dashboard")&&t.push("dashboard","analytics"),r.includes("auth")&&t.push("authentication","authorization"),r.includes("ecommerce")&&t.push("ecommerce","shopping-cart"),r.includes("blog")&&t.push("cms","content-management"),r.includes("admin")&&t.push("admin-panel","management"),r.includes("landing")&&t.push("landing-page","marketing"),r.includes("portfolio")&&t.push("portfolio","showcase"),t}assessComplexity(e){const t=e.toLowerCase();let r="simple";const s=["full-stack","enterprise","scalable","microservices","multi-tenant","real-time","advanced","complex","comprehensive","production-ready","enterprise-grade"],i=["auth","payment","admin","api","database","mobile","dashboard","analytics","notification","search"].filter(o=>t.includes(o)).length;return s.some(o=>t.includes(o))?r="enterprise":i>5||t.includes("multiple")?r="complex":(i>2||t.includes("with"))&&(r="medium"),r}queryTemplateDatabase(e){return this.getTemplateDatabase().filter(s=>{const i=e.keywords.some(p=>s.keywords.some(f=>f.toLowerCase().includes(p.toLowerCase()))),o=e.technologies.some(p=>s.technologies.includes(p)),u=e.patterns.some(p=>s.patterns.includes(p)),d=s.complexity===e.complexity;return i||o||u||d}).sort((s,i)=>i.relevanceScore-s.relevanceScore)}getTemplateDatabase(){return[{id:"react-dashboard",name:"React Dashboard Template",keywords:["dashboard","analytics","admin","management"],technologies:["react","jsx","typescript"],patterns:["dashboard","data-visualization"],complexity:"medium",relevanceScore:.9,files:{"src/components/Dashboard.jsx":"// Dashboard component template","src/components/Chart.jsx":"// Chart component template","src/components/DataTable.jsx":"// Data table template"}},{id:"ecommerce-store",name:"E-commerce Store Template",keywords:["ecommerce","shop","store","payment","checkout"],technologies:["react","jsx"],patterns:["ecommerce","shopping-cart"],complexity:"complex",relevanceScore:.8,files:{"src/components/ProductList.jsx":"// Product list template","src/components/Cart.jsx":"// Shopping cart template","src/components/Checkout.jsx":"// Checkout template"}},{id:"auth-system",name:"Authentication System Template",keywords:["auth","login","register","security"],technologies:["react","jsx"],patterns:["authentication","authorization"],complexity:"medium",relevanceScore:.7,files:{"src/components/LoginForm.jsx":"// Login form template","src/components/RegisterForm.jsx":"// Register form template","src/components/ProtectedRoute.jsx":"// Protected route template"}},{id:"blog-cms",name:"Blog CMS Template",keywords:["blog","cms","content","article"],technologies:["react","jsx"],patterns:["cms","content-management"],complexity:"medium",relevanceScore:.6,files:{"src/components/BlogPost.jsx":"// Blog post template","src/components/PostList.jsx":"// Post list template","src/components/Editor.jsx":"// Content editor template"}}]}generateFilesFromTemplates(e,t,r,s){const i={};return e.forEach(o=>{console.log(`📋 Using template: ${o.name}`),Object.entries(o.files).forEach(([d,p])=>{const f=this.generateContentFromTemplate(p,o,t,r);i[d]=f});const u=this.generateAdditionalFilesFromTemplate(o,t,r);Object.assign(i,u)}),i}generateContentFromTemplate(e,t,r,s){let i=e;return i=i.replace(/\{\{PROMPT\}\}/g,r),i=i.replace(/\{\{TEMPLATE_NAME\}\}/g,t.name),i=i.replace(/\{\{TECHNOLOGIES\}\}/g,t.technologies.join(", ")),i=i.replace(/\{\{PATTERNS\}\}/g,t.patterns.join(", ")),i=i.replace(/\{\{COMPLEXITY\}\}/g,t.complexity),t.patterns.includes("dashboard")&&(i+=`
// Dashboard-specific functionality added by DreamBuild AI`),t.patterns.includes("ecommerce")&&(i+=`
// E-commerce functionality added by DreamBuild AI`),t.patterns.includes("authentication")&&(i+=`
// Authentication functionality added by DreamBuild AI`),i}generateAdditionalFilesFromTemplate(e,t,r){const s={};return e.patterns.includes("dashboard")&&(s["src/utils/chartHelpers.js"]=this.generateChartHelpers(t,r),s["src/hooks/useAnalytics.js"]=this.generateAnalyticsHook(t,r)),e.patterns.includes("ecommerce")&&(s["src/services/paymentService.js"]=this.generatePaymentService(t,r),s["src/utils/currency.js"]=this.generateCurrencyUtils(t,r)),e.patterns.includes("authentication")&&(s["src/context/AuthContext.jsx"]=this.generateAuthContext(t,r),s["src/utils/token.js"]=this.generateTokenUtils(t,r)),s["package.json"]=this.generatePackageJSONFromTemplate(e,t,r),s["README.md"]=this.generateREADMEFromTemplate(e,t,r),s}storeNewPatterns(e,t,r){const s={id:`pattern-${Date.now()}`,name:`Generated Pattern: ${e.substring(0,50)}...`,keywords:this.extractKeywords(e),technologies:this.extractTechnologiesFromPrompt(e),patterns:this.extractPatternsFromPrompt(e),complexity:this.assessComplexity(e),relevanceScore:.5,files:t,createdAt:new Date().toISOString(),usageCount:1};console.log("💾 Storing new pattern:",s.name),this.updateTemplateDatabase(s)}async updateTemplateDatabase(e){try{this.firebaseApp||await this.initializeFirebase(),await this.firebaseApp.firestore().collection("templates").doc(e.id).set({...e,updatedAt:new Date().toISOString()}),console.log("🔄 Template database updated in Firebase")}catch(t){console.error("❌ Failed to update template database:",t)}}async storeFilesInFirebase(e,t){try{this.firebaseApp||await this.initializeFirebase(),await this.firebaseApp.firestore().collection("projectFiles").doc(t).set({projectId:t,files:e,fileCount:Object.keys(e).length,totalSize:JSON.stringify(e).length,storedAt:new Date().toISOString()}),console.log("✅ Files stored in Firebase successfully")}catch(r){throw console.error("❌ Failed to store files in Firebase:",r),r}}async loadFilesFromFirebase(e){try{this.firebaseApp||await this.initializeFirebase();const r=await this.firebaseApp.firestore().collection("projectFiles").doc(e).get();if(r.exists){const s=r.data();return console.log("✅ Files loaded from Firebase successfully"),s.files}else return console.log("❌ Files not found in Firebase"),null}catch(t){return console.error("❌ Failed to load files from Firebase:",t),null}}async storeTemplateDatabase(e){try{this.firebaseApp||await this.initializeFirebase();const t=this.firebaseApp.firestore(),r=t.batch();e.forEach(s=>{const i=t.collection("templates").doc(s.id);r.set(i,{...s,updatedAt:new Date().toISOString()})}),await r.commit(),console.log("✅ Template database stored in Firebase successfully")}catch(t){throw console.error("❌ Failed to store template database:",t),t}}async loadTemplateDatabaseFromFirebase(){try{this.firebaseApp||await this.initializeFirebase();const t=await this.firebaseApp.firestore().collection("templates").get(),r=[];return t.forEach(s=>{r.push(s.data())}),console.log("✅ Template database loaded from Firebase successfully"),r}catch(e){return console.error("❌ Failed to load template database:",e),this.getTemplateDatabase()}}generateProgressiveEnhancement(e,t,r={}){console.log("🚀 Starting progressive enhancement generation...");const s=this.analyzeCurrentState(r,t);console.log("📊 Current state:",s);const i=this.createEnhancementRoadmap(e,s);console.log("🗺️ Enhancement roadmap:",i);const o=this.generateIncrementalEnhancements(i,e,t,r);return console.log("📁 Enhanced files:",Object.keys(o).length),this.updateContextWithEnhancements(t,o,i),o}analyzeCurrentState(e,t){return{files:Object.keys(e),technologies:this.detectTechnologies(e),patterns:this.detectPatterns(e),architecture:this.detectArchitecture(e),complexity:this.calculateComplexity(e),gaps:this.identifyGaps(e,t),features:this.extractFeatures(e),dependencies:this.extractDependencies(e)}}createEnhancementRoadmap(e,t){const r={phases:[],priorities:[],dependencies:[],timeline:[]},s=e.toLowerCase();return t.files.includes("package.json")||r.phases.push({phase:1,name:"Core Foundation",files:["package.json","README.md","index.html"],priority:"high",estimatedTime:"5 minutes"}),t.files.some(i=>i.includes("src/"))||r.phases.push({phase:2,name:"Basic Structure",files:["src/App.jsx","src/index.js","src/styles.css"],priority:"high",estimatedTime:"10 minutes"}),(s.includes("component")||s.includes("react"))&&r.phases.push({phase:3,name:"Component Architecture",files:["src/components/","src/hooks/","src/context/"],priority:"medium",estimatedTime:"15 minutes"}),(s.includes("auth")||s.includes("payment")||s.includes("admin"))&&r.phases.push({phase:4,name:"Advanced Features",files:["src/auth/","src/payment/","src/admin/"],priority:"medium",estimatedTime:"20 minutes"}),(s.includes("test")||s.includes("documentation"))&&r.phases.push({phase:5,name:"Testing & Documentation",files:["tests/","docs/","jest.config.js"],priority:"low",estimatedTime:"10 minutes"}),(s.includes("deploy")||s.includes("production"))&&r.phases.push({phase:6,name:"Deployment & Production",files:["Dockerfile","docker-compose.yml","deploy.sh"],priority:"low",estimatedTime:"15 minutes"}),r}generateIncrementalEnhancements(e,t,r,s){const i={...s};return e.phases.forEach(o=>{console.log(`🔄 Processing phase ${o.phase}: ${o.name}`),o.files.forEach(u=>{if(u.endsWith("/")){const d=this.generateDirectoryFiles(u,t,r,o);Object.assign(i,d)}else i[u]||(i[u]=this.generateFileForPhase(u,t,r,o))})}),i}generateDirectoryFiles(e,t,r,s){const i={};return e==="src/components/"&&(i["src/components/Header.jsx"]=this.generateReactComponent("Header",t,r),i["src/components/Footer.jsx"]=this.generateReactComponent("Footer",t,r),i["src/components/Layout.jsx"]=this.generateReactComponent("Layout",t,r)),e==="src/hooks/"&&(i["src/hooks/useData.js"]=this.generateDataHook(t,r),i["src/hooks/useLocalStorage.js"]=this.generateLocalStorageHook(t,r)),e==="src/context/"&&(i["src/context/AppContext.jsx"]=this.generateAppContext(t,r)),e==="src/auth/"&&(i["src/auth/AuthProvider.jsx"]=this.generateAuthProvider(t,r),i["src/auth/LoginForm.jsx"]=this.generateLoginForm(t,r)),e==="src/payment/"&&(i["src/payment/PaymentForm.jsx"]=this.generatePaymentForm(t,r),i["src/payment/PaymentService.js"]=this.generatePaymentService(t,r)),e==="src/admin/"&&(i["src/admin/AdminPanel.jsx"]=this.generateAdminPanel(t,r),i["src/admin/UserManagement.jsx"]=this.generateUserManagement(t,r)),e==="tests/"&&(i["tests/setup.js"]=this.generateTestSetup(t,r),i["tests/App.test.js"]=this.generateUnitTests("App",t,r)),e==="docs/"&&(i["docs/README.md"]=this.generateDetailedREADME(t,r),i["docs/API.md"]=this.generateAPIDocumentation(t,r)),i}generateFileForPhase(e,t,r,s){switch(e){case"package.json":return this.generatePackageJSON(t,r);case"README.md":return this.generateREADME(t,r);case"index.html":return this.generateMainHTML(t,r);case"src/App.jsx":return this.generateMainReactApp(t,r);case"src/index.js":return this.generateReactIndex(t,r);case"src/styles.css":return this.generateComprehensiveCSS(t,r);case"jest.config.js":return this.generateJestConfig(t,r);case"Dockerfile":return this.generateDockerfile(t,r);case"docker-compose.yml":return this.generateDockerCompose(t,r);case"deploy.sh":return this.generateDeployScript(t,r);default:return`// Generated file: ${e}
// Phase: ${s.name}
// Prompt: ${t}`}}updateContextWithEnhancements(e,t,r){e.enhancementHistory=e.enhancementHistory||[],e.enhancementHistory.push({timestamp:new Date().toISOString(),roadmap:r,filesAdded:Object.keys(t).length,phases:r.phases.length}),e.currentPhase=r.phases.length,e.totalFiles=Object.keys(t).length}async persistContext(e,t,r){console.log("💾 Persisting context for future generations...");const s={projectId:e.projectId||this.generateProjectId(),projectName:e.projectName||this.extractProjectName(t),createdAt:e.createdAt||new Date().toISOString(),lastUpdated:new Date().toISOString(),prompt:t,files:r,technologies:this.detectTechnologies(r),patterns:this.detectPatterns(r),architecture:this.detectArchitecture(r),complexity:this.calculateComplexity(r),enhancementHistory:e.enhancementHistory||[],conversationHistory:e.conversationHistory||[],userPreferences:e.userPreferences||{},projectState:this.captureProjectState(r,e)};return await this.storeContextInStorage(s),s}loadPersistedContext(e){console.log(`📂 Loading persisted context for project: ${e}`);const t=this.loadContextFromStorage(e);return t?(console.log("✅ Context loaded successfully"),t):(console.log("❌ Context not found, creating new context"),this.createNewContext())}generateProjectId(){return`project-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}extractProjectName(e){return e.split(" ").slice(0,3).join("-").toLowerCase().replace(/[^a-z0-9-]/g,"")}captureProjectState(e,t){return{fileCount:Object.keys(e).length,totalLines:Object.values(e).reduce((r,s)=>r+(typeof s=="string"?s.split(`
`).length:0),0),technologies:this.detectTechnologies(e),patterns:this.detectPatterns(e),architecture:this.detectArchitecture(e),complexity:this.calculateComplexity(e),lastModified:new Date().toISOString()}}storeContextInStorage(e){try{this.isSmallData(e)?(localStorage.setItem(`dreambuild-context-${e.projectId}`,JSON.stringify(e)),console.log("💾 Context stored in localStorage")):(this.storeContextInFirebase(e),console.log("💾 Context stored in Firebase"))}catch(t){console.error("❌ Failed to store context:",t),this.storeContextInFirebase(e)}}isSmallData(e){const t=JSON.stringify(e).length,r=5*1024*1024;return t<r}async storeContextInFirebase(e){try{this.firebaseApp||await this.initializeFirebase(),await this.firebaseApp.firestore().collection("projectContexts").doc(e.projectId).set({...e,storedAt:new Date().toISOString(),dataSize:JSON.stringify(e).length}),console.log("✅ Context stored in Firebase successfully")}catch(t){throw console.error("❌ Failed to store context in Firebase:",t),t}}async loadContextFromFirebase(e){try{this.firebaseApp||await this.initializeFirebase();const r=await this.firebaseApp.firestore().collection("projectContexts").doc(e).get();if(r.exists){const s=r.data();return console.log("✅ Context loaded from Firebase successfully"),s}else return console.log("❌ Context not found in Firebase"),null}catch(t){return console.error("❌ Failed to load context from Firebase:",t),null}}async initializeFirebase(){try{const e={apiKey:xc.REACT_APP_FIREBASE_API_KEY||"your-api-key",authDomain:xc.REACT_APP_FIREBASE_AUTH_DOMAIN||"your-project.firebaseapp.com",projectId:xc.REACT_APP_FIREBASE_PROJECT_ID||"your-project-id",storageBucket:xc.REACT_APP_FIREBASE_STORAGE_BUCKET||"your-project.appspot.com",messagingSenderId:xc.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:xc.REACT_APP_FIREBASE_APP_ID||"your-app-id"};this.firebaseApp=await oi(()=>Promise.resolve().then(()=>vU),void 0).then(t=>!t.apps||!t.apps.length?t.initializeApp(e):t.app()),await oi(()=>Promise.resolve().then(()=>$a),void 0),console.log("🔥 Firebase initialized successfully")}catch(e){throw console.error("❌ Failed to initialize Firebase:",e),e}}async loadContextFromStorage(e){try{const t=localStorage.getItem(`dreambuild-context-${e}`);if(t)return console.log("📂 Context loaded from localStorage"),JSON.parse(t);const r=await this.loadContextFromFirebase(e);return r?(console.log("📂 Context loaded from Firebase"),r):(console.log("❌ Context not found in any storage"),null)}catch(t){return console.error("❌ Failed to load context:",t),null}}createNewContext(){return{projectId:this.generateProjectId(),projectName:"new-project",createdAt:new Date().toISOString(),lastUpdated:new Date().toISOString(),enhancementHistory:[],conversationHistory:[],userPreferences:{},projectState:{}}}enhanceFilesWithAdvancedPrompts(e,t,r){console.log("🧠 Applying advanced prompt engineering...");const s={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"){const u=this.applyAdvancedPromptEngineering(o,i,t,r);s[i]=u}else s[i]=o}),s}applyAdvancedPromptEngineering(e,t,r,s){let i=e;return i=this.addContextAwareComments(i,t,s),i=this.addSophisticatedErrorHandling(i,t),i=this.addPerformanceOptimizations(i,t),i=this.addAccessibilityFeatures(i,t),i=this.addSecurityConsiderations(i,t),i}addContextAwareComments(e,t,r){return`/*
 * Generated by DreamBuild AI with advanced prompt engineering
 * File: ${t}
 * Project Type: ${r.projectType}
 * Architecture: ${r.architecture.join(", ")}
 * Technologies: ${r.technologies.join(", ")}
 * Complexity: ${r.complexity}
 * Generated: ${new Date().toISOString()}
 */

${e}`}addSophisticatedErrorHandling(e,t){return t.endsWith(".js")||t.endsWith(".jsx")?`
// Sophisticated error handling added by DreamBuild AI
const handleError = (error, context = {}) => {
  console.error('Error in ${t}:', error);
  
  // Log error details
  const errorDetails = {
    message: error.message,
    stack: error.stack,
    context: context,
    timestamp: new Date().toISOString(),
    filename: '${t}'
  };
  
  // Send to error tracking service (if available)
  if (window.errorTracker) {
    window.errorTracker.captureException(error, errorDetails);
  }
  
  // Show user-friendly error message
  if (window.showError) {
    window.showError('Something went wrong. Please try again.');
  }
  
  return errorDetails;
};

// Wrap async functions with error handling
const withErrorHandling = (fn) => {
  return async (...args) => {
    try {
      return await fn(...args);
    } catch (error) {
      return handleError(error, { function: fn.name, args });
    }
  };
};

${e}`:e}addPerformanceOptimizations(e,t){return t.endsWith(".js")||t.endsWith(".jsx")?`
// Performance optimizations added by DreamBuild AI
// - Memoization for expensive calculations
// - Debouncing for user inputs
// - Lazy loading for components
// - Virtual scrolling for large lists

// Memoization utility
const memoize = (fn) => {
  const cache = new Map();
  return (...args) => {
    const key = JSON.stringify(args);
    if (cache.has(key)) {
      return cache.get(key);
    }
    const result = fn(...args);
    cache.set(key, result);
    return result;
  };
};

// Debounce utility
const debounce = (func, wait) => {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
};

${e}`:e}addAccessibilityFeatures(e,t){return t.endsWith(".jsx")||t.endsWith(".js")?`
// Accessibility features added by DreamBuild AI
// - ARIA labels and roles
// - Keyboard navigation support
// - Screen reader compatibility
// - Focus management

// Accessibility utilities
const accessibilityUtils = {
  // Add ARIA labels
  addAriaLabel: (element, label) => {
    if (element) {
      element.setAttribute('aria-label', label);
    }
  },
  
  // Manage focus
  manageFocus: (element) => {
    if (element) {
      element.focus();
    }
  },
  
  // Announce to screen readers
  announce: (message) => {
    const announcement = document.createElement('div');
    announcement.setAttribute('aria-live', 'polite');
    announcement.setAttribute('aria-atomic', 'true');
    announcement.className = 'sr-only';
    announcement.textContent = message;
    document.body.appendChild(announcement);
    
    setTimeout(() => {
      document.body.removeChild(announcement);
    }, 1000);
  }
};

${e}`:e}addSecurityConsiderations(e,t){return t.endsWith(".js")||t.endsWith(".jsx")?`
// Security considerations added by DreamBuild AI
// - Input validation and sanitization
// - XSS prevention
// - CSRF protection
// - Secure data handling

// Input validation
const validateInput = (input, type = 'string') => {
  if (typeof input !== 'string') {
    throw new Error('Input must be a string');
  }
  
  // Sanitize HTML
  const sanitized = input.replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi, '');
  
  // Validate based on type
  switch (type) {
    case 'email':
      return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(sanitized);
    case 'url':
      try {
        new URL(sanitized);
        return true;
      } catch {
        return false;
      }
    default:
      return sanitized.length > 0;
  }
};

// XSS prevention
const sanitizeHTML = (html) => {
  const div = document.createElement('div');
  div.textContent = html;
  return div.innerHTML;
};

${e}`:e}getFileGenerators(e,t){const r=[],s=e.toLowerCase();return(s.includes("react")||s.includes("component")||t.complexity==="high")&&r.push(this.generateReactFiles.bind(this)),(s.includes("api")||s.includes("backend")||s.includes("server"))&&r.push(this.generateBackendFiles.bind(this)),(s.includes("database")||s.includes("data")||s.includes("crud"))&&r.push(this.generateDatabaseFiles.bind(this)),(s.includes("test")||s.includes("testing")||t.complexity==="high")&&r.push(this.generateTestFiles.bind(this)),(s.includes("documentation")||s.includes("docs")||t.complexity==="high")&&r.push(this.generateDocumentationFiles.bind(this)),t.complexity==="high"&&r.push(this.generateConfigFiles.bind(this)),r}generateReactFiles(e,t,r){const s={};return s["src/App.jsx"]=this.generateMainReactApp(e,t),s["src/index.js"]=this.generateReactIndex(e,t),s["src/components/Header.jsx"]=this.generateReactComponent("Header",e,t),s["src/components/Footer.jsx"]=this.generateReactComponent("Footer",e,t),s["src/components/Layout.jsx"]=this.generateReactComponent("Layout",e,t),s["src/hooks/useData.js"]=this.generateReactHook("useData",e,t),s["src/services/api.js"]=this.generateReactService("api",e,t),s["src/utils/helpers.js"]=this.generateReactUtils(e,t),s["src/styles/App.css"]=this.generateReactCSS(e,t),s["src/styles/components.css"]=this.generateReactComponentCSS(e,t),e.toLowerCase().includes("dashboard")&&(s["src/components/Dashboard.jsx"]=this.generateReactComponent("Dashboard",e,t),s["src/components/Chart.jsx"]=this.generateReactComponent("Chart",e,t)),e.toLowerCase().includes("form")&&(s["src/components/Form.jsx"]=this.generateReactComponent("Form",e,t),s["src/components/Input.jsx"]=this.generateReactComponent("Input",e,t)),s}generateBackendFiles(e,t,r){const s={};return s["server.js"]=this.generateServerFile(e,t),s["routes/api.js"]=this.generateAPIRoutes(e,t),s["middleware/auth.js"]=this.generateAuthMiddleware(e,t),s["models/User.js"]=this.generateUserModel(e,t),s["controllers/userController.js"]=this.generateUserController(e,t),s["utils/database.js"]=this.generateDatabaseUtils(e,t),s["config/database.js"]=this.generateDatabaseConfig(e,t),s["middleware/validation.js"]=this.generateValidationMiddleware(e,t),s["utils/logger.js"]=this.generateLogger(e,t),s["tests/api.test.js"]=this.generateAPITests(e,t),s}generateDatabaseFiles(e,t,r){const s={};return s["database/schema.sql"]=this.generateDatabaseSchema(e,t),s["database/migrations/001_initial.sql"]=this.generateInitialMigration(e,t),s["database/seeders/initial_data.sql"]=this.generateSeedData(e,t),s["models/BaseModel.js"]=this.generateBaseModel(e,t),s["repositories/BaseRepository.js"]=this.generateBaseRepository(e,t),s["database/connection.js"]=this.generateDatabaseConnection(e,t),s}generateTestFiles(e,t,r){const s={};return s["tests/setup.js"]=this.generateTestSetup(e,t),s["tests/unit/App.test.js"]=this.generateUnitTests("App",e,t),s["tests/integration/api.test.js"]=this.generateIntegrationTests(e,t),s["tests/e2e/basic.test.js"]=this.generateE2ETests(e,t),s["jest.config.js"]=this.generateJestConfig(e,t),s["tests/utils/testHelpers.js"]=this.generateTestHelpers(e,t),s}generateDocumentationFiles(e,t,r){const s={};return s["docs/API.md"]=this.generateAPIDocumentation(e,t),s["docs/README.md"]=this.generateDetailedREADME(e,t),s["docs/CHANGELOG.md"]=this.generateChangelog(e,t),s["docs/CONTRIBUTING.md"]=this.generateContributingGuide(e,t),s["docs/DEPLOYMENT.md"]=this.generateDeploymentGuide(e,t),s["docs/ARCHITECTURE.md"]=this.generateArchitectureDoc(e,t),s}generateConfigFiles(e,t,r){const s={};return s[".env.example"]=this.generateEnvExample(e,t),s[".gitignore"]=this.generateGitignore(e,t),s[".eslintrc.js"]=this.generateESLintConfig(e,t),s[".prettierrc"]=this.generatePrettierConfig(e,t),s["docker-compose.yml"]=this.generateDockerCompose(e,t),s.Dockerfile=this.generateDockerfile(e,t),s["nginx.conf"]=this.generateNginxConfig(e,t),s["deploy.sh"]=this.generateDeployScript(e,t),s}generateFeatureBasedFiles(e,t,r){const s={},i=e.toLowerCase();return(i.includes("auth")||i.includes("login")||i.includes("user"))&&(s["src/auth/AuthProvider.jsx"]=this.generateAuthProvider(e,t),s["src/auth/LoginForm.jsx"]=this.generateLoginForm(e,t),s["src/auth/ProtectedRoute.jsx"]=this.generateProtectedRoute(e,t),s["src/utils/auth.js"]=this.generateAuthUtils(e,t)),(i.includes("payment")||i.includes("stripe")||i.includes("checkout"))&&(s["src/payment/PaymentForm.jsx"]=this.generatePaymentForm(e,t),s["src/payment/PaymentService.js"]=this.generatePaymentService(e,t),s["src/payment/Checkout.jsx"]=this.generateCheckout(e,t)),(i.includes("search")||i.includes("filter"))&&(s["src/search/SearchBar.jsx"]=this.generateSearchBar(e,t),s["src/search/SearchResults.jsx"]=this.generateSearchResults(e,t),s["src/search/SearchService.js"]=this.generateSearchService(e,t)),(i.includes("admin")||i.includes("dashboard")||i.includes("management"))&&(s["src/admin/AdminPanel.jsx"]=this.generateAdminPanel(e,t),s["src/admin/UserManagement.jsx"]=this.generateUserManagement(e,t),s["src/admin/DataTable.jsx"]=this.generateDataTable(e,t)),s}generateUtilityFiles(e,t,r){const s={};return s["src/utils/constants.js"]=this.generateConstants(e,t),s["src/utils/helpers.js"]=this.generateHelpers(e,t),s["src/utils/validation.js"]=this.generateValidationUtils(e,t),s["src/utils/formatting.js"]=this.generateFormattingUtils(e,t),s["src/utils/storage.js"]=this.generateStorageUtils(e,t),s["src/utils/network.js"]=this.generateNetworkUtils(e,t),s["src/utils/date.js"]=this.generateDateUtils(e,t),s["src/utils/string.js"]=this.generateStringUtils(e,t),s}generatePackageJSON(e,t){const r=e.toLowerCase(),s=r.includes("react")||r.includes("component"),i=r.includes("api")||r.includes("backend")||r.includes("server"),o={name:"dreambuild-app",version:"1.0.0",description:`Generated application: ${e.substring(0,100)}...`,main:"index.js",scripts:{start:i?"node server.js":"python -m http.server 8000",dev:s?"npm start":"python -m http.server 8000",build:"echo 'Build completed'"},dependencies:{},devDependencies:{},keywords:["dreambuild","ai-generated","web-application"],author:"DreamBuild AI",license:"MIT"};return s&&(o.dependencies={react:"^18.2.0","react-dom":"^18.2.0"},o.scripts.start="react-scripts start",o.scripts.build="react-scripts build"),i&&(o.dependencies={express:"^4.18.2",cors:"^2.8.5"}),JSON.stringify(o,null,2)}generateREADME(e,t){return`# DreamBuild Generated Application

## Description
${e}

## Features
- Modern, responsive design
- Interactive user interface
- Cross-browser compatibility
- Mobile-friendly layout

## Setup Instructions

1. Clone or download this project
2. Open \`index.html\` in your web browser
3. For development with live reload, run: \`python -m http.server 8000\`

## File Structure
- \`index.html\` - Main application file
- \`styles.css\` - Styling and responsive design
- \`script.js\` - JavaScript functionality
- \`package.json\` - Project configuration

## Technologies Used
- HTML5
- CSS3
- JavaScript (ES6+)
- Responsive Design

## Generated by DreamBuild AI
This application was generated using DreamBuild's AI-powered code generation platform.

For support or questions, visit: https://dreambuild-2024-app.web.app
`}generateComprehensiveCSS(e,t){return`/* DreamBuild Generated Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
  line-height: 1.6;
  color: #333;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

header {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  text-align: center;
}

h1 {
  font-size: 2.5rem;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, #667eea, #764ba2);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

p {
  font-size: 1.1rem;
  color: #666;
  margin-bottom: 1rem;
}

main {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 15px;
  padding: 2rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
}

section {
  margin-bottom: 2rem;
}

h2 {
  font-size: 1.8rem;
  margin-bottom: 1rem;
  color: #333;
}

.card {
  background: white;
  border-radius: 10px;
  padding: 1.5rem;
  margin-bottom: 1rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

button {
  background: linear-gradient(135deg, #667eea, #764ba2);
  color: white;
  border: none;
  padding: 12px 24px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  transition: all 0.3s ease;
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}

input, textarea, select {
  width: 100%;
  padding: 12px;
  border: 2px solid #e1e5e9;
  border-radius: 8px;
  font-size: 1rem;
  transition: border-color 0.3s ease;
}

input:focus, textarea:focus, select:focus {
  outline: none;
  border-color: #667eea;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 10px;
  }
  
  h1 {
    font-size: 2rem;
  }
  
  header, main {
    padding: 1.5rem;
  }
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.fade-in {
  animation: fadeIn 0.6s ease-out;
}

/* Utility Classes */
.text-center { text-align: center; }
.mb-1 { margin-bottom: 0.5rem; }
.mb-2 { margin-bottom: 1rem; }
.mb-3 { margin-bottom: 1.5rem; }
.mt-1 { margin-top: 0.5rem; }
.mt-2 { margin-top: 1rem; }
.mt-3 { margin-top: 1.5rem; }
`}generateComprehensiveJS(e,t){return`// DreamBuild Generated JavaScript
console.log('🚀 DreamBuild Application Loaded Successfully!');

// Application State Management
class AppState {
  constructor() {
    this.state = {
      user: null,
      data: [],
      loading: false,
      error: null
    };
    this.listeners = [];
  }

  setState(newState) {
    this.state = { ...this.state, ...newState };
    this.notifyListeners();
  }

  subscribe(listener) {
    this.listeners.push(listener);
  }

  notifyListeners() {
    this.listeners.forEach(listener => listener(this.state));
  }
}

const appState = new AppState();

// Utility Functions
const utils = {
  // Debounce function for search inputs
  debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  },

  // Format date
  formatDate(date) {
    return new Intl.DateTimeFormat('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric'
    }).format(new Date(date));
  },

  // Show notification
  showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = \`notification notification-\${type}\`;
    notification.textContent = message;
    
    // Style the notification
    Object.assign(notification.style, {
      position: 'fixed',
      top: '20px',
      right: '20px',
      padding: '12px 24px',
      borderRadius: '8px',
      color: 'white',
      fontWeight: '500',
      zIndex: '1000',
      transform: 'translateX(100%)',
      transition: 'transform 0.3s ease'
    });

    // Set background color based on type
    const colors = {
      info: '#667eea',
      success: '#10b981',
      warning: '#f59e0b',
      error: '#ef4444'
    };
    notification.style.backgroundColor = colors[type] || colors.info;

    document.body.appendChild(notification);

    // Animate in
    setTimeout(() => {
      notification.style.transform = 'translateX(0)';
    }, 100);

    // Remove after 3 seconds
    setTimeout(() => {
      notification.style.transform = 'translateX(100%)';
      setTimeout(() => {
        document.body.removeChild(notification);
      }, 300);
    }, 3000);
  },

  // Validate email
  validateEmail(email) {
    const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
    return re.test(email);
  },

  // Local storage helpers
  storage: {
    get(key) {
      try {
        return JSON.parse(localStorage.getItem(key));
      } catch {
        return null;
      }
    },
    set(key, value) {
      localStorage.setItem(key, JSON.stringify(value));
    },
    remove(key) {
      localStorage.removeItem(key);
    }
  }
};

// API Service
class APIService {
  constructor(baseURL = '') {
    this.baseURL = baseURL;
  }

  async request(endpoint, options = {}) {
    const url = \`\${this.baseURL}\${endpoint}\`;
    const config = {
      headers: {
        'Content-Type': 'application/json',
        ...options.headers
      },
      ...options
    };

    try {
      const response = await fetch(url, config);
      
      if (!response.ok) {
        throw new Error(\`HTTP error! status: \${response.status}\`);
      }

      const data = await response.json();
      return { success: true, data };
    } catch (error) {
      console.error('API request failed:', error);
      return { success: false, error: error.message };
    }
  }

  async get(endpoint) {
    return this.request(endpoint, { method: 'GET' });
  }

  async post(endpoint, data) {
    return this.request(endpoint, {
      method: 'POST',
      body: JSON.stringify(data)
    });
  }

  async put(endpoint, data) {
    return this.request(endpoint, {
      method: 'PUT',
      body: JSON.stringify(data)
    });
  }

  async delete(endpoint) {
    return this.request(endpoint, { method: 'DELETE' });
  }
}

const api = new APIService();

// Event Handlers
class EventHandlers {
  constructor() {
    this.setupEventListeners();
  }

  setupEventListeners() {
    // Search functionality
    const searchInputs = document.querySelectorAll('input[type="search"], .search-input');
    searchInputs.forEach(input => {
      input.addEventListener('input', utils.debounce((e) => {
        this.handleSearch(e.target.value);
      }, 300));
    });

    // Form submissions
    const forms = document.querySelectorAll('form');
    forms.forEach(form => {
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        this.handleFormSubmit(form);
      });
    });

    // Button clicks
    const buttons = document.querySelectorAll('button[data-action]');
    buttons.forEach(button => {
      button.addEventListener('click', (e) => {
        const action = e.target.getAttribute('data-action');
        this.handleButtonClick(action, e.target);
      });
    });

    // Card interactions
    const cards = document.querySelectorAll('.card[data-interactive]');
    cards.forEach(card => {
      card.addEventListener('click', (e) => {
        this.handleCardClick(card, e);
      });
    });
  }

  handleSearch(query) {
    console.log('Searching for:', query);
    appState.setState({ loading: true });
    
    // Simulate search
    setTimeout(() => {
      const results = this.performSearch(query);
      appState.setState({ 
        data: results, 
        loading: false 
      });
      utils.showNotification(\`Found \${results.length} results for "\${query}"\`, 'success');
    }, 500);
  }

  performSearch(query) {
    // Mock search results
    return [
      { id: 1, title: \`Result 1 for "\${query}"\`, description: 'Description 1' },
      { id: 2, title: \`Result 2 for "\${query}"\`, description: 'Description 2' },
      { id: 3, title: \`Result 3 for "\${query}"\`, description: 'Description 3' }
    ];
  }

  handleFormSubmit(form) {
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    
    console.log('Form submitted:', data);
    
    // Validate form data
    if (this.validateForm(data)) {
      this.submitForm(data);
    } else {
      utils.showNotification('Please fill in all required fields', 'error');
    }
  }

  validateForm(data) {
    // Basic validation
    const requiredFields = form.querySelectorAll('[required]');
    return Array.from(requiredFields).every(field => field.value.trim() !== '');
  }

  submitForm(data) {
    appState.setState({ loading: true });
    
    // Simulate API call
    setTimeout(() => {
      appState.setState({ loading: false });
      utils.showNotification('Form submitted successfully!', 'success');
      form.reset();
    }, 1000);
  }

  handleButtonClick(action, button) {
    console.log('Button clicked:', action);
    
    switch (action) {
      case 'toggle':
        this.toggleElement(button);
        break;
      case 'refresh':
        this.refreshData();
        break;
      case 'export':
        this.exportData();
        break;
      default:
        console.log('Unknown action:', action);
    }
  }

  handleCardClick(card, event) {
    const cardId = card.getAttribute('data-id');
    console.log('Card clicked:', cardId);
    
    // Add visual feedback
    card.style.transform = 'scale(0.98)';
    setTimeout(() => {
      card.style.transform = '';
    }, 150);
  }

  toggleElement(button) {
    const targetId = button.getAttribute('data-target');
    const target = document.getElementById(targetId);
    
    if (target) {
      target.classList.toggle('hidden');
      button.textContent = target.classList.contains('hidden') ? 'Show' : 'Hide';
    }
  }

  refreshData() {
    appState.setState({ loading: true });
    
    setTimeout(() => {
      appState.setState({ 
        data: this.generateMockData(),
        loading: false 
      });
      utils.showNotification('Data refreshed!', 'success');
    }, 1000);
  }

  generateMockData() {
    return Array.from({ length: 5 }, (_, i) => ({
      id: i + 1,
      title: \`Item \${i + 1}\`,
      description: \`This is a description for item \${i + 1}\`,
      date: new Date().toISOString()
    }));
  }

  exportData() {
    const data = appState.state.data;
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    
    const a = document.createElement('a');
    a.href = url;
    a.download = 'data-export.json';
    a.click();
    
    URL.revokeObjectURL(url);
    utils.showNotification('Data exported successfully!', 'success');
  }
}

// Initialize Application
class App {
  constructor() {
    this.init();
  }

  init() {
    console.log('🎯 Initializing DreamBuild Application...');
    
    // Initialize event handlers
    new EventHandlers();
    
    // Subscribe to state changes
    appState.subscribe((state) => {
      this.render(state);
    });
    
    // Load initial data
    this.loadInitialData();
    
    // Add fade-in animation to main content
    const mainContent = document.querySelector('main');
    if (mainContent) {
      mainContent.classList.add('fade-in');
    }
    
    console.log('✅ Application initialized successfully!');
  }

  loadInitialData() {
    appState.setState({ loading: true });
    
    // Simulate loading data
    setTimeout(() => {
      const mockData = [
        { id: 1, title: 'Welcome to DreamBuild', description: 'Your AI-generated application is ready!' },
        { id: 2, title: 'Feature 1', description: 'This is a sample feature' },
        { id: 3, title: 'Feature 2', description: 'Another sample feature' }
      ];
      
      appState.setState({ 
        data: mockData, 
        loading: false 
      });
    }, 1000);
  }

  render(state) {
    // Update loading state
    const loadingElements = document.querySelectorAll('.loading');
    loadingElements.forEach(el => {
      el.style.display = state.loading ? 'block' : 'none';
    });

    // Update data display
    const dataContainer = document.querySelector('[data-container="data"]');
    if (dataContainer && state.data) {
      this.renderData(dataContainer, state.data);
    }
  }

  renderData(container, data) {
    container.innerHTML = data.map(item => \`
      <div class="card" data-id="\${item.id}" data-interactive>
        <h3>\${item.title}</h3>
        <p>\${item.description}</p>
        <small>\${utils.formatDate(item.date || new Date())}</small>
      </div>
    \`).join('');
  }
}

// Start the application when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  new App();
});

// Export for potential module usage
if (typeof module !== 'undefined' && module.exports) {
  module.exports = { App, AppState, utils, APIService };
}
`}generateReactComponent(e,t){return`import React, { useState, useEffect } from 'react';

const App = () => {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    // Load initial data
    loadData();
  }, []);

  const loadData = async () => {
    setLoading(true);
    try {
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));
      setData([
        { id: 1, title: 'Sample Item 1', description: 'Description 1' },
        { id: 2, title: 'Sample Item 2', description: 'Description 2' }
      ]);
    } catch (error) {
      console.error('Error loading data:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <div className="app">
      <header>
        <h1>DreamBuild React App</h1>
        <p>Generated application: ${e.substring(0,100)}...</p>
      </header>
      
      <main>
        {loading ? (
          <div className="loading">Loading...</div>
        ) : (
          <div className="data-container">
            {data.map(item => (
              <div key={item.id} className="card">
                <h3>{item.title}</h3>
                <p>{item.description}</p>
              </div>
            ))}
          </div>
        )}
      </main>
    </div>
  );
};

export default App;`}generateServerFile(e,t){return`const express = require('express');
const cors = require('cors');
const path = require('path');

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware
app.use(cors());
app.use(express.json());
app.use(express.static(path.join(__dirname, 'public')));

// Routes
app.get('/api/health', (req, res) => {
  res.json({ status: 'OK', message: 'DreamBuild API is running' });
});

app.get('/api/data', (req, res) => {
  const data = [
    { id: 1, title: 'Sample Data 1', description: 'Generated by DreamBuild' },
    { id: 2, title: 'Sample Data 2', description: 'AI-powered application' }
  ];
  res.json(data);
});

app.post('/api/data', (req, res) => {
  const { title, description } = req.body;
  const newItem = {
    id: Date.now(),
    title: title || 'New Item',
    description: description || 'No description'
  };
  res.json(newItem);
});

// Serve static files
app.get('*', (req, res) => {
  res.sendFile(path.join(__dirname, 'public', 'index.html'));
});

app.listen(PORT, () => {
  console.log(\`🚀 DreamBuild server running on port \${PORT}\`);
  console.log(\`📱 Application: \${prompt.substring(0, 100)}...\`);
});`}generateDatabaseSchema(e,t){return`-- DreamBuild Generated Database Schema
-- Application: ${e.substring(0,100)}...

CREATE TABLE IF NOT EXISTS users (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  email VARCHAR(255) UNIQUE NOT NULL,
  name VARCHAR(255) NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE IF NOT EXISTS items (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  title VARCHAR(255) NOT NULL,
  description TEXT,
  user_id INTEGER,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id)
);

CREATE TABLE IF NOT EXISTS settings (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  key VARCHAR(255) UNIQUE NOT NULL,
  value TEXT,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- Insert sample data
INSERT OR IGNORE INTO settings (key, value) VALUES 
('app_name', 'DreamBuild Generated App'),
('version', '1.0.0'),
('theme', 'default');

-- Create indexes for better performance
CREATE INDEX IF NOT EXISTS idx_users_email ON users(email);
CREATE INDEX IF NOT EXISTS idx_items_user_id ON items(user_id);
CREATE INDEX IF NOT EXISTS idx_items_created_at ON items(created_at);`}generateKnowledgeComment(e,t){const r=t.split(".").pop().toLowerCase();let s="";return r==="js"?s=`/*
 * Enhanced with current web development best practices
 * Generated with real-time knowledge search
 * Best practices applied:
${e.bestPractices.slice(0,3).map(i=>` * - ${i}`).join(`
`)}
 */
`:r==="css"?s=`/* Enhanced with modern CSS best practices and responsive design principles */
`:r==="html"&&(s=`<!-- Enhanced with accessibility best practices and semantic HTML -->
`),s}generateMainHTML(e,t){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamBuild Generated App</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="description" content="${e.substring(0,160)}...">
</head>
<body>
    <div id="app">
        <header class="header">
            <h1>DreamBuild Generated Application</h1>
            <p>${e}</p>
        </header>
        
        <main class="main">
            <section class="hero">
                <h2>Welcome to Your AI-Generated Application</h2>
                <p>This application was generated using DreamBuild's advanced AI platform with unlimited file generation capabilities.</p>
                <button class="cta-button" onclick="app.init()">Get Started</button>
            </section>
            
            <section class="features" data-container="data">
                <!-- Dynamic content will be loaded here -->
            </section>
        </main>
        
        <footer class="footer">
            <p>&copy; 2024 DreamBuild AI. Generated with unlimited file capabilities.</p>
        </footer>
    </div>
    
    <script src="script.js"><\/script>
</body>
</html>`}generateMainReactApp(e,t){return`import React, { useState, useEffect } from 'react';
import './styles/App.css';
import Header from './components/Header';
import Footer from './components/Footer';
import Layout from './components/Layout';

const App = () => {
  const [data, setData] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadData();
  }, []);

  const loadData = async () => {
    setLoading(true);
    try {
      // Simulate API call
      await new Promise(resolve => setTimeout(resolve, 1000));
      setData([
        { id: 1, title: 'Feature 1', description: 'Generated by DreamBuild AI' },
        { id: 2, title: 'Feature 2', description: 'Unlimited file generation' },
        { id: 3, title: 'Feature 3', description: 'Production-ready code' }
      ]);
    } catch (error) {
      console.error('Error loading data:', error);
    } finally {
      setLoading(false);
    }
  };

  return (
    <Layout>
      <Header title="DreamBuild React App" subtitle="${e}" />
      
      <main className="main-content">
        {loading ? (
          <div className="loading">Loading...</div>
        ) : (
          <div className="features-grid">
            {data.map(item => (
              <div key={item.id} className="feature-card">
                <h3>{item.title}</h3>
                <p>{item.description}</p>
              </div>
            ))}
          </div>
        )}
      </main>
      
      <Footer />
    </Layout>
  );
};

export default App;`}generateReactIndex(e,t){return`import React from 'react';
import ReactDOM from 'react-dom/client';
import App from './App';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);`}generateReactComponent(e,t,r){return`import React from 'react';

const ${e} = ({ children, ...props }) => {
  return (
    <div className="${e.toLowerCase()}" {...props}>
      {children}
    </div>
  );
};

export default ${e};`}generateReactHook(e,t,r){return`import { useState, useEffect } from 'react';

const ${e} = () => {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  useEffect(() => {
    // Hook implementation
  }, []);

  return { data, loading, error };
};

export default ${e};`}generateReactService(e,t,r){return`class ${e.charAt(0).toUpperCase()+e.slice(1)}Service {
  constructor() {
    this.baseURL = process.env.REACT_APP_API_URL || 'http://localhost:3000/api';
  }

  async request(endpoint, options = {}) {
    const url = \`\${this.baseURL}\${endpoint}\`;
    const config = {
      headers: {
        'Content-Type': 'application/json',
        ...options.headers
      },
      ...options
    };

    try {
      const response = await fetch(url, config);
      
      if (!response.ok) {
        throw new Error(\`HTTP error! status: \${response.status}\`);
      }

      return await response.json();
    } catch (error) {
      console.error('API request failed:', error);
      throw error;
    }
  }

  async get(endpoint) {
    return this.request(endpoint, { method: 'GET' });
  }

  async post(endpoint, data) {
    return this.request(endpoint, {
      method: 'POST',
      body: JSON.stringify(data)
    });
  }
}

export default new ${e.charAt(0).toUpperCase()+e.slice(1)}Service();`}generateReactUtils(e,t){return`// React utility functions
export const formatDate = (date) => {
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  }).format(new Date(date));
};

export const debounce = (func, wait) => {
  let timeout;
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout);
      func(...args);
    };
    clearTimeout(timeout);
    timeout = setTimeout(later, wait);
  };
};

export const validateEmail = (email) => {
  const re = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;
  return re.test(email);
};

export const storage = {
  get: (key) => {
    try {
      return JSON.parse(localStorage.getItem(key));
    } catch {
      return null;
    }
  },
  set: (key, value) => {
    localStorage.setItem(key, JSON.stringify(value));
  },
  remove: (key) => {
    localStorage.removeItem(key);
  }
};`}generateReactCSS(e,t){return`/* React App Styles */
.app {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.main-content {
  flex: 1;
  padding: 2rem;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-top: 2rem;
}

.feature-card {
  background: white;
  border-radius: 10px;
  padding: 1.5rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;
}

.feature-card:hover {
  transform: translateY(-5px);
}

.loading {
  text-align: center;
  padding: 2rem;
  font-size: 1.2rem;
  color: #666;
}

/* Responsive Design */
@media (max-width: 768px) {
  .main-content {
    padding: 1rem;
  }
  
  .features-grid {
    grid-template-columns: 1fr;
  }
}`}generateReactComponentCSS(e,t){return`/* Component Styles */
.header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 2rem;
  text-align: center;
}

.footer {
  background: #333;
  color: white;
  padding: 1rem;
  text-align: center;
  margin-top: auto;
}

.layout {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}`}generateAPIRoutes(e,t){return`// API Routes
module.exports = (app) => {
  // Routes will be generated here
};`}generateAuthMiddleware(e,t){return`// Auth Middleware
module.exports = (req, res, next) => {
  // Auth logic here
  next();
};`}generateUserModel(e,t){return`// User Model
class User {
  constructor(data) {
    this.id = data.id;
    this.email = data.email;
  }
}
module.exports = User;`}generateUserController(e,t){return`// User Controller
class UserController {
  async getAll(req, res) {
    res.json({ users: [] });
  }
}
module.exports = new UserController();`}generateDatabaseUtils(e,t){return`// Database Utils
const db = {
  connect: () => console.log('Connected to database'),
  query: (sql) => console.log('Executing query:', sql)
};
module.exports = db;`}generateDatabaseConfig(e,t){return`// Database Config
module.exports = {
  host: process.env.DB_HOST || 'localhost',
  port: process.env.DB_PORT || 5432,
  database: process.env.DB_NAME || 'dreambuild'
};`}generateValidationMiddleware(e,t){return`// Validation Middleware
module.exports = (req, res, next) => {
  // Validation logic here
  next();
};`}generateLogger(e,t){return`// Logger
const logger = {
  info: (msg) => console.log('[INFO]', msg),
  error: (msg) => console.error('[ERROR]', msg)
};
module.exports = logger;`}generateAPITests(e,t){return`// API Tests
describe('API Tests', () => {
  test('should work', () => {
    expect(true).toBe(true);
  });
});`}generateInitialMigration(e,t){return`-- Initial Migration
CREATE TABLE IF NOT EXISTS users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL
);`}generateSeedData(e,t){return`-- Seed Data
INSERT INTO users (email) VALUES ('admin@dreambuild.com');`}generateBaseModel(e,t){return`// Base Model
class BaseModel {
  constructor() {
    this.tableName = '';
  }
}
module.exports = BaseModel;`}generateBaseRepository(e,t){return`// Base Repository
class BaseRepository {
  constructor() {
    this.model = null;
  }
}
module.exports = BaseRepository;`}generateDatabaseConnection(e,t){return`// Database Connection
const connection = {
  connect: () => console.log('Database connected'),
  close: () => console.log('Database closed')
};
module.exports = connection;`}generateTestSetup(e,t){return`// Test Setup
beforeEach(() => {
  // Setup before each test
});`}generateUnitTests(e,t,r){return`// Unit Tests for ${e}
describe('${e}', () => {
  test('should render', () => {
    expect(true).toBe(true);
  });
});`}generateIntegrationTests(e,t){return`// Integration Tests
describe('Integration Tests', () => {
  test('should work end-to-end', () => {
    expect(true).toBe(true);
  });
});`}generateE2ETests(e,t){return`// E2E Tests
describe('E2E Tests', () => {
  test('should work in browser', () => {
    expect(true).toBe(true);
  });
});`}generateJestConfig(e,t){return`module.exports = {
  testEnvironment: 'node',
  setupFilesAfterEnv: ['<rootDir>/tests/setup.js']
};`}generateTestHelpers(e,t){return`// Test Helpers
export const createMockUser = () => ({
  id: 1,
  email: 'test@example.com'
});`}generateAPIDocumentation(e,t){return`# API Documentation

## Endpoints

### GET /api/health
Returns the health status of the API.`}generateDetailedREADME(e,t){return`# Detailed README

## Features
- Unlimited file generation
- Production-ready code
- Modern architecture`}generateChangelog(e,t){return`# Changelog

## [1.0.0] - 2024-01-01
- Initial release
- Unlimited file generation`}generateContributingGuide(e,t){return`# Contributing

## How to Contribute
1. Fork the repository
2. Create a feature branch
3. Make your changes`}generateDeploymentGuide(e,t){return`# Deployment Guide

## Production Deployment
1. Build the application
2. Deploy to your server
3. Configure environment variables`}generateArchitectureDoc(e,t){return`# Architecture

## Overview
This application uses a modern, scalable architecture.`}generateEnvExample(e,t){return`# Environment Variables
DB_HOST=localhost
DB_PORT=5432
API_URL=http://localhost:3000`}generateGitignore(e,t){return`node_modules
.env
.DS_Store
dist/
build/`}generateESLintConfig(e,t){return`module.exports = {
  extends: ['eslint:recommended'],
  env: {
    browser: true,
    node: true
  }
};`}generatePrettierConfig(e,t){return`{
  "semi": true,
  "trailingComma": "es5",
  "singleQuote": true
}`}generateDockerCompose(e,t){return`version: '3.8'
services:
  app:
    build: .
    ports:
      - "3000:3000"`}generateDockerfile(e,t){return`FROM node:18
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]`}generateNginxConfig(e,t){return`server {
  listen 80;
  location / {
    proxy_pass http://localhost:3000;
  }
}`}generateDeployScript(e,t){return`#!/bin/bash
echo "Deploying application..."
npm run build
echo "Deployment complete!"`}generateAuthProvider(e,t){return`import React, { createContext } from 'react';
const AuthContext = createContext();
export default AuthContext;`}generateLoginForm(e,t){return`import React from 'react';
const LoginForm = () => <form>Login Form</form>;
export default LoginForm;`}generateProtectedRoute(e,t){return`import React from 'react';
const ProtectedRoute = ({ children }) => children;
export default ProtectedRoute;`}generateAuthUtils(e,t){return`export const isAuthenticated = () => true;
export const getCurrentUser = () => null;`}generatePaymentForm(e,t){return`import React from 'react';
const PaymentForm = () => <form>Payment Form</form>;
export default PaymentForm;`}generatePaymentService(e,t){return`class PaymentService {
  processPayment(amount) {
    return Promise.resolve({ success: true });
  }
}
export default new PaymentService();`}generateCheckout(e,t){return`import React from 'react';
const Checkout = () => <div>Checkout Component</div>;
export default Checkout;`}generateSearchBar(e,t){return`import React from 'react';
const SearchBar = () => <input type="search" placeholder="Search..." />;
export default SearchBar;`}generateSearchResults(e,t){return`import React from 'react';
const SearchResults = () => <div>Search Results</div>;
export default SearchResults;`}generateSearchService(e,t){return`class SearchService {
  search(query) {
    return Promise.resolve([]);
  }
}
export default new SearchService();`}generateAdminPanel(e,t){return`import React from 'react';
const AdminPanel = () => <div>Admin Panel</div>;
export default AdminPanel;`}generateUserManagement(e,t){return`import React from 'react';
const UserManagement = () => <div>User Management</div>;
export default UserManagement;`}generateDataTable(e,t){return`import React from 'react';
const DataTable = () => <table>Data Table</table>;
export default DataTable;`}generateConstants(e,t){return`export const API_URL = process.env.REACT_APP_API_URL || 'http://localhost:3000';
export const APP_NAME = 'DreamBuild App';`}generateHelpers(e,t){return`export const formatCurrency = (amount) => \`$${amount.toFixed(2)}\`;
export const formatDate = (date) => new Date(date).toLocaleDateString();`}generateValidationUtils(e,t){return`export const validateEmail = (email) => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email);
export const validateRequired = (value) => value && value.trim().length > 0;`}generateFormattingUtils(e,t){return`export const capitalize = (str) => str.charAt(0).toUpperCase() + str.slice(1);
export const truncate = (str, length) => str.length > length ? str.substring(0, length) + '...' : str;`}generateStorageUtils(e,t){return`export const storage = {
  get: (key) => JSON.parse(localStorage.getItem(key)),
  set: (key, value) => localStorage.setItem(key, JSON.stringify(value))
};`}generateNetworkUtils(e,t){return`export const api = {
  get: (url) => fetch(url).then(res => res.json()),
  post: (url, data) => fetch(url, { method: 'POST', body: JSON.stringify(data) }).then(res => res.json())
};`}generateDateUtils(e,t){return`export const formatDate = (date) => new Intl.DateTimeFormat('en-US').format(new Date(date));
export const isToday = (date) => new Date(date).toDateString() === new Date().toDateString();`}generateStringUtils(e,t){return`export const slugify = (str) => str.toLowerCase().replace(/[^a-z0-9]+/g, '-');
export const randomString = (length) => Math.random().toString(36).substring(2, length + 2);`}createComprehensiveTemplate(e,t){const r=e.toLowerCase(),s=this.analyzePromptForCompleteness(e);return s.isComprehensive?(console.log("🎯 Detected comprehensive application request - generating multi-file template"),r.includes("health food")||r.includes("nutrition")||r.includes("healthy eating")?this.createHealthFoodTemplate():r.includes("store")||r.includes("ecommerce")||r.includes("shopping")?this.createEcommerceTemplate():r.includes("blog")||r.includes("article")||r.includes("post")?this.createBlogTemplate():r.includes("dashboard")||r.includes("admin")||r.includes("analytics")?this.createDashboardTemplate():r.includes("personal dashboard")||r.includes("5 features")||r.includes("task management")||r.includes("expense tracker")?this.createPersonalDashboardTemplate():r.includes("portfolio")||r.includes("resume")||r.includes("showcase")?this.createPortfolioTemplate():r.includes("todo")||r.includes("task")||r.includes("project management")?this.createTodoAppTemplate():this.createGenericComprehensiveTemplate(e,s)):null}createHealthFoodTemplate(){return{"index.html":`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healthy Food Tips - Your Nutrition Guide</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-green-600">🍎 Healthy Tips</h1>
                    </div>
                    <div class="hidden md:ml-6 md:flex md:space-x-8">
                        <a href="#home" class="nav-link text-gray-900 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Home</a>
                        <a href="#tips" class="nav-link text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Tips</a>
                        <a href="#recipes" class="nav-link text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Recipes</a>
                        <a href="#nutrition" class="nav-link text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Nutrition</a>
                        <a href="#calculator" class="nav-link text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Calculator</a>
                    </div>
                </div>
                <div class="flex items-center">
                    <button id="searchBtn" class="p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100">
                        <i class="fas fa-search"></i>
                    </button>
                    <button id="favoritesBtn" class="p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 ml-2">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Search Modal -->
    <div id="searchModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                <div class="p-6">
                    <h3 class="text-lg font-medium text-gray-900 mb-4">Search Tips & Recipes</h3>
                    <input type="text" id="searchInput" placeholder="Search for tips, recipes, or ingredients..." 
                           class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                    <div id="searchResults" class="mt-4 max-h-60 overflow-y-auto"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hero Section -->
    <section id="home" class="bg-gradient-to-r from-green-400 to-blue-500 text-white py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-6xl font-bold mb-6">Healthy Food Tips</h1>
            <p class="text-xl md:text-2xl mb-8">Your comprehensive guide to nutrition, healthy eating, and wellness</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button onclick="scrollToSection('tips')" class="bg-white text-green-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition">
                    Explore Tips
                </button>
                <button onclick="scrollToSection('calculator')" class="border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-green-600 transition">
                    BMI Calculator
                </button>
            </div>
        </div>
    </section>

    <!-- Quick Stats -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
                <div class="p-6">
                    <div class="text-3xl font-bold text-green-600 mb-2">500+</div>
                    <div class="text-gray-600">Healthy Tips</div>
                </div>
                <div class="p-6">
                    <div class="text-3xl font-bold text-blue-600 mb-2">200+</div>
                    <div class="text-gray-600">Recipes</div>
                </div>
                <div class="p-6">
                    <div class="text-3xl font-bold text-purple-600 mb-2">50+</div>
                    <div class="text-gray-600">Nutrition Guides</div>
                </div>
                <div class="p-6">
                    <div class="text-3xl font-bold text-orange-600 mb-2">1000+</div>
                    <div class="text-gray-600">Happy Users</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Tips Section -->
    <section id="tips" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Daily Health Tips</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="tipsContainer">
                <!-- Tips will be loaded dynamically -->
            </div>
            <div class="text-center mt-12">
                <button id="loadMoreTips" class="bg-green-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-green-700 transition">
                    Load More Tips
                </button>
            </div>
        </div>
    </section>

    <!-- Recipes Section -->
    <section id="recipes" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Healthy Recipes</h2>
            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <button class="recipe-filter active" data-filter="all">All</button>
                <button class="recipe-filter" data-filter="breakfast">Breakfast</button>
                <button class="recipe-filter" data-filter="lunch">Lunch</button>
                <button class="recipe-filter" data-filter="dinner">Dinner</button>
                <button class="recipe-filter" data-filter="snack">Snacks</button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="recipesContainer">
                <!-- Recipes will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Nutrition Calculator -->
    <section id="calculator" class="py-16 bg-gray-50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Nutrition Calculator</h2>
            <div class="bg-white rounded-lg shadow-lg p-8">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-semibold mb-4">BMI Calculator</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Height (cm)</label>
                                <input type="number" id="height" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="170">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Weight (kg)</label>
                                <input type="number" id="weight" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="70">
                            </div>
                            <button onclick="calculateBMI()" class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition">
                                Calculate BMI
                            </button>
                            <div id="bmiResult" class="mt-4 p-4 rounded-md hidden"></div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold mb-4">Daily Calorie Calculator</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Age</label>
                                <input type="number" id="age" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500" placeholder="25">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Gender</label>
                                <select id="gender" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Activity Level</label>
                                <select id="activity" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
                                    <option value="1.2">Sedentary</option>
                                    <option value="1.375">Lightly Active</option>
                                    <option value="1.55">Moderately Active</option>
                                    <option value="1.725">Very Active</option>
                                    <option value="1.9">Extra Active</option>
                                </select>
                            </div>
                            <button onclick="calculateCalories()" class="w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 transition">
                                Calculate Calories
                            </button>
                            <div id="calorieResult" class="mt-4 p-4 rounded-md hidden"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Favorites Section -->
    <section id="favorites" class="py-16 bg-white hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">Your Favorites</h2>
            <div id="favoritesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Favorites will be loaded dynamically -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Healthy Tips</h3>
                    <p class="text-gray-400">Your comprehensive guide to healthy eating and nutrition.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="#tips" class="text-gray-400 hover:text-white">Health Tips</a></li>
                        <li><a href="#recipes" class="text-gray-400 hover:text-white">Recipes</a></li>
                        <li><a href="#calculator" class="text-gray-400 hover:text-white">Calculator</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white">Nutrition Guide</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Meal Planning</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Exercise Tips</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Connect</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center">
                <p class="text-gray-400">&copy; 2024 Healthy Food Tips. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"><\/script>
</body>
</html>`,"styles.css":`/* Custom styles for Healthy Food Tips */
.nav-link {
    transition: all 0.3s ease;
}

.recipe-filter {
    @apply px-4 py-2 rounded-full border border-gray-300 text-gray-600 hover:bg-green-50 hover:border-green-300 hover:text-green-600 transition-all duration-200;
}

.recipe-filter.active {
    @apply bg-green-600 text-white border-green-600;
}

.tip-card, .recipe-card {
    @apply bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 cursor-pointer;
}

.tip-card:hover, .recipe-card:hover {
    transform: translateY(-2px);
}

.favorite-btn {
    @apply text-gray-400 hover:text-red-500 transition-colors duration-200;
}

.favorite-btn.active {
    @apply text-red-500;
}

/* Smooth scrolling */
html {
    scroll-behavior: smooth;
}

/* Loading animation */
.loading {
    @apply animate-pulse;
}

/* Custom scrollbar */
::-webkit-scrollbar {
    width: 8px;
}

::-webkit-scrollbar-track {
    @apply bg-gray-100;
}

::-webkit-scrollbar-thumb {
    @apply bg-gray-300 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
    @apply bg-gray-400;
}`,"script.js":`// Healthy Food Tips Application JavaScript

// Application state
const appState = {
    tips: [],
    recipes: [],
    favorites: JSON.parse(localStorage.getItem('favorites') || '[]'),
    currentTipPage: 1,
    currentRecipeFilter: 'all'
};

// Sample data
const sampleTips = [
    {
        id: 1,
        title: "Start Your Day with Protein",
        content: "Eating protein at breakfast helps stabilize blood sugar and keeps you full longer. Try eggs, Greek yogurt, or protein smoothies.",
        category: "breakfast",
        image: "🥚",
        difficulty: "easy"
    },
    {
        id: 2,
        title: "Drink Water Before Meals",
        content: "Drinking a glass of water 30 minutes before meals can help with digestion and prevent overeating.",
        category: "hydration",
        image: "💧",
        difficulty: "easy"
    },
    {
        id: 3,
        title: "Eat the Rainbow",
        content: "Include colorful fruits and vegetables in every meal. Different colors provide different nutrients and antioxidants.",
        category: "nutrition",
        image: "🌈",
        difficulty: "easy"
    },
    {
        id: 4,
        title: "Mindful Eating",
        content: "Eat slowly, chew thoroughly, and pay attention to your hunger cues. This helps with portion control and digestion.",
        category: "mindfulness",
        image: "🧘",
        difficulty: "medium"
    },
    {
        id: 5,
        title: "Healthy Snacking",
        content: "Choose nuts, fruits, or vegetables for snacks instead of processed foods. They provide sustained energy and nutrients.",
        category: "snacking",
        image: "🥜",
        difficulty: "easy"
    },
    {
        id: 6,
        title: "Meal Prep Sundays",
        content: "Prepare healthy meals and snacks on Sundays to ensure you have nutritious options throughout the week.",
        category: "meal-planning",
        image: "📅",
        difficulty: "medium"
    }
];

const sampleRecipes = [
    {
        id: 1,
        title: "Quinoa Power Bowl",
        description: "Nutrient-dense bowl with quinoa, vegetables, and lean protein",
        category: "lunch",
        prepTime: "15 min",
        cookTime: "20 min",
        servings: 2,
        ingredients: ["1 cup quinoa", "2 cups mixed vegetables", "4 oz grilled chicken", "2 tbsp olive oil", "1 tbsp lemon juice"],
        instructions: ["Cook quinoa according to package directions", "Sauté vegetables in olive oil", "Grill chicken breast", "Combine all ingredients", "Drizzle with lemon juice"],
        image: "🥗",
        difficulty: "easy",
        calories: 450
    },
    {
        id: 2,
        title: "Green Smoothie Bowl",
        description: "Refreshing smoothie bowl packed with greens and fruits",
        category: "breakfast",
        prepTime: "10 min",
        cookTime: "0 min",
        servings: 1,
        ingredients: ["2 cups spinach", "1 banana", "1/2 avocado", "1 cup almond milk", "1 tbsp honey", "Granola for topping"],
        instructions: ["Blend spinach, banana, avocado, and almond milk", "Add honey to taste", "Pour into bowl", "Top with granola and fresh fruits"],
        image: "🥤",
        difficulty: "easy",
        calories: 320
    },
    {
        id: 3,
        title: "Baked Salmon with Herbs",
        description: "Simple and delicious baked salmon with fresh herbs",
        category: "dinner",
        prepTime: "10 min",
        cookTime: "25 min",
        servings: 4,
        ingredients: ["4 salmon fillets", "2 tbsp olive oil", "2 cloves garlic", "Fresh herbs (dill, parsley)", "Lemon", "Salt and pepper"],
        instructions: ["Preheat oven to 400°F", "Season salmon with salt and pepper", "Mix herbs with olive oil and garlic", "Brush mixture over salmon", "Bake for 20-25 minutes", "Serve with lemon wedges"],
        image: "🐟",
        difficulty: "medium",
        calories: 380
    }
];

// Initialize application
document.addEventListener('DOMContentLoaded', function() {
    initializeApp();
    setupEventListeners();
    loadTips();
    loadRecipes();
});

function initializeApp() {
    // Set initial active navigation
    document.querySelector('.nav-link').classList.add('text-green-600');
    document.querySelector('.nav-link').classList.remove('text-gray-500');
}

function setupEventListeners() {
    // Navigation
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const targetSection = this.getAttribute('href').substring(1);
            scrollToSection(targetSection);
            updateActiveNav(this);
        });
    });

    // Search functionality
    document.getElementById('searchBtn').addEventListener('click', openSearchModal);
    document.getElementById('searchInput').addEventListener('input', handleSearch);
    
    // Favorites
    document.getElementById('favoritesBtn').addEventListener('click', toggleFavorites);

    // Recipe filters
    document.querySelectorAll('.recipe-filter').forEach(filter => {
        filter.addEventListener('click', function() {
            document.querySelectorAll('.recipe-filter').forEach(f => f.classList.remove('active'));
            this.classList.add('active');
            appState.currentRecipeFilter = this.dataset.filter;
            filterRecipes();
        });
    });

    // Load more tips
    document.getElementById('loadMoreTips').addEventListener('click', loadMoreTips);

    // Close search modal when clicking outside
    document.getElementById('searchModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeSearchModal();
        }
    });
}

function scrollToSection(sectionId) {
    const section = document.getElementById(sectionId);
    if (section) {
        section.scrollIntoView({ behavior: 'smooth' });
    }
}

function updateActiveNav(activeLink) {
    document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('text-green-600');
        link.classList.add('text-gray-500');
    });
    activeLink.classList.remove('text-gray-500');
    activeLink.classList.add('text-green-600');
}

function openSearchModal() {
    document.getElementById('searchModal').classList.remove('hidden');
    document.getElementById('searchInput').focus();
}

function closeSearchModal() {
    document.getElementById('searchModal').classList.add('hidden');
    document.getElementById('searchInput').value = '';
    document.getElementById('searchResults').innerHTML = '';
}

function handleSearch() {
    const query = document.getElementById('searchInput').value.toLowerCase();
    const results = document.getElementById('searchResults');
    
    if (query.length < 2) {
        results.innerHTML = '';
        return;
    }

    const searchResults = [
        ...sampleTips.filter(tip => 
            tip.title.toLowerCase().includes(query) || 
            tip.content.toLowerCase().includes(query)
        ),
        ...sampleRecipes.filter(recipe => 
            recipe.title.toLowerCase().includes(query) || 
            recipe.description.toLowerCase().includes(query) ||
            recipe.ingredients.some(ingredient => ingredient.toLowerCase().includes(query))
        )
    ];

    if (searchResults.length === 0) {
        results.innerHTML = '<p class="text-gray-500">No results found</p>';
        return;
    }

    results.innerHTML = searchResults.map(item => {
        const isFavorite = appState.favorites.includes(item.id);
        return \`
            <div class="p-3 border-b border-gray-200 hover:bg-gray-50 cursor-pointer" onclick="selectSearchResult('\${item.id}', '\${item.title}')">
                <div class="flex items-center justify-between">
                    <div>
                        <h4 class="font-medium">\${item.title}</h4>
                        <p class="text-sm text-gray-600">\${item.description || item.content.substring(0, 100)}...</p>
                    </div>
                    <button onclick="toggleFavorite(\${item.id}); event.stopPropagation();" class="favorite-btn \${isFavorite ? 'active' : ''}">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
            </div>
        \`;
    }).join('');
}

function selectSearchResult(id, title) {
    closeSearchModal();
    // Scroll to the item or show details
    console.log('Selected:', title);
}

function toggleFavorites() {
    const favoritesSection = document.getElementById('favorites');
    favoritesSection.classList.toggle('hidden');
    if (!favoritesSection.classList.contains('hidden')) {
        loadFavorites();
    }
}

function loadTips() {
    const container = document.getElementById('tipsContainer');
    const tipsToShow = sampleTips.slice(0, appState.currentTipPage * 6);
    
    container.innerHTML = tipsToShow.map(tip => {
        const isFavorite = appState.favorites.includes(tip.id);
        return \`
            <div class="tip-card p-6">
                <div class="flex items-start justify-between mb-4">
                    <div class="text-4xl">\${tip.image}</div>
                    <button onclick="toggleFavorite(\${tip.id})" class="favorite-btn \${isFavorite ? 'active' : ''}">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                <h3 class="text-xl font-semibold mb-2">\${tip.title}</h3>
                <p class="text-gray-600 mb-4">\${tip.content}</p>
                <div class="flex items-center justify-between">
                    <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">\${tip.category}</span>
                    <span class="text-sm text-gray-500">\${tip.difficulty}</span>
                </div>
            </div>
        \`;
    }).join('');
}

function loadRecipes() {
    const container = document.getElementById('recipesContainer');
    
    container.innerHTML = sampleRecipes.map(recipe => {
        const isFavorite = appState.favorites.includes(recipe.id);
        return \`
            <div class="recipe-card p-6" data-category="\${recipe.category}">
                <div class="flex items-start justify-between mb-4">
                    <div class="text-4xl">\${recipe.image}</div>
                    <button onclick="toggleFavorite(\${recipe.id})" class="favorite-btn \${isFavorite ? 'active' : ''}">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                <h3 class="text-xl font-semibold mb-2">\${recipe.title}</h3>
                <p class="text-gray-600 mb-4">\${recipe.description}</p>
                <div class="space-y-2 mb-4">
                    <div class="flex justify-between text-sm">
                        <span>Prep: \${recipe.prepTime}</span>
                        <span>Cook: \${recipe.cookTime}</span>
                        <span>Servings: \${recipe.servings}</span>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span>Calories: \${recipe.calories}</span>
                        <span class="capitalize">\${recipe.difficulty}</span>
                    </div>
                </div>
                <button onclick="showRecipeDetails(\${recipe.id})" class="w-full bg-green-600 text-white py-2 px-4 rounded-md hover:bg-green-700 transition">
                    View Recipe
                </button>
            </div>
        \`;
    }).join('');
}

function filterRecipes() {
    const recipes = document.querySelectorAll('.recipe-card');
    const filter = appState.currentRecipeFilter;
    
    recipes.forEach(recipe => {
        if (filter === 'all' || recipe.dataset.category === filter) {
            recipe.style.display = 'block';
        } else {
            recipe.style.display = 'none';
        }
    });
}

function loadMoreTips() {
    appState.currentTipPage++;
    loadTips();
}

function loadFavorites() {
    const container = document.getElementById('favoritesContainer');
    const favoriteItems = [...sampleTips, ...sampleRecipes].filter(item => 
        appState.favorites.includes(item.id)
    );
    
    if (favoriteItems.length === 0) {
        container.innerHTML = '<p class="col-span-full text-center text-gray-500">No favorites yet. Click the heart icon to add items to your favorites!</p>';
        return;
    }
    
    container.innerHTML = favoriteItems.map(item => {
        return \`
            <div class="tip-card p-6">
                <div class="flex items-start justify-between mb-4">
                    <div class="text-4xl">\${item.image}</div>
                    <button onclick="toggleFavorite(\${item.id})" class="favorite-btn active">
                        <i class="fas fa-heart"></i>
                    </button>
                </div>
                <h3 class="text-xl font-semibold mb-2">\${item.title}</h3>
                <p class="text-gray-600 mb-4">\${item.description || item.content.substring(0, 100)}...</p>
                <div class="flex items-center justify-between">
                    <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">\${item.category}</span>
                    <span class="text-sm text-gray-500">\${item.difficulty || 'N/A'}</span>
                </div>
            </div>
        \`;
    }).join('');
}

function toggleFavorite(id) {
    const index = appState.favorites.indexOf(id);
    if (index > -1) {
        appState.favorites.splice(index, 1);
    } else {
        appState.favorites.push(id);
    }
    
    localStorage.setItem('favorites', JSON.stringify(appState.favorites));
    
    // Update UI
    loadTips();
    loadRecipes();
    if (!document.getElementById('favorites').classList.contains('hidden')) {
        loadFavorites();
    }
}

function showRecipeDetails(recipeId) {
    const recipe = sampleRecipes.find(r => r.id === recipeId);
    if (!recipe) return;
    
    const modal = document.createElement('div');
    modal.className = 'fixed inset-0 bg-gray-600 bg-opacity-50 z-50 flex items-center justify-center p-4';
    modal.innerHTML = \`
        <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-screen overflow-y-auto">
            <div class="p-6">
                <div class="flex items-start justify-between mb-6">
                    <div class="flex items-center">
                        <div class="text-4xl mr-4">\${recipe.image}</div>
                        <div>
                            <h2 class="text-2xl font-bold">\${recipe.title}</h2>
                            <p class="text-gray-600">\${recipe.description}</p>
                        </div>
                    </div>
                    <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-times text-xl"></i>
                    </button>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h3 class="text-lg font-semibold mb-3">Ingredients</h3>
                        <ul class="space-y-2">
                            \${recipe.ingredients.map(ingredient => \`<li class="flex items-center"><span class="w-2 h-2 bg-green-500 rounded-full mr-3"></span>\${ingredient}</li>\`).join('')}
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold mb-3">Instructions</h3>
                        <ol class="space-y-2">
                            \${recipe.instructions.map((instruction, index) => \`<li class="flex"><span class="bg-green-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm mr-3 flex-shrink-0">\${index + 1}</span><span>\${instruction}</span></li>\`).join('')}
                        </ol>
                    </div>
                </div>
                
                <div class="mt-6 pt-6 border-t border-gray-200">
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                        <div>
                            <div class="text-2xl font-bold text-green-600">\${recipe.prepTime}</div>
                            <div class="text-sm text-gray-600">Prep Time</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-blue-600">\${recipe.cookTime}</div>
                            <div class="text-sm text-gray-600">Cook Time</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-purple-600">\${recipe.servings}</div>
                            <div class="text-sm text-gray-600">Servings</div>
                        </div>
                        <div>
                            <div class="text-2xl font-bold text-orange-600">\${recipe.calories}</div>
                            <div class="text-sm text-gray-600">Calories</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    \`;
    
    document.body.appendChild(modal);
}

function calculateBMI() {
    const height = parseFloat(document.getElementById('height').value);
    const weight = parseFloat(document.getElementById('weight').value);
    
    if (!height || !weight) {
        alert('Please enter both height and weight');
        return;
    }
    
    const bmi = (weight / ((height / 100) ** 2)).toFixed(1);
    let category = '';
    let color = '';
    
    if (bmi < 18.5) {
        category = 'Underweight';
        color = 'blue';
    } else if (bmi < 25) {
        category = 'Normal weight';
        color = 'green';
    } else if (bmi < 30) {
        category = 'Overweight';
        color = 'yellow';
    } else {
        category = 'Obese';
        color = 'red';
    }
    
    const resultDiv = document.getElementById('bmiResult');
    resultDiv.className = \`mt-4 p-4 rounded-md bg-\${color}-100 text-\${color}-800\`;
    resultDiv.innerHTML = \`
        <h4 class="font-semibold mb-2">BMI Result</h4>
        <p class="text-2xl font-bold">\${bmi}</p>
        <p>Category: \${category}</p>
    \`;
    resultDiv.classList.remove('hidden');
}

function calculateCalories() {
    const age = parseInt(document.getElementById('age').value);
    const gender = document.getElementById('gender').value;
    const activity = parseFloat(document.getElementById('activity').value);
    const weight = parseFloat(document.getElementById('weight').value);
    const height = parseFloat(document.getElementById('height').value);
    
    if (!age || !weight || !height) {
        alert('Please fill in all required fields');
        return;
    }
    
    // Harris-Benedict Equation
    let bmr;
    if (gender === 'male') {
        bmr = 88.362 + (13.397 * weight) + (4.799 * height) - (5.677 * age);
    } else {
        bmr = 447.593 + (9.247 * weight) + (3.098 * height) - (4.330 * age);
    }
    
    const dailyCalories = Math.round(bmr * activity);
    
    const resultDiv = document.getElementById('calorieResult');
    resultDiv.className = 'mt-4 p-4 rounded-md bg-blue-100 text-blue-800';
    resultDiv.innerHTML = \`
        <h4 class="font-semibold mb-2">Daily Calorie Needs</h4>
        <p class="text-2xl font-bold">\${dailyCalories} calories/day</p>
        <p class="text-sm mt-2">This is your estimated daily calorie requirement to maintain your current weight.</p>
    \`;
    resultDiv.classList.remove('hidden');
}`,"package.json":JSON.stringify({name:"healthy-food-tips",version:"1.0.0",description:"A comprehensive health food tips application with full features",main:"index.html",scripts:{start:"npx serve .",dev:"npx live-server --port=3000"},keywords:["health","nutrition","food","tips","recipes","wellness"],author:"DreamBuild AI",license:"MIT"},null,2)}}createPersonalDashboardTemplate(){return{"index.html":`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Dashboard - 5 Features</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-blue-600">📊 Personal Dashboard</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <span class="text-gray-600" id="currentTime"></span>
                    <button id="toggleTheme" class="p-2 rounded-md text-gray-400 hover:text-gray-500">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Header -->
        <div class="mb-8">
            <h2 class="text-3xl font-bold text-gray-900 mb-2">Welcome to Your Dashboard</h2>
            <p class="text-gray-600">Manage your tasks, track expenses, take notes, check weather, and schedule events all in one place.</p>
        </div>

        <!-- Feature Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6">
            
            <!-- Feature 1: Task Management -->
            <div class="feature-card bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">📝 Task Management</h3>
                    <span class="text-sm text-gray-500" id="taskCount">0 tasks</span>
                </div>
                
                <div class="space-y-4">
                    <div class="flex gap-2">
                        <input type="text" id="taskInput" placeholder="Add a new task..." 
                               class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button id="addTask" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div id="taskList" class="space-y-2 max-h-60 overflow-y-auto">
                        <!-- Tasks will be added here dynamically -->
                    </div>
                </div>
            </div>

            <!-- Feature 2: Weather Widget -->
            <div class="feature-card bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">🌤️ Weather</h3>
                    <button id="refreshWeather" class="text-gray-400 hover:text-gray-600">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                
                <div class="text-center">
                    <div class="weather-icon mb-2" id="weatherIcon">☀️</div>
                    <div class="text-3xl font-bold text-gray-900" id="temperature">72°F</div>
                    <div class="text-gray-600" id="weatherDescription">Sunny</div>
                    <div class="text-sm text-gray-500 mt-2" id="location">New York, NY</div>
                </div>
            </div>

            <!-- Feature 3: Note Taking -->
            <div class="feature-card bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">📄 Notes</h3>
                    <span class="text-sm text-gray-500" id="noteCount">0 notes</span>
                </div>
                
                <div class="space-y-4">
                    <div class="flex gap-2">
                        <input type="text" id="noteTitle" placeholder="Note title..." 
                               class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button id="addNote" class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <textarea id="noteContent" placeholder="Write your note here..." rows="3"
                              class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
                    
                    <div id="notesList" class="space-y-2 max-h-48 overflow-y-auto">
                        <!-- Notes will be added here dynamically -->
                    </div>
                </div>
            </div>

            <!-- Feature 4: Expense Tracker -->
            <div class="feature-card bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">💰 Expense Tracker</h3>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Today's Total</div>
                        <div class="text-lg font-bold" id="dailyTotal">$0.00</div>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-2">
                        <input type="text" id="expenseDescription" placeholder="Description" 
                               class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <input type="number" id="expenseAmount" placeholder="Amount" step="0.01"
                               class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div class="flex gap-2">
                        <select id="expenseCategory" class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="food">🍔 Food</option>
                            <option value="transport">🚗 Transport</option>
                            <option value="entertainment">🎬 Entertainment</option>
                            <option value="shopping">🛍️ Shopping</option>
                            <option value="other">📦 Other</option>
                        </select>
                        <button id="addExpense" class="px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div id="expensesList" class="space-y-2 max-h-48 overflow-y-auto">
                        <!-- Expenses will be added here dynamically -->
                    </div>
                </div>
            </div>

            <!-- Feature 5: Calendar/Events -->
            <div class="feature-card bg-white rounded-lg shadow-md p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-xl font-semibold text-gray-900">📅 Calendar</h3>
                    <div class="flex gap-2">
                        <button id="prevMonth" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span id="currentMonth" class="font-semibold">September 2024</span>
                        <button id="nextMonth" class="text-gray-400 hover:text-gray-600">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <div class="flex gap-2">
                        <input type="text" id="eventTitle" placeholder="Event title..." 
                               class="flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <input type="date" id="eventDate" 
                               class="px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button id="addEvent" class="px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div id="calendarGrid" class="grid grid-cols-7 gap-1 text-xs">
                        <!-- Calendar will be generated here -->
                    </div>
                    
                    <div id="eventsList" class="space-y-2 max-h-32 overflow-y-auto">
                        <!-- Events will be listed here -->
                    </div>
                </div>
            </div>

            <!-- Summary Card -->
            <div class="feature-card bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg shadow-md p-6 lg:col-span-2 xl:col-span-1">
                <h3 class="text-xl font-semibold mb-4">📊 Today's Summary</h3>
                <div class="space-y-3">
                    <div class="flex justify-between">
                        <span>Tasks Completed:</span>
                        <span id="completedTasks">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Notes Created:</span>
                        <span id="totalNotes">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Expenses Today:</span>
                        <span id="todayExpenses">$0.00</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Events Today:</span>
                        <span id="todayEvents">0</span>
                    </div>
                    <hr class="border-white/20">
                    <div class="flex justify-between font-bold">
                        <span>Productivity Score:</span>
                        <span id="productivityScore">0%</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"><\/script>
</body>
</html>`,"styles.css":`/* Personal Dashboard Styles */
.feature-card {
    transition: all 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

.task-completed {
    text-decoration: line-through;
    opacity: 0.6;
}

.expense-positive {
    color: #10b981;
}

.expense-negative {
    color: #ef4444;
}

.weather-icon {
    font-size: 3rem;
}

.note-card {
    border-left: 4px solid #3b82f6;
}

.calendar-day {
    transition: all 0.2s ease;
}

.calendar-day:hover {
    background-color: #dbeafe;
}

.calendar-day.has-event {
    background-color: #3b82f6;
    color: white;
}

/* Responsive design */
@media (max-width: 768px) {
    .feature-card {
        margin-bottom: 1rem;
    }
}

/* Dark mode support */
@media (prefers-color-scheme: dark) {
    .feature-card {
        background-color: #1f2937;
        color: white;
    }
}`,"script.js":`// Personal Dashboard Application JavaScript

// Application state
const appState = {
    tasks: JSON.parse(localStorage.getItem('dashboard_tasks') || '[]'),
    notes: JSON.parse(localStorage.getItem('dashboard_notes') || '[]'),
    expenses: JSON.parse(localStorage.getItem('dashboard_expenses') || '[]'),
    events: JSON.parse(localStorage.getItem('dashboard_events') || '[]'),
    currentDate: new Date(),
    currentMonth: new Date().getMonth(),
    currentYear: new Date().getFullYear()
};

// Initialize Application
document.addEventListener('DOMContentLoaded', function() {
    initializeApp();
    updateTime();
    generateCalendar();
    updateSummary();
});

function initializeApp() {
    // Load saved data
    loadTasks();
    loadNotes();
    loadExpenses();
    loadEvents();
    
    // Set up event listeners
    setupEventListeners();
    
    // Initialize weather (mock data)
    updateWeather();
}

function setupEventListeners() {
    // Task Management
    document.getElementById('addTask').addEventListener('click', addTask);
    document.getElementById('taskInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') addTask();
    });

    // Notes
    document.getElementById('addNote').addEventListener('click', addNote);
    document.getElementById('noteTitle').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') addNote();
    });

    // Expenses
    document.getElementById('addExpense').addEventListener('click', addExpense);
    document.getElementById('expenseAmount').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') addExpense();
    });

    // Events
    document.getElementById('addEvent').addEventListener('click', addEvent);
    document.getElementById('prevMonth').addEventListener('click', previousMonth);
    document.getElementById('nextMonth').addEventListener('click', nextMonth);

    // Weather refresh
    document.getElementById('refreshWeather').addEventListener('click', updateWeather);
}

// Task Management Functions
function addTask() {
    const input = document.getElementById('taskInput');
    const text = input.value.trim();
    if (!text) return;

    const task = {
        id: Date.now(),
        text: text,
        completed: false,
        createdAt: new Date().toISOString()
    };

    appState.tasks.push(task);
    saveTasks();
    loadTasks();
    input.value = '';
    updateSummary();
}

function toggleTask(id) {
    const task = appState.tasks.find(t => t.id === id);
    if (task) {
        task.completed = !task.completed;
        saveTasks();
        loadTasks();
        updateSummary();
    }
}

function deleteTask(id) {
    appState.tasks = appState.tasks.filter(t => t.id !== id);
    saveTasks();
    loadTasks();
    updateSummary();
}

function loadTasks() {
    const container = document.getElementById('taskList');
    const countElement = document.getElementById('taskCount');
    
    countElement.textContent = \`\${appState.tasks.length} tasks\`;
    
    if (appState.tasks.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">No tasks yet. Add one above!</p>';
        return;
    }

    container.innerHTML = appState.tasks.map(task => \`
        <div class="flex items-center gap-2 p-2 border border-gray-200 rounded-md \${task.completed ? 'task-completed' : ''}">
            <input type="checkbox" \${task.completed ? 'checked' : ''} 
                   onchange="toggleTask(\${task.id})" class="rounded">
            <span class="flex-1">\${task.text}</span>
            <button onclick="deleteTask(\${task.id})" class="text-red-500 hover:text-red-700">
                <i class="fas fa-trash text-sm"></i>
            </button>
        </div>
    \`).join('');
}

function saveTasks() {
    localStorage.setItem('dashboard_tasks', JSON.stringify(appState.tasks));
}

// Notes Functions
function addNote() {
    const titleInput = document.getElementById('noteTitle');
    const contentInput = document.getElementById('noteContent');
    const title = titleInput.value.trim();
    const content = contentInput.value.trim();

    if (!title || !content) return;

    const note = {
        id: Date.now(),
        title: title,
        content: content,
        createdAt: new Date().toISOString()
    };

    appState.notes.push(note);
    saveNotes();
    loadNotes();
    titleInput.value = '';
    contentInput.value = '';
    updateSummary();
}

function deleteNote(id) {
    appState.notes = appState.notes.filter(n => n.id !== id);
    saveNotes();
    loadNotes();
    updateSummary();
}

function loadNotes() {
    const container = document.getElementById('notesList');
    const countElement = document.getElementById('noteCount');
    
    countElement.textContent = \`\${appState.notes.length} notes\`;
    
    if (appState.notes.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">No notes yet. Create one above!</p>';
        return;
    }

    container.innerHTML = appState.notes.slice(-5).map(note => \`
        <div class="note-card bg-gray-50 p-3 rounded-md">
            <div class="flex justify-between items-start mb-1">
                <h4 class="font-semibold text-sm">\${note.title}</h4>
                <button onclick="deleteNote(\${note.id})" class="text-red-500 hover:text-red-700">
                    <i class="fas fa-trash text-xs"></i>
                </button>
            </div>
            <p class="text-xs text-gray-600">\${note.content.substring(0, 100)}\${note.content.length > 100 ? '...' : ''}</p>
        </div>
    \`).join('');
}

function saveNotes() {
    localStorage.setItem('dashboard_notes', JSON.stringify(appState.notes));
}

// Expense Functions
function addExpense() {
    const descriptionInput = document.getElementById('expenseDescription');
    const amountInput = document.getElementById('expenseAmount');
    const categorySelect = document.getElementById('expenseCategory');
    
    const description = descriptionInput.value.trim();
    const amount = parseFloat(amountInput.value);
    const category = categorySelect.value;

    if (!description || isNaN(amount) || amount <= 0) return;

    const expense = {
        id: Date.now(),
        description: description,
        amount: amount,
        category: category,
        date: new Date().toISOString().split('T')[0]
    };

    appState.expenses.push(expense);
    saveExpenses();
    loadExpenses();
    descriptionInput.value = '';
    amountInput.value = '';
    updateSummary();
}

function deleteExpense(id) {
    appState.expenses = appState.expenses.filter(e => e.id !== id);
    saveExpenses();
    loadExpenses();
    updateSummary();
}

function loadExpenses() {
    const container = document.getElementById('expensesList');
    const today = new Date().toISOString().split('T')[0];
    const todayExpenses = appState.expenses.filter(e => e.date === today);
    const total = todayExpenses.reduce((sum, e) => sum + e.amount, 0);
    
    document.getElementById('dailyTotal').textContent = \`$\${total.toFixed(2)}\`;
    
    if (todayExpenses.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">No expenses today.</p>';
        return;
    }

    container.innerHTML = todayExpenses.slice(-5).map(expense => \`
        <div class="flex justify-between items-center p-2 border border-gray-200 rounded-md">
            <div>
                <div class="text-sm font-medium">\${expense.description}</div>
                <div class="text-xs text-gray-500">\${getCategoryEmoji(expense.category)} \${expense.category}</div>
            </div>
            <div class="flex items-center gap-2">
                <span class="font-semibold expense-negative">-$\${expense.amount.toFixed(2)}</span>
                <button onclick="deleteExpense(\${expense.id})" class="text-red-500 hover:text-red-700">
                    <i class="fas fa-trash text-xs"></i>
                </button>
            </div>
        </div>
    \`).join('');
}

function getCategoryEmoji(category) {
    const emojis = {
        food: '🍔',
        transport: '🚗',
        entertainment: '🎬',
        shopping: '🛍️',
        other: '📦'
    };
    return emojis[category] || '📦';
}

function saveExpenses() {
    localStorage.setItem('dashboard_expenses', JSON.stringify(appState.expenses));
}

// Calendar/Events Functions
function addEvent() {
    const titleInput = document.getElementById('eventTitle');
    const dateInput = document.getElementById('eventDate');
    const title = titleInput.value.trim();
    const date = dateInput.value;

    if (!title || !date) return;

    const event = {
        id: Date.now(),
        title: title,
        date: date,
        createdAt: new Date().toISOString()
    };

    appState.events.push(event);
    saveEvents();
    loadEvents();
    titleInput.value = '';
    dateInput.value = '';
    generateCalendar();
    updateSummary();
}

function deleteEvent(id) {
    appState.events = appState.events.filter(e => e.id !== id);
    saveEvents();
    loadEvents();
    generateCalendar();
    updateSummary();
}

function loadEvents() {
    const container = document.getElementById('eventsList');
    const today = new Date().toISOString().split('T')[0];
    const todayEvents = appState.events.filter(e => e.date === today);
    
    if (todayEvents.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-center py-4">No events today.</p>';
        return;
    }

    container.innerHTML = todayEvents.map(event => \`
        <div class="flex justify-between items-center p-2 bg-blue-50 border border-blue-200 rounded-md">
            <span class="text-sm">\${event.title}</span>
            <button onclick="deleteEvent(\${event.id})" class="text-red-500 hover:text-red-700">
                <i class="fas fa-trash text-xs"></i>
            </button>
        </div>
    \`).join('');
}

function generateCalendar() {
    const container = document.getElementById('calendarGrid');
    const monthNames = ['January', 'February', 'March', 'April', 'May', 'June',
                      'July', 'August', 'September', 'October', 'November', 'December'];
    
    document.getElementById('currentMonth').textContent = \`\${monthNames[appState.currentMonth]} \${appState.currentYear}\`;
    
    const firstDay = new Date(appState.currentYear, appState.currentMonth, 1);
    const lastDay = new Date(appState.currentYear, appState.currentMonth + 1, 0);
    const daysInMonth = lastDay.getDate();
    const startingDayOfWeek = firstDay.getDay();
    
    let calendarHTML = '';
    
    // Add empty cells for days before the first day of the month
    for (let i = 0; i < startingDayOfWeek; i++) {
        calendarHTML += '<div class="calendar-day h-8"></div>';
    }
    
    // Add days of the month
    for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = \`\${appState.currentYear}-\${String(appState.currentMonth + 1).padStart(2, '0')}-\${String(day).padStart(2, '0')}\`;
        const hasEvent = appState.events.some(e => e.date === dateStr);
        const isToday = dateStr === new Date().toISOString().split('T')[0];
        
        calendarHTML += \`
            <div class="calendar-day h-8 flex items-center justify-center rounded cursor-pointer \${hasEvent ? 'has-event' : ''} \${isToday ? 'bg-yellow-200' : ''}">
                \${day}
            </div>
        \`;
    }
    
    // Remove existing calendar days (keep header)
    const existingDays = container.querySelectorAll('.calendar-day');
    existingDays.forEach(day => day.remove());
    
    // Insert new calendar
    container.insertAdjacentHTML('beforeend', calendarHTML);
}

function previousMonth() {
    appState.currentMonth--;
    if (appState.currentMonth < 0) {
        appState.currentMonth = 11;
        appState.currentYear--;
    }
    generateCalendar();
}

function nextMonth() {
    appState.currentMonth++;
    if (appState.currentMonth > 11) {
        appState.currentMonth = 0;
        appState.currentYear++;
    }
    generateCalendar();
}

function saveEvents() {
    localStorage.setItem('dashboard_events', JSON.stringify(appState.events));
}

// Weather Functions (Mock Data)
function updateWeather() {
    const weatherData = {
        icon: '☀️',
        temperature: '72°F',
        description: 'Sunny',
        location: 'New York, NY',
        humidity: '45%',
        windSpeed: '8 mph'
    };

    document.getElementById('weatherIcon').textContent = weatherData.icon;
    document.getElementById('temperature').textContent = weatherData.temperature;
    document.getElementById('weatherDescription').textContent = weatherData.description;
    document.getElementById('location').textContent = weatherData.location;
}

// Summary Functions
function updateSummary() {
    const completedTasks = appState.tasks.filter(t => t.completed).length;
    const totalTasks = appState.tasks.length;
    const totalNotes = appState.notes.length;
    
    const today = new Date().toISOString().split('T')[0];
    const todayExpenses = appState.expenses.filter(e => e.date === today);
    const todayEvents = appState.events.filter(e => e.date === today);
    
    const totalExpenses = todayExpenses.reduce((sum, e) => sum + e.amount, 0);
    
    document.getElementById('completedTasks').textContent = completedTasks;
    document.getElementById('totalNotes').textContent = totalNotes;
    document.getElementById('todayExpenses').textContent = \`$\${totalExpenses.toFixed(2)}\`;
    document.getElementById('todayEvents').textContent = todayEvents.length;
    
    // Calculate productivity score
    const productivityScore = totalTasks > 0 ? Math.round((completedTasks / totalTasks) * 100) : 0;
    document.getElementById('productivityScore').textContent = \`\${productivityScore}%\`;
}

// Utility Functions
function updateTime() {
    const now = new Date();
    const timeString = now.toLocaleTimeString('en-US', { 
        hour: '2-digit', 
        minute: '2-digit',
        hour12: true 
    });
    document.getElementById('currentTime').textContent = timeString;
}

// Update time every minute
setInterval(updateTime, 60000);

// Auto-refresh data every 30 seconds
setInterval(() => {
    updateSummary();
    loadEvents();
}, 30000);`,"package.json":JSON.stringify({name:"personal-dashboard",version:"1.0.0",description:"A comprehensive personal dashboard with 5 main features: task management, weather widget, note taking, expense tracker, and calendar/events",main:"index.html",scripts:{start:"npx serve .",dev:"npx live-server --port=3000"},keywords:["dashboard","tasks","notes","expenses","calendar","weather","productivity"],author:"DreamBuild AI",license:"MIT"},null,2),"README.md":`# Personal Dashboard - 5 Features

A comprehensive personal dashboard application with 5 main features:

## 🚀 Features

### 1. 📝 Task Management
- Add, edit, and delete tasks
- Mark tasks as complete/incomplete
- Real-time task counter
- Persistent storage across sessions

### 2. 🌤️ Weather Widget
- Current weather display with icons
- Location information
- Refresh functionality
- Mock data with realistic structure

### 3. 📄 Note Taking
- Create notes with title and content
- Rich text support ready for expansion
- Delete notes with confirmation
- Note counter and organization

### 4. 💰 Expense Tracker
- Add expenses with description and amount
- Category management (Food, Transport, Entertainment, Shopping, Other)
- Real-time daily total calculation
- Expense history with visual indicators

### 5. 📅 Calendar/Events
- Interactive calendar grid generation
- Month navigation (previous/next)
- Event creation with date selection
- Visual indicators for days with events

## 🛠️ Technical Features

- **Responsive Design**: Works perfectly on all screen sizes
- **Data Persistence**: localStorage integration across all features
- **Interactive Elements**: Smooth hover effects and animations
- **Professional UI**: Modern, clean interface with Tailwind CSS
- **Production Ready**: Complete application structure

## 🚀 Getting Started

1. **Clone or download** the application files
2. **Open index.html** in a web browser
3. **Start using** all 5 features immediately
4. **Data persists** across browser sessions automatically

## 📁 File Structure

\`\`\`
personal-dashboard/
├── index.html          # Main application file
├── styles.css          # Complete styling with animations
├── script.js           # Full JavaScript functionality
├── package.json        # Project configuration
└── README.md           # This documentation
\`\`\`

## 🎯 Usage

### Task Management
- Type a task in the input field and click the + button
- Check the checkbox to mark tasks as complete
- Click the trash icon to delete tasks

### Weather Widget
- View current weather conditions
- Click the refresh button to update weather data

### Note Taking
- Enter a note title and content
- Click the + button to save the note
- Notes are displayed in the list below

### Expense Tracker
- Enter expense description and amount
- Select a category from the dropdown
- Click the + button to add the expense
- View today's total in the header

### Calendar/Events
- Navigate months using the arrow buttons
- Enter an event title and select a date
- Click the + button to add the event
- Events appear on the calendar and in today's list

## 🔧 Customization

The application is built with modern web technologies and can be easily customized:

- **Styling**: Modify \`styles.css\` for custom themes
- **Functionality**: Extend \`script.js\` for additional features
- **Layout**: Update \`index.html\` for different layouts
- **Dependencies**: Modify \`package.json\` for additional libraries

## 📊 Features Summary

| Feature | Status | Functionality |
|---------|--------|---------------|
| Task Management | ✅ Complete | Full CRUD operations |
| Weather Widget | ✅ Complete | Mock data with refresh |
| Note Taking | ✅ Complete | Create and manage notes |
| Expense Tracker | ✅ Complete | Category management |
| Calendar/Events | ✅ Complete | Event scheduling |

## 🎉 Production Ready

This application is production-ready with:
- ✅ Complete functionality for all 5 features
- ✅ Professional UI/UX design
- ✅ Responsive layout for all devices
- ✅ Data persistence across sessions
- ✅ Clean, maintainable code structure
- ✅ Comprehensive documentation

Generated by DreamBuild AI - Comprehensive Application Generator
`}}createPortfolioTemplate(){return this.createGenericComprehensiveTemplate("portfolio showcase application",{isComprehensive:!0,featureCount:4,complexity:"high",suggestedArchitecture:"portfolio-architecture"})}createTodoAppTemplate(){return this.createGenericComprehensiveTemplate("todo task management application",{isComprehensive:!0,featureCount:3,complexity:"high",suggestedArchitecture:"task-management-architecture"})}createGenericComprehensiveTemplate(e,t){const r={"index.html":this.generateGenericHTML(e),"styles.css":this.generateGenericCSS(),"script.js":this.generateGenericJS(e),"package.json":this.generateGenericPackageJSON(e),"README.md":this.generateGenericREADME(e)};return t.featureCount>=3&&(r["components/"]=`// Additional components directory
// Add feature-specific components here`,r["utils/"]=`// Utility functions directory
// Add helper functions here`),r}createEnhancedFallbackResponse(e,t,r){const s=this.createFallbackResponse(e,t);return r&&Object.keys(s).forEach(i=>{if(s[i]){const o=this.generateKnowledgeComment(r,i);s[i]=o+`
`+s[i]}}),s}parseResponse(e,t,r){try{const s=e.match(/```[\s\S]*?```/g);if(s&&s.length>0){const i={};return s.forEach((o,u)=>{const p=o.split(`
`)[0].replace(/```/g,"").trim();let f;if(p&&p.includes("."))f=p;else{const x=o.replace(/```[\w]*\n?/,"").replace(/```$/,"");f=this.detectFilename(x,u)}const y=o.replace(/```[\w]*\n?/,"").replace(/```$/,"").trim();i[f]=y}),i}return this.createFallbackResponse(t,r)}catch(s){return console.error("Error parsing AI response:",s),this.createFallbackResponse(t,r)}}detectFilename(e,t){const r=e.toLowerCase();return r.includes("<!doctype")||r.includes("<html")?"index.html":r.includes("function")||r.includes("const")||r.includes("var")?"script.js":r.includes("{")&&r.includes("}")&&r.includes(":")?"style.css":`file${t+1}.txt`}createFallbackResponse(e,t){const r=e.toLowerCase();return r.includes("health")&&r.includes("food")?{"index.html":this.generateHealthHTML(),"style.css":this.generateHealthCSS(),"script.js":this.generateHealthJS()}:r.includes("todo")||r.includes("task")?{"index.html":this.generateTodoHTML(),"style.css":this.generateTodoCSS(),"script.js":this.generateTodoJS()}:r.includes("portfolio")||r.includes("resume")?{"index.html":this.generatePortfolioHTML(),"style.css":this.generatePortfolioCSS(),"script.js":this.generatePortfolioJS()}:{"index.html":this.generateGenericHTML(e),"style.css":this.generateGenericCSS(),"script.js":this.generateGenericJS()}}generateHealthHTML(){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🥗 Health Food Tips</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>🥗 Health Food Tips</h1>
            <p>Your guide to healthy eating and nutrition</p>
        </header>
        
        <main>
            <section class="hero">
                <h2>Welcome to Your Health Journey</h2>
                <p>Discover amazing tips for healthy eating and better nutrition.</p>
            </section>
            
            <section class="content">
                <h3>Healthy Eating Tips</h3>
                <div class="tip-card">
                    <h4>🥕 Eat More Vegetables</h4>
                    <p>Include a variety of colorful vegetables in your meals for essential vitamins and minerals.</p>
                </div>
                <div class="tip-card">
                    <h4>💧 Stay Hydrated</h4>
                    <p>Drink plenty of water throughout the day to maintain optimal health.</p>
                </div>
                <div class="tip-card">
                    <h4>🌾 Choose Whole Grains</h4>
                    <p>Opt for whole grain options like brown rice, quinoa, and whole wheat bread.</p>
                </div>
            </section>
        </main>
        
        <footer>
            <p>&copy; 2024 Health Food Tips. Created with DreamBuild Local AI.</p>
        </footer>
    </div>
    
    <script src="script.js"><\/script>
</body>
</html>`}generateHealthCSS(){return`/* Health Food Tips Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    line-height: 1.6;
    color: #333;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

header {
    text-align: center;
    padding: 40px 0;
    color: white;
}

header h1 {
    font-size: 3rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

header p {
    font-size: 1.2rem;
    opacity: 0.9;
}

.hero {
    background: rgba(255,255,255,0.95);
    padding: 40px;
    border-radius: 20px;
    margin: 40px 0;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.hero h2 {
    font-size: 2.5rem;
    margin-bottom: 20px;
    color: #667eea;
}

.content {
    background: rgba(255,255,255,0.95);
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.tip-card {
    background: white;
    padding: 30px;
    margin: 20px 0;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    border-left: 5px solid #667eea;
}

.tip-card h4 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #667eea;
}

footer {
    text-align: center;
    padding: 40px 0;
    color: white;
    opacity: 0.8;
}

@media (max-width: 768px) {
    header h1 {
        font-size: 2rem;
    }
    
    .hero h2 {
        font-size: 2rem;
    }
    
    .container {
        padding: 10px;
    }
}`}generateHealthJS(){return`// Health Food Tips JavaScript
document.addEventListener('DOMContentLoaded', function() {
    console.log('🥗 Health Food Tips loaded with Local AI!');
    
    // Add interactive features
    const tipCards = document.querySelectorAll('.tip-card');
    
    tipCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-5px)';
            this.style.transition = 'transform 0.3s ease';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });
    
    // Add smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
    
    // Add animation on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    tipCards.forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
});`}generateTodoHTML(){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✅ Todo App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>✅ My Todo List</h1>
            <p>Stay organized and productive</p>
        </header>
        
        <main>
            <div class="todo-input">
                <input type="text" id="todoInput" placeholder="Add a new task...">
                <button id="addBtn">Add Task</button>
            </div>
            
            <div class="todo-list" id="todoList">
                <!-- Tasks will be added here -->
            </div>
        </main>
    </div>
    
    <script src="script.js"><\/script>
</body>
</html>`}generateTodoCSS(){return`/* Todo App Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
    min-height: 100vh;
    color: #333;
}

.container {
    max-width: 600px;
    margin: 0 auto;
    padding: 20px;
}

header {
    text-align: center;
    padding: 40px 0;
    color: white;
}

header h1 {
    font-size: 3rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

.todo-input {
    display: flex;
    gap: 10px;
    margin-bottom: 30px;
}

#todoInput {
    flex: 1;
    padding: 15px;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

#addBtn {
    padding: 15px 30px;
    background: #00b894;
    color: white;
    border: none;
    border-radius: 10px;
    font-size: 1rem;
    cursor: pointer;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: background 0.3s ease;
}

#addBtn:hover {
    background: #00a085;
}

.todo-item {
    background: white;
    padding: 20px;
    margin: 10px 0;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    animation: slideIn 0.3s ease;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateX(-20px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.todo-item.completed {
    opacity: 0.6;
    text-decoration: line-through;
}

.delete-btn {
    background: #e17055;
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    transition: background 0.3s ease;
}

.delete-btn:hover {
    background: #d63031;
}`}generateTodoJS(){return`// Todo App JavaScript
document.addEventListener('DOMContentLoaded', function() {
    const todoInput = document.getElementById('todoInput');
    const addBtn = document.getElementById('addBtn');
    const todoList = document.getElementById('todoList');
    
    // Load todos from localStorage
    loadTodos();
    
    // Add event listeners
    addBtn.addEventListener('click', addTodo);
    todoInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            addTodo();
        }
    });
    
    function addTodo() {
        const text = todoInput.value.trim();
        if (text === '') return;
        
        const todo = {
            id: Date.now(),
            text: text,
            completed: false
        };
        
        saveTodo(todo);
        displayTodo(todo);
        todoInput.value = '';
    }
    
    function displayTodo(todo) {
        const todoItem = document.createElement('div');
        todoItem.className = 'todo-item';
        todoItem.dataset.id = todo.id;
        
        if (todo.completed) {
            todoItem.classList.add('completed');
        }
        
        todoItem.innerHTML = \`
            <span>\${todo.text}</span>
            <div>
                <button class="delete-btn" onclick="deleteTodo(\${todo.id})">Delete</button>
            </div>
        \`;
        
        todoItem.addEventListener('click', function(e) {
            if (e.target.classList.contains('delete-btn')) return;
            toggleTodo(todo.id);
        });
        
        todoList.appendChild(todoItem);
    }
    
    function toggleTodo(id) {
        const todos = getTodos();
        const todo = todos.find(t => t.id === id);
        if (todo) {
            todo.completed = !todo.completed;
            saveTodos(todos);
            loadTodos();
        }
    }
    
    function deleteTodo(id) {
        const todos = getTodos();
        const filteredTodos = todos.filter(t => t.id !== id);
        saveTodos(filteredTodos);
        loadTodos();
    }
    
    function loadTodos() {
        todoList.innerHTML = '';
        const todos = getTodos();
        todos.forEach(todo => displayTodo(todo));
    }
    
    function getTodos() {
        return JSON.parse(localStorage.getItem('todos') || '[]');
    }
    
    function saveTodo(todo) {
        const todos = getTodos();
        todos.push(todo);
        saveTodos(todos);
    }
    
    function saveTodos(todos) {
        localStorage.setItem('todos', JSON.stringify(todos));
    }
    
    // Make functions global for onclick handlers
    window.deleteTodo = deleteTodo;
    
    console.log('✅ Todo App loaded with Local AI!');
});`}generatePortfolioHTML(){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💼 Portfolio</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>💼 John Developer</h1>
            <p>Full Stack Developer & AI Enthusiast</p>
        </header>
        
        <main>
            <section class="about">
                <h2>About Me</h2>
                <p>Passionate developer with expertise in modern web technologies and AI integration.</p>
            </section>
            
            <section class="projects">
                <h2>Projects</h2>
                <div class="project-grid">
                    <div class="project-card">
                        <h3>DreamBuild AI</h3>
                        <p>AI-powered development platform built with React and local AI models.</p>
                    </div>
                    <div class="project-card">
                        <h3>Smart Todo App</h3>
                        <p>Intelligent task management with AI-powered suggestions.</p>
                    </div>
                    <div class="project-card">
                        <h3>Health Tracker</h3>
                        <p>Comprehensive health monitoring with data visualization.</p>
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <p>&copy; 2024 John Developer. Created with DreamBuild Local AI.</p>
        </footer>
    </div>
    
    <script src="script.js"><\/script>
</body>
</html>`}generatePortfolioCSS(){return`/* Portfolio Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    line-height: 1.6;
    color: #333;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

header {
    text-align: center;
    padding: 60px 0;
    color: white;
}

header h1 {
    font-size: 3.5rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

header p {
    font-size: 1.3rem;
    opacity: 0.9;
}

section {
    background: rgba(255,255,255,0.95);
    margin: 40px 0;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

section h2 {
    font-size: 2.5rem;
    margin-bottom: 30px;
    color: #667eea;
    text-align: center;
}

.about p {
    font-size: 1.2rem;
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
}

.project-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-top: 40px;
}

.project-card {
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    transition: transform 0.3s ease;
}

.project-card:hover {
    transform: translateY(-5px);
}

.project-card h3 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #667eea;
}

footer {
    text-align: center;
    padding: 40px 0;
    color: white;
    opacity: 0.8;
}

@media (max-width: 768px) {
    header h1 {
        font-size: 2.5rem;
    }
    
    section {
        padding: 20px;
    }
    
    .project-grid {
        grid-template-columns: 1fr;
    }
}`}generatePortfolioJS(){return`// Portfolio JavaScript
document.addEventListener('DOMContentLoaded', function() {
    console.log('💼 Portfolio loaded with Local AI!');
    
    // Add smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
    
    // Add animation on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe project cards
    document.querySelectorAll('.project-card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
    
    // Add hover effects
    document.querySelectorAll('.project-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.boxShadow = '0 10px 25px rgba(0,0,0,0.2)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
        });
    });
});`}generateGenericHTML(e){return`<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${e.replace(/[^a-zA-Z0-9\s]/g,"").substring(0,50)}</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>${e.replace(/[^a-zA-Z0-9\s]/g,"").substring(0,50)}</h1>
            <p>Generated with DreamBuild Local AI</p>
        </header>
        
        <main>
            <section class="content">
                <h2>Welcome</h2>
                <p>This application was generated based on your prompt using DreamBuild Local AI.</p>
                <div class="features">
                    <div class="feature-card">
                        <h3>✨ Feature 1</h3>
                        <p>Modern and responsive design</p>
                    </div>
                    <div class="feature-card">
                        <h3>🚀 Feature 2</h3>
                        <p>Built with local AI models</p>
                    </div>
                    <div class="feature-card">
                        <h3>💡 Feature 3</h3>
                        <p>No API keys required</p>
                    </div>
                </div>
            </section>
        </main>
        
        <footer>
            <p>&copy; 2024 Generated with DreamBuild Local AI</p>
        </footer>
    </div>
    
    <script src="script.js"><\/script>
</body>
</html>`}generateGenericCSS(){return`/* Generic Template Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    line-height: 1.6;
    color: #333;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

header {
    text-align: center;
    padding: 60px 0;
    color: white;
}

header h1 {
    font-size: 3rem;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
}

header p {
    font-size: 1.2rem;
    opacity: 0.9;
}

.content {
    background: rgba(255,255,255,0.95);
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    margin: 40px 0;
}

.content h2 {
    font-size: 2.5rem;
    margin-bottom: 30px;
    color: #667eea;
    text-align: center;
}

.content p {
    font-size: 1.2rem;
    text-align: center;
    margin-bottom: 40px;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
}

.features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-top: 40px;
}

.feature-card {
    background: white;
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    text-align: center;
    transition: transform 0.3s ease;
}

.feature-card:hover {
    transform: translateY(-5px);
}

.feature-card h3 {
    font-size: 1.5rem;
    margin-bottom: 15px;
    color: #667eea;
}

footer {
    text-align: center;
    padding: 40px 0;
    color: white;
    opacity: 0.8;
}

@media (max-width: 768px) {
    header h1 {
        font-size: 2rem;
    }
    
    .content {
        padding: 20px;
    }
    
    .features {
        grid-template-columns: 1fr;
    }
}`}generateGenericJS(){return`// Generic Template JavaScript
document.addEventListener('DOMContentLoaded', function() {
    console.log('🚀 Generic template loaded with Local AI!');
    
    // Add smooth scrolling
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            document.querySelector(this.getAttribute('href')).scrollIntoView({
                behavior: 'smooth'
            });
        });
    });
    
    // Add animation on scroll
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe feature cards
    document.querySelectorAll('.feature-card').forEach(card => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(card);
    });
    
    // Add hover effects
    document.querySelectorAll('.feature-card').forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.boxShadow = '0 10px 25px rgba(0,0,0,0.2)';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
        });
    });
});`}getTemplateCategories(){return{web:{name:"Web Applications",icon:"🌐",templates:this.generateWebTemplates(),count:1e3},mobile:{name:"Mobile Applications",icon:"📱",templates:this.generateMobileTemplates(),count:1e3},dashboard:{name:"Dashboards & Analytics",icon:"📊",templates:this.generateDashboardTemplates(),count:800},ecommerce:{name:"E-commerce & Shopping",icon:"🛒",templates:this.generateEcommerceTemplates(),count:800},payments:{name:"Payment Integration",icon:"💳",templates:this.generatePaymentTemplates(),count:300},api:{name:"APIs & Backend",icon:"🔌",templates:this.generateAPITemplates(),count:700},games:{name:"Games & Entertainment",icon:"🎮",templates:this.generateGameTemplates(),count:800},education:{name:"Education & Learning",icon:"🎓",templates:this.generateEducationTemplates(),count:700},healthcare:{name:"Healthcare & Medical",icon:"🏥",templates:this.generateHealthcareTemplates(),count:600},finance:{name:"Finance & Banking",icon:"💰",templates:this.generateFinanceTemplates(),count:600},iot:{name:"IoT & Smart Devices",icon:"🏠",templates:this.generateIoTTemplates(),count:500},realestate:{name:"Real Estate & Property",icon:"🏘️",templates:this.generateRealEstateTemplates(),count:500},social:{name:"Social Media & Communication",icon:"💬",templates:this.generateSocialTemplates(),count:600},productivity:{name:"Productivity & Business",icon:"💼",templates:this.generateProductivityTemplates(),count:700},creative:{name:"Creative & Design",icon:"🎨",templates:this.generateCreativeTemplates(),count:500},travel:{name:"Travel & Hospitality",icon:"✈️",templates:this.generateTravelTemplates(),count:400},food:{name:"Food & Restaurant",icon:"🍕",templates:this.generateFoodTemplates(),count:400},fitness:{name:"Fitness & Wellness",icon:"💪",templates:this.generateFitnessTemplates(),count:400},music:{name:"Music & Audio",icon:"🎵",templates:this.generateMusicTemplates(),count:300},photography:{name:"Photography & Media",icon:"📸",templates:this.generatePhotographyTemplates(),count:300},automotive:{name:"Automotive & Transportation",icon:"🚗",templates:this.generateAutomotiveTemplates(),count:300}}}getTemplatesByCategory(e){return this.getTemplateCategories()[e]?.templates||[]}getAllTemplates(){const e=[],t=this.getTemplateCategories();return Object.values(t).forEach(r=>{r.templates&&Array.isArray(r.templates)&&r.templates.forEach(s=>{typeof s=="string"?e.push({id:s,name:s.replace(/-/g," ").replace(/\b\w/g,i=>i.toUpperCase()),category:r.name,icon:r.icon}):typeof s=="object"&&s.id&&e.push({...s,category:r.name,icon:r.icon})})}),e}generateTemplateById(e,t={}){return this.createFallbackResponse(e,t)}searchTemplates(e){return this.getAllTemplates().filter(r=>r.name.toLowerCase().includes(e.toLowerCase())||r.id.toLowerCase().includes(e.toLowerCase()))}getPopularTemplates(){return["business-landing","portfolio-website","blog-website","todo-app","fitness-tracker","online-store","analytics-dashboard","rest-api"].map(t=>this.getAllTemplates().find(r=>r.id===t)).filter(Boolean)}getAvailableModels(){return Object.keys(Br)}getHealthyModels(){return Object.keys(this.modelHealth).filter(e=>this.modelHealth[e].isHealthy)}get isHealthy(){return Object.values(this.modelHealth).some(e=>e.isHealthy)}createTemplateVariations(e,t,r){const s=[];let i=1;for(e.forEach(o=>{s.push({id:`template-${i++}`,name:o.replace(/-/g," ").replace(/\b\w/g,u=>u.toUpperCase()),category:"Web Applications",icon:"🌐",description:`Professional ${o.replace(/-/g," ")} template`,tags:["web","responsive","modern"]})});s.length<r;){const o=e[Math.floor(Math.random()*e.length)],u=t[Math.floor(Math.random()*t.length)];s.push({id:`template-${i++}`,name:`${o.replace(/-/g," ").replace(/\b\w/g,d=>d.toUpperCase())} (${u})`,category:"Web Applications",icon:"🌐",description:`${u} version of ${o.replace(/-/g," ")} template`,tags:["web","responsive",u]})}return s.slice(0,r)}generateWebTemplates(){const e=["business-landing","portfolio-website","blog-website","agency-website","corporate-website","startup-landing","saas-landing","ecommerce-store","online-marketplace","subscription-site","news-website","magazine-site","forum-website","community-platform","social-network","dating-website","job-board","freelance-platform","education-platform","course-website","restaurant-website","hotel-booking","travel-blog","fitness-website","health-blog","fashion-blog","beauty-website","tech-blog","gaming-website","sports-website","music-website","art-gallery","photography-portfolio","real-estate-site","property-listing","automotive-site","car-dealer","insurance-website","law-firm-site","consulting-website","nonprofit-website","charity-platform","event-website","conference-site","wedding-website","personal-blog","lifestyle-blog","food-blog","parenting-blog","travel-guide"],t=["responsive","mobile-first","dark-theme","light-theme","minimalist","modern","classic","vintage","artistic","professional","creative","elegant","bold","colorful","monochrome","gradient","animated","interactive","with-cms","with-blog","with-shop","with-portfolio","with-gallery","with-contact-form","with-booking","with-payment","with-analytics","with-seo","with-multilingual","with-admin","with-api","with-chat"];return this.createTemplateVariations(e,t,1e3)}generateMobileTemplates(){const e=["todo-app","task-manager","note-taking","calendar-app","reminder-app","fitness-tracker","workout-app","diet-tracker","meditation-app","sleep-tracker","expense-tracker","budget-manager","investment-tracker","banking-app","payment-app","social-media","messaging-app","video-call","photo-sharing","dating-app","food-delivery","restaurant-app","recipe-app","grocery-list","meal-planner","travel-app","booking-app","maps-app","weather-app","news-app","music-player","podcast-app","radio-app","streaming-app","gaming-app","education-app","language-learning","quiz-app","flashcard-app","tutoring-app","health-app","medical-tracker","symptom-checker","telemedicine","pharmacy-app","shopping-app","marketplace","auction-app","coupon-app","loyalty-app"],t=["ios","android","cross-platform","pwa","hybrid"],r=["offline","real-time","ai-powered","ar-enabled","voice-controlled"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<1e3&&s.push({id:`mobile-${i++}`,name:`${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())} (${u})`,category:"Mobile Applications",icon:"📱",description:`${u} ${o.replace(/-/g," ")} application`,tags:["mobile",u,"native"]})})})}),s.slice(0,1e3)}generateDashboardTemplates(){const e=["analytics-dashboard","business-intelligence","sales-dashboard","marketing-dashboard","financial-dashboard","hr-dashboard","project-dashboard","inventory-dashboard","customer-dashboard","admin-dashboard","executive-dashboard","operations-dashboard","real-time-dashboard","performance-dashboard","kpi-dashboard","reporting-dashboard"],t=["healthcare","finance","retail","manufacturing","education","government"],r=["interactive","real-time","predictive","automated","customizable"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<800&&s.push({id:`dashboard-${i++}`,name:`${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())} (${u})`,category:"Dashboards & Analytics",icon:"📊",description:`${d} ${u} ${o.replace(/-/g," ")}`,tags:["dashboard",u,d]})})})}),s.slice(0,800)}generateEcommerceTemplates(){const e=["online-store","marketplace","subscription-store","digital-products","physical-goods","dropshipping","wholesale","b2b-commerce","b2c-commerce","multi-vendor","auction-site","classified-ads","rental-platform","booking-platform","service-marketplace"],t=["fashion","electronics","home-garden","sports","beauty","books","food"],r=["mobile-optimized","multi-currency","multi-language","inventory-management","analytics"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<800&&s.push({id:`ecommerce-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"E-commerce & Shopping",icon:"🛒",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["ecommerce",u,d]})})})}),s.slice(0,800)}generatePaymentTemplates(){const e=["stripe","paypal","square"],t=["one-time-payment","subscription-billing","marketplace-payments","donation-system","booking-payments","digital-product-sales","physical-product-sales","service-payments","rental-payments","auction-payments","crowdfunding","membership-billing"],r=["ecommerce","saas","marketplace","nonprofit","booking","education","healthcare","finance"],s=["us-tax-calculation","ach-transfers","us-bank-accounts","mobile-optimized","pci-compliant","fraud-protection","1099-k-reporting"],i=[];let o=1;return e.forEach(u=>{t.forEach(d=>{r.forEach(p=>{s.forEach(f=>{i.length<300&&i.push({id:`payment-${o++}`,name:`${u.charAt(0).toUpperCase()+u.slice(1)} ${d.replace(/-/g," ").replace(/\b\w/g,y=>y.toUpperCase())}`,category:"Payment Integration",icon:u==="stripe"?"💳":u==="paypal"?"🟦":"💳",description:`US-only ${f} ${u} ${d.replace(/-/g," ")} for ${p}`,tags:["payment",u,d,p,f],provider:u,integrationType:d,industry:p,features:[f]})})})})}),i.slice(0,300)}generateAPITemplates(){const e=["rest-api","graphql-api","microservice","webhook-service","websocket-service","authentication-api","payment-api","notification-api","file-storage-api","database-api","analytics-api","search-api","recommendation-api","ai-api","blockchain-api"],t=["nodejs","python","java","php","ruby","go","rust","csharp"],r=["rate-limited","cached","secure","scalable","documented"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<700&&s.push({id:`api-${i++}`,name:`${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())} (${u})`,category:"APIs & Backend",icon:"🔌",description:`${d} ${u} ${o.replace(/-/g," ")}`,tags:["api",u,d]})})})}),s.slice(0,700)}generateGameTemplates(){const e=["puzzle-game","arcade-game","strategy-game","rpg-game","action-game","adventure-game","simulation-game","racing-game","fighting-game","sports-game","educational-game","trivia-game","word-game","card-game","board-game"],t=["web","mobile","desktop","console","vr"],r=["multiplayer","single-player","online","offline","ai-opponents"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<800&&s.push({id:`game-${i++}`,name:`${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())} (${u})`,category:"Games & Entertainment",icon:"🎮",description:`${d} ${u} ${o.replace(/-/g," ")}`,tags:["game",u,d]})})})}),s.slice(0,800)}generateEducationTemplates(){const e=["lms-platform","course-platform","quiz-app","learning-app","tutoring-platform","language-learning","skill-training","certification-system","student-portal","teacher-dashboard","online-classroom","virtual-lab","assessment-tool","progress-tracker","collaboration-tool"],t=["math","science","language","history","art","music","programming"],r=["adaptive","gamified","collaborative","mobile-friendly","offline-capable"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<700&&s.push({id:`education-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Education & Learning",icon:"🎓",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["education",u,d]})})})}),s.slice(0,700)}generateHealthcareTemplates(){const e=["patient-portal","telemedicine","health-tracker","medical-records","appointment-booking","pharmacy-app","symptom-checker","health-monitor","wellness-app","mental-health-app","fitness-tracker","diet-tracker","medication-reminder","health-education","emergency-app"],t=["general","cardiology","dermatology","pediatrics","mental-health","orthopedics"],r=["hipaa-compliant","telehealth","wearable-integration","ai-diagnosis","real-time-monitoring"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<600&&s.push({id:`healthcare-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Healthcare & Medical",icon:"🏥",description:`${d} ${u} ${o.replace(/-/g," ")} solution`,tags:["healthcare",u,d]})})})}),s.slice(0,600)}generateFinanceTemplates(){const e=["banking-app","investment-platform","budget-tracker","expense-manager","payment-gateway","crypto-exchange","loan-calculator","tax-calculator","insurance-app","financial-planning","trading-platform","portfolio-manager","credit-monitor","bill-reminder","savings-tracker"],t=["secure","real-time","multi-currency","ai-powered","regulatory-compliant"],r=["personal","business","enterprise","retail","institutional"],s=[];let i=1;return e.forEach(o=>{r.forEach(u=>{t.forEach(d=>{s.length<600&&s.push({id:`finance-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Finance & Banking",icon:"💰",description:`${d} ${u} ${o.replace(/-/g," ")} solution`,tags:["finance",u,d]})})})}),s.slice(0,600)}generateIoTTemplates(){const e=["smart-home","iot-dashboard","device-manager","sensor-monitor","automation-system","energy-monitor","security-system","environmental-monitor","asset-tracker","predictive-maintenance"],t=["residential","commercial","industrial","agricultural","healthcare"],r=["real-time","predictive","automated","secure","scalable"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<500&&s.push({id:`iot-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"IoT & Smart Devices",icon:"🏠",description:`${d} ${u} ${o.replace(/-/g," ")} solution`,tags:["iot",u,d]})})})}),s.slice(0,500)}generateRealEstateTemplates(){const e=["property-listing","real-estate-portal","property-manager","marketplace","investment-platform","rental-platform","commercial-real-estate","vacation-rentals","property-valuation","mortgage-calculator"],t=["residential","commercial","industrial","land","luxury"],r=["virtual-tours","ar-viewing","market-analysis","investment-tracking","tenant-management"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<500&&s.push({id:`realestate-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Real Estate & Property",icon:"🏘️",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["realestate",u,d]})})})}),s.slice(0,500)}generateSocialTemplates(){const e=["social-network","messaging-app","video-call","live-streaming","content-sharing","community-platform","forum-website","chat-application","video-conference","team-collaboration"],t=["real-time","end-to-end-encrypted","group-chat","file-sharing","voice-messages"],r=["general","professional","educational","gaming","dating"],s=[];let i=1;return e.forEach(o=>{r.forEach(u=>{t.forEach(d=>{s.length<600&&s.push({id:`social-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Social Media & Communication",icon:"💬",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["social",u,d]})})})}),s.slice(0,600)}generateProductivityTemplates(){const e=["project-management","task-manager","time-tracker","crm-system","hr-management","inventory-management","supply-chain","workflow-automation","document-management","collaboration-tool"],t=["technology","healthcare","finance","retail","manufacturing"],r=["cloud-based","mobile-app","api-integration","analytics","automation"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<700&&s.push({id:`productivity-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Productivity & Business",icon:"💼",description:`${d} ${u} ${o.replace(/-/g," ")} solution`,tags:["productivity",u,d]})})})}),s.slice(0,700)}generateCreativeTemplates(){const e=["portfolio-website","art-gallery","design-showcase","creative-agency","photography-portfolio","video-portfolio","music-showcase","writing-portfolio","fashion-showcase","interior-design"],t=["minimalist","bold","vintage","modern","artistic"],r=["interactive","animated","responsive","seo-optimized","social-integration"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<500&&s.push({id:`creative-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Creative & Design",icon:"🎨",description:`${d} ${u} ${o.replace(/-/g," ")} template`,tags:["creative",u,d]})})})}),s.slice(0,500)}generateTravelTemplates(){const e=["travel-booking","hotel-reservation","flight-booking","car-rental","tour-booking","travel-blog","destination-guide","travel-planner","vacation-rental","travel-agency"],t=["multi-language","currency-converter","real-time-pricing","mobile-optimized","social-sharing"],r=["international","domestic","luxury","budget","adventure"],s=[];let i=1;return e.forEach(o=>{r.forEach(u=>{t.forEach(d=>{s.length<400&&s.push({id:`travel-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Travel & Hospitality",icon:"✈️",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["travel",u,d]})})})}),s.slice(0,400)}generateFoodTemplates(){const e=["restaurant-website","food-delivery","recipe-app","restaurant-booking","menu-management","food-blog","cooking-app","meal-planning","nutrition-tracker","restaurant-reviews"],t=["italian","chinese","mexican","indian","mediterranean","fusion"],r=["online-ordering","table-booking","delivery-tracking","nutrition-info","social-sharing"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<400&&s.push({id:`food-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Food & Restaurant",icon:"🍕",description:`${d} ${u} ${o.replace(/-/g," ")} solution`,tags:["food",u,d]})})})}),s.slice(0,400)}generateFitnessTemplates(){const e=["fitness-tracker","workout-app","gym-management","personal-trainer","nutrition-tracker","wellness-app","meditation-app","yoga-app","running-tracker","health-monitor"],t=["strength-training","cardio","yoga","pilates","running","swimming"],r=["wearable-integration","progress-tracking","social-features","ai-coaching","offline-capable"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<400&&s.push({id:`fitness-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Fitness & Wellness",icon:"💪",description:`${d} ${u} ${o.replace(/-/g," ")} app`,tags:["fitness",u,d]})})})}),s.slice(0,400)}generateMusicTemplates(){const e=["music-player","streaming-app","podcast-app","radio-app","music-production","dj-software","audio-editor","music-education","concert-booking","music-social"],t=["pop","rock","classical","jazz","electronic","hip-hop"],r=["offline-playback","social-sharing","ai-recommendations","live-streaming","collaborative-playlists"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<300&&s.push({id:`music-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Music & Audio",icon:"🎵",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["music",u,d]})})})}),s.slice(0,300)}generatePhotographyTemplates(){const e=["photography-portfolio","photo-editor","image-gallery","photo-sharing","stock-photos","wedding-photography","event-photography","commercial-photography","photo-booking","photo-education"],t=["wedding","portrait","landscape","commercial","street","wildlife"],r=["image-editing","cloud-storage","client-portal","booking-system","social-sharing"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<300&&s.push({id:`photography-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Photography & Media",icon:"📸",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["photography",u,d]})})})}),s.slice(0,300)}generateAutomotiveTemplates(){const e=["car-dealer","auto-repair","car-rental","ride-sharing","fleet-management","auto-insurance","car-financing","vehicle-tracking","auto-parts","car-reviews"],t=["passenger-cars","commercial-vehicles","motorcycles","boats","aircraft"],r=["inventory-management","booking-system","payment-integration","gps-tracking","maintenance-scheduling"],s=[];let i=1;return e.forEach(o=>{t.forEach(u=>{r.forEach(d=>{s.length<300&&s.push({id:`automotive-${i++}`,name:`${u} ${o.replace(/-/g," ").replace(/\b\w/g,p=>p.toUpperCase())}`,category:"Automotive & Transportation",icon:"🚗",description:`${d} ${u} ${o.replace(/-/g," ")} platform`,tags:["automotive",u,d]})})})}),s.slice(0,300)}generateAppContext(e,t){return`import React, { createContext, useContext, useReducer } from 'react'

// App Context for state management
const AppContext = createContext()

// Initial state
const initialState = {
  user: null,
  theme: 'light',
  loading: false,
  error: null,
  data: {}
}

// Reducer function
const appReducer = (state, action) => {
  switch (action.type) {
    case 'SET_USER':
      return { ...state, user: action.payload }
    case 'SET_THEME':
      return { ...state, theme: action.payload }
    case 'SET_LOADING':
      return { ...state, loading: action.payload }
    case 'SET_ERROR':
      return { ...state, error: action.payload }
    case 'SET_DATA':
      return { ...state, data: { ...state.data, ...action.payload } }
    case 'CLEAR_ERROR':
      return { ...state, error: null }
    default:
      return state
  }
}

// Context Provider component
export const AppProvider = ({ children }) => {
  const [state, dispatch] = useReducer(appReducer, initialState)

  const value = {
    ...state,
    dispatch,
    setUser: (user) => dispatch({ type: 'SET_USER', payload: user }),
    setTheme: (theme) => dispatch({ type: 'SET_THEME', payload: theme }),
    setLoading: (loading) => dispatch({ type: 'SET_LOADING', payload: loading }),
    setError: (error) => dispatch({ type: 'SET_ERROR', payload: error }),
    setData: (data) => dispatch({ type: 'SET_DATA', payload: data }),
    clearError: () => dispatch({ type: 'CLEAR_ERROR' })
  }

  return (
    <AppContext.Provider value={value}>
      {children}
    </AppContext.Provider>
  )
}

// Custom hook to use the context
export const useApp = () => {
  const context = useContext(AppContext)
  if (!context) {
    throw new Error('useApp must be used within an AppProvider')
  }
  return context
}

export default AppContext`}generateHelperUtils(e,t){return`// Helper utilities for the application

// Format currency
export const formatCurrency = (amount, currency = 'USD') => {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: currency
  }).format(amount)
}

// Format date
export const formatDate = (date, options = {}) => {
  const defaultOptions = {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  }
  return new Intl.DateTimeFormat('en-US', { ...defaultOptions, ...options }).format(new Date(date))
}

// Debounce function
export const debounce = (func, wait) => {
  let timeout
  return function executedFunction(...args) {
    const later = () => {
      clearTimeout(timeout)
      func(...args)
    }
    clearTimeout(timeout)
    timeout = setTimeout(later, wait)
  }
}

// Throttle function
export const throttle = (func, limit) => {
  let inThrottle
  return function() {
    const args = arguments
    const context = this
    if (!inThrottle) {
      func.apply(context, args)
      inThrottle = true
      setTimeout(() => inThrottle = false, limit)
    }
  }
}

// Generate random ID
export const generateId = () => {
  return Math.random().toString(36).substr(2, 9)
}

// Validate email
export const isValidEmail = (email) => {
  const emailRegex = /^[^s@]+@[^s@]+.[^s@]+$/
  return emailRegex.test(email)
}

// Validate URL
export const isValidUrl = (string) => {
  try {
    new URL(string)
    return true
  } catch (_) {
    return false
  }
}

// Local storage helpers
export const storage = {
  get: (key) => {
    try {
      const item = localStorage.getItem(key)
      return item ? JSON.parse(item) : null
    } catch (error) {
      console.error('Error getting from localStorage:', error)
      return null
    }
  },
  
  set: (key, value) => {
    try {
      localStorage.setItem(key, JSON.stringify(value))
    } catch (error) {
      console.error('Error setting to localStorage:', error)
    }
  },
  
  remove: (key) => {
    try {
      localStorage.removeItem(key)
    } catch (error) {
      console.error('Error removing from localStorage:', error)
    }
  }
}

// API helpers
export const api = {
  get: async (url) => {
    const response = await fetch(url)
    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`)
    }
    return response.json()
  },
  
  post: async (url, data) => {
    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(data)
    })
    if (!response.ok) {
      throw new Error(\`HTTP error! status: \${response.status}\`)
    }
    return response.json()
  }
}

// Array helpers
export const arrayUtils = {
  unique: (arr) => [...new Set(arr)],
  shuffle: (arr) => arr.sort(() => Math.random() - 0.5),
  chunk: (arr, size) => {
    const chunks = []
    for (let i = 0; i < arr.length; i += size) {
      chunks.push(arr.slice(i, i + size))
    }
    return chunks
  }
}

// Object helpers
export const objectUtils = {
  deepClone: (obj) => JSON.parse(JSON.stringify(obj)),
  isEmpty: (obj) => Object.keys(obj).length === 0,
  pick: (obj, keys) => {
    const result = {}
    keys.forEach(key => {
      if (key in obj) {
        result[key] = obj[key]
      }
    })
    return result
  }
}`}generateDataHook(e,t){return`import { useState, useEffect, useCallback } from 'react'

// Custom hook for data fetching and management
export const useData = (url, options = {}) => {
  const [data, setData] = useState(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState(null)

  const fetchData = useCallback(async () => {
    try {
      setLoading(true)
      setError(null)
      
      const response = await fetch(url, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
          ...options.headers
        },
        ...options
      })

      if (!response.ok) {
        throw new Error(\`HTTP error! status: \${response.status}\`)
      }

      const result = await response.json()
      setData(result)
    } catch (err) {
      setError(err.message)
      console.error('Error fetching data:', err)
    } finally {
      setLoading(false)
    }
  }, [url, options])

  useEffect(() => {
    if (url) {
      fetchData()
    }
  }, [fetchData])

  const refetch = useCallback(() => {
    fetchData()
  }, [fetchData])

  return { data, loading, error, refetch }
}

// Custom hook for form data management
export const useFormData = (initialData = {}) => {
  const [formData, setFormData] = useState(initialData)
  const [errors, setErrors] = useState({})
  const [touched, setTouched] = useState({})

  const handleChange = useCallback((name, value) => {
    setFormData(prev => ({
      ...prev,
      [name]: value
    }))
    
    // Clear error when user starts typing
    if (errors[name]) {
      setErrors(prev => ({
        ...prev,
        [name]: ''
      }))
    }
  }, [errors])

  const handleBlur = useCallback((name) => {
    setTouched(prev => ({
      ...prev,
      [name]: true
    }))
  }, [])

  const setError = useCallback((name, message) => {
    setErrors(prev => ({
      ...prev,
      [name]: message
    }))
  }, [])

  const reset = useCallback(() => {
    setFormData(initialData)
    setErrors({})
    setTouched({})
  }, [initialData])

  const isValid = Object.keys(errors).length === 0 || Object.values(errors).every(error => !error)

  return {
    formData,
    errors,
    touched,
    handleChange,
    handleBlur,
    setError,
    reset,
    isValid
  }
}

// Custom hook for pagination
export const usePagination = (data = [], itemsPerPage = 10) => {
  const [currentPage, setCurrentPage] = useState(1)
  
  const totalPages = Math.ceil(data.length / itemsPerPage)
  const startIndex = (currentPage - 1) * itemsPerPage
  const endIndex = startIndex + itemsPerPage
  const currentData = data.slice(startIndex, endIndex)

  const goToPage = useCallback((page) => {
    if (page >= 1 && page <= totalPages) {
      setCurrentPage(page)
    }
  }, [totalPages])

  const nextPage = useCallback(() => {
    goToPage(currentPage + 1)
  }, [currentPage, goToPage])

  const prevPage = useCallback(() => {
    goToPage(currentPage - 1)
  }, [currentPage, goToPage])

  const reset = useCallback(() => {
    setCurrentPage(1)
  }, [])

  return {
    currentPage,
    totalPages,
    currentData,
    goToPage,
    nextPage,
    prevPage,
    reset,
    hasNext: currentPage < totalPages,
    hasPrev: currentPage > 1
  }
}

// Custom hook for debounced values
export const useDebounce = (value, delay) => {
  const [debouncedValue, setDebouncedValue] = useState(value)

  useEffect(() => {
    const handler = setTimeout(() => {
      setDebouncedValue(value)
    }, delay)

    return () => {
      clearTimeout(handler)
    }
  }, [value, delay])

  return debouncedValue
}

// Custom hook for local storage
export const useLocalStorage = (key, initialValue) => {
  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key)
      return item ? JSON.parse(item) : initialValue
    } catch (error) {
      console.error(\`Error reading localStorage key "\${key}":\`, error)
      return initialValue
    }
  })

  const setValue = useCallback((value) => {
    try {
      const valueToStore = value instanceof Function ? value(storedValue) : value
      setStoredValue(valueToStore)
      window.localStorage.setItem(key, JSON.stringify(valueToStore))
    } catch (error) {
      console.error(\`Error setting localStorage key "\${key}":\`, error)
    }
  }, [key, storedValue])

  const removeValue = useCallback(() => {
    try {
      window.localStorage.removeItem(key)
      setStoredValue(initialValue)
    } catch (error) {
      console.error(\`Error removing localStorage key "\${key}":\`, error)
    }
  }, [key, initialValue])

  return [storedValue, setValue, removeValue]
}`}generateLocalStorageHook(e,t){return`import { useState, useEffect, useCallback } from 'react'

// Enhanced local storage hook with persistence and sync
export const useLocalStorage = (key, initialValue, options = {}) => {
  const {
    serialize = JSON.stringify,
    deserialize = JSON.parse,
    syncAcrossTabs = true
  } = options

  const [storedValue, setStoredValue] = useState(() => {
    try {
      const item = window.localStorage.getItem(key)
      return item ? deserialize(item) : initialValue
    } catch (error) {
      console.error(\`Error reading localStorage key "\${key}":\`, error)
      return initialValue
    }
  })

  const setValue = useCallback((value) => {
    try {
      const valueToStore = value instanceof Function ? value(storedValue) : value
      setStoredValue(valueToStore)
      window.localStorage.setItem(key, serialize(valueToStore))
      
      // Dispatch custom event for cross-tab sync
      if (syncAcrossTabs) {
        window.dispatchEvent(new CustomEvent('localStorageChange', {
          detail: { key, value: valueToStore }
        }))
      }
    } catch (error) {
      console.error(\`Error setting localStorage key "\${key}":\`, error)
    }
  }, [key, storedValue, serialize, syncAcrossTabs])

  const removeValue = useCallback(() => {
    try {
      window.localStorage.removeItem(key)
      setStoredValue(initialValue)
      
      if (syncAcrossTabs) {
        window.dispatchEvent(new CustomEvent('localStorageChange', {
          detail: { key, value: null }
        }))
      }
    } catch (error) {
      console.error(\`Error removing localStorage key "\${key}":\`, error)
    }
  }, [key, initialValue, syncAcrossTabs])

  // Listen for changes from other tabs
  useEffect(() => {
    if (!syncAcrossTabs) return

    const handleStorageChange = (e) => {
      if (e.detail && e.detail.key === key) {
        setStoredValue(e.detail.value || initialValue)
      }
    }

    window.addEventListener('localStorageChange', handleStorageChange)
    return () => window.removeEventListener('localStorageChange', handleStorageChange)
  }, [key, initialValue, syncAcrossTabs])

  return [storedValue, setValue, removeValue]
}

// Hook for managing multiple localStorage keys
export const useMultipleLocalStorage = (keys) => {
  const [values, setValues] = useState({})

  useEffect(() => {
    const initialValues = {}
    keys.forEach(key => {
      try {
        const item = window.localStorage.getItem(key)
        initialValues[key] = item ? JSON.parse(item) : null
      } catch (error) {
        console.error(\`Error reading localStorage key "\${key}":\`, error)
        initialValues[key] = null
      }
    })
    setValues(initialValues)
  }, [keys])

  const setValue = useCallback((key, value) => {
    try {
      window.localStorage.setItem(key, JSON.stringify(value))
      setValues(prev => ({ ...prev, [key]: value }))
    } catch (error) {
      console.error(\`Error setting localStorage key "\${key}":\`, error)
    }
  }, [])

  const removeValue = useCallback((key) => {
    try {
      window.localStorage.removeItem(key)
      setValues(prev => ({ ...prev, [key]: null }))
    } catch (error) {
      console.error(\`Error removing localStorage key "\${key}":\`, error)
    }
  }, [])

  const clearAll = useCallback(() => {
    try {
      keys.forEach(key => {
        window.localStorage.removeItem(key)
      })
      setValues({})
    } catch (error) {
      console.error('Error clearing localStorage:', error)
    }
  }, [keys])

  return { values, setValue, removeValue, clearAll }
}`}generateAPIService(e,t){return`// API Service for handling HTTP requests and data management

const API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:3001/api'

class APIService {
  constructor() {
    this.baseURL = API_BASE_URL
    this.defaultHeaders = {
      'Content-Type': 'application/json',
    }
  }

  // Generic request method
  async request(endpoint, options = {}) {
    const url = \`\${this.baseURL}\${endpoint}\`
    const config = {
      headers: {
        ...this.defaultHeaders,
        ...options.headers,
      },
      ...options,
    }

    // Add auth token if available
    const token = localStorage.getItem('authToken')
    if (token) {
      config.headers.Authorization = \`Bearer \${token}\`
    }

    try {
      const response = await fetch(url, config)
      
      if (!response.ok) {
        throw new Error(\`HTTP error! status: \${response.status}\`)
      }

      const contentType = response.headers.get('content-type')
      if (contentType && contentType.includes('application/json')) {
        return await response.json()
      }
      
      return await response.text()
    } catch (error) {
      console.error('API request failed:', error)
      throw error
    }
  }

  // GET request
  async get(endpoint, params = {}) {
    const queryString = new URLSearchParams(params).toString()
    const url = queryString ? \`\${endpoint}?\${queryString}\` : endpoint
    return this.request(url, { method: 'GET' })
  }

  // POST request
  async post(endpoint, data = {}) {
    return this.request(endpoint, {
      method: 'POST',
      body: JSON.stringify(data),
    })
  }

  // PUT request
  async put(endpoint, data = {}) {
    return this.request(endpoint, {
      method: 'PUT',
      body: JSON.stringify(data),
    })
  }

  // PATCH request
  async patch(endpoint, data = {}) {
    return this.request(endpoint, {
      method: 'PATCH',
      body: JSON.stringify(data),
    })
  }

  // DELETE request
  async delete(endpoint) {
    return this.request(endpoint, { method: 'DELETE' })
  }

  // Upload file
  async uploadFile(endpoint, file, onProgress = null) {
    const formData = new FormData()
    formData.append('file', file)

    const config = {
      method: 'POST',
      body: formData,
      headers: {
        // Don't set Content-Type, let browser set it with boundary
        ...this.defaultHeaders,
      },
    }

    // Remove Content-Type from headers for file upload
    delete config.headers['Content-Type']

    if (onProgress) {
      config.onUploadProgress = onProgress
    }

    return this.request(endpoint, config)
  }

  // Set auth token
  setAuthToken(token) {
    if (token) {
      localStorage.setItem('authToken', token)
    } else {
      localStorage.removeItem('authToken')
    }
  }

  // Get auth token
  getAuthToken() {
    return localStorage.getItem('authToken')
  }

  // Clear auth token
  clearAuthToken() {
    localStorage.removeItem('authToken')
  }

  // Check if user is authenticated
  isAuthenticated() {
    return !!this.getAuthToken()
  }
}

// Create singleton instance
const apiService = new APIService()

// Export individual methods for convenience
export const api = {
  get: (endpoint, params) => apiService.get(endpoint, params),
  post: (endpoint, data) => apiService.post(endpoint, data),
  put: (endpoint, data) => apiService.put(endpoint, data),
  patch: (endpoint, data) => apiService.patch(endpoint, data),
  delete: (endpoint) => apiService.delete(endpoint),
  uploadFile: (endpoint, file, onProgress) => apiService.uploadFile(endpoint, file, onProgress),
  setAuthToken: (token) => apiService.setAuthToken(token),
  getAuthToken: () => apiService.getAuthToken(),
  clearAuthToken: () => apiService.clearAuthToken(),
  isAuthenticated: () => apiService.isAuthenticated(),
}

// Export the service class and instance
export { APIService, apiService }
export default apiService`}generateStorageService(e,t){return`// Storage Service for handling data persistence and caching

class StorageService {
  constructor() {
    this.prefix = 'app_'
    this.cache = new Map()
    this.maxCacheSize = 100
  }

  // Local Storage methods
  setItem(key, value, options = {}) {
    const { expires, encrypt = false } = options
    const item = {
      value: encrypt ? this.encrypt(JSON.stringify(value)) : value,
      timestamp: Date.now(),
      expires: expires ? Date.now() + expires : null,
    }

    try {
      localStorage.setItem(\`\${this.prefix}\${key}\`, JSON.stringify(item))
      this.cache.set(key, value)
      this.cleanupCache()
    } catch (error) {
      console.error('Failed to set item in localStorage:', error)
      throw error
    }
  }

  getItem(key, defaultValue = null) {
    // Check cache first
    if (this.cache.has(key)) {
      return this.cache.get(key)
    }

    try {
      const item = localStorage.getItem(\`\${this.prefix}\${key}\`)
      if (!item) return defaultValue

      const parsed = JSON.parse(item)
      
      // Check if item has expired
      if (parsed.expires && Date.now() > parsed.expires) {
        this.removeItem(key)
        return defaultValue
      }

      const value = parsed.encrypt ? this.decrypt(parsed.value) : parsed.value
      this.cache.set(key, value)
      return value
    } catch (error) {
      console.error('Failed to get item from localStorage:', error)
      return defaultValue
    }
  }

  removeItem(key) {
    try {
      localStorage.removeItem(\`\${this.prefix}\${key}\`)
      this.cache.delete(key)
    } catch (error) {
      console.error('Failed to remove item from localStorage:', error)
    }
  }

  clear() {
    try {
      const keys = Object.keys(localStorage)
      keys.forEach(key => {
        if (key.startsWith(this.prefix)) {
          localStorage.removeItem(key)
        }
      })
      this.cache.clear()
    } catch (error) {
      console.error('Failed to clear localStorage:', error)
    }
  }

  // Session Storage methods
  setSessionItem(key, value) {
    try {
      sessionStorage.setItem(\`\${this.prefix}\${key}\`, JSON.stringify(value))
    } catch (error) {
      console.error('Failed to set item in sessionStorage:', error)
    }
  }

  getSessionItem(key, defaultValue = null) {
    try {
      const item = sessionStorage.getItem(\`\${this.prefix}\${key}\`)
      return item ? JSON.parse(item) : defaultValue
    } catch (error) {
      console.error('Failed to get item from sessionStorage:', error)
      return defaultValue
    }
  }

  removeSessionItem(key) {
    try {
      sessionStorage.removeItem(\`\${this.prefix}\${key}\`)
    } catch (error) {
      console.error('Failed to remove item from sessionStorage:', error)
    }
  }

  // IndexedDB methods (for larger data)
  async setIndexedDBItem(key, value) {
    return new Promise((resolve, reject) => {
      const request = indexedDB.open('AppStorage', 1)
      
      request.onerror = () => reject(request.error)
      request.onsuccess = () => {
        const db = request.result
        const transaction = db.transaction(['storage'], 'readwrite')
        const store = transaction.objectStore('storage')
        const putRequest = store.put({ key, value, timestamp: Date.now() })
        
        putRequest.onsuccess = () => resolve()
        putRequest.onerror = () => reject(putRequest.error)
      }
      
      request.onupgradeneeded = () => {
        const db = request.result
        if (!db.objectStoreNames.contains('storage')) {
          db.createObjectStore('storage', { keyPath: 'key' })
        }
      }
    })
  }

  async getIndexedDBItem(key, defaultValue = null) {
    return new Promise((resolve, reject) => {
      const request = indexedDB.open('AppStorage', 1)
      
      request.onerror = () => reject(request.error)
      request.onsuccess = () => {
        const db = request.result
        const transaction = db.transaction(['storage'], 'readonly')
        const store = transaction.objectStore('storage')
        const getRequest = store.get(key)
        
        getRequest.onsuccess = () => {
          resolve(getRequest.result ? getRequest.result.value : defaultValue)
        }
        getRequest.onerror = () => reject(getRequest.error)
      }
    })
  }

  // Cache management
  cleanupCache() {
    if (this.cache.size > this.maxCacheSize) {
      const firstKey = this.cache.keys().next().value
      this.cache.delete(firstKey)
    }
  }

  clearCache() {
    this.cache.clear()
  }

  // Encryption methods (simple base64 encoding for demo)
  encrypt(text) {
    return btoa(text)
  }

  decrypt(encryptedText) {
    try {
      return atob(encryptedText)
    } catch (error) {
      console.error('Failed to decrypt:', error)
      return encryptedText
    }
  }

  // Utility methods
  getStorageSize() {
    let total = 0
    for (let key in localStorage) {
      if (key.startsWith(this.prefix)) {
        total += localStorage[key].length
      }
    }
    return total
  }

  getCacheSize() {
    return this.cache.size
  }

  // Export/Import data
  exportData() {
    const data = {}
    for (let key in localStorage) {
      if (key.startsWith(this.prefix)) {
        data[key] = localStorage[key]
      }
    }
    return JSON.stringify(data, null, 2)
  }

  importData(jsonData) {
    try {
      const data = JSON.parse(jsonData)
      Object.keys(data).forEach(key => {
        localStorage.setItem(key, data[key])
      })
      return true
    } catch (error) {
      console.error('Failed to import data:', error)
      return false
    }
  }
}

// Create singleton instance
const storageService = new StorageService()

// Export individual methods for convenience
export const storage = {
  set: (key, value, options) => storageService.setItem(key, value, options),
  get: (key, defaultValue) => storageService.getItem(key, defaultValue),
  remove: (key) => storageService.removeItem(key),
  clear: () => storageService.clear(),
  setSession: (key, value) => storageService.setSessionItem(key, value),
  getSession: (key, defaultValue) => storageService.getSessionItem(key, defaultValue),
  removeSession: (key) => storageService.removeSessionItem(key),
  setIndexed: (key, value) => storageService.setIndexedDBItem(key, value),
  getIndexed: (key, defaultValue) => storageService.getIndexedDBItem(key, defaultValue),
  clearCache: () => storageService.clearCache(),
  getSize: () => storageService.getStorageSize(),
  getCacheSize: () => storageService.getCacheSize(),
  export: () => storageService.exportData(),
  import: (data) => storageService.importData(data),
}

// Export the service class and instance
export { StorageService, storageService }
export default storageService`}generateChartHelpers(e,t){return`// Chart helpers for data visualization

// Chart.js configuration helpers
export const chartConfigs = {
  line: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { position: 'top' },
      title: { display: true, text: 'Line Chart' }
    },
    scales: { y: { beginAtZero: true } }
  },
  bar: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { position: 'top' },
      title: { display: true, text: 'Bar Chart' }
    },
    scales: { y: { beginAtZero: true } }
  },
  pie: {
    responsive: true,
    maintainAspectRatio: false,
    plugins: {
      legend: { position: 'right' },
      title: { display: true, text: 'Pie Chart' }
    }
  }
}

// Color palettes
export const colorPalettes = {
  primary: ['#3B82F6', '#1D4ED8', '#1E40AF', '#1E3A8A', '#312E81'],
  success: ['#10B981', '#059669', '#047857', '#065F46', '#064E3B'],
  warning: ['#F59E0B', '#D97706', '#B45309', '#92400E', '#78350F'],
  danger: ['#EF4444', '#DC2626', '#B91C1C', '#991B1B', '#7F1D1D']
}

// Generate random colors
export const generateColors = (count, palette = 'primary') => {
  const colors = colorPalettes[palette] || colorPalettes.primary
  const result = []
  for (let i = 0; i < count; i++) {
    result.push(colors[i % colors.length])
  }
  return result
}

// Chart data formatters
export const chartFormatters = {
  formatLineData: (data, xField, yField) => ({
    labels: data.map(item => item[xField]),
    datasets: [{
      label: yField,
      data: data.map(item => item[yField]),
      borderColor: '#3B82F6',
      backgroundColor: 'rgba(59, 130, 246, 0.1)',
      tension: 0.4
    }]
  }),
  formatBarData: (data, xField, yField) => ({
    labels: data.map(item => item[xField]),
    datasets: [{
      label: yField,
      data: data.map(item => item[yField]),
      backgroundColor: generateColors(data.length),
      borderColor: generateColors(data.length).map(color => color + '80'),
      borderWidth: 1
    }]
  }),
  formatPieData: (data, labelField, valueField) => ({
    labels: data.map(item => item[labelField]),
    datasets: [{
      data: data.map(item => item[valueField]),
      backgroundColor: generateColors(data.length),
      borderColor: '#ffffff',
      borderWidth: 2
    }]
  })
}

export default { chartConfigs, colorPalettes, generateColors, chartFormatters }`}generateAnalyticsHook(e,t){return`import { useState, useEffect, useCallback } from 'react'

// Custom hook for analytics and data tracking
export const useAnalytics = (config = {}) => {
  const [analytics, setAnalytics] = useState({
    pageViews: 0,
    events: [],
    user: null,
    session: null,
    isEnabled: true
  })

  const [isLoading, setIsLoading] = useState(false)
  const [error, setError] = useState(null)

  // Initialize analytics
  useEffect(() => {
    if (config.autoInit !== false) {
      initializeAnalytics()
    }
  }, [])

  const initializeAnalytics = useCallback(() => {
    try {
      const sessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9)
      const userId = localStorage.getItem('analytics_user_id') || 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9)
      localStorage.setItem('analytics_user_id', userId)
      
      setAnalytics(prev => ({
        ...prev,
        session: sessionId,
        user: userId,
        isEnabled: config.enabled !== false
      }))

      trackPageView()
    } catch (err) {
      setError(err.message)
    }
  }, [config])

  const trackPageView = useCallback((page = window.location.pathname) => {
    if (!analytics.isEnabled) return

    const pageView = {
      type: 'page_view',
      page,
      timestamp: new Date().toISOString(),
      session: analytics.session,
      user: analytics.user
    }

    setAnalytics(prev => ({
      ...prev,
      pageViews: prev.pageViews + 1,
      events: [...prev.events, pageView]
    }))
  }, [analytics.isEnabled, analytics.session, analytics.user])

  const trackEvent = useCallback((eventName, properties = {}) => {
    if (!analytics.isEnabled) return

    const event = {
      type: 'custom_event',
      name: eventName,
      properties,
      timestamp: new Date().toISOString(),
      session: analytics.session,
      user: analytics.user
    }

    setAnalytics(prev => ({
      ...prev,
      events: [...prev.events, event]
    }))
  }, [analytics.isEnabled, analytics.session, analytics.user])

  return {
    analytics,
    isLoading,
    error,
    trackPageView,
    trackEvent
  }
}

export default useAnalytics`}generatePackageJSONFromTemplate(e,t,r){const s={name:"dreambuild-app",version:"1.0.0",description:"Generated by DreamBuild AI",main:"src/index.js",scripts:{start:"react-scripts start",build:"react-scripts build",test:"react-scripts test",eject:"react-scripts eject"},dependencies:{react:"^18.2.0","react-dom":"^18.2.0","react-scripts":"5.0.1"},browserslist:{production:[">0.2%","not dead","not op_mini all"],development:["last 1 chrome version","last 1 firefox version","last 1 safari version"]}};return e.name.includes("Dashboard")&&(s.dependencies={...s.dependencies,"chart.js":"^4.4.0","react-chartjs-2":"^5.2.0",recharts:"^2.8.0","lucide-react":"^0.263.1"}),e.name.includes("E-commerce")&&(s.dependencies={...s.dependencies,"react-router-dom":"^6.15.0",axios:"^1.5.0","react-query":"^3.39.3"}),e.name.includes("Game")&&(s.dependencies={...s.dependencies,"framer-motion":"^10.16.4","react-spring":"^9.7.2"}),s.dependencies={...s.dependencies,clsx:"^2.0.0","tailwind-merge":"^1.14.0"},JSON.stringify(s,null,2)}generateREADMEFromTemplate(e,t,r){return`# DreamBuild Generated App

## Overview
This application was generated by DreamBuild AI based on the prompt: "${t}"

## Template Used
- **Template**: ${e.name}
- **Description**: ${e.description}
- **Complexity**: ${e.complexity}

## Features
${e.features?e.features.map(s=>`- ${s}`).join(`
`):`- Modern React application
- Responsive design
- Component-based architecture`}

## Getting Started

### Prerequisites
- Node.js (version 14 or higher)
- npm or yarn

### Installation
\`\`\`bash
npm install
\`\`\`

### Development
\`\`\`bash
npm start
\`\`\`

### Build
\`\`\`bash
npm run build
\`\`\`

## Project Structure
\`\`\`
src/
├── components/          # React components
├── hooks/              # Custom React hooks
├── services/           # API and utility services
├── utils/              # Helper functions
├── context/            # React context providers
└── styles/             # CSS and styling files
\`\`\`

## Technologies Used
- React 18
- Modern JavaScript (ES6+)
- CSS3 with modern features
- Component-based architecture

## Generated by DreamBuild
This project was automatically generated by DreamBuild AI - a powerful AI code generation platform.

For more information, visit: https://dreambuild-2024-app.web.app
`}generateAuthContext(e,t){return`import React, { createContext, useContext, useReducer, useEffect } from 'react'

// Auth Context for authentication state management
const AuthContext = createContext()

// Initial auth state
const initialState = {
  user: null,
  token: null,
  isAuthenticated: false,
  isLoading: true,
  error: null
}

// Auth reducer
const authReducer = (state, action) => {
  switch (action.type) {
    case 'LOGIN_START':
      return {
        ...state,
        isLoading: true,
        error: null
      }
    case 'LOGIN_SUCCESS':
      return {
        ...state,
        user: action.payload.user,
        token: action.payload.token,
        isAuthenticated: true,
        isLoading: false,
        error: null
      }
    case 'LOGIN_FAILURE':
      return {
        ...state,
        user: null,
        token: null,
        isAuthenticated: false,
        isLoading: false,
        error: action.payload
      }
    case 'LOGOUT':
      return {
        ...state,
        user: null,
        token: null,
        isAuthenticated: false,
        isLoading: false,
        error: null
      }
    case 'CLEAR_ERROR':
      return {
        ...state,
        error: null
      }
    case 'SET_LOADING':
      return {
        ...state,
        isLoading: action.payload
      }
    default:
      return state
  }
}

// Auth Provider component
export const AuthProvider = ({ children }) => {
  const [state, dispatch] = useReducer(authReducer, initialState)

  // Check for existing token on mount
  useEffect(() => {
    const token = localStorage.getItem('auth_token')
    const user = localStorage.getItem('auth_user')
    
    if (token && user) {
      try {
        const userData = JSON.parse(user)
        dispatch({
          type: 'LOGIN_SUCCESS',
          payload: { user: userData, token }
        })
      } catch (error) {
        localStorage.removeItem('auth_token')
        localStorage.removeItem('auth_user')
        dispatch({ type: 'LOGOUT' })
      }
    } else {
      dispatch({ type: 'SET_LOADING', payload: false })
    }
  }, [])

  // Login function
  const login = async (credentials) => {
    dispatch({ type: 'LOGIN_START' })
    
    try {
      // Simulate API call
      const response = await fetch('/api/auth/login', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(credentials)
      })

      if (!response.ok) {
        throw new Error('Login failed')
      }

      const data = await response.json()
      
      // Store in localStorage
      localStorage.setItem('auth_token', data.token)
      localStorage.setItem('auth_user', JSON.stringify(data.user))
      
      dispatch({
        type: 'LOGIN_SUCCESS',
        payload: { user: data.user, token: data.token }
      })
      
      return { success: true }
    } catch (error) {
      dispatch({
        type: 'LOGIN_FAILURE',
        payload: error.message
      })
      return { success: false, error: error.message }
    }
  }

  // Register function
  const register = async (userData) => {
    dispatch({ type: 'LOGIN_START' })
    
    try {
      const response = await fetch('/api/auth/register', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(userData)
      })

      if (!response.ok) {
        throw new Error('Registration failed')
      }

      const data = await response.json()
      
      // Store in localStorage
      localStorage.setItem('auth_token', data.token)
      localStorage.setItem('auth_user', JSON.stringify(data.user))
      
      dispatch({
        type: 'LOGIN_SUCCESS',
        payload: { user: data.user, token: data.token }
      })
      
      return { success: true }
    } catch (error) {
      dispatch({
        type: 'LOGIN_FAILURE',
        payload: error.message
      })
      return { success: false, error: error.message }
    }
  }

  // Logout function
  const logout = () => {
    localStorage.removeItem('auth_token')
    localStorage.removeItem('auth_user')
    dispatch({ type: 'LOGOUT' })
  }

  // Clear error function
  const clearError = () => {
    dispatch({ type: 'CLEAR_ERROR' })
  }

  // Update user function
  const updateUser = (userData) => {
    const updatedUser = { ...state.user, ...userData }
    localStorage.setItem('auth_user', JSON.stringify(updatedUser))
    dispatch({
      type: 'LOGIN_SUCCESS',
      payload: { user: updatedUser, token: state.token }
    })
  }

  const value = {
    ...state,
    login,
    register,
    logout,
    clearError,
    updateUser
  }

  return (
    <AuthContext.Provider value={value}>
      {children}
    </AuthContext.Provider>
  )
}

// Custom hook to use auth context
export const useAuth = () => {
  const context = useContext(AuthContext)
  if (!context) {
    throw new Error('useAuth must be used within an AuthProvider')
  }
  return context
}

// Higher-order component for protected routes
export const withAuth = (WrappedComponent) => {
  return function AuthenticatedComponent(props) {
    const { isAuthenticated, isLoading } = useAuth()
    
    if (isLoading) {
      return <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"></div>
      </div>
    }
    
    if (!isAuthenticated) {
      return <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-gray-900 mb-4">Authentication Required</h2>
          <p className="text-gray-600">Please log in to access this page.</p>
        </div>
      </div>
    }
    
    return <WrappedComponent {...props} />
  }
}

export default AuthContext`}generateTokenUtils(e,t){return`// Token utilities for authentication

// JWT token utilities
export const tokenUtils = {
  // Check if token is expired
  isTokenExpired: (token) => {
    if (!token) return true
    
    try {
      const payload = JSON.parse(atob(token.split('.')[1]))
      const currentTime = Date.now() / 1000
      return payload.exp < currentTime
    } catch (error) {
      return true
    }
  },

  // Get token payload
  getTokenPayload: (token) => {
    if (!token) return null
    
    try {
      return JSON.parse(atob(token.split('.')[1]))
    } catch (error) {
      return null
    }
  },

  // Get user ID from token
  getUserId: (token) => {
    const payload = tokenUtils.getTokenPayload(token)
    return payload?.userId || payload?.sub || null
  },

  // Get token expiration time
  getTokenExpiration: (token) => {
    const payload = tokenUtils.getTokenPayload(token)
    return payload?.exp ? new Date(payload.exp * 1000) : null
  },

  // Check if token is valid
  isValidToken: (token) => {
    if (!token) return false
    return !tokenUtils.isTokenExpired(token)
  }
}

// Local storage utilities
export const storageUtils = {
  // Set auth data
  setAuthData: (token, user) => {
    localStorage.setItem('auth_token', token)
    localStorage.setItem('auth_user', JSON.stringify(user))
  },

  // Get auth data
  getAuthData: () => {
    const token = localStorage.getItem('auth_token')
    const user = localStorage.getItem('auth_user')
    
    if (token && user) {
      try {
        return {
          token,
          user: JSON.parse(user)
        }
      } catch (error) {
        storageUtils.clearAuthData()
        return null
      }
    }
    
    return null
  },

  // Clear auth data
  clearAuthData: () => {
    localStorage.removeItem('auth_token')
    localStorage.removeItem('auth_user')
  },

  // Check if user is authenticated
  isAuthenticated: () => {
    const authData = storageUtils.getAuthData()
    return authData && tokenUtils.isValidToken(authData.token)
  }
}

// API request utilities
export const apiUtils = {
  // Get auth headers
  getAuthHeaders: () => {
    const token = localStorage.getItem('auth_token')
    return {
      'Authorization': token ? \`Bearer \${token}\` : '',
      'Content-Type': 'application/json'
    }
  },

  // Make authenticated request
  makeAuthenticatedRequest: async (url, options = {}) => {
    const headers = {
      ...apiUtils.getAuthHeaders(),
      ...options.headers
    }

    const response = await fetch(url, {
      ...options,
      headers
    })

    // If unauthorized, clear auth data
    if (response.status === 401) {
      storageUtils.clearAuthData()
      window.location.href = '/login'
    }

    return response
  }
}

// Token refresh utilities
export const refreshUtils = {
  // Refresh token
  refreshToken: async () => {
    try {
      const response = await fetch('/api/auth/refresh', {
        method: 'POST',
        headers: apiUtils.getAuthHeaders()
      })

      if (response.ok) {
        const data = await response.json()
        storageUtils.setAuthData(data.token, data.user)
        return true
      }
    } catch (error) {
      console.error('Token refresh failed:', error)
    }

    return false
  },

  // Auto refresh token
  startAutoRefresh: (interval = 15 * 60 * 1000) => {
    return setInterval(async () => {
      const authData = storageUtils.getAuthData()
      if (authData && tokenUtils.isTokenExpired(authData.token)) {
        const refreshed = await refreshUtils.refreshToken()
        if (!refreshed) {
          storageUtils.clearAuthData()
          window.location.href = '/login'
        }
      }
    }, interval)
  }
}

export default {
  tokenUtils,
  storageUtils,
  apiUtils,
  refreshUtils
}`}extractFeatures(e){const t=[],r=Object.keys(e);return r.some(s=>s.includes("auth")||s.includes("Auth"))&&t.push("authentication"),r.some(s=>s.includes("chart")||s.includes("Chart"))&&t.push("data-visualization"),r.some(s=>s.includes("api")||s.includes("service"))&&t.push("api-integration"),r.some(s=>s.includes("hook")||s.includes("Hook"))&&t.push("custom-hooks"),r.some(s=>s.includes("context")||s.includes("Context"))&&t.push("state-management"),r.some(s=>s.includes("test")||s.includes("Test"))&&t.push("testing"),r.some(s=>s.includes("css")||s.includes("style"))&&t.push("styling"),r.some(s=>s.includes("form")||s.includes("Form"))&&t.push("form-handling"),r.some(s=>s.includes("table")||s.includes("Table"))&&t.push("data-tables"),r.some(s=>s.includes("storage")||s.includes("Storage"))&&t.push("data-persistence"),t}extractDependencies(e){const t=new Set;return Object.keys(e).forEach(s=>{const i=e[s]||"";(i.includes("useState")||i.includes("useEffect"))&&t.add("react"),(i.includes("useReducer")||i.includes("createContext"))&&t.add("react"),(i.includes("chart")||i.includes("Chart"))&&(t.add("chart.js"),t.add("react-chartjs-2")),(i.includes("router")||i.includes("Router"))&&t.add("react-router-dom"),(i.includes("axios")||i.includes("fetch"))&&t.add("axios"),(i.includes("motion")||i.includes("framer"))&&t.add("framer-motion"),(i.includes("query")||i.includes("Query"))&&t.add("react-query"),(i.includes("tailwind")||i.includes("className"))&&t.add("tailwindcss")}),Array.from(t)}generateProgressiveEnhancementFiles(e,t,r,s){const i={};return e.includes("authentication")&&(i["src/components/ProtectedRoute.jsx"]=this.generateProtectedRoute(r,s),i["src/components/LoginForm.jsx"]=this.generateLoginForm(r,s)),e.includes("data-visualization")&&(i["src/components/ChartContainer.jsx"]=this.generateChartContainer(r,s),i["src/hooks/useChartData.js"]=this.generateChartDataHook(r,s)),e.includes("api-integration")&&(i["src/hooks/useApi.js"]=this.generateApiHook(r,s),i["src/utils/requestInterceptor.js"]=this.generateRequestInterceptor(r,s)),e.includes("testing")&&(i["src/utils/testUtils.js"]=this.generateTestUtils(r,s),i["src/setupTests.js"]=this.generateSetupTests(r,s)),e.includes("form-handling")&&(i["src/hooks/useForm.js"]=this.generateFormHook(r,s),i["src/components/FormField.jsx"]=this.generateFormField(r,s)),i}generateProtectedRoute(e,t){return`import React from 'react'
import { useAuth } from '../context/AuthContext'

const ProtectedRoute = ({ children, fallback = null }) => {
  const { isAuthenticated, isLoading } = useAuth()

  if (isLoading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"></div>
      </div>
    )
  }

  if (!isAuthenticated) {
    return fallback || (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <h2 className="text-2xl font-bold text-gray-900 mb-4">Authentication Required</h2>
          <p className="text-gray-600">Please log in to access this page.</p>
        </div>
      </div>
    )
  }

  return children
}

export default ProtectedRoute`}generateLoginForm(e,t){return`import React, { useState } from 'react'
import { useAuth } from '../context/AuthContext'

const LoginForm = ({ onSuccess, onError }) => {
  const [credentials, setCredentials] = useState({
    email: '',
    password: ''
  })
  const [isLoading, setIsLoading] = useState(false)
  const { login } = useAuth()

  const handleSubmit = async (e) => {
    e.preventDefault()
    setIsLoading(true)

    try {
      const result = await login(credentials)
      if (result.success) {
        onSuccess?.()
      } else {
        onError?.(result.error)
      }
    } catch (error) {
      onError?.(error.message)
    } finally {
      setIsLoading(false)
    }
  }

  const handleChange = (e) => {
    setCredentials(prev => ({
      ...prev,
      [e.target.name]: e.target.value
    }))
  }

  return (
    <form onSubmit={handleSubmit} className="space-y-4">
      <div>
        <label htmlFor="email" className="block text-sm font-medium text-gray-700">
          Email
        </label>
        <input
          type="email"
          id="email"
          name="email"
          value={credentials.email}
          onChange={handleChange}
          required
          className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
      
      <div>
        <label htmlFor="password" className="block text-sm font-medium text-gray-700">
          Password
        </label>
        <input
          type="password"
          id="password"
          name="password"
          value={credentials.password}
          onChange={handleChange}
          required
          className="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
      
      <button
        type="submit"
        disabled={isLoading}
        className="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"
      >
        {isLoading ? 'Signing in...' : 'Sign in'}
      </button>
    </form>
  )
}

export default LoginForm`}generateChartContainer(e,t){return`import React from 'react'
import { Line, Bar, Pie, Doughnut } from 'react-chartjs-2'
import { chartConfigs } from '../utils/chartHelpers'

const ChartContainer = ({ 
  type = 'line', 
  data, 
  title, 
  height = 400,
  className = ''
}) => {
  const getChartComponent = () => {
    switch (type) {
      case 'bar':
        return <Bar data={data} options={chartConfigs.bar} />
      case 'pie':
        return <Pie data={data} options={chartConfigs.pie} />
      case 'doughnut':
        return <Doughnut data={data} options={chartConfigs.doughnut} />
      default:
        return <Line data={data} options={chartConfigs.line} />
    }
  }

  return (
    <div className={\`bg-white p-6 rounded-lg shadow-md \${className}\`}>
      {title && (
        <h3 className="text-lg font-semibold text-gray-900 mb-4">{title}</h3>
      )}
      <div style={{ height: height }}>
        {getChartComponent()}
      </div>
    </div>
  )
}

export default ChartContainer`}generateChartDataHook(e,t){return`import { useState, useEffect, useCallback } from 'react'
import { chartFormatters } from '../utils/chartHelpers'

export const useChartData = (endpoint, options = {}) => {
  const [data, setData] = useState(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState(null)

  const fetchData = useCallback(async () => {
    try {
      setLoading(true)
      setError(null)
      
      const response = await fetch(endpoint, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json',
          ...options.headers
        }
      })

      if (!response.ok) {
        throw new Error(\`HTTP error! status: \${response.status}\`)
      }

      const rawData = await response.json()
      
      // Format data based on chart type
      let formattedData
      if (options.chartType === 'line') {
        formattedData = chartFormatters.formatLineData(
          rawData, 
          options.xField || 'label', 
          options.yField || 'value'
        )
      } else if (options.chartType === 'bar') {
        formattedData = chartFormatters.formatBarData(
          rawData, 
          options.xField || 'label', 
          options.yField || 'value'
        )
      } else if (options.chartType === 'pie') {
        formattedData = chartFormatters.formatPieData(
          rawData, 
          options.labelField || 'label', 
          options.valueField || 'value'
        )
      } else {
        formattedData = rawData
      }

      setData(formattedData)
    } catch (err) {
      setError(err.message)
    } finally {
      setLoading(false)
    }
  }, [endpoint, options])

  useEffect(() => {
    fetchData()
  }, [fetchData])

  const refresh = useCallback(() => {
    fetchData()
  }, [fetchData])

  return {
    data,
    loading,
    error,
    refresh
  }
}

export default useChartData`}generateApiHook(e,t){return`import { useState, useCallback } from 'react'
import { apiUtils } from '../utils/token'

export const useApi = (baseUrl = '') => {
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState(null)

  const request = useCallback(async (endpoint, options = {}) => {
    setLoading(true)
    setError(null)

    try {
      const url = baseUrl + endpoint
      const response = await apiUtils.makeAuthenticatedRequest(url, {
        ...options,
        headers: {
          'Content-Type': 'application/json',
          ...options.headers
        }
      })

      if (!response.ok) {
        throw new Error(\`HTTP error! status: \${response.status}\`)
      }

      const data = await response.json()
      return { success: true, data }
    } catch (err) {
      setError(err.message)
      return { success: false, error: err.message }
    } finally {
      setLoading(false)
    }
  }, [baseUrl])

  const get = useCallback((endpoint, options = {}) => {
    return request(endpoint, { ...options, method: 'GET' })
  }, [request])

  const post = useCallback((endpoint, data, options = {}) => {
    return request(endpoint, {
      ...options,
      method: 'POST',
      body: JSON.stringify(data)
    })
  }, [request])

  const put = useCallback((endpoint, data, options = {}) => {
    return request(endpoint, {
      ...options,
      method: 'PUT',
      body: JSON.stringify(data)
    })
  }, [request])

  const del = useCallback((endpoint, options = {}) => {
    return request(endpoint, { ...options, method: 'DELETE' })
  }, [request])

  return {
    loading,
    error,
    request,
    get,
    post,
    put,
    delete: del
  }
}

export default useApi`}generateRequestInterceptor(e,t){return`// Request interceptor for API calls

class RequestInterceptor {
  constructor() {
    this.interceptors = {
      request: [],
      response: []
    }
  }

  // Add request interceptor
  addRequestInterceptor(interceptor) {
    this.interceptors.request.push(interceptor)
  }

  // Add response interceptor
  addResponseInterceptor(interceptor) {
    this.interceptors.response.push(interceptor)
  }

  // Process request interceptors
  async processRequest(config) {
    let processedConfig = { ...config }
    
    for (const interceptor of this.interceptors.request) {
      processedConfig = await interceptor(processedConfig)
    }
    
    return processedConfig
  }

  // Process response interceptors
  async processResponse(response) {
    let processedResponse = response
    
    for (const interceptor of this.interceptors.response) {
      processedResponse = await interceptor(processedResponse)
    }
    
    return processedResponse
  }

  // Clear all interceptors
  clear() {
    this.interceptors.request = []
    this.interceptors.response = []
  }
}

// Create global instance
const requestInterceptor = new RequestInterceptor()

// Add common interceptors
requestInterceptor.addRequestInterceptor(async (config) => {
  // Add auth token
  const token = localStorage.getItem('auth_token')
  if (token) {
    config.headers = {
      ...config.headers,
      'Authorization': \`Bearer \${token}\`
    }
  }
  
  // Add timestamp
  config.headers = {
    ...config.headers,
    'X-Request-Time': new Date().toISOString()
  }
  
  return config
})

requestInterceptor.addResponseInterceptor(async (response) => {
  // Log response
  console.log(\`API Response: \${response.status} - \${response.url}\`)
  
  // Handle common errors
  if (response.status === 401) {
    localStorage.removeItem('auth_token')
    localStorage.removeItem('auth_user')
    window.location.href = '/login'
  }
  
  return response
})

export default requestInterceptor`}generateTestUtils(e,t){return`// Test utilities for React components

import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { BrowserRouter } from 'react-router-dom'

// Custom render function with providers
export const renderWithProviders = (ui, options = {}) => {
  const { route = '/' } = options
  
  window.history.pushState({}, 'Test page', route)
  
  return render(ui, { wrapper: BrowserRouter })
}

// Mock fetch function
export const mockFetch = (data, status = 200) => {
  global.fetch = jest.fn(() =>
    Promise.resolve({
      ok: status >= 200 && status < 300,
      status,
      json: () => Promise.resolve(data)
    })
  )
}

// Mock localStorage
export const mockLocalStorage = () => {
  const store = {}
  
  return {
    getItem: jest.fn((key) => store[key] || null),
    setItem: jest.fn((key, value) => {
      store[key] = value
    }),
    removeItem: jest.fn((key) => {
      delete store[key]
    }),
    clear: jest.fn(() => {
      Object.keys(store).forEach(key => delete store[key])
    })
  }
}

// Wait for async operations
export const waitForAsync = () => waitFor(() => {})

// Custom matchers
export const customMatchers = {
  toBeInTheDocument: (received) => {
    const pass = received !== null && received !== undefined
    return {
      pass,
      message: () => \`Expected element to be in the document\`
    }
  }
}

export default {
  renderWithProviders,
  mockFetch,
  mockLocalStorage,
  waitForAsync,
  customMatchers
}`}generateSetupTests(e,t){return`// Jest setup file for testing

import '@testing-library/jest-dom'

// Mock window.matchMedia
Object.defineProperty(window, 'matchMedia', {
  writable: true,
  value: jest.fn().mockImplementation(query => ({
    matches: false,
    media: query,
    onchange: null,
    addListener: jest.fn(), // deprecated
    removeListener: jest.fn(), // deprecated
    addEventListener: jest.fn(),
    removeEventListener: jest.fn(),
    dispatchEvent: jest.fn(),
  })),
})

// Mock IntersectionObserver
global.IntersectionObserver = class IntersectionObserver {
  constructor() {}
  disconnect() {}
  observe() {}
  unobserve() {}
}

// Mock ResizeObserver
global.ResizeObserver = class ResizeObserver {
  constructor() {}
  disconnect() {}
  observe() {}
  unobserve() {}
}

// Mock fetch
global.fetch = jest.fn()

// Mock console methods to reduce noise in tests
const originalError = console.error
beforeAll(() => {
  console.error = (...args) => {
    if (
      typeof args[0] === 'string' &&
      args[0].includes('Warning: ReactDOM.render is no longer supported')
    ) {
      return
    }
    originalError.call(console, ...args)
  }
})

afterAll(() => {
  console.error = originalError
})`}generateFormHook(e,t){return`import { useState, useCallback } from 'react'

export const useForm = (initialValues = {}, validationRules = {}) => {
  const [values, setValues] = useState(initialValues)
  const [errors, setErrors] = useState({})
  const [touched, setTouched] = useState({})
  const [isSubmitting, setIsSubmitting] = useState(false)

  // Handle input change
  const handleChange = useCallback((e) => {
    const { name, value, type, checked } = e.target
    const fieldValue = type === 'checkbox' ? checked : value
    
    setValues(prev => ({
      ...prev,
      [name]: fieldValue
    }))

    // Clear error when user starts typing
    if (errors[name]) {
      setErrors(prev => ({
        ...prev,
        [name]: ''
      }))
    }
  }, [errors])

  // Handle input blur
  const handleBlur = useCallback((e) => {
    const { name } = e.target
    setTouched(prev => ({
      ...prev,
      [name]: true
    }))

    // Validate field on blur
    validateField(name, values[name])
  }, [values])

  // Validate single field
  const validateField = useCallback((fieldName, value) => {
    const rule = validationRules[fieldName]
    if (!rule) return true

    let error = ''
    
    if (rule.required && (!value || value.toString().trim() === '')) {
      error = rule.required
    } else if (rule.minLength && value.length < rule.minLength) {
      error = rule.minLength
    } else if (rule.maxLength && value.length > rule.maxLength) {
      error = rule.maxLength
    } else if (rule.pattern && !rule.pattern.test(value)) {
      error = rule.pattern
    } else if (rule.custom && !rule.custom(value)) {
      error = rule.custom
    }

    setErrors(prev => ({
      ...prev,
      [fieldName]: error
    }))

    return !error
  }, [validationRules])

  // Validate all fields
  const validateForm = useCallback(() => {
    const newErrors = {}
    let isValid = true

    Object.keys(validationRules).forEach(fieldName => {
      const fieldValue = values[fieldName]
      const rule = validationRules[fieldName]
      
      if (rule.required && (!fieldValue || fieldValue.toString().trim() === '')) {
        newErrors[fieldName] = rule.required
        isValid = false
      } else if (rule.minLength && fieldValue.length < rule.minLength) {
        newErrors[fieldName] = rule.minLength
        isValid = false
      } else if (rule.maxLength && fieldValue.length > rule.maxLength) {
        newErrors[fieldName] = rule.maxLength
        isValid = false
      } else if (rule.pattern && !rule.pattern.test(fieldValue)) {
        newErrors[fieldName] = rule.pattern
        isValid = false
      } else if (rule.custom && !rule.custom(fieldValue)) {
        newErrors[fieldName] = rule.custom
        isValid = false
      }
    })

    setErrors(newErrors)
    return isValid
  }, [values, validationRules])

  // Handle form submission
  const handleSubmit = useCallback(async (onSubmit) => {
    setIsSubmitting(true)
    
    const isValid = validateForm()
    if (!isValid) {
      setIsSubmitting(false)
      return
    }

    try {
      await onSubmit(values)
    } catch (error) {
      console.error('Form submission error:', error)
    } finally {
      setIsSubmitting(false)
    }
  }, [values, validateForm])

  // Reset form
  const resetForm = useCallback(() => {
    setValues(initialValues)
    setErrors({})
    setTouched({})
    setIsSubmitting(false)
  }, [initialValues])

  // Set field value programmatically
  const setFieldValue = useCallback((fieldName, value) => {
    setValues(prev => ({
      ...prev,
      [fieldName]: value
    }))
  }, [])

  // Set field error programmatically
  const setFieldError = useCallback((fieldName, error) => {
    setErrors(prev => ({
      ...prev,
      [fieldName]: error
    }))
  }, [])

  return {
    values,
    errors,
    touched,
    isSubmitting,
    handleChange,
    handleBlur,
    handleSubmit,
    resetForm,
    setFieldValue,
    setFieldError,
    validateField,
    validateForm
  }
}

export default useForm`}generateFormField(e,t){return`import React from 'react'

const FormField = ({
  name,
  label,
  type = 'text',
  value,
  onChange,
  onBlur,
  error,
  touched,
  placeholder,
  required = false,
  disabled = false,
  className = '',
  ...props
}) => {
  const fieldId = \`field-\${name}\`
  const hasError = touched && error

  return (
    <div className={\`mb-4 \${className}\`}>
      {label && (
        <label 
          htmlFor={fieldId} 
          className="block text-sm font-medium text-gray-700 mb-1"
        >
          {label}
          {required && <span className="text-red-500 ml-1">*</span>}
        </label>
      )}
      
      {type === 'textarea' ? (
        <textarea
          id={fieldId}
          name={name}
          value={value}
          onChange={onChange}
          onBlur={onBlur}
          placeholder={placeholder}
          disabled={disabled}
          rows={4}
          className={\`
            w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
            \${hasError ? 'border-red-500' : 'border-gray-300'}
            \${disabled ? 'bg-gray-100 cursor-not-allowed' : ''}
          \`}
          {...props}
        />
      ) : type === 'select' ? (
        <select
          id={fieldId}
          name={name}
          value={value}
          onChange={onChange}
          onBlur={onBlur}
          disabled={disabled}
          className={\`
            w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
            \${hasError ? 'border-red-500' : 'border-gray-300'}
            \${disabled ? 'bg-gray-100 cursor-not-allowed' : ''}
          \`}
          {...props}
        >
          {props.children}
        </select>
      ) : (
        <input
          id={fieldId}
          name={name}
          type={type}
          value={value}
          onChange={onChange}
          onBlur={onBlur}
          placeholder={placeholder}
          disabled={disabled}
          className={\`
            w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
            \${hasError ? 'border-red-500' : 'border-gray-300'}
            \${disabled ? 'bg-gray-100 cursor-not-allowed' : ''}
          \`}
          {...props}
        />
      )}
      
      {hasError && (
        <p className="mt-1 text-sm text-red-600">{error}</p>
      )}
    </div>
  )
}

export default FormField`}}const sn=new cW;class uW{constructor(){this.currentService="local-ai",this.usageStats={totalRequests:0,successfulRequests:0,failedRequests:0,averageResponseTime:0},console.log("🤖 Simple AI Service initialized - Local AI only!")}getServices(){return{"local-ai":{name:"Local AI Models",type:"Local",description:"Self-hosted AI models - no API keys required",models:sn.getAvailableModels()}}}getTemplateCategories(){return sn.getTemplateCategories()}getTemplatesByCategory(e){return sn.getTemplatesByCategory(e)}getAllTemplates(){return sn.getAllTemplates()}generateTemplateById(e,t={}){return sn.generateTemplateById(e,t)}searchTemplates(e){return sn.searchTemplates(e)}getPopularTemplates(){return sn.getPopularTemplates()}async generateCode(e,t={}){const r=Date.now();this.usageStats.totalRequests++;try{if(console.log("🚀 Generating code with Local AI..."),!sn.isHealthy)return console.log("⚠️ Local AI not available, using template fallback"),sn.createFallbackResponse(e,t);const s=await sn.generateCode(e,t),i=Date.now()-r;return this.usageStats.successfulRequests++,this.usageStats.averageResponseTime=(this.usageStats.averageResponseTime+i)/2,console.log("✅ Code generated successfully with Local AI!"),s}catch(s){return console.error("❌ Local AI generation failed:",s),this.usageStats.failedRequests++,console.log("🔄 Falling back to template generation..."),sn.createFallbackResponse(e,t)}}getServiceHealth(){return sn.modelHealth}getUsageStats(){return this.usageStats}getUserPreferences(){return{preferredService:"local-ai",fallbackEnabled:!0,autoHealthCheck:!0}}updateUserPreferences(e){localStorage.setItem("dreambuild-preferences",JSON.stringify(e))}loadUserPreferences(){const e=localStorage.getItem("dreambuild-preferences");return e?JSON.parse(e):this.getUserPreferences()}getServiceStatus(){return{"local-ai":{isHealthy:sn.isHealthy,models:sn.getHealthyModels().length,totalModels:sn.getAvailableModels().length}}}resetServiceHealth(){sn.modelHealth={}}getFallbackOrder(){return["local-ai"]}isFallbackEnabled(){return!0}setFallbackEnabled(e){return!0}getSetupInstructions(){return{"local-ai":{title:"Local AI Setup",description:"Set up local AI models for code generation",steps:["1. Install Ollama from https://ollama.ai","2. Run: ollama pull codellama:7b","3. Run: ollama serve","4. Refresh DreamBuild to start using local AI"],isSetup:sn.isHealthy}}}getServicesNeedingSetup(){return sn.isHealthy?[]:["local-ai"]}hasValidApiKey(e){return e==="local-ai"}setService(e){e==="local-ai"&&(this.currentService=e)}getCurrentService(){return this.currentService}}const Qe=new uW,dW=({isOpen:n,onClose:e})=>{const[t,r]=A.useState({}),[s,i]=A.useState({}),[o,u]=A.useState({}),[d,p]=A.useState(!1),[f,y]=A.useState([]);A.useEffect(()=>{n&&x()},[n]);const x=()=>{r(Qe.getServiceStatus()),i(Qe.getUserPreferences()),u(Qe.getUsageStats()),y(Qe.getServicesNeedingSetup())},S=q=>{Qe.setService(q),i(Qe.getUserPreferences()),x()},E=(q,N)=>{const _={...s,[q]:N};Qe.updateUserPreferences(_),i(_)},k=async()=>{p(!0);try{await Qe.performHealthChecks(),x()}catch(q){console.error("Error refreshing health:",q)}finally{p(!1)}},I=(q=null)=>{Qe.resetServiceHealth(q),x()},M=q=>q.isHealthy?c.jsx(Ja,{className:"h-4 w-4 text-green-500"}):c.jsx(Ah,{className:"h-4 w-4 text-red-500"}),j=q=>q.isCurrent?"bg-gray-700 text-white":q.isPreferred?"bg-secondary text-secondary-foreground":q.isHealthy?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200",C=q=>q<1e3?`${q}ms`:`${(q/1e3).toFixed(1)}s`,F=q=>`${(q*100).toFixed(1)}%`,G=q=>{switch(q){case"groq":return c.jsx(Jr,{className:"h-4 w-4"});case"together":return c.jsx(Ch,{className:"h-4 w-4"});case"huggingface":return c.jsx(Zd,{className:"h-4 w-4"});case"ollama":return c.jsx(Es,{className:"h-4 w-4"});default:return c.jsx(U$,{className:"h-4 w-4"})}};return n?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxs("div",{className:"bg-black border border-border rounded-lg shadow-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[c.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-border",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"AI Service Status"}),c.jsx("p",{className:"text-muted-foreground",children:"Monitor and configure AI services"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{onClick:k,disabled:d,className:"p-2 text-muted-foreground hover:text-foreground transition-colors",children:c.jsx(Gg,{className:`h-5 w-5 ${d?"animate-spin":""}`})}),c.jsx("button",{onClick:e,className:"p-2 text-muted-foreground hover:text-foreground transition-colors",children:c.jsx(Ah,{className:"h-5 w-5"})})]})]}),c.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Zd,{className:"h-5 w-5"}),"Service Status"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:Object.entries(t).map(([q,N])=>c.jsxs("div",{className:`p-4 rounded-lg border-2 transition-all cursor-pointer hover:shadow-md ${j(N)}`,onClick:()=>S(q),children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[G(q),c.jsx("span",{className:"font-semibold",children:N.name}),M(N)]}),c.jsxs("div",{className:"flex items-center gap-2",children:[N.isCurrent&&c.jsx("span",{className:"text-xs bg-gray-700 text-white px-2 py-1 rounded",children:"Current"}),N.isPreferred&&!N.isCurrent&&c.jsx("span",{className:"text-xs bg-secondary text-secondary-foreground px-2 py-1 rounded",children:"Preferred"})]})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Eu,{className:"h-3 w-3"}),c.jsx("span",{children:C(N.responseTime)})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(gj,{className:"h-3 w-3"}),c.jsx("span",{children:F(N.errorRate)})]}),c.jsx("div",{className:"col-span-2",children:c.jsxs("span",{className:"text-xs",children:["Requests: ",N.usage.totalRequests," | Success: ",N.usage.successfulRequests," | Failed: ",N.usage.failedRequests]})})]}),N.consecutiveFailures>0&&c.jsxs("div",{className:"mt-2 text-xs text-orange-600",children:[N.consecutiveFailures," consecutive failures"]})]},q))}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Es,{className:"h-5 w-5"}),"Preferences"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Enable Fallback"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically switch to backup services when primary fails"})]}),c.jsx("button",{onClick:()=>E("fallbackEnabled",!s.fallbackEnabled),className:"flex items-center gap-2",children:s.fallbackEnabled?c.jsx(H1,{className:"h-6 w-6 text-white"}):c.jsx(z1,{className:"h-6 w-6 text-muted-foreground"})})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("label",{className:"text-sm font-medium",children:"Show Notifications"}),c.jsx("p",{className:"text-xs text-muted-foreground",children:"Display fallback notifications in console"})]}),c.jsx("button",{onClick:()=>E("showNotifications",!s.showNotifications),className:"flex items-center gap-2",children:s.showNotifications?c.jsx(H1,{className:"h-6 w-6 text-white"}):c.jsx(z1,{className:"h-6 w-6 text-muted-foreground"})})]})]})]}),f.length>0&&c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Es,{className:"h-5 w-5"}),"Setup Required"]}),c.jsx("div",{className:"space-y-3",children:f.map(q=>c.jsxs("div",{className:"p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h4",{className:"font-medium text-orange-800",children:q.name}),c.jsx("span",{className:"text-sm text-orange-600 bg-orange-100 px-2 py-1 rounded",children:"Setup Required"})]}),c.jsx("p",{className:"text-sm text-orange-700 mb-2",children:q.instructions.setup}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-orange-600",children:[c.jsxs("span",{children:["💰 ",q.instructions.freeTier]}),c.jsxs("span",{children:["⚡ ",q.instructions.features]})]})]},q.key))})]}),c.jsxs("div",{className:"mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx(Zd,{className:"h-5 w-5"}),"Usage Statistics"]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-white",children:o.totalRequests||0}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Requests"})]}),c.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.successfulRequests||0}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Successful"})]}),c.jsxs("div",{className:"p-4 bg-muted rounded-lg",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.failedRequests||0}),c.jsx("div",{className:"text-sm text-muted-foreground",children:"Failed"})]})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last updated: ",new Date().toLocaleTimeString()]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>I(),className:"px-4 py-2 text-sm bg-secondary text-secondary-foreground rounded-md hover:bg-secondary/80 transition-colors",children:"Reset All Health"}),c.jsx("button",{onClick:e,className:"px-4 py-2 text-sm bg-gray-700 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Close"})]})]})]})})]})}):null},hW=({isOpen:n,onClose:e,onTemplateSelect:t})=>{const{updateFile:r}=Jo(),[s,i]=A.useState(""),[o,u]=A.useState("all"),[d,p]=A.useState("grid"),[f,y]=A.useState("popular"),[x,S]=A.useState([]),[E,k]=A.useState({}),[I,M]=A.useState({});A.useEffect(()=>{n&&j()},[n]);const j=()=>{try{const N=Qe.getTemplateCategories();k(N);const _=Qe.getAllTemplates();S(_)}catch(N){console.error("Error loading template data:",N),Me.error("Failed to load templates")}};A.useEffect(()=>{C()},[s,o,f]);const C=()=>{let N=Qe.getAllTemplates();if(s&&(N=Qe.searchTemplates(s)),o!=="all"){const _=Qe.getTemplatesByCategory(o);N=N.filter(R=>_.includes(R.id))}switch(f){case"popular":const _=Qe.getPopularTemplates().map(R=>R.id);N=N.sort((R,O)=>{const B=_.includes(R.id),z=_.includes(O.id);return B&&!z?-1:!B&&z?1:0});break;case"alphabetical":N=N.sort((R,O)=>R.name.localeCompare(O.name));break;case"newest":N=N.reverse();break}S(N)},F=async N=>{try{const _=Qe.createFallbackResponse(N,{title:N.replace(/-/g," ").replace(/\b\w/g,O=>O.toUpperCase())});Object.entries(_).forEach(([O,B])=>{r(O,B)});const R=N.replace(/-/g," ").replace(/\b\w/g,O=>O.toUpperCase());Me.success(`Generated ${R} template!`),t&&t({id:N,name:R,files:_}),e()}catch(_){console.error("Error generating template:",_),Me.error("Failed to generate template")}},G=N=>{M(_=>({..._,[N]:!_[N]}))},q=N=>N.includes("store")||N.includes("ecommerce")?"🛒 E-commerce platform with shopping cart and payments":N.includes("blog")||N.includes("content")?"📝 Content management with articles and comments":N.includes("dashboard")||N.includes("admin")?"📊 Analytics dashboard with charts and metrics":N.includes("social")||N.includes("network")?"👥 Social platform with profiles and connections":N.includes("game")||N.includes("entertainment")?"🎮 Interactive game with scoring and levels":N.includes("health")||N.includes("fitness")?"💪 Health tracking with goals and progress":N.includes("finance")||N.includes("money")?"💰 Financial management with budgets and investments":N.includes("education")||N.includes("learning")?"🎓 Educational platform with courses and quizzes":"✨ Custom application with modern design";return n?c.jsx(Ts,{children:c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:e,children:c.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg w-full max-w-7xl h-[90vh] flex flex-col",onClick:N=>N.stopPropagation(),children:[c.jsxs("div",{className:"p-6 border-b border-border",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center",children:c.jsx(kh,{className:"h-5 w-5 text-white"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Template Library"}),c.jsx("p",{className:"text-muted-foreground",children:"Choose from 1000+ professional templates"})]})]}),c.jsx("button",{onClick:e,className:"p-2 hover:bg-muted rounded-lg transition-colors",children:"✕"})]}),c.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[c.jsxs("div",{className:"flex-1 relative",children:[c.jsx(Kr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx("input",{type:"text",placeholder:"Search templates...",value:s,onChange:N=>i(N.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-black focus:outline-none focus:ring-2 focus:ring-primary"})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("select",{value:o,onChange:N=>u(N.target.value),className:"px-3 py-2 border border-border rounded-lg bg-black",children:[c.jsx("option",{value:"all",children:"All Categories"}),Object.entries(E).map(([N,_])=>c.jsxs("option",{value:N,children:[_.icon," ",_.name]},N))]}),c.jsxs("select",{value:f,onChange:N=>y(N.target.value),className:"px-3 py-2 border border-border rounded-lg bg-black",children:[c.jsx("option",{value:"popular",children:"Popular"}),c.jsx("option",{value:"alphabetical",children:"A-Z"}),c.jsx("option",{value:"newest",children:"Newest"})]}),c.jsxs("div",{className:"flex border border-border rounded-lg",children:[c.jsx("button",{onClick:()=>p("grid"),className:`p-2 ${d==="grid"?"bg-gray-700 text-white":"hover:bg-muted"}`,children:c.jsx(xj,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>p("list"),className:`p-2 ${d==="list"?"bg-gray-700 text-white":"hover:bg-muted"}`,children:c.jsx(bj,{className:"h-4 w-4"})})]})]})]})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsxs("div",{className:"h-full flex",children:[c.jsx("div",{className:"w-64 border-r border-border bg-muted/30 overflow-y-auto",children:c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-semibold mb-3",children:"Categories"}),c.jsx("div",{className:"space-y-1",children:Object.entries(E).map(([N,_])=>c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>{u(N),G(N)},className:"w-full flex items-center justify-between p-2 rounded-lg hover:bg-muted transition-colors",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{children:_.icon}),c.jsx("span",{className:"text-sm",children:_.name}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",_.templates.length,")"]})]}),I[N]?c.jsx(B$,{className:"h-4 w-4"}):c.jsx(yj,{className:"h-4 w-4"})]}),I[N]&&c.jsxs("div",{className:"ml-4 space-y-1 mt-1",children:[_.templates.slice(0,5).map(R=>c.jsx("button",{onClick:()=>{i(R),u(N)},className:"w-full text-left p-1 text-xs text-muted-foreground hover:text-foreground truncate",children:R.replace(/-/g," ")},R)),_.templates.length>5&&c.jsxs("div",{className:"text-xs text-muted-foreground p-1",children:["+",_.templates.length-5," more..."]})]})]},N))})]})}),c.jsx("div",{className:"flex-1 overflow-y-auto",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h3",{className:"text-lg font-semibold",children:[x.length," Templates",o!=="all"&&` in ${E[o]?.name}`]}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",x.length," of ",Qe.getAllTemplates().length," templates"]})]}),d==="grid"?c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:x.map((N,_)=>c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:_*.05},onClick:()=>F(N.id),className:"bg-card border border-border rounded-lg p-4 hover:shadow-lg hover:border-primary/30 transition-all cursor-pointer group",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[c.jsx("div",{className:"w-10 h-10 bg-white/10 rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-lg",children:N.icon})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium truncate",children:N.name}),c.jsx("p",{className:"text-xs text-muted-foreground",children:N.category})]})]}),c.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:q(N.id)}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[c.jsx(Rt,{className:"h-3 w-3"}),c.jsx("span",{children:"HTML/CSS/JS"})]}),c.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Jr,{className:"h-4 w-4 text-white"})})]})]},N.id))}):c.jsx("div",{className:"space-y-2",children:x.map((N,_)=>c.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:_*.02},onClick:()=>F(N.id),className:"flex items-center gap-4 p-4 bg-card border border-border rounded-lg hover:shadow-md hover:border-primary/30 transition-all cursor-pointer group",children:[c.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center flex-shrink-0",children:c.jsx("span",{className:"text-xl",children:N.icon})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("h4",{className:"font-medium",children:N.name}),c.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:q(N.id)}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[c.jsx("span",{children:N.category}),c.jsx("span",{children:"•"}),c.jsx("span",{children:"HTML/CSS/JS"})]})]}),c.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:c.jsx(Jr,{className:"h-5 w-5 text-white"})})]},N.id))}),x.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx(Kr,{className:"h-8 w-8 text-muted-foreground"})}),c.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No templates found"}),c.jsx("p",{className:"text-muted-foreground",children:"Try adjusting your search or filter criteria"})]})]})})]})})]})})}):null};class pW{constructor(){this.analysisRules={design:[{condition:e=>!e["style.css"]||e["style.css"].length<500,suggestion:{type:"design",priority:"high",title:"Enhance Visual Design",description:"Add comprehensive CSS styling with modern design patterns",implementation:"Add CSS with responsive design, color schemes, typography, and animations",icon:"🎨"}},{condition:e=>!e["style.css"]?.includes("@media"),suggestion:{type:"design",priority:"high",title:"Add Responsive Design",description:"Make the application work perfectly on mobile devices",implementation:"Add CSS media queries for mobile, tablet, and desktop breakpoints",icon:"📱"}},{condition:e=>!e["style.css"]?.includes("animation")&&!e["style.css"]?.includes("transition"),suggestion:{type:"design",priority:"medium",title:"Add Smooth Animations",description:"Enhance user experience with smooth transitions and animations",implementation:"Add CSS transitions, hover effects, and loading animations",icon:"✨"}}],functionality:[{condition:e=>!e["script.js"]||e["script.js"].length<200,suggestion:{type:"functionality",priority:"high",title:"Add Interactive Features",description:"Include JavaScript functionality for better user engagement",implementation:"Add event handlers, form validation, and dynamic content updates",icon:"⚡"}},{condition:e=>!e["script.js"]?.includes("localStorage")&&!e["script.js"]?.includes("sessionStorage"),suggestion:{type:"functionality",priority:"medium",title:"Add Data Persistence",description:"Save user data locally for better experience",implementation:"Use localStorage or sessionStorage to save user preferences and data",icon:"💾"}},{condition:e=>!e["script.js"]?.includes("addEventListener")||e["script.js"]?.includes("onclick="),suggestion:{type:"functionality",priority:"medium",title:"Improve Event Handling",description:"Use modern JavaScript event handling patterns",implementation:"Replace inline event handlers with addEventListener for better maintainability",icon:"🎯"}}],performance:[{condition:e=>e["index.html"]?.includes("<img")&&!e["index.html"]?.includes("loading="),suggestion:{type:"performance",priority:"medium",title:"Optimize Image Loading",description:"Add lazy loading for better performance",implementation:'Add loading="lazy" to images and consider WebP format',icon:"🖼️"}},{condition:e=>e["script.js"]&&e["script.js"].length>1e4,suggestion:{type:"performance",priority:"low",title:"Consider Code Splitting",description:"Break large JavaScript files into smaller modules",implementation:"Split code into logical modules and load them as needed",icon:"📦"}}],accessibility:[{condition:e=>!e["index.html"]?.includes("alt=")&&e["index.html"]?.includes("<img"),suggestion:{type:"accessibility",priority:"high",title:"Add Image Alt Text",description:"Make images accessible to screen readers",implementation:"Add descriptive alt attributes to all images",icon:"♿"}},{condition:e=>!e["index.html"]?.includes("aria-")&&(e["index.html"]?.includes("<button")||e["index.html"]?.includes("<input")),suggestion:{type:"accessibility",priority:"medium",title:"Improve Accessibility",description:"Add ARIA labels and semantic HTML",implementation:"Use semantic HTML elements and add ARIA labels for better screen reader support",icon:"♿"}}],seo:[{condition:e=>!e["index.html"]?.includes('<meta name="description"'),suggestion:{type:"seo",priority:"high",title:"Add SEO Meta Tags",description:"Improve search engine visibility",implementation:"Add meta description, keywords, and Open Graph tags",icon:"🔍"}},{condition:e=>!e["index.html"]?.includes("<title>")||e["index.html"]?.includes("<title>Untitled</title>"),suggestion:{type:"seo",priority:"high",title:"Add Descriptive Title",description:"Include a meaningful page title for SEO",implementation:"Add a descriptive, keyword-rich title tag",icon:"📝"}}],security:[{condition:e=>e["index.html"]?.includes("<form")&&!e["index.html"]?.includes("method="),suggestion:{type:"security",priority:"medium",title:"Secure Form Handling",description:"Add proper form validation and security measures",implementation:"Add CSRF protection, input validation, and secure form submission",icon:"🔒"}}]}}analyzeApplication(e,t=""){const r=[],s=this.analyzeContext(t);Object.values(this.analysisRules).forEach(u=>{u.forEach(d=>{if(d.condition(e)){const p={...d.suggestion,id:this.generateRecommendationId(),category:u===this.analysisRules.design?"design":u===this.analysisRules.functionality?"functionality":u===this.analysisRules.performance?"performance":u===this.analysisRules.accessibility?"accessibility":u===this.analysisRules.seo?"seo":"security",context:s,estimatedImpact:this.calculateImpact(d.suggestion.priority),implementationTime:this.estimateImplementationTime(d.suggestion.type)};r.push(p)}})});const i=this.generateContextRecommendations(s,e);r.push(...i);const o=this.generateFeatureRecommendations(s,e);return r.push(...o),this.prioritizeRecommendations(r)}generateFeatureRecommendations(e,t){const r=[];return this.getFeatureMatrix(e).forEach(i=>{this.hasFeature(t,i.id)||r.push({id:this.generateRecommendationId(),type:"feature-enhancement",priority:i.priority,title:i.title,description:i.description,implementation:i.implementation,icon:i.icon,category:"functionality",context:e,estimatedImpact:i.impact,implementationTime:i.timeEstimate,codeExample:i.codeExample,benefits:i.benefits,complexity:i.complexity})}),r}hasFeature(e,t){const r={"user-authentication":s=>s["script.js"]?.includes("login")||s["script.js"]?.includes("auth")||s["index.html"]?.includes("login")||s["index.html"]?.includes("signup"),"data-persistence":s=>s["script.js"]?.includes("localStorage")||s["script.js"]?.includes("sessionStorage")||s["script.js"]?.includes("database")||s["script.js"]?.includes("fetch"),"form-validation":s=>s["script.js"]?.includes("validate")||s["script.js"]?.includes("validation")||s["index.html"]?.includes("required")||s["index.html"]?.includes("pattern"),"search-functionality":s=>s["script.js"]?.includes("search")||s["script.js"]?.includes("filter")||s["index.html"]?.includes("search")||s["index.html"]?.includes("filter"),"responsive-design":s=>s["style.css"]?.includes("@media")||s["style.css"]?.includes("responsive"),"pwa-features":s=>s["manifest.json"]||s["sw.js"]||s["index.html"]?.includes("service-worker"),"analytics-tracking":s=>s["script.js"]?.includes("analytics")||s["script.js"]?.includes("gtag")||s["index.html"]?.includes("google-analytics"),"social-sharing":s=>s["script.js"]?.includes("share")||s["index.html"]?.includes("social-share"),"dark-mode":s=>s["style.css"]?.includes("dark")||s["style.css"]?.includes("theme")||s["script.js"]?.includes("dark-mode"),"error-handling":s=>s["script.js"]?.includes("try")||s["script.js"]?.includes("catch")||s["script.js"]?.includes("error"),"loading-states":s=>s["script.js"]?.includes("loading")||s["style.css"]?.includes("spinner")||s["index.html"]?.includes("loading"),"accessibility-features":s=>s["index.html"]?.includes("aria-")||s["index.html"]?.includes("role=")||s["index.html"]?.includes("alt="),"seo-optimization":s=>s["index.html"]?.includes('meta name="description"')||s["index.html"]?.includes('meta name="keywords"'),"security-headers":s=>s["index.html"]?.includes("Content-Security-Policy")||s["index.html"]?.includes("X-Frame-Options"),"performance-optimization":s=>s["script.js"]?.includes("lazy")||s["index.html"]?.includes('loading="lazy"')||s["style.css"]?.includes("transform3d")};return r[t]?r[t](e):!1}getFeatureMatrix(e){let r=[{id:"responsive-design",title:"Responsive Design",description:"Make your app work perfectly on all devices",implementation:"Add CSS media queries and flexible layouts",icon:"📱",priority:"high",impact:"high",timeEstimate:"1-2 hours",complexity:"beginner",benefits:["Better mobile experience","Increased user engagement","SEO benefits"],codeExample:`@media (max-width: 768px) {
  .container { padding: 10px; }
  .grid { grid-template-columns: 1fr; }
}`},{id:"user-authentication",title:"User Authentication",description:"Add login/signup functionality for user accounts",implementation:"Implement user registration, login, and session management",icon:"👤",priority:"high",impact:"high",timeEstimate:"3-4 hours",complexity:"intermediate",benefits:["User personalization","Data persistence","Enhanced security"],codeExample:`function loginUser(email, password) {
  // Validate credentials
  // Create session
  // Redirect to dashboard
}`},{id:"data-persistence",title:"Data Persistence",description:"Save user data and preferences locally or to a database",implementation:"Use localStorage, sessionStorage, or integrate with a backend API",icon:"💾",priority:"high",impact:"high",timeEstimate:"2-3 hours",complexity:"beginner",benefits:["Better user experience","Data retention","Offline functionality"],codeExample:`localStorage.setItem('userData', JSON.stringify(data));
const savedData = JSON.parse(localStorage.getItem('userData'));`},{id:"form-validation",title:"Form Validation",description:"Add client-side and server-side form validation",implementation:"Validate inputs, show error messages, and prevent invalid submissions",icon:"✅",priority:"medium",impact:"medium",timeEstimate:"1-2 hours",complexity:"beginner",benefits:["Better user experience","Data integrity","Error prevention"],codeExample:`function validateForm(formData) {
  const errors = [];
  if (!formData.email.includes('@')) {
    errors.push('Invalid email format');
  }
  return errors;
}`},{id:"search-functionality",title:"Search & Filter",description:"Add search and filtering capabilities to your content",implementation:"Implement real-time search with filtering and sorting options",icon:"🔍",priority:"medium",impact:"medium",timeEstimate:"2-3 hours",complexity:"intermediate",benefits:["Better content discovery","Improved usability","Enhanced user experience"],codeExample:`function searchContent(query, items) {
  return items.filter(item => 
    item.title.toLowerCase().includes(query.toLowerCase())
  );
}`},{id:"pwa-features",title:"Progressive Web App",description:"Make your app installable and work offline",implementation:"Add service worker, manifest file, and offline functionality",icon:"📲",priority:"medium",impact:"high",timeEstimate:"3-4 hours",complexity:"intermediate",benefits:["App-like experience","Offline functionality","Better performance"],codeExample:`// manifest.json
{
  "name": "My App",
  "short_name": "App",
  "start_url": "/",
  "display": "standalone"
}`},{id:"analytics-tracking",title:"Analytics & Tracking",description:"Track user behavior and app performance",implementation:"Integrate Google Analytics or similar tracking tools",icon:"📊",priority:"low",impact:"medium",timeEstimate:"30 minutes",complexity:"beginner",benefits:["User insights","Performance monitoring","Data-driven decisions"],codeExample:`gtag('event', 'page_view', {
  page_title: document.title,
  page_location: window.location.href
});`},{id:"social-sharing",title:"Social Sharing",description:"Allow users to share content on social media",implementation:"Add social sharing buttons and Open Graph meta tags",icon:"📤",priority:"low",impact:"medium",timeEstimate:"1 hour",complexity:"beginner",benefits:["Increased reach","Social engagement","Viral potential"],codeExample:"function shareToSocial(platform, url, text) {\n  const shareUrl = `https://${platform}.com/share?url=${url}&text=${text}`;\n  window.open(shareUrl, '_blank');\n}"},{id:"dark-mode",title:"Dark Mode",description:"Add dark/light theme toggle for better user experience",implementation:"Create theme system with CSS variables and JavaScript toggle",icon:"🌙",priority:"low",impact:"low",timeEstimate:"1-2 hours",complexity:"beginner",benefits:["User preference","Battery saving","Eye comfort"],codeExample:`:root {
  --bg-color: #ffffff;
  --text-color: #000000;
}
[data-theme="dark"] {
  --bg-color: #1a1a1a;
  --text-color: #ffffff;
}`},{id:"error-handling",title:"Error Handling",description:"Implement comprehensive error handling and user feedback",implementation:"Add try-catch blocks, error boundaries, and user-friendly error messages",icon:"⚠️",priority:"high",impact:"high",timeEstimate:"2-3 hours",complexity:"intermediate",benefits:["Better reliability","User experience","Debugging"],codeExample:`try {
  const result = await riskyOperation();
  return result;
} catch (error) {
  console.error('Operation failed:', error);
  showUserMessage('Something went wrong. Please try again.');
}`},{id:"loading-states",title:"Loading States",description:"Add loading indicators and skeleton screens",implementation:"Create loading spinners, progress bars, and skeleton UI components",icon:"⏳",priority:"medium",impact:"medium",timeEstimate:"1-2 hours",complexity:"beginner",benefits:["Better perceived performance","User feedback","Professional feel"],codeExample:`<div class="loading-spinner">
  <div class="spinner"></div>
  <p>Loading...</p>
</div>`}];return e.industry==="ecommerce"&&r.push({id:"shopping-cart",title:"Shopping Cart",description:"Add cart functionality with add/remove items and checkout",implementation:"Implement cart state management and checkout flow",icon:"🛒",priority:"high",impact:"high",timeEstimate:"4-5 hours",complexity:"intermediate",benefits:["Revenue generation","User convenience","Business functionality"],codeExample:`class ShoppingCart {
  constructor() {
    this.items = [];
    this.total = 0;
  }
  
  addItem(product) {
    this.items.push(product);
    this.calculateTotal();
  }
}`}),e.industry==="healthcare"&&r.push({id:"hipaa-compliance",title:"HIPAA Compliance",description:"Add healthcare data protection and compliance features",implementation:"Implement data encryption, secure forms, and privacy controls",icon:"🏥",priority:"high",impact:"high",timeEstimate:"6-8 hours",complexity:"advanced",benefits:["Legal compliance","Data security","User trust"],codeExample:`function encryptSensitiveData(data) {
  // Implement AES encryption for healthcare data
  return CryptoJS.AES.encrypt(JSON.stringify(data), secretKey).toString();
}`}),r}analyzeContext(e){const t=e.toLowerCase(),r={appType:"web",industry:"general",features:[],targetAudience:"general",complexity:"basic"};return t.includes("mobile")||t.includes("app")?r.appType="mobile":(t.includes("api")||t.includes("backend"))&&(r.appType="backend"),Object.entries({health:"healthcare",food:"food",todo:"productivity",portfolio:"professional",ecommerce:"ecommerce",blog:"media",social:"social",education:"education",finance:"finance",fitness:"fitness"}).forEach(([o,u])=>{t.includes(o)&&(r.industry=u)}),Object.entries({authentication:["login","signup","auth","user"],database:["database","storage","data","persist"],payment:["payment","pay","stripe","paypal"],social:["social","share","comment","like"],"real-time":["real-time","live","instant","websocket"],analytics:["analytics","track","metrics","stats"]}).forEach(([o,u])=>{u.some(d=>t.includes(d))&&r.features.push(o)}),t.includes("complex")||t.includes("advanced")||t.includes("enterprise")||t.includes("professional")?r.complexity="advanced":t.includes("simple")||t.includes("basic")?r.complexity="basic":r.complexity="intermediate",r}generateContextRecommendations(e,t){const r=[];return e.industry==="healthcare"&&r.push({id:this.generateRecommendationId(),type:"compliance",priority:"high",title:"Add HIPAA Compliance Features",description:"Include privacy and security measures for healthcare applications",implementation:"Add data encryption, secure forms, and privacy policy",icon:"🏥",category:"security",context:e,estimatedImpact:"high",implementationTime:"2-3 hours"}),e.industry==="ecommerce"&&r.push({id:this.generateRecommendationId(),type:"feature",priority:"high",title:"Add Shopping Cart Functionality",description:"Include cart management, checkout process, and payment integration",implementation:"Implement cart state management, checkout flow, and payment gateway integration",icon:"🛒",category:"functionality",context:e,estimatedImpact:"high",implementationTime:"4-6 hours"}),e.appType==="mobile"&&r.push({id:this.generateRecommendationId(),type:"feature",priority:"high",title:"Add PWA Features",description:"Make the app installable and work offline",implementation:"Add service worker, manifest file, and offline functionality",icon:"📱",category:"functionality",context:e,estimatedImpact:"high",implementationTime:"3-4 hours"}),e.complexity==="advanced"&&r.push({id:this.generateRecommendationId(),type:"architecture",priority:"medium",title:"Implement State Management",description:"Add proper state management for complex applications",implementation:"Use Redux, Zustand, or Context API for state management",icon:"🏗️",category:"functionality",context:e,estimatedImpact:"medium",implementationTime:"2-3 hours"}),r}calculateImpact(e){return{high:"high",medium:"medium",low:"low"}[e]||"medium"}estimateImplementationTime(e){return{design:"1-2 hours",functionality:"2-4 hours",performance:"1-3 hours",accessibility:"1-2 hours",seo:"30 minutes - 1 hour",security:"2-4 hours",compliance:"3-6 hours",architecture:"4-8 hours"}[e]||"1-2 hours"}prioritizeRecommendations(e){const t={high:3,medium:2,low:1};return e.sort((r,s)=>{const i=t[s.priority]-t[r.priority];if(i!==0)return i;const o={security:4,accessibility:3,seo:2,performance:1};return(o[s.category]||0)-(o[r.category]||0)})}generateRecommendationId(){return`rec_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getRecommendationCategories(){return{design:{name:"Design & UX",icon:"🎨",description:"Visual design, user experience, and interface improvements"},functionality:{name:"Functionality",icon:"⚡",description:"Features, interactions, and user engagement"},performance:{name:"Performance",icon:"🚀",description:"Speed, optimization, and resource management"},accessibility:{name:"Accessibility",icon:"♿",description:"Inclusive design and screen reader support"},seo:{name:"SEO & Discovery",icon:"🔍",description:"Search engine optimization and discoverability"},security:{name:"Security",icon:"🔒",description:"Data protection and security measures"}}}getImplementationGuidance(e){const t={design:{steps:["1. Analyze current design patterns","2. Research modern UI/UX trends","3. Create responsive CSS framework","4. Add animations and transitions","5. Test across different devices"],tools:["CSS Grid","Flexbox","CSS Variables","Media Queries"],examples:["Material Design","Bootstrap","Tailwind CSS"]},functionality:{steps:["1. Identify user interaction points","2. Implement event handlers","3. Add form validation","4. Create dynamic content updates","5. Test user flows"],tools:["JavaScript ES6+","DOM API","Fetch API","Local Storage"],examples:["Form validation","Dynamic lists","Modal dialogs"]},performance:{steps:["1. Audit current performance","2. Optimize images and assets","3. Implement lazy loading","4. Minify CSS and JavaScript","5. Use CDN for static assets"],tools:["Webpack","Parcel","Vite","Image Optimization"],examples:["Code splitting","Lazy loading","Service Workers"]},accessibility:{steps:["1. Audit current accessibility","2. Add semantic HTML","3. Include ARIA labels","4. Test with screen readers","5. Ensure keyboard navigation"],tools:["ARIA","Semantic HTML","Screen Readers","axe-core"],examples:["Alt text","Focus management","Color contrast"]},seo:{steps:["1. Research target keywords","2. Optimize meta tags","3. Add structured data","4. Improve page speed","5. Create XML sitemap"],tools:["Google Analytics","Search Console","Schema.org","Meta Tags"],examples:["Open Graph","Twitter Cards","JSON-LD"]},security:{steps:["1. Identify security vulnerabilities","2. Implement input validation","3. Add CSRF protection","4. Use HTTPS","5. Regular security audits"],tools:["Input Validation","HTTPS","CSRF Tokens","Content Security Policy"],examples:["Form validation","Secure headers","Data encryption"]}};return t[e.type]||t.functionality}analyzeProductionReadiness(e,t=""){const r={overallScore:0,readinessLevel:"not-ready",categories:{},criticalIssues:[],warnings:[],recommendations:[],deploymentReadiness:{firebase:!1,github:!1,vercel:!1,netlify:!1},nextSteps:[]};r.categories.design=this.analyzeDesignReadiness(e),r.categories.functionality=this.analyzeFunctionalityReadiness(e),r.categories.performance=this.analyzePerformanceReadiness(e),r.categories.accessibility=this.analyzeAccessibilityReadiness(e),r.categories.seo=this.analyzeSEOReadiness(e),r.categories.security=this.analyzeSecurityReadiness(e),r.categories.codeQuality=this.analyzeCodeQualityReadiness(e);const s=Object.values(r.categories).map(i=>i.score);return r.overallScore=Math.round(s.reduce((i,o)=>i+o,0)/s.length),r.overallScore>=90?r.readinessLevel="production-ready":r.overallScore>=75?r.readinessLevel="near-ready":r.overallScore>=60?r.readinessLevel="needs-improvement":r.readinessLevel="not-ready",r.criticalIssues=this.identifyCriticalIssues(r.categories),r.warnings=this.generateWarnings(r.categories),r.deploymentReadiness=this.analyzeDeploymentReadiness(e,r),r.nextSteps=this.generateNextSteps(r),r}analyzeDesignReadiness(e){const t={hasCSS:!!e["style.css"]&&e["style.css"].length>100,hasResponsiveDesign:e["style.css"]?.includes("@media")||!1,hasModernStyling:e["style.css"]?.includes("flexbox")||e["style.css"]?.includes("grid")||!1,hasAnimations:e["style.css"]?.includes("animation")||e["style.css"]?.includes("transition")||!1,hasConsistentColors:e["style.css"]?.includes("--")||e["style.css"]?.includes("color:")||!1},r=Object.values(t).filter(Boolean).length*20,s=[];return t.hasCSS||s.push("Missing CSS styling"),t.hasResponsiveDesign||s.push("Not responsive for mobile devices"),t.hasModernStyling||s.push("Using outdated CSS techniques"),t.hasAnimations||s.push("No animations or transitions"),t.hasConsistentColors||s.push("Inconsistent color scheme"),{score:r,checks:t,issues:s,recommendations:[!t.hasCSS&&"Add comprehensive CSS styling",!t.hasResponsiveDesign&&"Implement responsive design with media queries",!t.hasModernStyling&&"Use modern CSS Grid or Flexbox",!t.hasAnimations&&"Add smooth transitions and hover effects",!t.hasConsistentColors&&"Create a consistent color palette"].filter(Boolean)}}analyzeFunctionalityReadiness(e){const t={hasJavaScript:!!e["script.js"]&&e["script.js"].length>50,hasErrorHandling:e["script.js"]?.includes("try")||e["script.js"]?.includes("catch")||!1,hasFormValidation:e["script.js"]?.includes("validate")||e["index.html"]?.includes("required")||!1,hasUserInteraction:e["script.js"]?.includes("addEventListener")||e["script.js"]?.includes("onclick")||!1,hasDataPersistence:e["script.js"]?.includes("localStorage")||e["script.js"]?.includes("fetch")||!1},r=Object.values(t).filter(Boolean).length*20,s=[];return t.hasJavaScript||s.push("No JavaScript functionality"),t.hasErrorHandling||s.push("No error handling implemented"),t.hasFormValidation||s.push("No form validation"),t.hasUserInteraction||s.push("Limited user interaction"),t.hasDataPersistence||s.push("No data persistence"),{score:r,checks:t,issues:s,recommendations:[!t.hasJavaScript&&"Add JavaScript functionality",!t.hasErrorHandling&&"Implement proper error handling",!t.hasFormValidation&&"Add form validation",!t.hasUserInteraction&&"Add interactive features",!t.hasDataPersistence&&"Implement data storage"].filter(Boolean)}}analyzePerformanceReadiness(e){const t={hasOptimizedImages:e["index.html"]?.includes('loading="lazy"')||!1,hasMinifiedCode:e["script.js"]?.length<5e3||!1,hasEfficientCSS:e["style.css"]?.length<1e4||!1,hasNoBlockingScripts:!e["index.html"]?.includes("script src")||e["index.html"]?.includes("async")||!1,hasCDNReady:e["index.html"]?.includes("https://")||!1},r=Object.values(t).filter(Boolean).length*20,s=[];return t.hasOptimizedImages||s.push("Images not optimized for loading"),t.hasMinifiedCode||s.push("JavaScript code not optimized"),t.hasEfficientCSS||s.push("CSS could be more efficient"),t.hasNoBlockingScripts||s.push("Scripts may block page loading"),t.hasCDNReady||s.push("Not ready for CDN deployment"),{score:r,checks:t,issues:s,recommendations:[!t.hasOptimizedImages&&"Add lazy loading to images",!t.hasMinifiedCode&&"Minify JavaScript code",!t.hasEfficientCSS&&"Optimize CSS for better performance",!t.hasNoBlockingScripts&&"Make scripts non-blocking",!t.hasCDNReady&&"Prepare for CDN deployment"].filter(Boolean)}}analyzeAccessibilityReadiness(e){const t={hasAltText:!e["index.html"]?.includes("<img")||e["index.html"]?.includes("alt=")||!1,hasSemanticHTML:e["index.html"]?.includes("<header>")||e["index.html"]?.includes("<main>")||!1,hasARIALabels:e["index.html"]?.includes("aria-")||!1,hasFormLabels:!e["index.html"]?.includes("<input")||e["index.html"]?.includes("<label")||!1,hasKeyboardNavigation:e["script.js"]?.includes("keydown")||e["script.js"]?.includes("tabIndex")||!1},r=Object.values(t).filter(Boolean).length*20,s=[];return t.hasAltText||s.push("Images missing alt text"),t.hasSemanticHTML||s.push("Not using semantic HTML"),t.hasARIALabels||s.push("Missing ARIA labels"),t.hasFormLabels||s.push("Form inputs missing labels"),t.hasKeyboardNavigation||s.push("Limited keyboard navigation"),{score:r,checks:t,issues:s,recommendations:[!t.hasAltText&&"Add alt text to all images",!t.hasSemanticHTML&&"Use semantic HTML elements",!t.hasARIALabels&&"Add ARIA labels for screen readers",!t.hasFormLabels&&"Add labels to form inputs",!t.hasKeyboardNavigation&&"Implement keyboard navigation"].filter(Boolean)}}analyzeSEOReadiness(e){const t={hasTitle:e["index.html"]?.includes("<title>")&&!e["index.html"]?.includes("<title>Untitled</title>"),hasMetaDescription:e["index.html"]?.includes('meta name="description"')||!1,hasMetaKeywords:e["index.html"]?.includes('meta name="keywords"')||!1,hasOpenGraph:e["index.html"]?.includes("og:")||!1,hasStructuredData:e["index.html"]?.includes("schema.org")||!1},r=Object.values(t).filter(Boolean).length*20,s=[];return t.hasTitle||s.push("Missing or generic page title"),t.hasMetaDescription||s.push("No meta description"),t.hasMetaKeywords||s.push("No meta keywords"),t.hasOpenGraph||s.push("No Open Graph tags"),t.hasStructuredData||s.push("No structured data"),{score:r,checks:t,issues:s,recommendations:[!t.hasTitle&&"Add descriptive page title",!t.hasMetaDescription&&"Add meta description for SEO",!t.hasMetaKeywords&&"Add relevant meta keywords",!t.hasOpenGraph&&"Add Open Graph tags for social sharing",!t.hasStructuredData&&"Add structured data markup"].filter(Boolean)}}analyzeSecurityReadiness(e){const t={hasHTTPS:e["index.html"]?.includes("https://")||!1,hasInputValidation:e["script.js"]?.includes("validate")||e["index.html"]?.includes("required")||!1,hasCSRFProtection:e["index.html"]?.includes("csrf")||!1,hasSecurityHeaders:e["index.html"]?.includes("Content-Security-Policy")||!1,hasSecureForms:!e["index.html"]?.includes("<form")||e["index.html"]?.includes('method="post"')||!1},r=Object.values(t).filter(Boolean).length*20,s=[];return t.hasHTTPS||s.push("Not using HTTPS"),t.hasInputValidation||s.push("No input validation"),t.hasCSRFProtection||s.push("No CSRF protection"),t.hasSecurityHeaders||s.push("No security headers"),t.hasSecureForms||s.push("Forms not secure"),{score:r,checks:t,issues:s,recommendations:[!t.hasHTTPS&&"Use HTTPS for all connections",!t.hasInputValidation&&"Add input validation",!t.hasCSRFProtection&&"Implement CSRF protection",!t.hasSecurityHeaders&&"Add security headers",!t.hasSecureForms&&"Secure form submissions"].filter(Boolean)}}analyzeCodeQualityReadiness(e){const t={hasComments:e["script.js"]?.includes("//")||e["style.css"]?.includes("/*")||!1,hasConsistentFormatting:!0,hasErrorHandling:e["script.js"]?.includes("try")||e["script.js"]?.includes("catch")||!1,hasModularCode:e["script.js"]?.includes("function")||!1,hasNoConsoleErrors:!e["script.js"]?.includes("console.error")||!1},r=Object.values(t).filter(Boolean).length*20,s=[];return t.hasComments||s.push("Code lacks documentation"),t.hasErrorHandling||s.push("No error handling"),t.hasModularCode||s.push("Code not modular"),t.hasNoConsoleErrors||s.push("Has console errors"),{score:r,checks:t,issues:s,recommendations:[!t.hasComments&&"Add code comments and documentation",!t.hasErrorHandling&&"Implement comprehensive error handling",!t.hasModularCode&&"Break code into functions",!t.hasNoConsoleErrors&&"Remove console errors"].filter(Boolean)}}identifyCriticalIssues(e){const t=[];return Object.entries(e).forEach(([r,s])=>{s.score<40&&t.push({category:r,score:s.score,issues:s.issues,priority:"critical"})}),t}generateWarnings(e){const t=[];return Object.entries(e).forEach(([r,s])=>{s.score>=40&&s.score<70&&t.push({category:r,score:s.score,issues:s.issues,priority:"warning"})}),t}analyzeDeploymentReadiness(e,t){const r={firebase:!1,github:!1,vercel:!1,netlify:!1};return e["index.html"]&&e["style.css"]&&t.overallScore>=60&&(r.firebase=!0),e["index.html"]&&t.overallScore>=50&&(r.github=!0),e["index.html"]&&e["package.json"]&&t.overallScore>=70&&(r.vercel=!0),e["index.html"]&&t.overallScore>=60&&(r.netlify=!0),r}generateNextSteps(e){const t=[];return e.readinessLevel==="not-ready"&&t.push({priority:"high",action:"Fix Critical Issues",description:"Address all critical issues before deployment",estimatedTime:"2-4 hours"}),e.readinessLevel==="needs-improvement"&&t.push({priority:"medium",action:"Improve Core Features",description:"Enhance functionality and user experience",estimatedTime:"1-3 hours"}),e.readinessLevel==="near-ready"&&t.push({priority:"low",action:"Polish and Optimize",description:"Fine-tune performance and add final touches",estimatedTime:"30 minutes - 1 hour"}),e.readinessLevel==="production-ready"&&t.push({priority:"low",action:"Deploy to Production",description:"Your app is ready for live deployment!",estimatedTime:"10-30 minutes"}),t}}const yC=new pW,mW=({isOpen:n,onClose:e})=>{const{currentProject:t}=Jo(),[r,s]=A.useState([]),[i,o]=A.useState(null),[u,d]=A.useState(!1),[p,f]=A.useState("recommendations"),[y,x]=A.useState(new Set);A.useEffect(()=>{n&&t.files&&S()},[n,t.files]);const S=async()=>{d(!0);try{const j=yC.analyzeApplication(t.files,t.prompt||"");s(j);const C=yC.analyzeProductionReadiness(t.files,t.prompt||"");o(C)}catch(j){console.error("Analysis failed:",j)}finally{d(!1)}},E=j=>{switch(j){case"high":return"text-red-500 bg-red-50 border-red-200";case"medium":return"text-yellow-600 bg-yellow-50 border-yellow-200";case"low":return"text-green-600 bg-green-50 border-green-200";default:return"text-gray-600 bg-gray-50 border-gray-200"}},k=j=>{switch(j){case"production-ready":return"text-green-600 bg-green-50";case"near-ready":return"text-blue-600 bg-blue-50";case"needs-improvement":return"text-yellow-600 bg-yellow-50";case"not-ready":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},I=j=>{switch(j){case"design":return c.jsx(Sj,{className:"h-4 w-4"});case"functionality":return c.jsx(Rt,{className:"h-4 w-4"});case"performance":return c.jsx(Jr,{className:"h-4 w-4"});case"accessibility":return c.jsx(Ih,{className:"h-4 w-4"});case"seo":return c.jsx(Kr,{className:"h-4 w-4"});case"security":return c.jsx(Ch,{className:"h-4 w-4"});default:return c.jsx(wb,{className:"h-4 w-4"})}},M=j=>{navigator.clipboard.writeText(j)};return n?c.jsx(Ts,{children:c.jsxs(ge.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"fixed right-0 top-0 h-full w-96 bg-white border-l border-gray-200 shadow-xl z-50 flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[c.jsx(wb,{className:"h-5 w-5 text-yellow-500"}),"AI Recommendations"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-200 rounded-md transition-colors",children:c.jsx(Ah,{className:"h-5 w-5 text-gray-500"})})]}),c.jsxs("div",{className:"flex gap-1 mt-3",children:[c.jsx("button",{onClick:()=>f("recommendations"),className:`px-3 py-1 text-sm rounded-md transition-colors ${p==="recommendations"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Recommendations"}),c.jsx("button",{onClick:()=>f("production"),className:`px-3 py-1 text-sm rounded-md transition-colors ${p==="production"?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"Production Ready?"})]})]}),c.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:u?c.jsx("div",{className:"flex items-center justify-center h-32",children:c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):c.jsxs(c.Fragment,{children:[p==="recommendations"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"text-sm text-gray-600 mb-4",children:[r.length," recommendations found"]}),r.map(j=>c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"border border-gray-200 rounded-lg p-4 bg-white shadow-sm",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("div",{className:"p-2 bg-gray-100 rounded-lg",children:I(j.category)}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-medium text-gray-900",children:j.title}),c.jsx("p",{className:"text-sm text-gray-600 mt-1",children:j.description})]})]}),c.jsx("span",{className:`px-2 py-1 text-xs rounded-full border ${E(j.priority)}`,children:j.priority})]}),c.jsx("div",{className:"mb-3",children:c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("strong",{children:"Implementation:"})," ",j.implementation]})}),j.benefits&&c.jsxs("div",{className:"mb-3",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Benefits:"}),c.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:j.benefits.map((C,F)=>c.jsxs("li",{className:"flex items-center gap-2",children:[c.jsx(Ja,{className:"h-3 w-3 text-green-500"}),C]},F))})]}),j.codeExample&&c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Code Example:"}),c.jsx("button",{onClick:()=>M(j.codeExample),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Copy code",children:c.jsx(rp,{className:"h-3 w-3 text-gray-500"})})]}),c.jsx("pre",{className:"bg-gray-100 p-3 rounded text-xs overflow-x-auto",children:c.jsx("code",{children:j.codeExample})})]}),c.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-gray-100",children:[c.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Eu,{className:"h-3 w-3"}),j.implementationTime]}),j.complexity&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Dw,{className:"h-3 w-3"}),j.complexity]})]}),c.jsxs("button",{className:"text-xs text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[c.jsx(Tb,{className:"h-3 w-3"}),"Apply"]})]})]},j.id)),r.length===0&&c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Ja,{className:"h-12 w-12 mx-auto mb-3 text-green-500"}),c.jsx("p",{children:"No recommendations found!"}),c.jsx("p",{className:"text-sm",children:"Your application looks great."})]})]}),p==="production"&&i&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:"Production Readiness"}),c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${k(i.readinessLevel)}`,children:i.readinessLevel.replace("-"," ").toUpperCase()})]}),c.jsx("div",{className:"flex items-center gap-3",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Overall Score"}),c.jsxs("span",{className:"text-sm font-medium",children:[i.overallScore,"/100"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-500",style:{width:`${i.overallScore}%`}})})]})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsx("h5",{className:"font-medium text-gray-900",children:"Category Analysis"}),Object.entries(i.categories).map(([j,C])=>c.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[I(j),c.jsx("span",{className:"text-sm font-medium capitalize",children:j})]}),c.jsxs("span",{className:"text-sm font-medium",children:[C.score,"/100"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mb-2",children:c.jsx("div",{className:`h-1.5 rounded-full transition-all duration-500 ${C.score>=80?"bg-green-500":C.score>=60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${C.score}%`}})}),C.issues.length>0&&c.jsxs("div",{className:"text-xs text-gray-600",children:["Issues: ",C.issues.join(", ")]})]},j))]}),i.criticalIssues.length>0&&c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-red-800 mb-3 flex items-center gap-2",children:[c.jsx(gj,{className:"h-4 w-4"}),"Critical Issues"]}),c.jsx("div",{className:"space-y-2",children:i.criticalIssues.map((j,C)=>c.jsxs("div",{className:"text-sm text-red-700",children:[c.jsxs("strong",{children:[j.category,":"]})," ",j.issues.join(", ")]},C))})]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsxs("h5",{className:"font-medium text-green-800 mb-3 flex items-center gap-2",children:[c.jsx(ul,{className:"h-4 w-4"}),"Deployment Options"]}),c.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(i.deploymentReadiness).map(([j,C])=>c.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[C?c.jsx(Ja,{className:"h-4 w-4 text-green-500"}):c.jsx(Ah,{className:"h-4 w-4 text-red-500"}),c.jsx("span",{className:"capitalize",children:j})]},j))})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsx("h5",{className:"font-medium text-blue-800 mb-3",children:"Next Steps"}),c.jsx("div",{className:"space-y-2",children:i.nextSteps.map((j,C)=>c.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[c.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${j.priority==="high"?"bg-red-500 text-white":j.priority==="medium"?"bg-yellow-500 text-white":"bg-green-500 text-white"}`,children:C+1}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"font-medium text-blue-900",children:j.action}),c.jsx("p",{className:"text-blue-700",children:j.description}),c.jsxs("p",{className:"text-blue-600 text-xs mt-1",children:["Estimated time: ",j.estimatedTime]})]})]},C))})]})]})]})}),c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:S,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 transition-colors text-sm font-medium",children:"Refresh Analysis"}),c.jsx("button",{onClick:e,className:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 transition-colors text-sm",children:"Close"})]})})]})}):null},fW=({isOpen:n,onClose:e,searchResults:t,prompt:r})=>{const[s,i]=A.useState([]),[o,u]=A.useState(!1);A.useEffect(()=>{n&&d()},[n]);const d=()=>{const f=oh.getSearchHistory();i(f)},p=f=>{navigator.clipboard.writeText(f)};return n?c.jsx(Ts,{children:c.jsxs(ge.div,{initial:{opacity:0,y:300},animate:{opacity:1,y:0},exit:{opacity:0,y:300},className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-xl z-50 max-h-[70vh] flex flex-col",children:[c.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[c.jsx(Rs,{className:"h-5 w-5 text-blue-500"}),"Web Knowledge Search"]}),c.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-200 rounded-md transition-colors",children:c.jsx(Ah,{className:"h-5 w-5 text-gray-500"})})]}),r&&c.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:[c.jsx("strong",{children:"Searching for:"})," ",r]})]}),c.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[o?c.jsx("div",{className:"flex items-center justify-center h-32",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"}),c.jsx("span",{className:"text-gray-600",children:"Searching web for current best practices..."})]})}):t?c.jsxs("div",{className:"space-y-6",children:[t.success&&c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[c.jsx(Kr,{className:"h-4 w-4"}),"Search Results Summary"]}),c.jsx("p",{className:"text-blue-800 text-sm mb-2",children:t.knowledge.summary}),c.jsxs("div",{className:"text-xs text-blue-600",children:["Found ",t.resultsCount," relevant sources • Generated ",t.searchQueries.length," search queries"]})]}),t.knowledge?.bestPractices&&c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-green-900 mb-3 flex items-center gap-2",children:[c.jsx(Ja,{className:"h-4 w-4"}),"Current Best Practices Applied"]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:t.knowledge.bestPractices.slice(0,8).map((f,y)=>c.jsxs("div",{className:"flex items-start gap-2 text-sm text-green-800",children:[c.jsx(Ja,{className:"h-3 w-3 text-green-600 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:f})]},y))})]}),t.knowledge?.codeExamples&&Object.keys(t.knowledge.codeExamples).length>0&&c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[c.jsx(Rt,{className:"h-4 w-4"}),"Code Examples & Patterns"]}),c.jsx("div",{className:"space-y-3",children:Object.entries(t.knowledge.codeExamples).map(([f,y])=>c.jsxs("div",{className:"bg-white border border-gray-200 rounded p-3",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:f.replace(/([A-Z])/g," $1").trim()}),c.jsx("button",{onClick:()=>p(y),className:"p-1 hover:bg-gray-100 rounded transition-colors",title:"Copy code",children:c.jsx(rp,{className:"h-3 w-3 text-gray-500"})})]}),c.jsx("pre",{className:"bg-gray-100 p-2 rounded text-xs overflow-x-auto",children:c.jsx("code",{children:y})})]},f))})]}),t.knowledge?.recommendations&&c.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-yellow-900 mb-3 flex items-center gap-2",children:[c.jsx(wb,{className:"h-4 w-4"}),"AI Recommendations"]}),c.jsx("div",{className:"space-y-2",children:t.knowledge.recommendations.map((f,y)=>c.jsxs("div",{className:"flex items-start gap-2 text-sm text-yellow-800",children:[c.jsx(Dw,{className:"h-3 w-3 text-yellow-600 mt-0.5 flex-shrink-0"}),c.jsx("span",{children:f})]},y))})]}),t.knowledge?.resources&&c.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-purple-900 mb-3 flex items-center gap-2",children:[c.jsx(eh,{className:"h-4 w-4"}),"Knowledge Sources"]}),c.jsx("div",{className:"space-y-2",children:t.knowledge.resources.slice(0,5).map((f,y)=>c.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[c.jsx(ul,{className:"h-3 w-3 text-purple-600 mt-0.5 flex-shrink-0"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-medium text-purple-900",children:f.title}),c.jsx("div",{className:"text-purple-700",children:f.snippet})]})]},y))})]}),t.searchQueries&&c.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[c.jsx(Kr,{className:"h-4 w-4"}),"Search Queries Used"]}),c.jsx("div",{className:"flex flex-wrap gap-2",children:t.searchQueries.map((f,y)=>c.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:f},y))})]})]}):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Rs,{className:"h-12 w-12 mx-auto mb-3 text-gray-400"}),c.jsx("p",{children:"No web search results available"}),c.jsx("p",{className:"text-sm",children:"Web knowledge search will enhance your generated code with current best practices."})]}),s.length>0&&c.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[c.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center gap-2",children:[c.jsx(Eu,{className:"h-4 w-4"}),"Recent Searches"]}),c.jsx("div",{className:"space-y-2",children:s.slice(0,5).map((f,y)=>c.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[c.jsx("span",{className:"text-gray-700",children:f.query}),c.jsx("span",{className:"text-gray-500 text-xs",children:new Date(f.timestamp).toLocaleTimeString()})]},y))})]})]}),c.jsx("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:c.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("span",{children:"🔍 Web search enhances code with current best practices"}),c.jsx("span",{children:"•"}),c.jsxs("span",{children:["Cache: ",oh.getCacheStats().cacheSize," items"]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>oh.clearCache(),className:"px-3 py-1 bg-gray-200 hover:bg-gray-300 rounded transition-colors text-xs",children:"Clear Cache"}),c.jsx("button",{onClick:e,className:"px-3 py-1 bg-blue-500 text-white hover:bg-blue-600 rounded transition-colors text-xs",children:"Close"})]})]})})]})}):null},gW=()=>{const{currentProject:n,updateFile:e,updateConfig:t}=Jo(),[r,s]=A.useState(""),[i,o]=A.useState(!1),[u,d]=A.useState(!1),[p,f]=A.useState(!1),[y,x]=A.useState(!1),[S,E]=A.useState(!1),[k,I]=A.useState(!1),[M,j]=A.useState(null),[C,F]=A.useState("local-ai"),[G,q]=A.useState("llama3-8b-8192"),[N,_]=A.useState([]),[R,O]=A.useState([]),[B,z]=A.useState({}),L=A.useRef(null);A.useEffect(()=>{L.current&&(L.current.style.height="auto",L.current.style.height=L.current.scrollHeight+"px")},[r]),A.useEffect(()=>{z(Qe?.getServiceStatus?Qe.getServiceStatus():{});const ie=setInterval(()=>{z(Qe?.getServiceStatus?Qe.getServiceStatus():{})},3e4);return()=>clearInterval(ie)},[]),A.useEffect(()=>{r.length>10?Te():_([])},[r]);const Te=()=>{const ie=r.toLowerCase(),se=[];(ie.includes("health")||ie.includes("food"))&&(se.push({text:"Add nutrition calculator",type:"feature",icon:"🧮"}),se.push({text:"Include meal planning calendar",type:"feature",icon:"📅"})),(ie.includes("todo")||ie.includes("task"))&&(se.push({text:"Add due dates and reminders",type:"feature",icon:"⏰"}),se.push({text:"Include priority levels",type:"feature",icon:"⭐"})),(ie.includes("portfolio")||ie.includes("resume"))&&(se.push({text:"Add contact form",type:"feature",icon:"📧"}),se.push({text:"Include project gallery",type:"feature",icon:"🖼️"})),se.push({text:"Make it responsive",type:"improvement",icon:"📱"}),se.push({text:"Add dark mode",type:"improvement",icon:"🌙"}),_(se.slice(0,4))},Ce=async()=>{if(!r.trim()){Me.error("Please enter a description of what you want to build");return}o(!0);try{if(O(U=>[r,...U.slice(0,4)]),console.log("AI Service object:",Qe),console.log("AI Service generateCode method:",typeof Qe?.generateCode),!Qe||typeof Qe.generateCode!="function")throw new Error("AI Service not properly initialized. generateCode method not found.");const ie={...n.config,prompt:r},se=await Qe.generateCode(r,ie);se._webSearchResults&&(j(se._webSearchResults),delete se._webSearchResults),Object.entries(se).forEach(([U,te])=>{e(U,te)}),we(r),Me.success("Code generated successfully!"),s("")}catch(ie){console.error("AI generation error:",ie),Me.error("Failed to generate code: "+ie.message)}finally{o(!1)}},we=ie=>{const se=ie.toLowerCase(),U={...n.config};se.includes("mobile")||se.includes("app")?U.appType="mobile":se.includes("api")||se.includes("backend")?U.appType="backend":(se.includes("frontend")||se.includes("website"))&&(U.appType="frontend"),se.includes("typescript")||se.includes("ts")?U.language="typescript":se.includes("python")?U.language="python":se.includes("java")&&(U.language="java"),se.includes("bootstrap")?U.styling="bootstrap":se.includes("material")?U.styling="material":U.styling="tailwind",t(U)},$e=ie=>{ie.key==="Enter"&&(ie.ctrlKey||ie.metaKey)&&(ie.preventDefault(),Ce())},le=Qe?.getServices?Qe.getServices():{};return c.jsxs(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"h-full flex flex-col bg-card border border-border rounded-lg overflow-hidden",children:[c.jsxs("div",{className:"p-3 border-b border-border bg-muted/50",children:[c.jsxs("div",{className:"flex items-center justify-between mb-3",children:[c.jsxs("h3",{className:"font-semibold text-sm flex items-center gap-2",children:[c.jsx(kh,{className:"h-4 w-4"}),"AI Assistant"]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-xs text-muted-foreground bg-muted px-2 py-1 rounded",children:Qe?.currentService||"local-ai"}),c.jsx("button",{onClick:()=>x(!0),className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Browse Templates (1000+)",children:c.jsx(Rt,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>E(!0),className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded transition-colors",title:"AI Recommendations & Production Analysis",children:c.jsx(kh,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>I(!0),className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded transition-colors",title:"Web Knowledge Search",children:c.jsx(Kr,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>f(!0),className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded transition-colors",title:"AI Service Status",children:c.jsx(Zd,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>d(!0),className:"p-1 hover:bg-blue-100 dark:hover:bg-blue-900/20 rounded transition-colors",title:"AI Settings",children:c.jsx(Es,{className:"h-4 w-4"})})]})]}),c.jsxs("div",{className:"flex items-center justify-between text-xs",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-muted-foreground",children:B[Qe?.currentService||"local-ai"]?.isHealthy?"AI Ready":"Demo Mode"})]}),c.jsx("span",{children:"•"}),c.jsx("span",{className:"text-muted-foreground",children:Qe?.isFallbackEnabled?Qe.isFallbackEnabled()?"Fallback Enabled":"Single Service":"Local AI Only"})]}),c.jsx("button",{onClick:()=>f(!0),className:"text-xs text-primary hover:underline",children:"Details"})]})]}),c.jsx("div",{className:"flex-1 p-3 space-y-3",children:c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Describe what you want to build"}),c.jsxs("div",{className:"relative",children:[c.jsx("textarea",{ref:L,value:r,onChange:ie=>s(ie.target.value),onKeyPress:$e,placeholder:"Create a healthy food tips website with nutrition advice and meal planning features...",className:"w-full p-3 border border-border rounded-md bg-black resize-none min-h-[120px] focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",disabled:i}),c.jsxs("div",{className:"absolute bottom-2 right-2 text-xs text-muted-foreground",children:[r.length,"/2000"]})]})]})}),c.jsxs("div",{className:"p-3 border-t border-border",children:[c.jsx("button",{onClick:Ce,disabled:!r.trim()||i,className:"w-full flex items-center justify-center gap-2 p-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-md hover:from-blue-700 hover:to-blue-800 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg shadow-blue-500/30 border border-blue-500/20",children:i?c.jsxs(c.Fragment,{children:[c.jsx(qg,{className:"h-4 w-4 animate-spin"}),c.jsx("span",{children:"Generating..."})]}):c.jsxs(c.Fragment,{children:[c.jsx(Jr,{className:"h-4 w-4"}),c.jsx("span",{children:"Generate Code"})]})}),c.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Press Ctrl+Enter to generate"})]}),c.jsx(hW,{isOpen:y,onClose:()=>x(!1),onTemplateSelect:ie=>{console.log("Template selected:",ie)}}),c.jsx(dW,{isOpen:p,onClose:()=>f(!1)}),c.jsx(mW,{isOpen:S,onClose:()=>E(!1)}),c.jsx(fW,{isOpen:k,onClose:()=>I(!1),searchResults:M,prompt:r}),c.jsx(Ts,{children:u&&c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>d(!1),children:c.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg p-6 w-96 max-w-[90vw]",onClick:ie=>ie.stopPropagation(),children:[c.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[c.jsx(zr,{className:"h-5 w-5"}),"AI Settings"]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"AI Service"}),c.jsx("select",{value:C,onChange:ie=>{F(ie.target.value),Qe?.setService&&Qe.setService(ie.target.value)},className:"w-full p-2 border border-border rounded-md bg-black",children:Object.entries(le).map(([ie,se])=>c.jsxs("option",{value:ie,children:[se.name," - ",se.type]},ie))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Model"}),c.jsx("select",{value:G,onChange:ie=>{q(ie.target.value),Qe?.setService&&Qe.setService(ie.target.value)},className:"w-full p-2 border border-border rounded-md bg-black",children:Object.entries(le[C]?.models||{}).map(([ie,se])=>c.jsx("option",{value:ie,children:se},ie))})]}),c.jsxs("div",{className:"p-3 bg-muted rounded-md",children:[c.jsx("h4",{className:"text-sm font-medium mb-2",children:"Service Info"}),c.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Type:"})," ",le[C]?.type]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Cost:"})," Free tier available"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Features:"})," Fast inference, modern models"]})]})]}),c.jsx("div",{className:"flex gap-2 justify-end",children:c.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-sm border border-border rounded-md hover:bg-muted transition-colors",children:"Close"})})]})]})})})]})};var bc={};class yW{constructor(){this.app=null,this.db=null,this.auth=null,this.user=null,this.listeners=new Map,this.cursors=new Map,this.comments=new Map,this.isInitialized=!1}async initialize(){try{if(this.isInitialized)return;const e={apiKey:bc.REACT_APP_FIREBASE_API_KEY||"your-api-key",authDomain:bc.REACT_APP_FIREBASE_AUTH_DOMAIN||"your-project.firebaseapp.com",projectId:bc.REACT_APP_FIREBASE_PROJECT_ID||"your-project-id",storageBucket:bc.REACT_APP_FIREBASE_STORAGE_BUCKET||"your-project.appspot.com",messagingSenderId:bc.REACT_APP_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:bc.REACT_APP_FIREBASE_APP_ID||"your-app-id"};this.app=po(e),this.db=Lg(this.app),this.auth=x0(this.app),g0(this.auth,t=>{this.user=t,console.log("Collaboration auth state changed:",t?"authenticated":"not authenticated")}),this.isInitialized=!0,console.log("🤝 Collaboration service initialized successfully")}catch(e){throw console.error("❌ Failed to initialize collaboration service:",e),e}}async joinProject(e,t){try{await this.initialize();const r={id:this.user?.uid||"anonymous",name:t.name||"Anonymous User",email:t.email||"",avatar:t.avatar||"",color:t.color||this.generateUserColor(),joinedAt:new Date().toISOString(),isOnline:!0},s=pt(this.db,"projectPresence",`${e}_${r.id}`);return await Md(s,r).catch(()=>Ic(An(this.db,"projectPresence"),{projectId:e,userId:r.id,...r})),console.log("✅ User joined project collaboration"),r}catch(r){throw console.error("❌ Failed to join project:",r),r}}async leaveProject(e){try{await this.initialize();const t=pt(this.db,"projectPresence",`${e}_${this.user?.uid}`);await Md(t,{isOnline:!1,leftAt:new Date().toISOString()}),console.log("✅ User left project collaboration")}catch(t){console.error("❌ Failed to leave project:",t)}}async getOnlineUsers(e){try{await this.initialize();const t=An(this.db,"projectPresence"),r=Er(t,Nn("projectId","==",e),Nn("isOnline","==",!0));return new Promise(s=>{const i=co(r,o=>{const u=[];o.forEach(d=>{u.push(d.data())}),s(u)});this.listeners.set(`onlineUsers_${e}`,i)})}catch(t){return console.error("❌ Failed to get online users:",t),[]}}async updateCursor(e,t,r){try{await this.initialize();const s=pt(this.db,"cursors",`${e}_${t}_${this.user?.uid}`);await Md(s,{projectId:e,fileId:t,userId:this.user?.uid,position:r,updatedAt:ei()}).catch(()=>Ic(An(this.db,"cursors"),{projectId:e,fileId:t,userId:this.user?.uid,position:r,createdAt:ei(),updatedAt:ei()})),this.cursors.set(`${e}_${t}_${this.user?.uid}`,{position:r,updatedAt:new Date})}catch(s){console.error("❌ Failed to update cursor:",s)}}async listenToCursors(e,t,r){try{await this.initialize();const s=An(this.db,"cursors"),i=Er(s,Nn("projectId","==",e),Nn("fileId","==",t)),o=co(i,u=>{const d=[];u.forEach(p=>{const f=p.data();f.userId!==this.user?.uid&&d.push({id:p.id,...f})}),r(d)});this.listeners.set(`cursors_${e}_${t}`,o)}catch(s){console.error("❌ Failed to listen to cursors:",s)}}async addComment(e,t,r,s,i=null){try{await this.initialize();const o={projectId:e,fileId:t,lineNumber:r,content:s,parentId:i,userId:this.user?.uid,userName:this.user?.displayName||"Anonymous",userAvatar:this.user?.photoURL||"",createdAt:ei(),updatedAt:ei(),isResolved:!1,reactions:{}},u=await Ic(An(this.db,"comments"),o);return console.log("✅ Comment added successfully"),{id:u.id,...o}}catch(o){throw console.error("❌ Failed to add comment:",o),o}}async getComments(e,t){try{await this.initialize();const r=An(this.db,"comments"),s=Er(r,Nn("projectId","==",e),Nn("fileId","==",t),pf("createdAt","asc"));return new Promise(i=>{const o=co(s,u=>{const d=[];u.forEach(p=>{d.push({id:p.id,...p.data()})}),i(d)});this.listeners.set(`comments_${e}_${t}`,o)})}catch(r){return console.error("❌ Failed to get comments:",r),[]}}async updateComment(e,t){try{await this.initialize();const r=pt(this.db,"comments",e);await Md(r,{...t,updatedAt:ei()}),console.log("✅ Comment updated successfully")}catch(r){throw console.error("❌ Failed to update comment:",r),r}}async deleteComment(e){try{await this.initialize();const t=pt(this.db,"comments",e);await Yd(t),console.log("✅ Comment deleted successfully")}catch(t){throw console.error("❌ Failed to delete comment:",t),t}}async saveVersion(e,t){try{await this.initialize();const r={projectId:e,versionNumber:t.versionNumber,description:t.description||"Auto-save",files:t.files,userId:this.user?.uid,userName:this.user?.displayName||"Anonymous",createdAt:ei(),changes:t.changes||[],isAutoSave:t.isAutoSave||!1},s=await Ic(An(this.db,"versions"),r);return console.log("✅ Version saved successfully"),{id:s.id,...r}}catch(r){throw console.error("❌ Failed to save version:",r),r}}async getVersionHistory(e,t=50){try{await this.initialize();const r=An(this.db,"versions"),s=Er(r,Nn("projectId","==",e),pf("createdAt","desc"),t(t));return new Promise(i=>{const o=co(s,u=>{const d=[];u.forEach(p=>{d.push({id:p.id,...p.data()})}),i(d)});this.listeners.set(`versions_${e}`,o)})}catch(r){return console.error("❌ Failed to get version history:",r),[]}}async restoreVersion(e,t){try{await this.initialize();const r=pt(this.db,"versions",t),s=await getDoc(r);if(s.exists()){const i=s.data();return await this.saveVersion(e,{versionNumber:`Restored from ${i.versionNumber}`,description:`Restored from version ${i.versionNumber}`,files:i.files,isAutoSave:!1}),console.log("✅ Version restored successfully"),i.files}else throw new Error("Version not found")}catch(r){throw console.error("❌ Failed to restore version:",r),r}}async syncFileChanges(e,t,r){try{await this.initialize();const s={projectId:e,fileId:t,userId:this.user?.uid,userName:this.user?.displayName||"Anonymous",changes:r,timestamp:ei()};await Ic(An(this.db,"fileChanges"),s),console.log("✅ File changes synced successfully")}catch(s){console.error("❌ Failed to sync file changes:",s)}}async listenToFileChanges(e,t,r){try{await this.initialize();const s=An(this.db,"fileChanges"),i=Er(s,Nn("projectId","==",e),Nn("fileId","==",t),pf("timestamp","desc"),limit(10)),o=co(i,u=>{const d=[];u.forEach(p=>{d.push({id:p.id,...p.data()})}),r(d)});this.listeners.set(`fileChanges_${e}_${t}`,o)}catch(s){console.error("❌ Failed to listen to file changes:",s)}}generateUserColor(){const e=["#FF6B6B","#4ECDC4","#45B7D1","#96CEB4","#FFEAA7","#DDA0DD","#98D8C8","#F7DC6F","#BB8FCE","#85C1E9"];return e[Math.floor(Math.random()*e.length)]}cleanup(){this.listeners.forEach(e=>{e()}),this.listeners.clear(),console.log("🧹 Collaboration listeners cleaned up")}async getCollaborationStats(e){try{await this.initialize();const[t,r,s]=await Promise.all([this.getOnlineUsers(e),this.getComments(e,"all"),this.getVersionHistory(e,10)]);return{onlineUsers:t.length,totalComments:r.length,totalVersions:s.length,lastActivity:s[0]?.createdAt||null}}catch(t){return console.error("❌ Failed to get collaboration stats:",t),{onlineUsers:0,totalComments:0,totalVersions:0,lastActivity:null}}}}const Zs=new yW,vW=({projectId:n,fileId:e,onFileChange:t,onVersionRestore:r})=>{const[s,i]=A.useState([]),[o,u]=A.useState([]),[d,p]=A.useState([]),[f,y]=A.useState(""),[x,S]=A.useState(null),[E,k]=A.useState(!1),[I,M]=A.useState(!1),[j,C]=A.useState(!1),[F,G]=A.useState({name:"Anonymous User",email:"",avatar:""});A.useEffect(()=>(n&&q(),()=>{Zs.cleanup()}),[n]);const q=async()=>{try{await Zs.joinProject(n,F),C(!0),Zs.getOnlineUsers(n).then(i),e&&Zs.getComments(n,e).then(u),Zs.getVersionHistory(n).then(p),e&&Zs.listenToFileChanges(n,e,O=>{console.log("File changes received:",O)}),console.log("🤝 Collaboration initialized successfully")}catch(O){console.error("❌ Failed to initialize collaboration:",O)}},N=async()=>{if(!(!f.trim()||!e))try{await Zs.addComment(n,e,x||1,f),y(""),S(null)}catch(O){console.error("❌ Failed to add comment:",O)}},_=async O=>{try{const B=await Zs.restoreVersion(n,O);r&&r(B),console.log("✅ Version restored successfully")}catch(B){console.error("❌ Failed to restore version:",B)}},R=async()=>{try{const O={versionNumber:`v${d.length+1}`,description:prompt("Version description:")||"Manual save",files:{},isAutoSave:!1};await Zs.saveVersion(n,O),console.log("✅ Version saved successfully")}catch(O){console.error("❌ Failed to save version:",O)}};return c.jsxs("div",{className:"collaboration-panel",children:[c.jsxs("div",{className:"collaboration-header",children:[c.jsx("h3",{children:"🤝 Real-time Collaboration"}),c.jsx("div",{className:"collaboration-status",children:j?c.jsx("span",{className:"status-online",children:"● Online"}):c.jsx("span",{className:"status-offline",children:"● Offline"})})]}),c.jsxs("div",{className:"collaboration-section",children:[c.jsxs("h4",{children:["👥 Online Users (",s.length,")"]}),c.jsx("div",{className:"users-list",children:s.map((O,B)=>c.jsxs("div",{className:"user-item",children:[c.jsx("div",{className:"user-avatar",style:{backgroundColor:O.color},children:O.name.charAt(0).toUpperCase()}),c.jsx("span",{className:"user-name",children:O.name})]},O.id||B))})]}),c.jsxs("div",{className:"collaboration-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h4",{children:["💬 Comments (",o.length,")"]}),c.jsx("button",{className:"btn btn-sm",onClick:()=>k(!E),children:E?"Hide":"Show"})]}),E&&c.jsxs("div",{className:"comments-container",children:[c.jsxs("div",{className:"add-comment",children:[c.jsx("textarea",{value:f,onChange:O=>y(O.target.value),placeholder:"Add a comment...",rows:"3"}),c.jsxs("div",{className:"comment-actions",children:[c.jsx("span",{className:"line-info",children:x?`Line ${x}`:"Select a line to comment"}),c.jsx("button",{className:"btn btn-primary btn-sm",onClick:N,disabled:!f.trim(),children:"Add Comment"})]})]}),c.jsx("div",{className:"comments-list",children:o.map(O=>c.jsxs("div",{className:"comment-item",children:[c.jsxs("div",{className:"comment-header",children:[c.jsxs("div",{className:"comment-author",children:[c.jsx("div",{className:"author-avatar",style:{backgroundColor:O.userColor||"#007bff"},children:O.userName.charAt(0).toUpperCase()}),c.jsx("span",{className:"author-name",children:O.userName})]}),c.jsx("span",{className:"comment-time",children:new Date(O.createdAt?.toDate()).toLocaleString()})]}),c.jsx("div",{className:"comment-content",children:O.content}),c.jsxs("div",{className:"comment-line",children:["Line ",O.lineNumber]})]},O.id))})]})]}),c.jsxs("div",{className:"collaboration-section",children:[c.jsxs("div",{className:"section-header",children:[c.jsxs("h4",{children:["📚 Version History (",d.length,")"]}),c.jsxs("div",{className:"version-actions",children:[c.jsx("button",{className:"btn btn-sm btn-secondary",onClick:()=>M(!I),children:I?"Hide":"Show"}),c.jsx("button",{className:"btn btn-sm btn-primary",onClick:R,children:"Save Version"})]})]}),I&&c.jsx("div",{className:"versions-container",children:c.jsx("div",{className:"versions-list",children:d.map(O=>c.jsxs("div",{className:"version-item",children:[c.jsxs("div",{className:"version-header",children:[c.jsx("span",{className:"version-number",children:O.versionNumber}),c.jsx("span",{className:"version-time",children:new Date(O.createdAt?.toDate()).toLocaleString()})]}),c.jsx("div",{className:"version-description",children:O.description}),c.jsxs("div",{className:"version-author",children:["by ",O.userName]}),c.jsx("div",{className:"version-actions",children:c.jsx("button",{className:"btn btn-sm btn-outline",onClick:()=>_(O.id),children:"Restore"})})]},O.id))})})]}),c.jsxs("div",{className:"collaboration-section",children:[c.jsx("h4",{children:"📊 Collaboration Stats"}),c.jsxs("div",{className:"stats-grid",children:[c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Online Users:"}),c.jsx("span",{className:"stat-value",children:s.length})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Comments:"}),c.jsx("span",{className:"stat-value",children:o.length})]}),c.jsxs("div",{className:"stat-item",children:[c.jsx("span",{className:"stat-label",children:"Versions:"}),c.jsx("span",{className:"stat-value",children:d.length})]})]})]}),c.jsx("style",{jsx:!0,children:`
        .collaboration-panel {
          padding: 20px;
          border: 1px solid #ddd;
          border-radius: 8px;
          background: white;
          margin: 20px 0;
          max-height: 600px;
          overflow-y: auto;
        }

        .collaboration-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
          padding-bottom: 10px;
          border-bottom: 1px solid #eee;
        }

        .collaboration-status {
          font-size: 14px;
        }

        .status-online {
          color: #28a745;
        }

        .status-offline {
          color: #dc3545;
        }

        .collaboration-section {
          margin-bottom: 20px;
          padding-bottom: 15px;
          border-bottom: 1px solid #f0f0f0;
        }

        .collaboration-section:last-child {
          border-bottom: none;
        }

        .section-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 10px;
        }

        .users-list {
          display: flex;
          flex-wrap: wrap;
          gap: 10px;
        }

        .user-item {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 5px 10px;
          background: #f8f9fa;
          border-radius: 20px;
          font-size: 14px;
        }

        .user-avatar {
          width: 24px;
          height: 24px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 12px;
        }

        .comments-container {
          margin-top: 10px;
        }

        .add-comment {
          margin-bottom: 15px;
          padding: 15px;
          background: #f8f9fa;
          border-radius: 8px;
        }

        .add-comment textarea {
          width: 100%;
          padding: 10px;
          border: 1px solid #ddd;
          border-radius: 4px;
          resize: vertical;
          font-family: inherit;
        }

        .comment-actions {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-top: 10px;
        }

        .line-info {
          font-size: 12px;
          color: #666;
        }

        .comments-list {
          max-height: 200px;
          overflow-y: auto;
        }

        .comment-item {
          padding: 10px;
          border: 1px solid #eee;
          border-radius: 8px;
          margin-bottom: 10px;
        }

        .comment-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 5px;
        }

        .comment-author {
          display: flex;
          align-items: center;
          gap: 8px;
        }

        .author-avatar {
          width: 20px;
          height: 20px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          color: white;
          font-weight: bold;
          font-size: 10px;
        }

        .comment-time {
          font-size: 12px;
          color: #666;
        }

        .comment-content {
          margin: 5px 0;
        }

        .comment-line {
          font-size: 12px;
          color: #007bff;
          font-weight: bold;
        }

        .versions-container {
          margin-top: 10px;
        }

        .versions-list {
          max-height: 200px;
          overflow-y: auto;
        }

        .version-item {
          padding: 10px;
          border: 1px solid #eee;
          border-radius: 8px;
          margin-bottom: 10px;
        }

        .version-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 5px;
        }

        .version-number {
          font-weight: bold;
          color: #007bff;
        }

        .version-time {
          font-size: 12px;
          color: #666;
        }

        .version-description {
          margin: 5px 0;
          color: #333;
        }

        .version-author {
          font-size: 12px;
          color: #666;
          margin-bottom: 10px;
        }

        .version-actions {
          display: flex;
          gap: 10px;
        }

        .stats-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
          gap: 15px;
        }

        .stat-item {
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 10px;
          background: #f8f9fa;
          border-radius: 8px;
        }

        .stat-label {
          font-size: 12px;
          color: #666;
          margin-bottom: 5px;
        }

        .stat-value {
          font-size: 18px;
          font-weight: bold;
          color: #333;
        }

        .btn {
          padding: 6px 12px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 12px;
          font-weight: 500;
        }

        .btn-sm {
          padding: 4px 8px;
          font-size: 11px;
        }

        .btn-primary {
          background: #007bff;
          color: white;
        }

        .btn-secondary {
          background: #6c757d;
          color: white;
        }

        .btn-outline {
          background: transparent;
          color: #007bff;
          border: 1px solid #007bff;
        }

        .btn:hover {
          opacity: 0.8;
        }

        .btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }
      `})]})},AR=A.createContext({dragDropManager:void 0});function wr(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var vC=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})(),xC=function(){return Math.random().toString(36).substring(7).split("").join(".")},bC={INIT:"@@redux/INIT"+xC(),REPLACE:"@@redux/REPLACE"+xC()};function xW(n){if(typeof n!="object"||n===null)return!1;for(var e=n;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function PR(n,e,t){var r;if(typeof e=="function"&&typeof t=="function"||typeof t=="function"&&typeof arguments[3]=="function")throw new Error(wr(0));if(typeof e=="function"&&typeof t>"u"&&(t=e,e=void 0),typeof t<"u"){if(typeof t!="function")throw new Error(wr(1));return t(PR)(n,e)}if(typeof n!="function")throw new Error(wr(2));var s=n,i=e,o=[],u=o,d=!1;function p(){u===o&&(u=o.slice())}function f(){if(d)throw new Error(wr(3));return i}function y(k){if(typeof k!="function")throw new Error(wr(4));if(d)throw new Error(wr(5));var I=!0;return p(),u.push(k),function(){if(I){if(d)throw new Error(wr(6));I=!1,p();var j=u.indexOf(k);u.splice(j,1),o=null}}}function x(k){if(!xW(k))throw new Error(wr(7));if(typeof k.type>"u")throw new Error(wr(8));if(d)throw new Error(wr(9));try{d=!0,i=s(i,k)}finally{d=!1}for(var I=o=u,M=0;M<I.length;M++){var j=I[M];j()}return k}function S(k){if(typeof k!="function")throw new Error(wr(10));s=k,x({type:bC.REPLACE})}function E(){var k,I=y;return k={subscribe:function(j){if(typeof j!="object"||j===null)throw new Error(wr(11));function C(){j.next&&j.next(f())}C();var F=I(C);return{unsubscribe:F}}},k[vC]=function(){return this},k}return x({type:bC.INIT}),r={dispatch:x,subscribe:y,getState:f,replaceReducer:S},r[vC]=E,r}function qe(n,e,...t){if(bW()&&e===void 0)throw new Error("invariant requires an error message argument");if(!n){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let s=0;r=new Error(e.replace(/%s/g,function(){return t[s++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function bW(){return typeof process<"u"&&!0}function wW(n,e,t){return e.split(".").reduce((r,s)=>r&&r[s]?r[s]:t||null,n)}function SW(n,e){return n.filter(t=>t!==e)}function NR(n){return typeof n=="object"}function _W(n,e){const t=new Map,r=i=>{t.set(i,t.has(i)?t.get(i)+1:1)};n.forEach(r),e.forEach(r);const s=[];return t.forEach((i,o)=>{i===1&&s.push(o)}),s}function EW(n,e){return n.filter(t=>e.indexOf(t)>-1)}const oS="dnd-core/INIT_COORDS",ay="dnd-core/BEGIN_DRAG",aS="dnd-core/PUBLISH_DRAG_SOURCE",ly="dnd-core/HOVER",cy="dnd-core/DROP",uy="dnd-core/END_DRAG";function wC(n,e){return{type:oS,payload:{sourceClientOffset:e||null,clientOffset:n||null}}}const TW={type:oS,payload:{clientOffset:null,sourceClientOffset:null}};function IW(n){return function(t=[],r={publishSource:!0}){const{publishSource:s=!0,clientOffset:i,getSourceClientOffset:o}=r,u=n.getMonitor(),d=n.getRegistry();n.dispatch(wC(i)),CW(t,u,d);const p=PW(t,u);if(p==null){n.dispatch(TW);return}let f=null;if(i){if(!o)throw new Error("getSourceClientOffset must be defined");kW(o),f=o(p)}n.dispatch(wC(i,f));const x=d.getSource(p).beginDrag(u,p);if(x==null)return;AW(x),d.pinSource(p);const S=d.getSourceType(p);return{type:ay,payload:{itemType:S,item:x,sourceId:p,clientOffset:i||null,sourceClientOffset:f||null,isSourcePublic:!!s}}}}function CW(n,e,t){qe(!e.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(r){qe(t.getSource(r),"Expected sourceIds to be registered.")})}function kW(n){qe(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function AW(n){qe(NR(n),"Item must be an object.")}function PW(n,e){let t=null;for(let r=n.length-1;r>=0;r--)if(e.canDragSource(n[r])){t=n[r];break}return t}function NW(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jW(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){NW(n,s,t[s])})}return n}function RW(n){return function(t={}){const r=n.getMonitor(),s=n.getRegistry();DW(r),LW(r).forEach((o,u)=>{const d=OW(o,u,s,r),p={type:cy,payload:{dropResult:jW({},t,d)}};n.dispatch(p)})}}function DW(n){qe(n.isDragging(),"Cannot call drop while not dragging."),qe(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function OW(n,e,t,r){const s=t.getTarget(n);let i=s?s.drop(r,n):void 0;return MW(i),typeof i>"u"&&(i=e===0?{}:r.getDropResult()),i}function MW(n){qe(typeof n>"u"||NR(n),"Drop result must either be an object or undefined.")}function LW(n){const e=n.getTargetIds().filter(n.canDropOnTarget,n);return e.reverse(),e}function FW(n){return function(){const t=n.getMonitor(),r=n.getRegistry();VW(t);const s=t.getSourceId();return s!=null&&(r.getSource(s,!0).endDrag(t,s),r.unpinSource()),{type:uy}}}function VW(n){qe(n.isDragging(),"Cannot call endDrag while not dragging.")}function qb(n,e){return e===null?n===null:Array.isArray(n)?n.some(t=>t===e):n===e}function BW(n){return function(t,{clientOffset:r}={}){UW(t);const s=t.slice(0),i=n.getMonitor(),o=n.getRegistry(),u=i.getItemType();return zW(s,o,u),$W(s,i,o),HW(s,i,o),{type:ly,payload:{targetIds:s,clientOffset:r||null}}}}function UW(n){qe(Array.isArray(n),"Expected targetIds to be an array.")}function $W(n,e,t){qe(e.isDragging(),"Cannot call hover while not dragging."),qe(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<n.length;r++){const s=n[r];qe(n.lastIndexOf(s)===r,"Expected targetIds to be unique in the passed array.");const i=t.getTarget(s);qe(i,"Expected targetIds to be registered.")}}function zW(n,e,t){for(let r=n.length-1;r>=0;r--){const s=n[r],i=e.getTargetType(s);qb(i,t)||n.splice(r,1)}}function HW(n,e,t){n.forEach(function(r){t.getTarget(r).hover(e,r)})}function qW(n){return function(){if(n.getMonitor().isDragging())return{type:aS}}}function GW(n){return{beginDrag:IW(n),publishDragSource:qW(n),hover:BW(n),drop:RW(n),endDrag:FW(n)}}class WW{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:t}=this.store;function r(i){return(...o)=>{const u=i.apply(e,o);typeof u<"u"&&t(u)}}const s=GW(this);return Object.keys(s).reduce((i,o)=>{const u=s[o];return i[o]=r(u),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function KW(n,e){return{x:n.x+e.x,y:n.y+e.y}}function jR(n,e){return{x:n.x-e.x,y:n.y-e.y}}function JW(n){const{clientOffset:e,initialClientOffset:t,initialSourceClientOffset:r}=n;return!e||!t||!r?null:jR(KW(e,r),t)}function QW(n){const{clientOffset:e,initialClientOffset:t}=n;return!e||!t?null:jR(e,t)}const ah=[],lS=[];ah.__IS_NONE__=!0;lS.__IS_ALL__=!0;function YW(n,e){return n===ah?!1:n===lS||typeof e>"u"?!0:EW(e,n).length>0}class XW{subscribeToStateChange(e,t={}){const{handlerIds:r}=t;qe(typeof e=="function","listener must be a function."),qe(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let s=this.store.getState().stateId;const i=()=>{const o=this.store.getState(),u=o.stateId;try{u===s||u===s+1&&!YW(o.dirtyHandlerIds,r)||e()}finally{s=u}};return this.store.subscribe(i)}subscribeToOffsetChange(e){qe(typeof e=="function","listener must be a function.");let t=this.store.getState().dragOffset;const r=()=>{const s=this.store.getState().dragOffset;s!==t&&(t=s,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const t=this.registry.getSource(e);return qe(t,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const t=this.registry.getTarget(e);if(qe(t,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),s=this.getItemType();return qb(r,s)&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const t=this.registry.getSource(e,!0);if(qe(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),s=this.getItemType();return r!==s?!1:t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;const{shallow:r}=t;if(!this.isDragging())return!1;const s=this.registry.getTargetType(e),i=this.getItemType();if(i&&!qb(s,i))return!1;const o=this.getTargetIds();if(!o.length)return!1;const u=o.indexOf(e);return r?u===o.length-1:u>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return JW(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return QW(this.store.getState().dragOffset)}constructor(e,t){this.store=e,this.registry=t}}const SC=typeof global<"u"?global:self,RR=SC.MutationObserver||SC.WebKitMutationObserver;function DR(n){return function(){const t=setTimeout(s,0),r=setInterval(s,50);function s(){clearTimeout(t),clearInterval(r),n()}}}function ZW(n){let e=1;const t=new RR(n),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const eK=typeof RR=="function"?ZW:DR;class tK{enqueueTask(e){const{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let r=0,s=e.length-this.index;r<s;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=eK(this.flush),this.requestErrorThrow=DR(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class nK{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class rK{create(e){const t=this.freeTasks,r=t.length?t.pop():new nK(this.onError,s=>t[t.length]=s);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const OR=new tK,sK=new rK(OR.registerPendingError);function iK(n){OR.enqueueTask(sK.create(n))}const cS="dnd-core/ADD_SOURCE",uS="dnd-core/ADD_TARGET",dS="dnd-core/REMOVE_SOURCE",dy="dnd-core/REMOVE_TARGET";function oK(n){return{type:cS,payload:{sourceId:n}}}function aK(n){return{type:uS,payload:{targetId:n}}}function lK(n){return{type:dS,payload:{sourceId:n}}}function cK(n){return{type:dy,payload:{targetId:n}}}function uK(n){qe(typeof n.canDrag=="function","Expected canDrag to be a function."),qe(typeof n.beginDrag=="function","Expected beginDrag to be a function."),qe(typeof n.endDrag=="function","Expected endDrag to be a function.")}function dK(n){qe(typeof n.canDrop=="function","Expected canDrop to be a function."),qe(typeof n.hover=="function","Expected hover to be a function."),qe(typeof n.drop=="function","Expected beginDrag to be a function.")}function Gb(n,e){if(e&&Array.isArray(n)){n.forEach(t=>Gb(t,!1));return}qe(typeof n=="string"||typeof n=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Tr;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(Tr||(Tr={}));let hK=0;function pK(){return hK++}function mK(n){const e=pK().toString();switch(n){case Tr.SOURCE:return`S${e}`;case Tr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function _C(n){switch(n[0]){case"S":return Tr.SOURCE;case"T":return Tr.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function EC(n,e){const t=n.entries();let r=!1;do{const{done:s,value:[,i]}=t.next();if(i===e)return!0;r=!!s}while(!r);return!1}class fK{addSource(e,t){Gb(e),uK(t);const r=this.addHandler(Tr.SOURCE,e,t);return this.store.dispatch(oK(r)),r}addTarget(e,t){Gb(e,!0),dK(t);const r=this.addHandler(Tr.TARGET,e,t);return this.store.dispatch(aK(r)),r}containsHandler(e){return EC(this.dragSources,e)||EC(this.dropTargets,e)}getSource(e,t=!1){return qe(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return qe(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return qe(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return qe(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return _C(e)===Tr.SOURCE}isTargetId(e){return _C(e)===Tr.TARGET}removeSource(e){qe(this.getSource(e),"Expected an existing source."),this.store.dispatch(lK(e)),iK(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){qe(this.getTarget(e),"Expected an existing target."),this.store.dispatch(cK(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const t=this.getSource(e);qe(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){qe(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){const s=mK(e);return this.types.set(s,t),e===Tr.SOURCE?this.dragSources.set(s,r):e===Tr.TARGET&&this.dropTargets.set(s,r),s}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const gK=(n,e)=>n===e;function yK(n,e){return!n&&!e?!0:!n||!e?!1:n.x===e.x&&n.y===e.y}function vK(n,e,t=gK){if(n.length!==e.length)return!1;for(let r=0;r<n.length;++r)if(!t(n[r],e[r]))return!1;return!0}function xK(n=ah,e){switch(e.type){case ly:break;case cS:case uS:case dy:case dS:return ah;case ay:case aS:case uy:case cy:default:return lS}const{targetIds:t=[],prevTargetIds:r=[]}=e.payload,s=_W(t,r);if(!(s.length>0||!vK(t,r)))return ah;const o=r[r.length-1],u=t[t.length-1];return o!==u&&(o&&s.push(o),u&&s.push(u)),s}function bK(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wK(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){bK(n,s,t[s])})}return n}const TC={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function SK(n=TC,e){const{payload:t}=e;switch(e.type){case oS:case ay:return{initialSourceClientOffset:t.sourceClientOffset,initialClientOffset:t.clientOffset,clientOffset:t.clientOffset};case ly:return yK(n.clientOffset,t.clientOffset)?n:wK({},n,{clientOffset:t.clientOffset});case uy:case cy:return TC;default:return n}}function _K(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function wc(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){_K(n,s,t[s])})}return n}const EK={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function TK(n=EK,e){const{payload:t}=e;switch(e.type){case ay:return wc({},n,{itemType:t.itemType,item:t.item,sourceId:t.sourceId,isSourcePublic:t.isSourcePublic,dropResult:null,didDrop:!1});case aS:return wc({},n,{isSourcePublic:!0});case ly:return wc({},n,{targetIds:t.targetIds});case dy:return n.targetIds.indexOf(t.targetId)===-1?n:wc({},n,{targetIds:SW(n.targetIds,t.targetId)});case cy:return wc({},n,{dropResult:t.dropResult,didDrop:!0,targetIds:[]});case uy:return wc({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function IK(n=0,e){switch(e.type){case cS:case uS:return n+1;case dS:case dy:return n-1;default:return n}}function CK(n=0){return n+1}function kK(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function AK(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){kK(n,s,t[s])})}return n}function PK(n={},e){return{dirtyHandlerIds:xK(n.dirtyHandlerIds,{type:e.type,payload:AK({},e.payload,{prevTargetIds:wW(n,"dragOperation.targetIds",[])})}),dragOffset:SK(n.dragOffset,e),refCount:IK(n.refCount,e),dragOperation:TK(n.dragOperation,e),stateId:CK(n.stateId)}}function NK(n,e=void 0,t={},r=!1){const s=jK(r),i=new XW(s,new fK(s)),o=new WW(s,i),u=n(o,e,t);return o.receiveBackend(u),o}function jK(n){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return PR(PK,n&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function RK(n,e){if(n==null)return{};var t=DK(n,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function DK(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}let IC=0;const wf=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var OK=A.memo(function(e){var{children:t}=e,r=RK(e,["children"]);const[s,i]=MK(r);return A.useEffect(()=>{if(i){const o=MR();return++IC,()=>{--IC===0&&(o[wf]=null)}}},[]),c.jsx(AR.Provider,{value:s,children:t})});function MK(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const e=LK(n.backend,n.context,n.options,n.debugMode),t=!n.context;return[e,t]}function LK(n,e=MR(),t,r){const s=e;return s[wf]||(s[wf]={dragDropManager:NK(n,e,t,r)}),s[wf]}function MR(){return typeof global<"u"?global:window}var Tx,CC;function FK(){return CC||(CC=1,Tx=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(s=r;s--!==0;)if(!n(e[s],t[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}),Tx}var VK=FK();const BK=RC(VK),hl=typeof window<"u"?A.useLayoutEffect:A.useEffect;function UK(n,e,t){const[r,s]=A.useState(()=>e(n)),i=A.useCallback(()=>{const o=e(n);BK(r,o)||(s(o),t&&t())},[r,n,t]);return hl(i),[r,i]}function $K(n,e,t){const[r,s]=UK(n,e,t);return hl(function(){const o=n.getHandlerId();if(o!=null)return n.subscribeToStateChange(s,{handlerIds:[o]})},[n,s]),r}function LR(n,e,t){return $K(e,n||(()=>({})),()=>t.reconnect())}function FR(n,e){const t=[];return typeof n!="function"&&t.push(n),A.useMemo(()=>typeof n=="function"?n():n,t)}function zK(n){return A.useMemo(()=>n.hooks.dragSource(),[n])}function HK(n){return A.useMemo(()=>n.hooks.dragPreview(),[n])}let Ix=!1,Cx=!1;class qK{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){qe(!Ix,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Ix=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Ix=!1}}isDragging(){if(!this.sourceId)return!1;qe(!Cx,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Cx=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Cx=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let kx=!1;class GK{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;qe(!kx,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return kx=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{kx=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function WK(n,e,t){const r=t.getRegistry(),s=r.addTarget(n,e);return[s,()=>r.removeTarget(s)]}function KK(n,e,t){const r=t.getRegistry(),s=r.addSource(n,e);return[s,()=>r.removeSource(s)]}function Wb(n,e,t,r){let s;if(s!==void 0)return!!s;if(n===e)return!0;if(typeof n!="object"||!n||typeof e!="object"||!e)return!1;const i=Object.keys(n),o=Object.keys(e);if(i.length!==o.length)return!1;const u=Object.prototype.hasOwnProperty.bind(e);for(let d=0;d<i.length;d++){const p=i[d];if(!u(p))return!1;const f=n[p],y=e[p];if(s=void 0,s===!1||s===void 0&&f!==y)return!1}return!0}function Kb(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function JK(n){if(typeof n.type=="string")return;const e=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function QK(n){return(e=null,t=null)=>{if(!A.isValidElement(e)){const i=e;return n(i,t),i}const r=e;return JK(r),YK(r,t?i=>n(i,t):n)}}function VR(n){const e={};return Object.keys(n).forEach(t=>{const r=n[t];if(t.endsWith("Ref"))e[t]=n[t];else{const s=QK(r);e[t]=()=>s}}),e}function kC(n,e){typeof n=="function"?n(e):n.current=e}function YK(n,e){const t=n.ref;return qe(typeof t!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),t?A.cloneElement(n,{ref:r=>{kC(t,r),kC(e,r)}}):A.cloneElement(n,{ref:e})}class XK{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId?e?(t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),t):(this.lastConnectedDragSource=e,t):t}reconnectDragPreview(e=!1){const t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Wb(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Wb(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=VR({dragSource:(t,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,Kb(t)?this.dragSourceRef=t:this.dragSourceNode=t,this.reconnectDragSource()},dragPreview:(t,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,Kb(t)?this.dragPreviewRef=t:this.dragPreviewNode=t,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ZK{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Wb(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=VR({dropTarget:(t,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,Kb(t)?this.dropTargetRef=t:this.dropTargetNode=t,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Cu(){const{dragDropManager:n}=A.useContext(AR);return qe(n!=null,"Expected drag drop context"),n}function eJ(n,e){const t=Cu(),r=A.useMemo(()=>new XK(t.getBackend()),[t]);return hl(()=>(r.dragSourceOptions=n||null,r.reconnect(),()=>r.disconnectDragSource()),[r,n]),hl(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function tJ(){const n=Cu();return A.useMemo(()=>new qK(n),[n])}class nJ{beginDrag(){const e=this.spec,t=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(t):r={},r??null}canDrag(){const e=this.spec,t=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(t):!0}isDragging(e,t){const r=this.spec,s=this.monitor,{isDragging:i}=r;return i?i(s):t===e.getSourceId()}endDrag(){const e=this.spec,t=this.monitor,r=this.connector,{end:s}=e;s&&s(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}function rJ(n,e,t){const r=A.useMemo(()=>new nJ(n,e,t),[e,t]);return A.useEffect(()=>{r.spec=n},[n]),r}function sJ(n){return A.useMemo(()=>{const e=n.type;return qe(e!=null,"spec.type must be defined"),e},[n])}function iJ(n,e,t){const r=Cu(),s=rJ(n,e,t),i=sJ(n);hl(function(){if(i!=null){const[u,d]=KK(i,s,r);return e.receiveHandlerId(u),t.receiveHandlerId(u),d}},[r,e,t,s,i])}function oJ(n,e){const t=FR(n);qe(!t.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=tJ(),s=eJ(t.options,t.previewOptions);return iJ(t,r,s),[LR(t.collect,r,s),zK(s),HK(s)]}function aJ(n){return A.useMemo(()=>n.hooks.dropTarget(),[n])}function lJ(n){const e=Cu(),t=A.useMemo(()=>new ZK(e.getBackend()),[e]);return hl(()=>(t.dropTargetOptions=n||null,t.reconnect(),()=>t.disconnectDropTarget()),[n]),t}function cJ(){const n=Cu();return A.useMemo(()=>new GK(n),[n])}function uJ(n){const{accept:e}=n;return A.useMemo(()=>(qe(n.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class dJ{canDrop(){const e=this.spec,t=this.monitor;return e.canDrop?e.canDrop(t.getItem(),t):!0}hover(){const e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){const e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function hJ(n,e){const t=A.useMemo(()=>new dJ(n,e),[e]);return A.useEffect(()=>{t.spec=n},[n]),t}function pJ(n,e,t){const r=Cu(),s=hJ(n,e),i=uJ(n);hl(function(){const[u,d]=WK(i,s,r);return e.receiveHandlerId(u),t.receiveHandlerId(u),d},[r,e,s,t,i.map(o=>o.toString()).join("|")])}function mJ(n,e){const t=FR(n),r=cJ(),s=lJ(t.options);return pJ(t,r,s),[LR(t.collect,r,s),aJ(s)]}function BR(n){let e=null;return()=>(e==null&&(e=n()),e)}function fJ(n,e){return n.filter(t=>t!==e)}function gJ(n,e){const t=new Set,r=i=>t.add(i);n.forEach(r),e.forEach(r);const s=[];return t.forEach(i=>s.push(i)),s}class yJ{enter(e){const t=this.entered.length,r=s=>this.isNodeInDocument(s)&&(!s.contains||s.contains(e));return this.entered=gJ(this.entered.filter(r),[e]),t===0&&this.entered.length>0}leave(e){const t=this.entered.length;return this.entered=fJ(this.entered.filter(this.isNodeInDocument),e),t>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class vJ{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const t={};Object.keys(this.config.exposeProperties).forEach(r=>{const s=this.config.exposeProperties[r];s!=null&&(t[r]={value:s(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const UR="__NATIVE_FILE__",$R="__NATIVE_URL__",zR="__NATIVE_TEXT__",HR="__NATIVE_HTML__",AC=Object.freeze(Object.defineProperty({__proto__:null,FILE:UR,HTML:HR,TEXT:zR,URL:$R},Symbol.toStringTag,{value:"Module"}));function Ax(n,e,t){const r=e.reduce((s,i)=>s||n.getData(i),"");return r??t}const Jb={[UR]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[HR]:{exposeProperties:{html:(n,e)=>Ax(n,e,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[$R]:{exposeProperties:{urls:(n,e)=>Ax(n,e,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[zR]:{exposeProperties:{text:(n,e)=>Ax(n,e,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function xJ(n,e){const t=Jb[n];if(!t)throw new Error(`native type ${n} has no configuration`);const r=new vJ(t);return r.loadDataTransfer(e),r}function Px(n){if(!n)return null;const e=Array.prototype.slice.call(n.types||[]);return Object.keys(Jb).filter(t=>{const r=Jb[t];return r?.matchesTypes?r.matchesTypes.some(s=>e.indexOf(s)>-1):!1})[0]||null}const bJ=BR(()=>/firefox/i.test(navigator.userAgent)),qR=BR(()=>!!window.safari);class PC{interpolate(e){const{xs:t,ys:r,c1s:s,c2s:i,c3s:o}=this;let u=t.length-1;if(e===t[u])return r[u];let d=0,p=o.length-1,f;for(;d<=p;){f=Math.floor(.5*(d+p));const S=t[f];if(S<e)d=f+1;else if(S>e)p=f-1;else return r[f]}u=Math.max(0,p);const y=e-t[u],x=y*y;return r[u]+s[u]*y+i[u]*x+o[u]*y*x}constructor(e,t){const{length:r}=e,s=[];for(let S=0;S<r;S++)s.push(S);s.sort((S,E)=>e[S]<e[E]?-1:1);const i=[],o=[];let u,d;for(let S=0;S<r-1;S++)u=e[S+1]-e[S],d=t[S+1]-t[S],i.push(u),o.push(d/u);const p=[o[0]];for(let S=0;S<i.length-1;S++){const E=o[S],k=o[S+1];if(E*k<=0)p.push(0);else{u=i[S];const I=i[S+1],M=u+I;p.push(3*M/((M+I)/E+(M+u)/k))}}p.push(o[o.length-1]);const f=[],y=[];let x;for(let S=0;S<p.length-1;S++){x=o[S];const E=p[S],k=1/i[S],I=E+p[S+1]-x-x;f.push((x-E-I)*k),y.push(I*k*k)}this.xs=e,this.ys=t,this.c1s=p,this.c2s=f,this.c3s=y}}const wJ=1;function GR(n){const e=n.nodeType===wJ?n:n.parentElement;if(!e)return null;const{top:t,left:r}=e.getBoundingClientRect();return{x:r,y:t}}function Qm(n){return{x:n.clientX,y:n.clientY}}function SJ(n){var e;return n.nodeName==="IMG"&&(bJ()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(n)))}function _J(n,e,t,r){let s=n?e.width:t,i=n?e.height:r;return qR()&&n&&(i/=window.devicePixelRatio,s/=window.devicePixelRatio),{dragPreviewWidth:s,dragPreviewHeight:i}}function EJ(n,e,t,r,s){const i=SJ(e),u=GR(i?n:e),d={x:t.x-u.x,y:t.y-u.y},{offsetWidth:p,offsetHeight:f}=n,{anchorX:y,anchorY:x}=r,{dragPreviewWidth:S,dragPreviewHeight:E}=_J(i,e,p,f),k=()=>{let q=new PC([0,.5,1],[d.y,d.y/f*E,d.y+E-f]).interpolate(x);return qR()&&i&&(q+=(window.devicePixelRatio-1)*E),q},I=()=>new PC([0,.5,1],[d.x,d.x/p*S,d.x+S-p]).interpolate(y),{offsetX:M,offsetY:j}=s,C=M===0||M,F=j===0||j;return{x:C?M:I(),y:F?j:k()}}class TJ{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}}function IJ(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NC(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},r=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable}))),r.forEach(function(s){IJ(n,s,t[s])})}return n}class CJ{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;(t=this.window)===null||t===void 0||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);const s=o=>this.handleDragStart(o,e),i=o=>this.handleSelectStart(o);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",s),t.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",s),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}connectDropTarget(e,t){const r=o=>this.handleDragEnter(o,e),s=o=>this.handleDragOver(o,e),i=o=>this.handleDrop(o,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",s),t.addEventListener("drop",i),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",s),t.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return NC({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),t=this.sourcePreviewNodeOptions.get(e);return NC({anchorX:.5,anchorY:.5,captureDraggingState:!1},t||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(AC).some(t=>AC[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=xJ(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const t=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},t)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=s=>{const i=this.sourceNodes.get(s);return i&&GR(i)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=s=>!!(s&&this.document&&this.document.body&&this.document.body.contains(s)),this.endDragIfSourceWasRemovedFromDOM=()=>{const s=this.currentDragSourceNode;s==null||this.isNodeInDocument(s)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=s=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(s||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=s=>{if(s.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const o=Qm(s);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:u}=s,d=Px(u);if(this.monitor.isDragging()){if(u&&typeof u.setDragImage=="function"){const f=this.monitor.getSourceId(),y=this.sourceNodes.get(f),x=this.sourcePreviewNodes.get(f)||y;if(x){const{anchorX:S,anchorY:E,offsetX:k,offsetY:I}=this.getCurrentSourcePreviewNodeOptions(),C=EJ(y,x,o,{anchorX:S,anchorY:E},{offsetX:k,offsetY:I});u.setDragImage(x,C.x,C.y)}}try{u?.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(s.target);const{captureDraggingState:p}=this.getCurrentSourcePreviewNodeOptions();p?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(d)this.beginDragNativeItem(d);else{if(u&&!u.types&&(s.target&&!s.target.hasAttribute||!s.target.hasAttribute("draggable")))return;s.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=s=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}if(!this.enterLeaveCounter.enter(s.target)||this.monitor.isDragging())return;const{dataTransfer:u}=s,d=Px(u);d&&this.beginDragNativeItem(d,u)},this.handleTopDragEnter=s=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=s.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Qm(s)}),i.some(u=>this.monitor.canDropOnTarget(u))&&(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=s=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}},this.handleTopDragOver=s=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none");return}this.altKeyPressed=s.altKey,this.lastClientOffset=Qm(s),this.scheduleHover(i),(i||[]).some(u=>this.monitor.canDropOnTarget(u))?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?s.preventDefault():(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=s=>{this.isDraggingNativeItem()&&s.preventDefault(),this.enterLeaveCounter.leave(s.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=s=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;s.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(s.dataTransfer)}else Px(s.dataTransfer)&&s.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=s=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Qm(s)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=s=>{const i=s.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(s.preventDefault(),i.dragDrop()))},this.options=new TJ(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new yJ(this.isNodeInDocument)}}const kJ=function(e,t,r){return new CJ(e,t,r)},AJ=({projectId:n,onCodeChange:e,initialComponents:t=[]})=>{const[r,s]=A.useState(t),[i,o]=A.useState(null),[u,d]=A.useState(!1),[p,f]=A.useState(!1),[y,x]=A.useState({width:1200,height:800}),[S,E]=A.useState(1),k=A.useRef(null),I=[{type:"container",name:"Container",icon:"📦",category:"Layout"},{type:"text",name:"Text",icon:"📝",category:"Content"},{type:"button",name:"Button",icon:"🔘",category:"Interactive"},{type:"input",name:"Input",icon:"📝",category:"Form"},{type:"image",name:"Image",icon:"🖼️",category:"Media"},{type:"card",name:"Card",icon:"🃏",category:"Layout"},{type:"header",name:"Header",icon:"📋",category:"Layout"},{type:"footer",name:"Footer",icon:"🦶",category:"Layout"},{type:"sidebar",name:"Sidebar",icon:"📑",category:"Layout"},{type:"navbar",name:"Navbar",icon:"🧭",category:"Navigation"},{type:"form",name:"Form",icon:"📋",category:"Form"},{type:"table",name:"Table",icon:"📊",category:"Data"},{type:"chart",name:"Chart",icon:"📈",category:"Data"},{type:"modal",name:"Modal",icon:"🪟",category:"Overlay"},{type:"dropdown",name:"Dropdown",icon:"📋",category:"Interactive"}],M=_=>({container:`<div className="container" style={${JSON.stringify(_.styles)}}>
  {children}
</div>`,text:`<p className="text" style={${JSON.stringify(_.styles)}}>
  ${_.content||"Text content"}
</p>`,button:`<button className="btn" style={${JSON.stringify(_.styles)}} onClick={${_.onClick||"() => {}"}}>
  ${_.content||"Button"}
</button>`,input:`<input 
  className="input" 
  type="${_.inputType||"text"}"
  placeholder="${_.placeholder||""}"
  style={${JSON.stringify(_.styles)}}
/>`,image:`<img 
  className="image" 
  src="${_.src||"/placeholder.jpg"}"
  alt="${_.alt||""}"
  style={${JSON.stringify(_.styles)}}
/>`,card:`<div className="card" style={${JSON.stringify(_.styles)}}>
  <div className="card-header">
    <h3>${_.title||"Card Title"}</h3>
  </div>
  <div className="card-body">
    <p>${_.content||"Card content"}</p>
  </div>
</div>`,header:`<header className="header" style={${JSON.stringify(_.styles)}}>
  <h1>${_.content||"Header"}</h1>
</header>`,footer:`<footer className="footer" style={${JSON.stringify(_.styles)}}>
  <p>${_.content||"Footer content"}</p>
</footer>`,sidebar:`<aside className="sidebar" style={${JSON.stringify(_.styles)}}>
  <nav>
    <ul>
      <li><a href="#">Menu Item 1</a></li>
      <li><a href="#">Menu Item 2</a></li>
    </ul>
  </nav>
</aside>`,navbar:`<nav className="navbar" style={${JSON.stringify(_.styles)}}>
  <div className="nav-brand">${_.brand||"Brand"}</div>
  <ul className="nav-menu">
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
  </ul>
</nav>`,form:`<form className="form" style={${JSON.stringify(_.styles)}} onSubmit={${_.onSubmit||"() => {}"}}>
  <div className="form-group">
    <label>Name</label>
    <input type="text" name="name" />
  </div>
  <div className="form-group">
    <label>Email</label>
    <input type="email" name="email" />
  </div>
  <button type="submit">Submit</button>
</form>`,table:`<table className="table" style={${JSON.stringify(_.styles)}}>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
      <th>Column 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Data 1</td>
      <td>Data 2</td>
      <td>Data 3</td>
    </tr>
  </tbody>
</table>`,chart:`<div className="chart" style={${JSON.stringify(_.styles)}}>
  <canvas id="chart-${_.id}"></canvas>
</div>`,modal:`<div className="modal" style={${JSON.stringify(_.styles)}}>
  <div className="modal-content">
    <span className="close" onClick={${_.onClose||"() => {}"}}>&times;</span>
    <h2>${_.title||"Modal Title"}</h2>
    <p>${_.content||"Modal content"}</p>
  </div>
</div>`,dropdown:`<div className="dropdown" style={${JSON.stringify(_.styles)}}>
  <button className="dropdown-toggle" onClick={${_.onToggle||"() => {}"}}>
    ${_.label||"Dropdown"}
  </button>
  <ul className="dropdown-menu">
    <li><a href="#">Option 1</a></li>
    <li><a href="#">Option 2</a></li>
    <li><a href="#">Option 3</a></li>
  </ul>
</div>`})[_.type]||`<div>Unknown component: ${_.type}</div>`,j=()=>{const _=`import React, { useState, useEffect } from 'react';
import './App.css';`,O=`const App = () => {
  return (
    <div className="app">
      ${r.map(B=>M(B)).join(`

`)}
    </div>
  );
};

export default App;`;return`${_}

${O}`},C=(_,R)=>{const O=R.getDropResult();if(!O)return;const B={id:`component-${Date.now()}`,type:_.type,name:_.name,position:{x:O.x,y:O.y},size:{width:200,height:100},styles:{position:"absolute",left:`${O.x}px`,top:`${O.y}px`,width:"200px",height:"100px",border:"1px solid #ddd",padding:"10px",backgroundColor:"#fff"},content:_.name,properties:{}};s(z=>[...z,B])},F=_=>{o(_),d(!0)},G=(_,R)=>{if(!i)return;const O={...i,[_]:R,styles:{...i.styles,[_]:R}};s(B=>B.map(z=>z.id===i.id?O:z)),o(O)},q=()=>`
.app {
  position: relative;
  width: 100%;
  min-height: 100vh;
  background: #f5f5f5;
}

.container {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.text {
  margin: 0;
  font-family: Arial, sans-serif;
}

.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  background: #007bff;
  color: white;
}

.btn:hover {
  background: #0056b3;
}

.input {
  padding: 8px 12px;
  border: 1px solid #ddd;
  border-radius: 4px;
  font-size: 14px;
}

.image {
  max-width: 100%;
  height: auto;
}

.card {
  border: 1px solid #ddd;
  border-radius: 8px;
  padding: 20px;
  background: white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.header {
  background: #333;
  color: white;
  padding: 20px;
  text-align: center;
}

.footer {
  background: #333;
  color: white;
  padding: 20px;
  text-align: center;
  margin-top: auto;
}

.sidebar {
  background: #f8f9fa;
  padding: 20px;
  min-height: 100vh;
}

.navbar {
  background: #007bff;
  color: white;
  padding: 10px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.form {
  background: white;
  padding: 20px;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.table {
  width: 100%;
  border-collapse: collapse;
  background: white;
}

.table th,
.table td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: left;
}

.table th {
  background: #f8f9fa;
}

.modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.5);
  display: flex;
  justify-content: center;
  align-items: center;
}

.modal-content {
  background: white;
  padding: 20px;
  border-radius: 8px;
  max-width: 500px;
  width: 90%;
}

.dropdown {
  position: relative;
  display: inline-block;
}

.dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  list-style: none;
  padding: 0;
  margin: 0;
  min-width: 150px;
}

.dropdown-menu li {
  padding: 10px;
}

.dropdown-menu li:hover {
  background: #f8f9fa;
}
`,N=()=>{const _={components:r,appCode:j(),cssCode:q(),metadata:{projectId:n,exportedAt:new Date().toISOString(),componentCount:r.length}},R=JSON.stringify(_,null,2),O=new Blob([R],{type:"application/json"}),B=URL.createObjectURL(O),z=document.createElement("a");z.href=B,z.download=`dreambuild-project-${n}.json`,z.click(),URL.revokeObjectURL(B)};return A.useEffect(()=>{e&&e({appCode:j(),cssCode:q(),components:r})},[r,e]),c.jsx(OK,{backend:kJ,children:c.jsxs("div",{className:"visual-editor",children:[c.jsxs("div",{className:"editor-header",children:[c.jsx("h2",{children:"🎨 Visual Editor"}),c.jsxs("div",{className:"editor-controls",children:[c.jsx("button",{className:"btn btn-secondary",onClick:()=>f(!p),children:p?"Edit":"Preview"}),c.jsx("button",{className:"btn btn-primary",onClick:N,children:"Export"})]})]}),c.jsxs("div",{className:"editor-layout",children:[c.jsxs("div",{className:"component-library",children:[c.jsx("h3",{children:"📚 Component Library"}),c.jsx("div",{className:"library-categories",children:["Layout","Content","Interactive","Form","Media","Data","Navigation","Overlay"].map(_=>c.jsxs("div",{className:"category",children:[c.jsx("h4",{children:_}),c.jsx("div",{className:"category-components",children:I.filter(R=>R.category===_).map(R=>c.jsx(PJ,{type:R.type,name:R.name,icon:R.icon},R.type))})]},_))})]}),c.jsxs("div",{className:"canvas-container",children:[c.jsxs("div",{className:"canvas-toolbar",children:[c.jsxs("div",{className:"canvas-controls",children:[c.jsx("button",{className:"btn btn-sm",onClick:()=>E(S*.8),children:"Zoom Out"}),c.jsxs("span",{className:"zoom-level",children:[Math.round(S*100),"%"]}),c.jsx("button",{className:"btn btn-sm",onClick:()=>E(S*1.2),children:"Zoom In"})]}),c.jsx("div",{className:"canvas-size",children:c.jsxs("select",{value:`${y.width}x${y.height}`,onChange:_=>{const[R,O]=_.target.value.split("x").map(Number);x({width:R,height:O})},children:[c.jsx("option",{value:"1200x800",children:"Desktop (1200x800)"}),c.jsx("option",{value:"768x1024",children:"Tablet (768x1024)"}),c.jsx("option",{value:"375x667",children:"Mobile (375x667)"})]})})]}),c.jsx("div",{className:"canvas",ref:k,style:{width:y.width*S,height:y.height*S,transform:`scale(${S})`,transformOrigin:"top left"},children:c.jsx(NJ,{onDrop:C,children:r.map(_=>c.jsx(jJ,{component:_,onSelect:F,isSelected:i?.id===_.id},_.id))})})]}),u&&i&&c.jsxs("div",{className:"properties-panel",children:[c.jsx("h3",{children:"⚙️ Properties"}),c.jsxs("div",{className:"property-groups",children:[c.jsxs("div",{className:"property-group",children:[c.jsx("h4",{children:"Content"}),c.jsxs("div",{className:"property",children:[c.jsx("label",{children:"Text Content"}),c.jsx("input",{type:"text",value:i.content||"",onChange:_=>G("content",_.target.value)})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("h4",{children:"Position"}),c.jsxs("div",{className:"property",children:[c.jsx("label",{children:"X Position"}),c.jsx("input",{type:"number",value:i.position?.x||0,onChange:_=>G("left",`${_.target.value}px`)})]}),c.jsxs("div",{className:"property",children:[c.jsx("label",{children:"Y Position"}),c.jsx("input",{type:"number",value:i.position?.y||0,onChange:_=>G("top",`${_.target.value}px`)})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("h4",{children:"Size"}),c.jsxs("div",{className:"property",children:[c.jsx("label",{children:"Width"}),c.jsx("input",{type:"number",value:i.size?.width||200,onChange:_=>G("width",`${_.target.value}px`)})]}),c.jsxs("div",{className:"property",children:[c.jsx("label",{children:"Height"}),c.jsx("input",{type:"number",value:i.size?.height||100,onChange:_=>G("height",`${_.target.value}px`)})]})]}),c.jsxs("div",{className:"property-group",children:[c.jsx("h4",{children:"Style"}),c.jsxs("div",{className:"property",children:[c.jsx("label",{children:"Background Color"}),c.jsx("input",{type:"color",value:i.styles?.backgroundColor||"#ffffff",onChange:_=>G("backgroundColor",_.target.value)})]}),c.jsxs("div",{className:"property",children:[c.jsx("label",{children:"Border Color"}),c.jsx("input",{type:"color",value:i.styles?.borderColor||"#dddddd",onChange:_=>G("borderColor",_.target.value)})]})]})]})]})]}),c.jsx("style",{jsx:!0,children:`
          .visual-editor {
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: #f5f5f5;
          }

          .editor-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background: white;
            border-bottom: 1px solid #ddd;
          }

          .editor-controls {
            display: flex;
            gap: 10px;
          }

          .editor-layout {
            display: flex;
            flex: 1;
            overflow: hidden;
          }

          .component-library {
            width: 250px;
            background: white;
            border-right: 1px solid #ddd;
            overflow-y: auto;
            padding: 20px;
          }

          .library-categories {
            margin-top: 15px;
          }

          .category {
            margin-bottom: 20px;
          }

          .category h4 {
            margin: 0 0 10px 0;
            color: #666;
            font-size: 14px;
            text-transform: uppercase;
          }

          .category-components {
            display: flex;
            flex-direction: column;
            gap: 5px;
          }

          .canvas-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f8f9fa;
          }

          .canvas-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: white;
            border-bottom: 1px solid #ddd;
          }

          .canvas-controls {
            display: flex;
            align-items: center;
            gap: 10px;
          }

          .zoom-level {
            font-size: 12px;
            color: #666;
            min-width: 40px;
            text-align: center;
          }

          .canvas {
            flex: 1;
            position: relative;
            background: white;
            margin: 20px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
          }

          .properties-panel {
            width: 300px;
            background: white;
            border-left: 1px solid #ddd;
            overflow-y: auto;
            padding: 20px;
          }

          .property-groups {
            margin-top: 15px;
          }

          .property-group {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
          }

          .property-group:last-child {
            border-bottom: none;
          }

          .property-group h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 14px;
          }

          .property {
            margin-bottom: 10px;
          }

          .property label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #666;
            text-transform: uppercase;
          }

          .property input,
          .property select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
          }

          .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
          }

          .btn-primary {
            background: #007bff;
            color: white;
          }

          .btn-secondary {
            background: #6c757d;
            color: white;
          }

          .btn-sm {
            padding: 4px 8px;
            font-size: 12px;
          }

          .btn:hover {
            opacity: 0.8;
          }
        `})]})})},PJ=({type:n,name:e,icon:t})=>{const[{isDragging:r},s]=oJ({type:"component",item:{type:n,name:e},collect:i=>({isDragging:i.isDragging()})});return c.jsxs("div",{ref:s,className:`draggable-component ${r?"dragging":""}`,children:[c.jsx("span",{className:"component-icon",children:t}),c.jsx("span",{className:"component-name",children:e})]})},NJ=({children:n,onDrop:e})=>{const[{isOver:t},r]=mJ({accept:"component",drop:(s,i)=>{const o=i.getClientOffset(),u=i.getDropResult()?.getBoundingClientRect();o&&u&&e(s,{x:o.x-u.left,y:o.y-u.top})},collect:s=>({isOver:s.isOver()})});return c.jsx("div",{ref:r,className:`droppable-canvas ${t?"drag-over":""}`,children:n})},jJ=({component:n,onSelect:e,isSelected:t})=>{const r=s=>{s.stopPropagation(),e(n)};return c.jsx("div",{className:`visual-component ${t?"selected":""}`,style:n.styles,onClick:r,children:c.jsxs("div",{className:"component-content",children:[n.type==="text"&&(n.content||"Text"),n.type==="button"&&(n.content||"Button"),n.type==="input"&&c.jsx("input",{placeholder:n.placeholder||"Input"}),n.type==="image"&&c.jsx("div",{className:"image-placeholder",children:"🖼️ Image"}),n.type==="card"&&c.jsxs("div",{children:[c.jsx("h3",{children:n.title||"Card Title"}),c.jsx("p",{children:n.content||"Card content"})]}),!["text","button","input","image","card"].includes(n.type)&&c.jsx("div",{className:"component-placeholder",children:n.name})]})})},RJ=({projectId:n,projectData:e,onDeploy:t})=>{const[r,s]=A.useState("vercel"),[i,o]=A.useState(!1),[u,d]=A.useState(null),p=[{id:"vercel",name:"Vercel",icon:"▲",description:"Fast, global deployment"},{id:"netlify",name:"Netlify",icon:"🌐",description:"JAMstack deployment"},{id:"aws",name:"AWS Amplify",icon:"☁️",description:"Full-stack deployment"},{id:"firebase",name:"Firebase",icon:"🔥",description:"Google hosting"},{id:"github",name:"GitHub Pages",icon:"🐙",description:"Free static hosting"}],f=async()=>{o(!0),d("Deploying...");try{await new Promise(x=>setTimeout(x,3e3));const y={success:!0,provider:r,url:`https://${n}.${r}.com`,deployedAt:new Date().toISOString()};d("Deployed successfully!"),t&&t(y)}catch{d("Deployment failed")}finally{o(!1)}};return c.jsxs("div",{className:"deployment-panel",children:[c.jsx("h3",{children:"🚀 Deploy Your App"}),c.jsxs("div",{className:"provider-selection",children:[c.jsx("h4",{children:"Choose Hosting Provider"}),c.jsx("div",{className:"providers-grid",children:p.map(y=>c.jsxs("div",{className:`provider-card ${r===y.id?"selected":""}`,onClick:()=>s(y.id),children:[c.jsx("div",{className:"provider-icon",children:y.icon}),c.jsx("div",{className:"provider-name",children:y.name}),c.jsx("div",{className:"provider-description",children:y.description})]},y.id))})]}),c.jsx("div",{className:"deployment-actions",children:c.jsx("button",{className:"btn btn-primary btn-lg",onClick:f,disabled:i,children:i?"Deploying...":"Deploy Now"})}),u&&c.jsx("div",{className:"deployment-status",children:c.jsx("div",{className:`status-message ${u.includes("success")?"success":"error"}`,children:u})}),c.jsx("style",{jsx:!0,children:`
        .deployment-panel {
          padding: 20px;
          border: 1px solid #ddd;
          border-radius: 8px;
          background: white;
          margin: 20px 0;
        }

        .provider-selection {
          margin-bottom: 20px;
        }

        .providers-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
          gap: 15px;
          margin-top: 15px;
        }

        .provider-card {
          padding: 15px;
          border: 2px solid #eee;
          border-radius: 8px;
          cursor: pointer;
          text-align: center;
          transition: all 0.3s ease;
        }

        .provider-card:hover {
          border-color: #007bff;
        }

        .provider-card.selected {
          border-color: #007bff;
          background: #f8f9ff;
        }

        .provider-icon {
          font-size: 24px;
          margin-bottom: 8px;
        }

        .provider-name {
          font-weight: bold;
          margin-bottom: 4px;
        }

        .provider-description {
          font-size: 12px;
          color: #666;
        }

        .deployment-actions {
          text-align: center;
          margin: 20px 0;
        }

        .deployment-status {
          margin-top: 15px;
          text-align: center;
        }

        .status-message {
          padding: 10px;
          border-radius: 4px;
          font-weight: bold;
        }

        .status-message.success {
          background: #d4edda;
          color: #155724;
          border: 1px solid #c3e6cb;
        }

        .status-message.error {
          background: #f8d7da;
          color: #721c24;
          border: 1px solid #f5c6cb;
        }

        .btn {
          padding: 12px 24px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 16px;
          font-weight: bold;
        }

        .btn-primary {
          background: #007bff;
          color: white;
        }

        .btn-primary:hover:not(:disabled) {
          background: #0056b3;
        }

        .btn-primary:disabled {
          background: #6c757d;
          cursor: not-allowed;
        }

        .btn-lg {
          padding: 15px 30px;
          font-size: 18px;
        }
      `})]})},DJ=({projectId:n,onMemoryUpdate:e})=>{const[t,r]=A.useState(null),[s,i]=A.useState([]),[o,u]=A.useState(""),[d,p]=A.useState([]),[f,y]=A.useState(!1),[x,S]=A.useState(null);A.useEffect(()=>{n&&(E(),k())},[n]);const E=async()=>{try{y(!0);const C=await Va.loadConversationMemory(n);if(r(C),C){const F=await Va.getConversationHistory(n);i(F)}}catch(C){console.error("Failed to load memory:",C)}finally{y(!1)}},k=async()=>{try{const C=await Va.getStorageStats();S(C)}catch(C){console.error("Failed to load stats:",C)}},I=async()=>{if(o.trim())try{y(!0);const C=await Va.searchConversationMemory(n,o);p(C)}catch(C){console.error("Failed to search memory:",C)}finally{y(!1)}},M=async()=>{if(window.confirm("Are you sure you want to clear all conversation memory?"))try{await Va.clearConversationMemory(n),r(null),i([]),p([]),e&&e()}catch(C){console.error("Failed to clear memory:",C)}},j=()=>{if(!t)return;const C=JSON.stringify(t,null,2),F=new Blob([C],{type:"application/json"}),G=URL.createObjectURL(F),q=document.createElement("a");q.href=G,q.download=`dreambuild-memory-${n}.json`,q.click(),URL.revokeObjectURL(G)};return f?c.jsx("div",{className:"memory-manager",children:c.jsx("div",{className:"loading",children:"Loading memory..."})}):c.jsxs("div",{className:"memory-manager",children:[c.jsxs("div",{className:"memory-header",children:[c.jsx("h3",{children:"🧠 Conversation Memory"}),c.jsxs("div",{className:"memory-actions",children:[c.jsx("button",{onClick:E,className:"btn btn-secondary",children:"Refresh"}),c.jsx("button",{onClick:j,className:"btn btn-secondary",children:"Export"}),c.jsx("button",{onClick:M,className:"btn btn-danger",children:"Clear"})]})]}),x&&c.jsxs("div",{className:"memory-stats",children:[c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Projects:"}),c.jsx("span",{className:"stat-value",children:x.totalProjects})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Files:"}),c.jsx("span",{className:"stat-value",children:x.totalFiles})]}),c.jsxs("div",{className:"stat",children:[c.jsx("span",{className:"stat-label",children:"Size:"}),c.jsxs("span",{className:"stat-value",children:[x.totalSizeMB," MB"]})]})]}),c.jsxs("div",{className:"memory-search",children:[c.jsx("input",{type:"text",placeholder:"Search conversation memory...",value:o,onChange:C=>u(C.target.value),onKeyPress:C=>C.key==="Enter"&&I()}),c.jsx("button",{onClick:I,className:"btn btn-primary",children:"Search"})]}),d.length>0&&c.jsxs("div",{className:"search-results",children:[c.jsx("h4",{children:"Search Results"}),d.map((C,F)=>c.jsxs("div",{className:"search-result",children:[c.jsx("div",{className:"result-type",children:C.type}),c.jsx("div",{className:"result-text",children:C.text}),c.jsx("div",{className:"result-timestamp",children:C.timestamp})]},F))]}),s.prompts&&s.prompts.length>0&&c.jsxs("div",{className:"conversation-history",children:[c.jsx("h4",{children:"Conversation History"}),c.jsxs("div",{className:"history-stats",children:[c.jsxs("span",{children:["Prompts: ",s.totalPrompts]}),c.jsxs("span",{children:["Responses: ",s.totalResponses]})]}),c.jsx("div",{className:"history-list",children:s.prompts.map((C,F)=>c.jsxs("div",{className:"history-item",children:[c.jsxs("div",{className:"history-prompt",children:[c.jsx("strong",{children:"Prompt:"})," ",C.text]}),s.responses[F]&&c.jsxs("div",{className:"history-response",children:[c.jsx("strong",{children:"Response:"})," ",s.responses[F].text]}),c.jsx("div",{className:"history-timestamp",children:new Date(C.timestamp).toLocaleString()})]},C.id))})]}),t&&c.jsxs("div",{className:"memory-details",children:[c.jsx("h4",{children:"Memory Details"}),c.jsxs("div",{className:"memory-info",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Project ID:"})," ",t.projectId]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Created:"})," ",new Date(t.createdAt).toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Last Updated:"})," ",new Date(t.lastUpdated).toLocaleString()]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Memory Size:"})," ",JSON.stringify(t).length," bytes"]})]})]}),c.jsx("style",{jsx:!0,children:`
        .memory-manager {
          padding: 20px;
          border: 1px solid #ddd;
          border-radius: 8px;
          background: white;
          margin: 20px 0;
        }

        .memory-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }

        .memory-actions {
          display: flex;
          gap: 10px;
        }

        .memory-stats {
          display: flex;
          gap: 20px;
          margin-bottom: 20px;
          padding: 10px;
          background: #f5f5f5;
          border-radius: 4px;
        }

        .stat {
          display: flex;
          flex-direction: column;
          align-items: center;
        }

        .stat-label {
          font-size: 12px;
          color: #666;
        }

        .stat-value {
          font-size: 18px;
          font-weight: bold;
          color: #333;
        }

        .memory-search {
          display: flex;
          gap: 10px;
          margin-bottom: 20px;
        }

        .memory-search input {
          flex: 1;
          padding: 8px 12px;
          border: 1px solid #ddd;
          border-radius: 4px;
        }

        .search-results {
          margin-bottom: 20px;
        }

        .search-result {
          padding: 10px;
          border: 1px solid #eee;
          border-radius: 4px;
          margin-bottom: 10px;
        }

        .result-type {
          font-size: 12px;
          color: #666;
          text-transform: uppercase;
        }

        .result-text {
          margin: 5px 0;
        }

        .result-timestamp {
          font-size: 12px;
          color: #999;
        }

        .conversation-history {
          margin-bottom: 20px;
        }

        .history-stats {
          display: flex;
          gap: 20px;
          margin-bottom: 10px;
          font-size: 14px;
          color: #666;
        }

        .history-item {
          padding: 15px;
          border: 1px solid #eee;
          border-radius: 4px;
          margin-bottom: 10px;
        }

        .history-prompt {
          margin-bottom: 10px;
        }

        .history-response {
          margin-bottom: 10px;
          color: #666;
        }

        .history-timestamp {
          font-size: 12px;
          color: #999;
        }

        .memory-details {
          padding: 15px;
          background: #f9f9f9;
          border-radius: 4px;
        }

        .memory-info p {
          margin: 5px 0;
        }

        .btn {
          padding: 8px 16px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 14px;
        }

        .btn-primary {
          background: #007bff;
          color: white;
        }

        .btn-secondary {
          background: #6c757d;
          color: white;
        }

        .btn-danger {
          background: #dc3545;
          color: white;
        }

        .btn:hover {
          opacity: 0.8;
        }

        .loading {
          text-align: center;
          padding: 20px;
          color: #666;
        }
      `})]})},OJ=({projectId:n,initialFiles:e={}})=>{const[t,r]=A.useState("code"),[s,i]=A.useState(e),[o,u]=A.useState(null),[d,p]=A.useState(!1),[f,y]=A.useState(!1),[x,S]=A.useState(null),E=[{id:"code",name:"Code Editor",icon:"💻"},{id:"visual",name:"Visual Editor",icon:"🎨"},{id:"collaboration",name:"Collaboration",icon:"🤝"},{id:"deployment",name:"Deployment",icon:"🚀"},{id:"memory",name:"Memory",icon:"🧠"}],k=(F,G)=>{i(q=>({...q,[F]:G}))},I=F=>{F.appCode&&k("src/App.jsx",F.appCode),F.cssCode&&k("src/App.css",F.cssCode)},M=F=>{S(F),console.log("Deployment result:",F)},j=F=>{i(G=>({...G,...F})),console.log("Version restored:",F)},C=()=>{switch(t){case"code":return c.jsxs("div",{className:"code-editor-tab",children:[c.jsxs("div",{className:"file-explorer",children:[c.jsx("h3",{children:"📁 Files"}),c.jsx("div",{className:"file-list",children:Object.keys(s).map(F=>c.jsxs("div",{className:`file-item ${o===F?"selected":""}`,onClick:()=>u(F),children:[c.jsx("span",{className:"file-icon",children:"📄"}),c.jsx("span",{className:"file-name",children:F})]},F))})]}),c.jsx("div",{className:"code-editor",children:o&&c.jsxs("div",{className:"editor-container",children:[c.jsxs("div",{className:"editor-header",children:[c.jsx("span",{className:"file-name",children:o}),c.jsxs("div",{className:"editor-actions",children:[c.jsx("button",{className:"btn btn-sm",children:"Save"}),c.jsx("button",{className:"btn btn-sm",children:"Format"})]})]}),c.jsx("textarea",{className:"code-textarea",value:s[o]||"",onChange:F=>k(o,F.target.value),placeholder:"Start coding..."})]})})]});case"visual":return c.jsx("div",{className:"visual-editor-tab",children:c.jsx(AJ,{projectId:n,onCodeChange:I,initialComponents:[]})});case"collaboration":return c.jsxs("div",{className:"collaboration-tab",children:[c.jsxs("div",{className:"collaboration-header",children:[c.jsx("h3",{children:"🤝 Real-time Collaboration"}),c.jsxs("button",{className:`btn ${d?"btn-danger":"btn-primary"}`,onClick:()=>p(!d),children:[d?"Disable":"Enable"," Collaboration"]})]}),d?c.jsx(vW,{projectId:n,fileId:o,onFileChange:k,onVersionRestore:j}):c.jsxs("div",{className:"collaboration-disabled",children:[c.jsx("p",{children:"Enable collaboration to work with team members in real-time"}),c.jsxs("ul",{children:[c.jsx("li",{children:"Multi-user co-editing"}),c.jsx("li",{children:"Real-time comments"}),c.jsx("li",{children:"Version history"}),c.jsx("li",{children:"User presence"})]})]})]});case"deployment":return c.jsxs("div",{className:"deployment-tab",children:[c.jsx(RJ,{projectId:n,projectData:{files:s},onDeploy:M}),x&&c.jsxs("div",{className:"deployment-result",children:[c.jsx("h4",{children:"Deployment Result"}),c.jsxs("div",{className:"result-details",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Provider:"})," ",x.provider]}),c.jsxs("p",{children:[c.jsx("strong",{children:"URL:"})," ",c.jsx("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",children:x.url})]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Status:"})," ",x.status]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Deployed:"})," ",new Date(x.deployedAt).toLocaleString()]})]})]})]});case"memory":return c.jsx("div",{className:"memory-tab",children:c.jsx(DJ,{projectId:n,onMemoryUpdate:()=>console.log("Memory updated")})});default:return c.jsx("div",{children:"Select a tab to get started"})}};return c.jsxs("div",{className:"integrated-workspace",children:[c.jsxs("div",{className:"workspace-header",children:[c.jsx("h2",{children:"🚀 DreamBuild Advanced Workspace"}),c.jsxs("div",{className:"workspace-status",children:[c.jsx("span",{className:"status-indicator",children:"●"}),c.jsxs("span",{children:["Project: ",n]})]})]}),c.jsx("div",{className:"workspace-tabs",children:E.map(F=>c.jsxs("button",{className:`tab-button ${t===F.id?"active":""}`,onClick:()=>r(F.id),children:[c.jsx("span",{className:"tab-icon",children:F.icon}),c.jsx("span",{className:"tab-name",children:F.name})]},F.id))}),c.jsx("div",{className:"workspace-content",children:C()}),c.jsx("style",{jsx:!0,children:`
        .integrated-workspace {
          height: 100vh;
          display: flex;
          flex-direction: column;
          background: #f5f5f5;
        }

        .workspace-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 15px 20px;
          background: white;
          border-bottom: 1px solid #ddd;
        }

        .workspace-status {
          display: flex;
          align-items: center;
          gap: 8px;
          color: #666;
        }

        .status-indicator {
          color: #28a745;
        }

        .workspace-tabs {
          display: flex;
          background: white;
          border-bottom: 1px solid #ddd;
          overflow-x: auto;
        }

        .tab-button {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 12px 20px;
          border: none;
          background: transparent;
          cursor: pointer;
          border-bottom: 3px solid transparent;
          transition: all 0.3s ease;
        }

        .tab-button:hover {
          background: #f8f9fa;
        }

        .tab-button.active {
          border-bottom-color: #007bff;
          background: #f8f9ff;
        }

        .tab-icon {
          font-size: 16px;
        }

        .tab-name {
          font-size: 14px;
          font-weight: 500;
        }

        .workspace-content {
          flex: 1;
          overflow: hidden;
        }

        .code-editor-tab {
          display: flex;
          height: 100%;
        }

        .file-explorer {
          width: 250px;
          background: white;
          border-right: 1px solid #ddd;
          padding: 20px;
          overflow-y: auto;
        }

        .file-list {
          margin-top: 15px;
        }

        .file-item {
          display: flex;
          align-items: center;
          gap: 8px;
          padding: 8px 12px;
          cursor: pointer;
          border-radius: 4px;
          transition: background 0.2s ease;
        }

        .file-item:hover {
          background: #f8f9fa;
        }

        .file-item.selected {
          background: #e3f2fd;
          color: #1976d2;
        }

        .file-icon {
          font-size: 14px;
        }

        .file-name {
          font-size: 14px;
        }

        .code-editor {
          flex: 1;
          display: flex;
          flex-direction: column;
        }

        .editor-container {
          flex: 1;
          display: flex;
          flex-direction: column;
        }

        .editor-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 10px 15px;
          background: #f8f9fa;
          border-bottom: 1px solid #ddd;
        }

        .editor-actions {
          display: flex;
          gap: 8px;
        }

        .code-textarea {
          flex: 1;
          padding: 20px;
          border: none;
          font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
          font-size: 14px;
          line-height: 1.5;
          resize: none;
          outline: none;
        }

        .collaboration-tab,
        .deployment-tab,
        .memory-tab {
          padding: 20px;
          height: 100%;
          overflow-y: auto;
        }

        .collaboration-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 20px;
        }

        .collaboration-disabled {
          text-align: center;
          padding: 40px;
          color: #666;
        }

        .collaboration-disabled ul {
          text-align: left;
          max-width: 300px;
          margin: 20px auto;
        }

        .deployment-result {
          margin-top: 20px;
          padding: 15px;
          background: #f8f9fa;
          border-radius: 8px;
        }

        .result-details p {
          margin: 5px 0;
        }

        .result-details a {
          color: #007bff;
          text-decoration: none;
        }

        .btn {
          padding: 8px 16px;
          border: none;
          border-radius: 4px;
          cursor: pointer;
          font-size: 14px;
          font-weight: 500;
        }

        .btn-primary {
          background: #007bff;
          color: white;
        }

        .btn-danger {
          background: #dc3545;
          color: white;
        }

        .btn-sm {
          padding: 4px 8px;
          font-size: 12px;
        }

        .btn:hover {
          opacity: 0.8;
        }
      `})]})},MJ=({children:n,direction:e="horizontal",className:t=""})=>c.jsx("div",{className:`resizable-panel-group flex ${e} h-full ${t}`,children:n}),Nx=({children:n,defaultSize:e=50,minSize:t=10,maxSize:r=90,className:s=""})=>c.jsx("div",{className:`resizable-panel ${s}`,style:{flexBasis:`${e}%`,minWidth:`${t}%`,maxWidth:`${r}%`},children:n}),jC=({className:n="",onResize:e,children:t,handleIndex:r=0})=>{const[s,i]=A.useState(!1),o=A.useRef(null),u=f=>{i(!0),f.preventDefault(),document.body.style.cursor="col-resize",document.body.style.userSelect="none",console.log("Handle clicked:",r)},d=A.useCallback(f=>{if(!s)return;const y=o.current?.parentElement;if(!y)return;const x=y.getBoundingClientRect(),E=(f.clientX-x.left)/x.width*100,I=Array.from(y.children).filter(M=>M.classList.contains("resizable-panel"));if(console.log("Total panels found:",I.length,"Handle index:",r),I.length>=2){let M,j;if(r===0?(M=I[0],j=I[1],console.log("Resizing File Manager and Code Editor")):r===1&&(M=I[1],j=I[2],console.log("Resizing Code Editor and AI Assistant")),M&&j){const C=Math.max(15,Math.min(70,E)),F=Math.max(15,Math.min(70,100-C));console.log("Setting sizes:",{leftSize:C,rightSize:F,percentage:E}),M.style.flexBasis=`${C}%`,j.style.flexBasis=`${F}%`,M.style.border="3px solid red",j.style.border="3px solid blue",setTimeout(()=>{M.style.border="",j.style.border=""},300),e&&e({leftSize:C,rightSize:F})}}},[s,e,r]),p=A.useCallback(()=>{i(!1),document.body.style.cursor="",document.body.style.userSelect=""},[]);return A.useEffect(()=>{if(s)return document.addEventListener("mousemove",d),document.addEventListener("mouseup",p),()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",p)}},[s,d,p]),c.jsx("div",{ref:o,className:`resizable-handle w-2 bg-border/30 hover:bg-primary/50 transition-all duration-200 cursor-col-resize hover:w-3 group flex items-center justify-center ${s?"bg-primary/70":""} ${n}`,onMouseDown:u,children:t||c.jsx("div",{className:"w-1 h-8 bg-border/50 rounded-full group-hover:bg-primary/70 transition-colors"})})},LJ=()=>{const[n,e]=A.useState("editor"),[t,r]=A.useState(!1),s=[{id:"editor",label:"Code Editor",icon:Rt,description:"Edit your code with live preview"},{id:"preview",label:"Live Preview",icon:Ih,description:"View your application in real-time"},{id:"terminal",label:"Terminal",icon:Ib,description:"Command line interface"},{id:"workspace",label:"Advanced Workspace",icon:zr,description:"Full-featured workspace with collaboration, visual editor, and deployment"}],i=o=>{o==="workspace"?n==="workspace"&&t?(r(!1),e("editor")):(r(!0),e(o)):(e(o),r(!1))};return c.jsxs("div",{className:"h-screen bg-background flex flex-col pt-16",children:[c.jsxs("div",{className:"flex items-center justify-between px-6 py-4 bg-card/80 backdrop-blur-sm border-b border-border/50 shadow-sm",children:[c.jsx("div",{className:"flex items-center gap-4",children:c.jsx("h1",{className:"text-lg font-semibold text-foreground",children:"AI Builder"})}),c.jsx("div",{className:"flex items-center gap-1 bg-background/50 p-1 rounded-lg border border-border/50",children:s.map(o=>{const u=o.icon;return c.jsxs(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(o.id),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${n===o.id?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-background/50"}`,title:o.description,children:[c.jsx(u,{className:"h-4 w-4"}),c.jsx("span",{children:o.label})]},o.id)})})]}),c.jsx("div",{className:"flex-1 p-6",children:c.jsxs(MJ,{direction:"horizontal",className:"h-full gap-2",children:[c.jsx(Nx,{defaultSize:20,minSize:10,maxSize:50,children:c.jsxs("div",{className:"h-full bg-card border border-border rounded-xl shadow-sm overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-muted/30 border-b border-border/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(wo,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm font-medium text-foreground",children:"Files"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Active"})]})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsx(bq,{})})]})}),c.jsx(jC,{className:"w-2 bg-border/30 hover:bg-primary/50 transition-all duration-200 cursor-col-resize hover:w-3 group",handleIndex:0,children:c.jsx("div",{className:"w-1 h-8 bg-border/50 rounded-full mx-auto group-hover:bg-primary/70 transition-colors"})}),c.jsx(Nx,{defaultSize:50,minSize:25,maxSize:70,children:c.jsxs("div",{className:"h-full bg-card border border-border rounded-xl shadow-sm overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-muted/30 border-b border-border/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[n==="editor"&&c.jsx(Rt,{className:"h-4 w-4 text-primary"}),n==="preview"&&c.jsx(Ih,{className:"h-4 w-4 text-primary"}),n==="workspace"&&c.jsx(zr,{className:"h-4 w-4 text-primary"}),n==="terminal"&&c.jsx(Ib,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm font-medium text-foreground capitalize",children:n})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Ready"})]})]}),c.jsxs("div",{className:"flex-1 overflow-hidden h-full min-h-[600px]",children:[n==="editor"&&c.jsx(I7,{}),n==="preview"&&c.jsx(C7,{}),n==="workspace"&&t&&c.jsx(OJ,{projectId:"demo-project"}),n==="workspace"&&!t&&c.jsx("div",{className:"h-full flex items-center justify-center bg-muted/20",children:c.jsxs("div",{className:"text-center",children:[c.jsx(zr,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-medium text-foreground mb-2",children:"Advanced Workspace"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Click the Advanced Workspace button to open the full-featured workspace"}),c.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.jsx("p",{children:"Features include:"}),c.jsxs("ul",{className:"mt-2 space-y-1",children:[c.jsx("li",{children:"• Real-time Collaboration"}),c.jsx("li",{children:"• Visual Editor"}),c.jsx("li",{children:"• One-click Deployment"}),c.jsx("li",{children:"• Memory Management"})]})]})]})}),n==="terminal"&&c.jsx("div",{className:"h-full flex flex-col bg-gray-900",children:c.jsx("div",{className:"flex-grow p-4 text-green-400 font-mono text-sm overflow-y-auto",children:c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-green-400",children:"user@dreambuild"}),c.jsx("span",{className:"text-gray-500",children:"$"}),c.jsx("span",{className:"text-gray-300",children:"npm run dev"})]}),c.jsx("div",{className:"text-gray-400",children:"Starting development server..."}),c.jsx("div",{className:"text-green-400",children:"✓ Server running on http://localhost:3000"}),c.jsx("div",{className:"text-blue-400",children:"✓ Ready in 2.3s"}),c.jsx("div",{className:"mt-4",children:c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-green-400",children:"user@dreambuild"}),c.jsx("span",{className:"text-gray-500",children:"$"}),c.jsx("span",{className:"text-gray-300 animate-pulse",children:"_"})]})})]})})})]})]})}),c.jsx(jC,{className:"w-2 bg-border/30 hover:bg-primary/50 transition-all duration-200 cursor-col-resize hover:w-3 group",handleIndex:1,children:c.jsx("div",{className:"w-1 h-8 bg-border/50 rounded-full mx-auto group-hover:bg-primary/70 transition-colors"})}),c.jsx(Nx,{defaultSize:30,minSize:15,maxSize:60,children:c.jsxs("div",{className:"h-full bg-card border border-border rounded-xl shadow-sm overflow-hidden flex flex-col",children:[c.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-muted/30 border-b border-border/50",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(zr,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm font-medium text-foreground",children:"AI Assistant"})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),c.jsx("span",{className:"text-xs text-muted-foreground",children:"Online"})]})]}),c.jsx("div",{className:"flex-1 overflow-hidden",children:c.jsx(gW,{})})]})})]})})]})},FJ=()=>{const{currentProject:n,projects:e}=Jo(),[t,r]=A.useState("7d"),[s,i]=A.useState(!0);A.useEffect(()=>{const y=setTimeout(()=>i(!1),1e3);return()=>clearTimeout(y)},[]);const o={totalProjects:12,aiGenerations:89,linesOfCode:12450,hoursSpent:42.5},u=[{id:1,type:"ai_generation",project:"E-commerce Store",action:"Generated React component",time:"2 minutes ago",icon:zr,color:"text-white"},{id:2,type:"file_created",project:"Portfolio Website",action:"Created new CSS file",time:"15 minutes ago",icon:Rw,color:"text-green-600"},{id:3,type:"project_completed",project:"Task Manager App",action:"Project marked as completed",time:"1 hour ago",icon:Jf,color:"text-yellow-600"},{id:4,type:"deployment",project:"Analytics Dashboard",action:"Deployed to Firebase",time:"3 hours ago",icon:So,color:"text-purple-600"}],d=[{name:"E-commerce Store",files:24,lastModified:"2 min ago",type:"web",progress:85},{name:"Portfolio Website",files:12,lastModified:"15 min ago",type:"web",progress:100},{name:"Task Manager App",files:18,lastModified:"1 hour ago",type:"mobile",progress:100},{name:"Analytics Dashboard",files:31,lastModified:"3 hours ago",type:"dashboard",progress:75}],p=[{language:"JavaScript",percentage:45,files:70,color:"bg-yellow-500"},{language:"HTML",percentage:25,files:39,color:"bg-orange-500"},{language:"CSS",percentage:20,files:31,color:"bg-white"},{language:"Python",percentage:10,files:16,color:"bg-green-500"}],f=({title:y,value:x,icon:S,change:E,changeType:k,description:I})=>c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6 hover:shadow-md transition-all duration-200",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-lg flex items-center justify-center",children:c.jsx(S,{className:"h-6 w-6 text-white"})}),E&&c.jsxs("div",{className:`flex items-center gap-1 text-sm ${k==="increase"?"text-green-600":"text-red-600"}`,children:[k==="increase"?c.jsx(F$,{className:"h-4 w-4"}):c.jsx(L$,{className:"h-4 w-4"}),E]})]}),c.jsx("h3",{className:"text-2xl font-bold text-foreground mb-1",children:x}),c.jsx("p",{className:"text-sm text-muted-foreground",children:y}),I&&c.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:I})]});return s?c.jsx("div",{className:"min-h-screen bg-background",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-muted rounded w-1/4 mb-6"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((y,x)=>c.jsxs("div",{className:"bg-card/50 rounded-xl p-6",children:[c.jsx("div",{className:"h-12 w-12 bg-muted rounded-lg mb-4"}),c.jsx("div",{className:"h-6 bg-muted rounded w-1/2 mb-2"}),c.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})]},x))})]})})}):c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Dashboard"}),c.jsx("p",{className:"text-muted-foreground",children:"Welcome back! Here's what's happening with your projects."})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("select",{value:t,onChange:y=>r(y.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:"7d",children:"Last 7 days"}),c.jsx("option",{value:"30d",children:"Last 30 days"}),c.jsx("option",{value:"90d",children:"Last 90 days"})]})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[c.jsx(f,{title:"Total Projects",value:o.totalProjects,icon:wo,change:"+2",changeType:"increase",description:"This week"}),c.jsx(f,{title:"AI Generations",value:o.aiGenerations,icon:zr,change:"+12",changeType:"increase",description:"This week"}),c.jsx(f,{title:"Lines of Code",value:o.linesOfCode.toLocaleString(),icon:Rt,change:"+1.2k",changeType:"increase",description:"This week"}),c.jsx(f,{title:"Hours Spent",value:o.hoursSpent,icon:Eu,change:"+5.2h",changeType:"increase",description:"This week"})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[c.jsxs("div",{className:"lg:col-span-2 bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[c.jsx(O$,{className:"h-5 w-5 text-white"}),"Recent Activity"]}),c.jsx("button",{className:"text-sm text-white hover:text-gray-300 transition-colors",children:"View all"})]}),c.jsx("div",{className:"space-y-4",children:u.map((y,x)=>{const S=y.icon;return c.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},className:"flex items-center gap-3 p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[c.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${y.color.replace("text-","bg-").replace("-600","-100")}`,children:c.jsx(S,{className:`h-4 w-4 ${y.color}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-foreground",children:y.action}),c.jsx("p",{className:"text-xs text-muted-foreground",children:y.project})]}),c.jsx("span",{className:"text-xs text-muted-foreground",children:y.time})]},y.id)})})]}),c.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-foreground mb-6 flex items-center gap-2",children:[c.jsx(Zd,{className:"h-5 w-5 text-white"}),"Top Projects"]}),c.jsx("div",{className:"space-y-4",children:d.map((y,x)=>c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"p-3 rounded-lg hover:bg-muted/50 transition-colors cursor-pointer",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("h3",{className:"font-medium text-foreground text-sm",children:y.name}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.files," files"]})]}),c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("div",{className:"flex-1 bg-muted rounded-full h-2 mr-3",children:c.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-300",style:{width:`${y.progress}%`}})}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.progress,"%"]})]}),c.jsx("p",{className:"text-xs text-muted-foreground",children:y.lastModified})]},y.name))})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-foreground mb-6 flex items-center gap-2",children:[c.jsx(Rt,{className:"h-5 w-5 text-white"}),"Language Usage"]}),c.jsx("div",{className:"space-y-4",children:p.map((y,x)=>c.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:x*.1},className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-4 h-4 rounded-full bg-muted flex items-center justify-center",children:c.jsx("div",{className:`w-2 h-2 rounded-full ${y.color}`})}),c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center justify-between mb-1",children:[c.jsx("span",{className:"text-sm font-medium text-foreground",children:y.language}),c.jsxs("span",{className:"text-xs text-muted-foreground",children:[y.percentage,"%"]})]}),c.jsx("div",{className:"bg-muted rounded-full h-2",children:c.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${y.color}`,style:{width:`${y.percentage}%`}})}),c.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y.files," files"]})]})]},y.language))})]}),c.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6",children:[c.jsxs("h2",{className:"text-xl font-semibold text-foreground mb-6 flex items-center gap-2",children:[c.jsx(Jr,{className:"h-5 w-5 text-white"}),"Quick Actions"]}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{name:"New Project",icon:wo,color:"bg-white",href:"/ai-builder"},{name:"AI Builder",icon:zr,color:"bg-purple-500",href:"/ai-builder"},{name:"View Projects",icon:Rs,color:"bg-green-500",href:"/projects"},{name:"Settings",icon:Es,color:"bg-orange-500",href:"/settings"}].map((y,x)=>c.jsxs(ge.a,{href:y.href,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:x*.1},className:"flex flex-col items-center p-4 rounded-lg hover:bg-muted/50 transition-all duration-200 group",children:[c.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center mb-3 ${y.color} group-hover:scale-105 transition-transform`,children:c.jsx(y.icon,{className:"h-6 w-6 text-white"})}),c.jsx("span",{className:"text-sm font-medium text-foreground text-center",children:y.name})]},y.name))})]})]})]})})},VJ=()=>{const{user:n,signInWithGoogle:e,loading:t}=Hg(),r=Zb(),[s,i]=A.useState(!1);A.useEffect(()=>{n&&!t&&r("/dashboard")},[n,t,r]);const o=async()=>{try{i(!0),await e()}catch(d){console.error("Sign in error:",d)}finally{i(!1)}},u=()=>{console.log("GitHub authentication coming soon!")};return t?c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):c.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:[c.jsxs("div",{className:"flex justify-between items-center p-6 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm border-b border-slate-200/50 dark:border-slate-700/50",children:[c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-600 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg",children:c.jsx("span",{className:"text-white font-bold text-lg",children:"D"})}),c.jsx("span",{className:"font-bold text-xl text-slate-800 dark:text-white",children:"DreamBuild"})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/login",className:"px-5 py-2.5 text-sm font-semibold text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-400 transition-colors",children:"Sign in"}),c.jsx(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.location.href="/signup",className:"px-5 py-2.5 text-sm font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl",children:"Sign up"})]})]}),c.jsx("div",{className:"flex items-center justify-center p-6 -mt-20",children:c.jsx("div",{className:"w-full max-w-md",children:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl p-8 shadow-2xl",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:c.jsx("span",{className:"text-white font-bold text-2xl",children:"D"})}),c.jsx("h1",{className:"text-2xl font-bold mb-2 text-slate-800 dark:text-white",children:"Welcome back"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"Sign in to continue building amazing applications"})]}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,disabled:s,className:"w-full flex items-center justify-center gap-3 p-4 border border-slate-200 dark:border-slate-600 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all text-sm font-semibold bg-white dark:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm hover:shadow-md",children:[s?c.jsx(qg,{className:"h-5 w-5 animate-spin text-blue-600"}):c.jsx("div",{className:"w-5 h-5 bg-gradient-to-r from-blue-500 to-red-500 rounded flex items-center justify-center",children:c.jsx("span",{className:"text-white text-xs font-bold",children:"G"})}),s?"Signing in...":"Continue with Google"]}),c.jsxs(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:u,className:"w-full flex items-center justify-center gap-3 p-4 border border-slate-200 dark:border-slate-600 rounded-xl hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-all text-sm font-semibold bg-white dark:bg-slate-700 shadow-sm hover:shadow-md",children:[c.jsx(js,{className:"h-5 w-5"}),"Continue with GitHub"]})]}),c.jsxs("div",{className:"relative my-8",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-slate-200 dark:border-slate-600"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"bg-white dark:bg-slate-800 px-4 text-slate-500 dark:text-slate-400 font-medium",children:"or"})})]}),c.jsx("div",{className:"text-center",children:c.jsxs(ge.a,{whileHover:{scale:1.05},whileTap:{scale:.95},href:"/ai-builder",className:"inline-flex items-center gap-2 px-6 py-3 text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors font-semibold text-sm bg-blue-50 dark:bg-blue-900/20 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded-xl border border-blue-200 dark:border-blue-700 hover:border-blue-300 dark:hover:border-blue-600",children:["Continue as Guest",c.jsx(np,{className:"h-4 w-4"})]})})]})})})]})},BJ=()=>{const{user:n,signInWithGoogle:e,loading:t}=Hg(),r=Zb(),[s,i]=A.useState(!1);A.useEffect(()=>{n&&!t&&r("/dashboard")},[n,t,r]);const o=async()=>{try{i(!0),await e(),Me.success("Welcome to DreamBuild!")}catch(d){console.error("Sign in error:",d),Me.error("Failed to sign in. Please try again.")}finally{i(!1)}},u=()=>{Me.info("GitHub authentication coming soon!")};return t?c.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"w-8 h-8 border-2 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),c.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsxs("div",{className:"flex justify-between items-center p-4",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary to-primary-light rounded-lg flex items-center justify-center",children:c.jsx("span",{className:"text-primary-foreground font-bold text-sm",children:"D"})}),c.jsx("span",{className:"font-semibold text-foreground",children:"DreamBuild"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.href="/login",className:"px-4 py-2 text-sm font-medium text-foreground hover:text-primary transition-colors",children:"Sign in"}),c.jsx(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>window.location.href="/signup",className:"px-4 py-2 text-sm font-medium bg-primary text-primary-foreground rounded-md hover:bg-primary-dark transition-colors",children:"Sign up"})]})]}),c.jsx("div",{className:"flex items-center justify-center p-4 -mt-16",children:c.jsx("div",{className:"w-full max-w-xs",children:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-card border border-border rounded-xl p-6 shadow-sm",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("h1",{className:"text-xl font-bold mb-1 text-foreground",children:"Join DreamBuild"}),c.jsx("p",{className:"text-muted-foreground text-xs",children:"Create your account"})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs(ge.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:o,disabled:s,className:"w-full flex items-center justify-center gap-2 p-2.5 border border-border rounded-md hover:bg-muted/30 transition-colors text-sm font-medium bg-background disabled:opacity-50 disabled:cursor-not-allowed",children:[s?c.jsx(qg,{className:"h-4 w-4 animate-spin text-primary"}):c.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[c.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),c.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),c.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),c.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s?"Creating account...":"Continue with Google"]}),c.jsxs(ge.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:u,className:"w-full flex items-center justify-center gap-2 p-2.5 border border-border rounded-md hover:bg-muted/30 transition-colors text-sm font-medium bg-background",children:[c.jsx(js,{className:"h-4 w-4"}),"Continue with GitHub"]})]}),c.jsxs("div",{className:"relative my-4",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-border"})}),c.jsx("div",{className:"relative flex justify-center text-xs",children:c.jsx("span",{className:"bg-card px-2 text-muted-foreground",children:"or"})})]}),c.jsx("div",{className:"text-center",children:c.jsxs(ge.a,{whileHover:{scale:1.02},whileTap:{scale:.98},href:"/ai-builder",className:"inline-flex items-center gap-1 px-3 py-1.5 text-primary hover:text-primary-dark transition-colors font-medium text-xs",children:["Continue as Guest",c.jsx(np,{className:"h-3 w-3"})]})})]})})})]})},UJ=()=>{const{currentProject:n,createNewProject:e,projects:t,switchProject:r}=Jo(),[s,i]=A.useState(""),[o,u]=A.useState("all"),[d,p]=A.useState(!1),[f,y]=A.useState(""),[x,S]=A.useState("web"),[E,k]=A.useState(null),[I,M]=A.useState([{id:"1",name:"E-commerce Store",type:"ecommerce",description:"Modern e-commerce platform with React and Node.js",status:"active",lastModified:"2024-01-15",files:12,size:"2.4 MB",tags:["React","Node.js","E-commerce"],preview:"https://via.placeholder.com/300x200/007acc/ffffff?text=E-commerce+Store"},{id:"2",name:"Portfolio Website",type:"web",description:"Personal portfolio website with modern design",status:"completed",lastModified:"2024-01-10",files:8,size:"1.2 MB",tags:["HTML","CSS","JavaScript"],preview:"https://via.placeholder.com/300x200/28a745/ffffff?text=Portfolio+Website"},{id:"3",name:"Task Manager App",type:"mobile",description:"Mobile task management application",status:"development",lastModified:"2024-01-12",files:15,size:"3.1 MB",tags:["React Native","Firebase"],preview:"https://via.placeholder.com/300x200/ffc107/000000?text=Task+Manager"},{id:"4",name:"Analytics Dashboard",type:"dashboard",description:"Business analytics dashboard with charts",status:"active",lastModified:"2024-01-14",files:20,size:"4.2 MB",tags:["Vue.js","D3.js","Charts"],preview:"https://via.placeholder.com/300x200/6f42c1/ffffff?text=Analytics+Dashboard"},{id:"5",name:"REST API Service",type:"api",description:"Node.js REST API with authentication and database",status:"active",lastModified:"2024-01-16",files:25,size:"1.8 MB",tags:["Node.js","Express","MongoDB"],preview:"https://via.placeholder.com/300x200/17a2b8/ffffff?text=REST+API"},{id:"6",name:"Space Adventure Game",type:"game",description:"2D space shooter game built with JavaScript",status:"development",lastModified:"2024-01-13",files:18,size:"2.9 MB",tags:["JavaScript","Canvas","Game"],preview:"https://via.placeholder.com/300x200/e83e8c/ffffff?text=Space+Game"},{id:"7",name:"Social Media App",type:"mobile",description:"Social networking app with real-time chat",status:"active",lastModified:"2024-01-17",files:22,size:"4.1 MB",tags:["Flutter","Firebase","Chat"],preview:"https://via.placeholder.com/300x200/20c997/ffffff?text=Social+App"},{id:"8",name:"Admin Dashboard",type:"dashboard",description:"Administrative interface for managing users and content",status:"completed",lastModified:"2024-01-11",files:16,size:"3.3 MB",tags:["React","Material-UI","Admin"],preview:"https://via.placeholder.com/300x200/6c757d/ffffff?text=Admin+Dashboard"}]),j=[{id:"all",name:"All",icon:wo,count:I.length},{id:"web",name:"Web Apps",icon:Rs,count:I.filter(_=>_.type==="web").length},{id:"mobile",name:"Mobile",icon:Rt,count:I.filter(_=>_.type==="mobile").length},{id:"dashboard",name:"Dashboards",icon:Es,count:I.filter(_=>_.type==="dashboard").length},{id:"api",name:"APIs",icon:Es,count:I.filter(_=>_.type==="api").length},{id:"game",name:"Games",icon:Jf,count:I.filter(_=>_.type==="game").length},{id:"ecommerce",name:"E-commerce",icon:Es,count:I.filter(_=>_.type==="ecommerce").length},{id:"completed",name:"Completed",icon:Jf,count:I.filter(_=>_.status==="completed").length}],C=I.filter(_=>{const R=_.name.toLowerCase().includes(s.toLowerCase())||_.description.toLowerCase().includes(s.toLowerCase())||_.tags.some(B=>B.toLowerCase().includes(s.toLowerCase())),O=o==="all"||_.type===o||_.status===o;return R&&O}),F=()=>{if(!f.trim()){Me.error("Please enter a project name");return}const _={id:Date.now().toString(),name:f,type:x,description:`New ${x} project`,status:"active",lastModified:new Date().toISOString().split("T")[0],files:0,size:"0 MB",tags:[x],preview:"https://via.placeholder.com/300x200/6c757d/ffffff?text=New+Project"};M([_,...I]),y(""),S("web"),p(!1),Me.success("Project created successfully!")},G=_=>{M(I.filter(R=>R.id!==_)),k(null),Me.success("Project deleted successfully!")},q=_=>{switch(_){case"active":return"bg-green-100 text-green-800 border-green-200";case"development":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-white/10 text-white border-white/20";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=_=>{switch(_){case"web":return Rs;case"mobile":return Rt;case"dashboard":return Es;default:return wo}};return c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-8",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Projects"}),c.jsx("p",{className:"text-muted-foreground",children:"Manage your AI-generated projects"})]}),c.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:[c.jsx(Kf,{className:"h-4 w-4"}),"New Project"]})]}),c.jsx("div",{className:"flex items-center gap-1 bg-muted/50 p-1 rounded-lg mb-6",children:j.map(_=>{const R=_.icon,O=o===_.id;return c.jsxs(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>u(_.id),className:`flex items-center gap-2 px-4 py-2 rounded-md text-sm font-medium transition-all duration-200 ${O?"bg-primary text-primary-foreground shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:[c.jsx(R,{className:"h-4 w-4"}),_.name,c.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded-full ${O?"bg-primary-foreground/20":"bg-muted"}`,children:_.count})]},_.id)})}),c.jsxs("div",{className:"relative mb-6",children:[c.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx("input",{type:"text",placeholder:"Search projects...",value:s,onChange:_=>i(_.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),c.jsx("div",{className:"space-y-2",children:C.map((_,R)=>{const O=N(_.type);return c.jsxs(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:R*.05},className:"bg-card border border-border rounded-lg p-4 hover:shadow-sm transition-all duration-200 group",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:c.jsx(O,{className:"h-5 w-5 text-primary"})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[c.jsx("h3",{className:"font-semibold text-foreground truncate",children:_.name}),c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${q(_.status)}`,children:_.status})]}),c.jsx("p",{className:"text-sm text-muted-foreground truncate mb-2",children:_.description}),c.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Rw,{className:"h-3 w-3"}),_.files," files"]}),c.jsx("span",{children:_.size}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Cc,{className:"h-3 w-3"}),_.lastModified]})]})]}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("div",{className:"flex gap-1",children:[_.tags.slice(0,2).map(B=>c.jsx("span",{className:"px-2 py-1 text-xs bg-muted text-muted-foreground rounded-md",children:B},B)),_.tags.length>2&&c.jsxs("span",{className:"px-2 py-1 text-xs bg-muted text-muted-foreground rounded-md",children:["+",_.tags.length-2]})]})})]}),c.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[c.jsx(ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 hover:bg-muted rounded-md transition-colors",onClick:()=>r(_.id),children:c.jsx(Ih,{className:"h-4 w-4 text-muted-foreground"})}),c.jsx(ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 hover:bg-muted rounded-md transition-colors",children:c.jsx(Eb,{className:"h-4 w-4 text-muted-foreground"})}),c.jsx("button",{onClick:()=>k(E===_.id?null:_.id),className:"p-2 hover:bg-muted rounded-md transition-colors",children:c.jsx(K$,{className:"h-4 w-4 text-muted-foreground"})})]})]}),c.jsx(Ts,{children:E===_.id&&c.jsx(ge.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute right-4 mt-1 bg-card border border-border rounded-lg shadow-lg z-10 min-w-[150px]",children:c.jsxs("div",{className:"p-1",children:[c.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-muted rounded-md transition-colors",children:[c.jsx(Ih,{className:"h-4 w-4"}),"View"]}),c.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-muted rounded-md transition-colors",children:[c.jsx(Eb,{className:"h-4 w-4"}),"Edit"]}),c.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-muted rounded-md transition-colors",children:[c.jsx(cl,{className:"h-4 w-4"}),"Download"]}),c.jsxs("button",{className:"w-full flex items-center gap-2 px-3 py-2 text-sm hover:bg-muted rounded-md transition-colors",children:[c.jsx(Ej,{className:"h-4 w-4"}),"Share"]}),c.jsx("hr",{className:"my-1"}),c.jsxs("button",{onClick:()=>G(_.id),className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-md transition-colors",children:[c.jsx(Tj,{className:"h-4 w-4"}),"Delete"]})]})})})]},_.id)})}),C.length===0&&c.jsxs("div",{className:"text-center py-12",children:[c.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-lg flex items-center justify-center mx-auto mb-4",children:c.jsx(wo,{className:"h-8 w-8 text-primary"})}),c.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:s||o!=="all"?"No projects found":"No projects yet"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:s||o!=="all"?"Try adjusting your search or filter criteria.":"Create your first project to get started!"}),c.jsxs(ge.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:[c.jsx(Kf,{className:"h-4 w-4"}),"Create Project"]})]})]}),c.jsx(Ts,{children:d&&c.jsx(ge.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>p(!1),children:c.jsxs(ge.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg p-6 w-full max-w-md mx-4",onClick:_=>_.stopPropagation(),children:[c.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Create New Project"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Project Name"}),c.jsx("input",{type:"text",value:f,onChange:_=>y(_.target.value),placeholder:"Enter project name...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",autoFocus:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Project Type"}),c.jsxs("select",{value:x,onChange:_=>S(_.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:"web",children:"Web Application"}),c.jsx("option",{value:"mobile",children:"Mobile Application"}),c.jsx("option",{value:"dashboard",children:"Dashboard"})]})]})]}),c.jsxs("div",{className:"flex gap-3 mt-6",children:[c.jsx(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-border rounded-lg text-foreground hover:bg-muted transition-colors",children:"Cancel"}),c.jsx(ge.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:F,className:"flex-1 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Create"})]})]})})}),E&&c.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>k(null)})]})},$J=()=>{const{theme:n,setTheme:e}=t0(),[t,r]=A.useState("appearance"),[s,i]=A.useState({appearance:{theme:n,fontSize:"medium",fontFamily:"system",animations:!0,compactMode:!1},editor:{tabSize:2,wordWrap:!0,minimap:!0,lineNumbers:!0,autoSave:!0,formatOnSave:!0,autoComplete:!0},ai:{defaultModel:"codellama-7b",temperature:.7,maxTokens:4e3,autoGenerate:!1,suggestions:!0},notifications:{projectUpdates:!0,aiCompletions:!0,errors:!0,sound:!1,email:!1},privacy:{analytics:!0,crashReports:!0,telemetry:!1,shareUsage:!1}}),[o,u]=A.useState(!0),[d,p]=A.useState(!1);A.useEffect(()=>{const C=localStorage.getItem("dreambuild-settings");C&&i(JSON.parse(C)),u(!1)},[]),A.useEffect(()=>{p(!0)},[s]);const f=()=>{localStorage.setItem("dreambuild-settings",JSON.stringify(s)),p(!1),console.log("Settings saved successfully!")},y=()=>{i({appearance:{theme:"system",fontSize:"medium",fontFamily:"system",animations:!0,compactMode:!1},editor:{tabSize:2,wordWrap:!0,minimap:!0,lineNumbers:!0,autoSave:!0,formatOnSave:!0,autoComplete:!0},ai:{defaultModel:"codellama-7b",temperature:.7,maxTokens:4e3,autoGenerate:!1,suggestions:!0},notifications:{projectUpdates:!0,aiCompletions:!0,errors:!0,sound:!1,email:!1},privacy:{analytics:!0,crashReports:!0,telemetry:!1,shareUsage:!1}}),console.log("Settings reset to defaults!")},x=()=>{const C=JSON.stringify(s,null,2),F=new Blob([C],{type:"application/json"}),G=URL.createObjectURL(F),q=document.createElement("a");q.href=G,q.download="dreambuild-settings.json",q.click(),URL.revokeObjectURL(G),console.log("Settings exported!")},S=C=>{const F=C.target.files[0];if(F){const G=new FileReader;G.onload=q=>{try{const N=JSON.parse(q.target.result);i(N),console.log("Settings imported successfully!")}catch{console.error("Invalid settings file!")}},G.readAsText(F)}},E=(C,F,G)=>{i(q=>({...q,[C]:{...q[C],[F]:G}})),C==="appearance"&&F==="theme"&&e(G)},k=[{id:"appearance",name:"Appearance",icon:Sj},{id:"editor",name:"Editor",icon:Rt},{id:"ai",name:"AI Settings",icon:zr},{id:"notifications",name:"Notifications",icon:V$},{id:"privacy",name:"Privacy",icon:Ch}],I=({title:C,description:F,children:G,warning:q})=>c.jsxs("div",{className:"flex items-start justify-between p-4 rounded-lg hover:bg-muted/50 transition-colors",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("h3",{className:"font-medium text-foreground",children:C}),q&&c.jsx(M$,{className:"h-4 w-4 text-yellow-500",title:q})]}),c.jsx("p",{className:"text-sm text-muted-foreground",children:F})]}),c.jsx("div",{className:"ml-4",children:G})]}),M=({checked:C,onChange:F,disabled:G=!1})=>c.jsx("button",{onClick:()=>F(!C),disabled:G,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${C?"bg-gray-700":"bg-muted"} ${G?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:c.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${C?"translate-x-6":"translate-x-1"}`})}),j=()=>{switch(t){case"appearance":return c.jsxs("div",{className:"space-y-1",children:[c.jsx(I,{title:"Theme",description:"Choose your preferred color scheme",children:c.jsxs("select",{value:s.appearance.theme,onChange:C=>E("appearance","theme",C.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:"light",children:"Light Theme"}),c.jsx("option",{value:"dark",children:"Dark Theme"}),c.jsx("option",{value:"system",children:"System Theme"}),c.jsx("option",{value:"blue",children:"Blue Theme"}),c.jsx("option",{value:"purple",children:"Purple Theme"}),c.jsx("option",{value:"green",children:"Green Theme"}),c.jsx("option",{value:"orange",children:"Orange Theme"}),c.jsx("option",{value:"red",children:"Red Theme"}),c.jsx("option",{value:"pink",children:"Pink Theme"}),c.jsx("option",{value:"cyan",children:"Cyan Theme"}),c.jsx("option",{value:"amber",children:"Amber Theme"}),c.jsx("option",{value:"emerald",children:"Emerald Theme"})]})}),c.jsx(I,{title:"Font Size",description:"Adjust the text size throughout the interface",children:c.jsxs("select",{value:s.appearance.fontSize,onChange:C=>E("appearance","fontSize",C.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:"small",children:"Small"}),c.jsx("option",{value:"medium",children:"Medium"}),c.jsx("option",{value:"large",children:"Large"})]})}),c.jsx(I,{title:"Font Family",description:"Choose the font family for the editor",children:c.jsxs("select",{value:s.appearance.fontFamily,onChange:C=>E("appearance","fontFamily",C.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:"system",children:"System Default"}),c.jsx("option",{value:"mono",children:"Monospace"}),c.jsx("option",{value:"sans",children:"Sans Serif"}),c.jsx("option",{value:"serif",children:"Serif"})]})}),c.jsx(I,{title:"Animations",description:"Enable smooth animations and transitions",children:c.jsx(M,{checked:s.appearance.animations,onChange:C=>E("appearance","animations",C)})}),c.jsx(I,{title:"Compact Mode",description:"Reduce spacing for a more compact interface",children:c.jsx(M,{checked:s.appearance.compactMode,onChange:C=>E("appearance","compactMode",C)})})]});case"editor":return c.jsxs("div",{className:"space-y-1",children:[c.jsx(I,{title:"Tab Size",description:"Number of spaces for indentation",children:c.jsxs("select",{value:s.editor.tabSize,onChange:C=>E("editor","tabSize",parseInt(C.target.value)),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:2,children:"2 spaces"}),c.jsx("option",{value:4,children:"4 spaces"}),c.jsx("option",{value:8,children:"8 spaces"})]})}),c.jsx(I,{title:"Word Wrap",description:"Wrap long lines in the editor",children:c.jsx(M,{checked:s.editor.wordWrap,onChange:C=>E("editor","wordWrap",C)})}),c.jsx(I,{title:"Minimap",description:"Show a minimap of your code",children:c.jsx(M,{checked:s.editor.minimap,onChange:C=>E("editor","minimap",C)})}),c.jsx(I,{title:"Line Numbers",description:"Show line numbers in the editor",children:c.jsx(M,{checked:s.editor.lineNumbers,onChange:C=>E("editor","lineNumbers",C)})}),c.jsx(I,{title:"Auto Save",description:"Automatically save files as you type",children:c.jsx(M,{checked:s.editor.autoSave,onChange:C=>E("editor","autoSave",C)})}),c.jsx(I,{title:"Format on Save",description:"Automatically format code when saving",children:c.jsx(M,{checked:s.editor.formatOnSave,onChange:C=>E("editor","formatOnSave",C)})}),c.jsx(I,{title:"Auto Complete",description:"Enable intelligent code completion",children:c.jsx(M,{checked:s.editor.autoComplete,onChange:C=>E("editor","autoComplete",C)})})]});case"ai":return c.jsxs("div",{className:"space-y-1",children:[c.jsx(I,{title:"Default AI Model",description:"Choose your preferred AI model for code generation",children:c.jsxs("select",{value:s.ai.defaultModel,onChange:C=>E("ai","defaultModel",C.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:"codellama-7b",children:"CodeLlama 7B"}),c.jsx("option",{value:"codellama-13b",children:"CodeLlama 13B"}),c.jsx("option",{value:"starcoder-15b",children:"StarCoder 15B"}),c.jsx("option",{value:"deepseek-coder",children:"DeepSeek Coder"}),c.jsx("option",{value:"wizardcoder-7b",children:"WizardCoder 7B"})]})}),c.jsx(I,{title:"Temperature",description:"Controls randomness in AI responses (0.0 = deterministic, 1.0 = creative)",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:s.ai.temperature,onChange:C=>E("ai","temperature",parseFloat(C.target.value)),className:"w-24"}),c.jsx("span",{className:"text-sm text-muted-foreground w-8",children:s.ai.temperature})]})}),c.jsx(I,{title:"Max Tokens",description:"Maximum number of tokens in AI responses",children:c.jsxs("select",{value:s.ai.maxTokens,onChange:C=>E("ai","maxTokens",parseInt(C.target.value)),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:1e3,children:"1,000"}),c.jsx("option",{value:2e3,children:"2,000"}),c.jsx("option",{value:4e3,children:"4,000"}),c.jsx("option",{value:8e3,children:"8,000"})]})}),c.jsx(I,{title:"Auto Generate",description:"Automatically generate code suggestions as you type",children:c.jsx(M,{checked:s.ai.autoGenerate,onChange:C=>E("ai","autoGenerate",C)})}),c.jsx(I,{title:"AI Suggestions",description:"Show contextual AI suggestions in the editor",children:c.jsx(M,{checked:s.ai.suggestions,onChange:C=>E("ai","suggestions",C)})})]});case"notifications":return c.jsxs("div",{className:"space-y-1",children:[c.jsx(I,{title:"Project Updates",description:"Get notified when projects are updated",children:c.jsx(M,{checked:s.notifications.projectUpdates,onChange:C=>E("notifications","projectUpdates",C)})}),c.jsx(I,{title:"AI Completions",description:"Get notified when AI completes code generation",children:c.jsx(M,{checked:s.notifications.aiCompletions,onChange:C=>E("notifications","aiCompletions",C)})}),c.jsx(I,{title:"Error Notifications",description:"Get notified about errors and issues",children:c.jsx(M,{checked:s.notifications.errors,onChange:C=>E("notifications","errors",C)})}),c.jsx(I,{title:"Sound Notifications",description:"Play sounds for notifications",children:c.jsx(M,{checked:s.notifications.sound,onChange:C=>E("notifications","sound",C)})}),c.jsx(I,{title:"Email Notifications",description:"Receive notifications via email",children:c.jsx(M,{checked:s.notifications.email,onChange:C=>E("notifications","email",C)})})]});case"privacy":return c.jsxs("div",{className:"space-y-1",children:[c.jsx(I,{title:"Analytics",description:"Help improve DreamBuild by sharing anonymous usage data",children:c.jsx(M,{checked:s.privacy.analytics,onChange:C=>E("privacy","analytics",C)})}),c.jsx(I,{title:"Crash Reports",description:"Automatically send crash reports to help fix bugs",children:c.jsx(M,{checked:s.privacy.crashReports,onChange:C=>E("privacy","crashReports",C)})}),c.jsx(I,{title:"Telemetry",description:"Share performance and usage telemetry",warning:"This may include personal information",children:c.jsx(M,{checked:s.privacy.telemetry,onChange:C=>E("privacy","telemetry",C)})}),c.jsx(I,{title:"Share Usage Statistics",description:"Share anonymous usage statistics with the community",children:c.jsx(M,{checked:s.privacy.shareUsage,onChange:C=>E("privacy","shareUsage",C)})})]});default:return null}};return o?c.jsx("div",{className:"min-h-screen bg-background",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse",children:[c.jsx("div",{className:"h-8 bg-muted rounded w-1/4 mb-6"}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsx("div",{className:"space-y-3",children:[...Array(5)].map((C,F)=>c.jsx("div",{className:"h-12 bg-muted rounded"},F))})}),c.jsx("div",{className:"lg:col-span-3",children:c.jsx("div",{className:"bg-card/50 rounded-xl p-6",children:c.jsx("div",{className:"space-y-4",children:[...Array(6)].map((C,F)=>c.jsx("div",{className:"h-16 bg-muted rounded"},F))})})})]})]})})}):c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Settings"}),c.jsx("p",{className:"text-muted-foreground",children:"Customize your DreamBuild experience and preferences"})]}),c.jsx("div",{className:"flex items-center gap-2",children:d&&c.jsxs(ge.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all duration-200",children:[c.jsx(_j,{className:"h-4 w-4"}),"Save Changes"]})})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[c.jsxs("div",{className:"lg:col-span-1",children:[c.jsx("div",{className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-4",children:c.jsx("nav",{className:"space-y-2",children:k.map(C=>{const F=C.icon;return c.jsxs("button",{onClick:()=>r(C.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${t===C.id?"bg-gray-700 text-white shadow-sm":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:[c.jsx(F,{className:"h-4 w-4"}),C.name]},C.id)})})}),c.jsxs("div",{className:"mt-6 bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-4",children:[c.jsx("h3",{className:"font-semibold text-foreground mb-3",children:"Data Management"}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("button",{onClick:x,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-foreground hover:bg-muted/50 rounded-lg transition-colors",children:[c.jsx(cl,{className:"h-4 w-4"}),"Export Settings"]}),c.jsxs("label",{className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-foreground hover:bg-muted/50 rounded-lg transition-colors cursor-pointer",children:[c.jsx(Cj,{className:"h-4 w-4"}),"Import Settings",c.jsx("input",{type:"file",accept:".json",onChange:S,className:"hidden"})]}),c.jsxs("button",{onClick:y,className:"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[c.jsx(Gg,{className:"h-4 w-4"}),"Reset to Defaults"]})]})]})]}),c.jsx("div",{className:"lg:col-span-3",children:c.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl overflow-hidden",children:[c.jsx("div",{className:"p-6 border-b border-border/50",children:c.jsxs("h2",{className:"text-xl font-semibold text-foreground flex items-center gap-2",children:[Cr.createElement(k.find(C=>C.id===t)?.icon,{className:"h-5 w-5 text-white"}),k.find(C=>C.id===t)?.name]})}),c.jsx("div",{className:"divide-y divide-border/50",children:j()})]})})]})]})})},zJ=()=>{const[n,e]=A.useState(""),[t,r]=A.useState("getting-started"),s=[{id:"getting-started",title:"Getting Started",icon:Jr,articles:[{title:"Quick Start Guide",description:"Get up and running in 5 minutes"},{title:"Installation",description:"Install DreamBuild on your system"},{title:"First Project",description:"Create your first AI-generated project"},{title:"Basic Concepts",description:"Understanding the DreamBuild workflow"}]},{id:"ai-features",title:"AI Features",icon:Rt,articles:[{title:"Code Generation",description:"Generate code with AI assistance"},{title:"Local AI Setup",description:"Set up Ollama for offline AI"},{title:"Template System",description:"Use pre-built project templates"},{title:"AI Models",description:"Available AI models and capabilities"}]},{id:"api-reference",title:"API Reference",icon:Ib,articles:[{title:"REST API",description:"Complete API documentation"},{title:"WebSocket API",description:"Real-time communication"},{title:"Authentication",description:"API authentication methods"},{title:"Rate Limits",description:"API usage limits and quotas"}]},{id:"deployment",title:"Deployment",icon:Rs,articles:[{title:"Firebase Hosting",description:"Deploy to Firebase"},{title:"GitHub Pages",description:"Deploy to GitHub Pages"},{title:"Custom Domain",description:"Set up custom domains"},{title:"CI/CD Pipeline",description:"Automated deployment workflows"}]}],i=[{title:"API Documentation",href:"#",icon:Rt},{title:"GitHub Repository",href:"https://github.com/ronb12/DreamBuild",icon:js},{title:"Community Forum",href:"#",icon:Rs},{title:"Video Tutorials",href:"#",icon:ul}];return c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center",children:c.jsx(eh,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Documentation"}),c.jsx("p",{className:"text-muted-foreground",children:"Complete guides and API references for DreamBuild"})]})]}),c.jsxs("div",{className:"relative max-w-md",children:[c.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx("input",{type:"text",placeholder:"Search documentation...",value:n,onChange:o=>e(o.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"sticky top-8 space-y-2",children:[c.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-4",children:"Sections"}),s.map(o=>{const u=o.icon;return c.jsxs("button",{onClick:()=>r(o.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors ${t===o.id?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:[c.jsx(u,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm font-medium",children:o.title})]},o.id)}),c.jsxs("div",{className:"mt-8 pt-6 border-t border-border",children:[c.jsx("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide mb-4",children:"Quick Links"}),c.jsx("div",{className:"space-y-2",children:i.map(o=>{const u=o.icon;return c.jsxs("a",{href:o.href,target:o.href.startsWith("http")?"_blank":void 0,rel:o.href.startsWith("http")?"noopener noreferrer":void 0,className:"flex items-center gap-3 px-3 py-2 text-sm text-muted-foreground hover:text-foreground hover:bg-muted rounded-lg transition-colors",children:[c.jsx(u,{className:"h-4 w-4"}),c.jsx("span",{children:o.title}),o.href.startsWith("http")&&c.jsx(ul,{className:"h-3 w-3 ml-auto"})]},o.title)})})]})]})}),c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("div",{className:"bg-card border border-border rounded-xl p-6",children:s.map(o=>{const u=o.icon;return c.jsxs("div",{className:t===o.id?"block":"hidden",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:c.jsx(u,{className:"h-5 w-5 text-primary"})}),c.jsxs("div",{children:[c.jsx("h2",{className:"text-2xl font-bold text-foreground",children:o.title}),c.jsxs("p",{className:"text-muted-foreground",children:["Learn about ",o.title.toLowerCase()]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.articles.map((d,p)=>c.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.1},className:"p-4 border border-border rounded-lg hover:shadow-md transition-all duration-200 cursor-pointer group",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors mb-2",children:d.title}),c.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:d.description})]}),c.jsx(yj,{className:"h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors flex-shrink-0"})]})},d.title))})]},o.id)})}),t==="getting-started"&&c.jsxs("div",{className:"mt-8 bg-primary/5 border border-primary/20 rounded-xl p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-foreground mb-4",children:"Ready to get started?"}),c.jsx("p",{className:"text-muted-foreground mb-4",children:"Follow our quick start guide to create your first AI-generated project in minutes."}),c.jsxs("div",{className:"flex gap-3",children:[c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:[c.jsx(Jr,{className:"h-4 w-4"}),"Quick Start Guide"]}),c.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 border border-border rounded-lg hover:bg-muted transition-colors",children:[c.jsx(cl,{className:"h-4 w-4"}),"Download PDF"]})]})]})]})]})]})})},HJ=()=>{const[n,e]=A.useState(""),[t,r]=A.useState("all"),[s,i]=A.useState("grid"),o=[{id:"all",name:"All Examples",count:24},{id:"web",name:"Web Apps",count:8},{id:"mobile",name:"Mobile Apps",count:6},{id:"api",name:"APIs",count:5},{id:"dashboard",name:"Dashboards",count:5}],d=[{id:1,title:"E-commerce Store",description:"Full-featured online store with React, Node.js, and Stripe integration",category:"web",difficulty:"Intermediate",tags:["React","Node.js","Stripe","MongoDB"],stars:156,language:"JavaScript",preview:"https://via.placeholder.com/400x250/2563eb/ffffff?text=E-commerce+Store",github:"https://github.com/example/ecommerce-store"},{id:2,title:"Task Management App",description:"Collaborative task management with real-time updates and team features",category:"web",difficulty:"Beginner",tags:["Vue.js","Firebase","Real-time"],stars:89,language:"JavaScript",preview:"https://via.placeholder.com/400x250/10b981/ffffff?text=Task+Manager",github:"https://github.com/example/task-manager"},{id:3,title:"Fitness Tracker",description:"Mobile app for tracking workouts, nutrition, and fitness goals",category:"mobile",difficulty:"Intermediate",tags:["React Native","GraphQL","Health API"],stars:234,language:"TypeScript",preview:"https://via.placeholder.com/400x250/f59e0b/ffffff?text=Fitness+Tracker",github:"https://github.com/example/fitness-tracker"},{id:4,title:"Analytics Dashboard",description:"Business intelligence dashboard with charts, metrics, and reporting",category:"dashboard",difficulty:"Advanced",tags:["D3.js","Python","PostgreSQL"],stars:312,language:"Python",preview:"https://via.placeholder.com/400x250/8b5cf6/ffffff?text=Analytics+Dashboard",github:"https://github.com/example/analytics-dashboard"},{id:5,title:"REST API Template",description:"Production-ready REST API with authentication, validation, and documentation",category:"api",difficulty:"Intermediate",tags:["Express.js","JWT","Swagger"],stars:178,language:"JavaScript",preview:"https://via.placeholder.com/400x250/ef4444/ffffff?text=REST+API",github:"https://github.com/example/rest-api-template"},{id:6,title:"Portfolio Website",description:"Modern portfolio website with animations, blog, and contact form",category:"web",difficulty:"Beginner",tags:["Next.js","Tailwind","Framer Motion"],stars:67,language:"TypeScript",preview:"https://via.placeholder.com/400x250/06b6d4/ffffff?text=Portfolio",github:"https://github.com/example/portfolio-website"},{id:7,title:"Social Media App",description:"Instagram-like social media app with posts, stories, and messaging",category:"mobile",difficulty:"Advanced",tags:["Flutter","Firebase","Real-time"],stars:445,language:"Dart",preview:"https://via.placeholder.com/400x250/ec4899/ffffff?text=Social+App",github:"https://github.com/example/social-media-app"},{id:8,title:"GraphQL API",description:"Modern GraphQL API with subscriptions, caching, and real-time updates",category:"api",difficulty:"Advanced",tags:["GraphQL","Apollo","Redis"],stars:298,language:"TypeScript",preview:"https://via.placeholder.com/400x250/84cc16/ffffff?text=GraphQL+API",github:"https://github.com/example/graphql-api"}].filter(y=>{const x=y.title.toLowerCase().includes(n.toLowerCase())||y.description.toLowerCase().includes(n.toLowerCase())||y.tags.some(E=>E.toLowerCase().includes(n.toLowerCase())),S=t==="all"||y.category===t;return x&&S}),p=y=>{switch(y){case"Beginner":return"bg-green-100 text-green-800 border-green-200";case"Intermediate":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"Advanced":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=y=>{switch(y){case"web":return Rs;case"mobile":return Y$;case"api":return ff;case"dashboard":return Rw;default:return ix}};return c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center",children:c.jsx(ix,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Examples"}),c.jsx("p",{className:"text-muted-foreground",children:"Explore real-world projects and code examples"})]})]}),c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[c.jsxs("div",{className:"relative max-w-md",children:[c.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx("input",{type:"text",placeholder:"Search examples...",value:n,onChange:y=>e(y.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vj,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("select",{value:t,onChange:y=>r(y.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:o.map(y=>c.jsxs("option",{value:y.id,children:[y.name," (",y.count,")"]},y.id))})]})]}),c.jsxs("div",{className:"flex items-center gap-1 bg-muted/50 p-1 rounded-lg",children:[c.jsx("button",{onClick:()=>i("grid"),className:`p-2 rounded-md transition-colors ${s==="grid"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:c.jsx(xj,{className:"h-4 w-4"})}),c.jsx("button",{onClick:()=>i("list"),className:`p-2 rounded-md transition-colors ${s==="list"?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground"}`,children:c.jsx(bj,{className:"h-4 w-4"})})]})]})]}),c.jsx("div",{className:s==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:d.map((y,x)=>{const S=f(y.category);return c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:`bg-card border border-border rounded-xl overflow-hidden hover:shadow-lg transition-all duration-200 group ${s==="list"?"flex":""}`,children:[c.jsxs("div",{className:`relative ${s==="list"?"w-48 h-32":"h-48"} bg-muted/50`,children:[c.jsx("img",{src:y.preview,alt:y.title,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-3 right-3 flex gap-2",children:c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${p(y.difficulty)}`,children:y.difficulty})}),c.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-all duration-200 flex items-center justify-center opacity-0 group-hover:opacity-100",children:c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 bg-primary text-primary-foreground rounded-lg shadow-lg",title:"Run Example",children:c.jsx(Tb,{className:"h-4 w-4"})}),c.jsx(ge.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"p-2 bg-white text-gray-900 rounded-lg shadow-lg",title:"Copy Code",children:c.jsx(rp,{className:"h-4 w-4"})})]})})]}),c.jsxs("div",{className:`p-4 ${s==="list"?"flex-1":""}`,children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:c.jsx(S,{className:"h-4 w-4 text-primary"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:y.title}),c.jsx("p",{className:"text-sm text-muted-foreground",children:y.language})]})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[c.jsx(Jf,{className:"h-4 w-4"}),c.jsx("span",{children:y.stars})]})]}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:y.description}),c.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:y.tags.map(E=>c.jsx("span",{className:"px-2 py-1 text-xs bg-muted text-muted-foreground rounded-md",children:E},E))}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors text-sm",children:[c.jsx(Tb,{className:"h-4 w-4"}),"Run"]}),c.jsxs("a",{href:y.github,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 px-3 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-sm",children:[c.jsx(js,{className:"h-4 w-4"}),"Code"]}),c.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 border border-border rounded-lg hover:bg-muted transition-colors text-sm",children:[c.jsx(cl,{className:"h-4 w-4"}),"Download"]})]})]})]},y.id)})}),d.length===0&&c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"w-24 h-24 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(ix,{className:"h-12 w-12 text-muted-foreground"})}),c.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No examples found"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filter criteria"}),c.jsx("button",{onClick:()=>{e(""),r("all")},className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Clear Filters"})]}),c.jsxs("div",{className:"mt-12 bg-primary/5 border border-primary/20 rounded-xl p-8 text-center",children:[c.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Have a great example to share?"}),c.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Share your projects with the DreamBuild community and help other developers learn and grow."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsxs("button",{className:"flex items-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:[c.jsx(js,{className:"h-5 w-5"}),"Submit Example"]}),c.jsxs("button",{className:"flex items-center gap-2 px-6 py-3 border border-border rounded-lg hover:bg-muted transition-colors",children:[c.jsx(ul,{className:"h-5 w-5"}),"View Guidelines"]})]})]})]})})},qJ=()=>{const[n,e]=A.useState("discussions"),[t,r]=A.useState(""),s=[{id:"discussions",name:"Discussions",count:156,icon:_b},{id:"projects",name:"Showcase",count:89,icon:Rt},{id:"events",name:"Events",count:12,icon:Cc},{id:"resources",name:"Resources",count:45,icon:bb}],i=[{id:1,title:"How to set up Ollama for local AI development?",author:"Alex Chen",avatar:"https://via.placeholder.com/40x40/2563eb/ffffff?text=AC",time:"2 hours ago",category:"Getting Started",replies:12,likes:24,isPinned:!0,tags:["ollama","local-ai","setup"]},{id:2,title:"Building a React Native app with DreamBuild - Tips and tricks",author:"Sarah Johnson",avatar:"https://via.placeholder.com/40x40/10b981/ffffff?text=SJ",time:"4 hours ago",category:"Mobile Development",replies:8,likes:18,isPinned:!1,tags:["react-native","mobile","tips"]},{id:3,title:"Share your DreamBuild projects - Monthly showcase",author:"Community Team",avatar:"https://via.placeholder.com/40x40/f59e0b/ffffff?text=CT",time:"1 day ago",category:"Showcase",replies:34,likes:67,isPinned:!0,tags:["showcase","projects","monthly"]},{id:4,title:"API rate limits and best practices",author:"Mike Rodriguez",avatar:"https://via.placeholder.com/40x40/8b5cf6/ffffff?text=MR",time:"2 days ago",category:"API",replies:15,likes:31,isPinned:!1,tags:["api","rate-limits","best-practices"]},{id:5,title:"Deploying to Firebase vs GitHub Pages - Pros and cons",author:"Emma Wilson",avatar:"https://via.placeholder.com/40x40/ef4444/ffffff?text=EW",time:"3 days ago",category:"Deployment",replies:22,likes:45,isPinned:!1,tags:["deployment","firebase","github-pages"]}],o=[{id:1,title:"DreamBuild Live Q&A Session",date:"2024-01-25",time:"2:00 PM EST",type:"Live Stream",attendees:156,description:"Join our monthly Q&A session with the DreamBuild team"},{id:2,title:"AI Development Workshop",date:"2024-01-30",time:"10:00 AM EST",type:"Workshop",attendees:89,description:"Learn advanced AI development techniques with DreamBuild"},{id:3,title:"Community Showcase",date:"2024-02-05",time:"6:00 PM EST",type:"Presentation",attendees:234,description:"Featured projects from our amazing community members"}],u=[{label:"Active Members",value:"2,847",icon:Qf},{label:"Discussions",value:"1,234",icon:_b},{label:"Projects Shared",value:"567",icon:Rt},{label:"Events This Month",value:"8",icon:Cc}],d=i.filter(p=>p.title.toLowerCase().includes(t.toLowerCase())||p.category.toLowerCase().includes(t.toLowerCase())||p.tags.some(f=>f.toLowerCase().includes(t.toLowerCase())));return c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center",children:c.jsx(Qf,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Community"}),c.jsx("p",{className:"text-muted-foreground",children:"Connect with developers, share projects, and get help"})]})]}),c.jsxs("div",{className:"relative max-w-md",children:[c.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx("input",{type:"text",placeholder:"Search discussions...",value:t,onChange:p=>r(p.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:u.map((p,f)=>{const y=p.icon;return c.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-card border border-border rounded-xl p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center",children:c.jsx(y,{className:"h-5 w-5 text-primary"})}),c.jsxs("div",{children:[c.jsx("p",{className:"text-2xl font-bold text-foreground",children:p.value}),c.jsx("p",{className:"text-sm text-muted-foreground",children:p.label})]})]})},p.label)})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[c.jsxs("div",{className:"lg:col-span-3",children:[c.jsx("div",{className:"flex items-center gap-1 bg-muted/50 p-1 rounded-xl mb-6",children:s.map(p=>{const f=p.icon;return c.jsxs("button",{onClick:()=>e(p.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200 ${n===p.id?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-background/50"}`,children:[c.jsx(f,{className:"h-4 w-4"}),c.jsx("span",{children:p.name}),c.jsx("span",{className:"px-2 py-1 text-xs bg-muted/50 rounded-full",children:p.count})]},p.id)})}),n==="discussions"&&c.jsx("div",{className:"space-y-4",children:d.map((p,f)=>c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:`bg-card border border-border rounded-xl p-6 hover:shadow-md transition-all duration-200 ${p.isPinned?"border-primary/20 bg-primary/5":""}`,children:[p.isPinned&&c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(Jr,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm font-medium text-primary",children:"Pinned"})]}),c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("img",{src:p.avatar,alt:p.author,className:"w-10 h-10 rounded-full"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-foreground hover:text-primary transition-colors cursor-pointer mb-2",children:p.title}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-3",children:[c.jsxs("span",{children:["by ",p.author]}),c.jsx("span",{children:"•"}),c.jsx("span",{children:p.time}),c.jsx("span",{children:"•"}),c.jsx("span",{className:"px-2 py-1 bg-muted rounded-md",children:p.category})]}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[c.jsx(Sb,{className:"h-4 w-4"}),c.jsx("span",{children:p.replies})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[c.jsx(Wf,{className:"h-4 w-4"}),c.jsx("span",{children:p.likes})]}),c.jsx("div",{className:"flex gap-1",children:p.tags.map(y=>c.jsxs("span",{className:"px-2 py-1 text-xs bg-muted text-muted-foreground rounded-md",children:["#",y]},y))})]})]})]})]},p.id))}),n==="projects"&&c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"w-24 h-24 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(Rt,{className:"h-12 w-12 text-muted-foreground"})}),c.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Project Showcase"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Featured projects from our community will appear here"}),c.jsx("button",{className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Submit Your Project"})]}),n==="events"&&c.jsx("div",{className:"space-y-4",children:o.map((p,f)=>c.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:f*.1},className:"bg-card border border-border rounded-xl p-6 hover:shadow-md transition-all duration-200",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-foreground mb-2",children:p.title}),c.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:p.description}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Cc,{className:"h-4 w-4"}),c.jsx("span",{children:p.date})]}),c.jsx("span",{children:"•"}),c.jsx("span",{children:p.time}),c.jsx("span",{children:"•"}),c.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary rounded-md",children:p.type}),c.jsx("span",{children:"•"}),c.jsxs("span",{children:[p.attendees," attendees"]})]})]}),c.jsx("button",{className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Join Event"})]})},p.id))}),n==="resources"&&c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"w-24 h-24 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(bb,{className:"h-12 w-12 text-muted-foreground"})}),c.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Community Resources"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Curated resources and learning materials will appear here"}),c.jsx("button",{className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Suggest Resource"})]})]}),c.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[c.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[c.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Quick Actions"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:[c.jsx(Kf,{className:"h-4 w-4"}),"Start Discussion"]}),c.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 border border-border rounded-lg hover:bg-muted transition-colors",children:[c.jsx(Rt,{className:"h-4 w-4"}),"Share Project"]}),c.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-3 border border-border rounded-lg hover:bg-muted transition-colors",children:[c.jsx(Cc,{className:"h-4 w-4"}),"Create Event"]})]})]}),c.jsxs("div",{className:"bg-card border border-border rounded-xl p-6",children:[c.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Join Our Community"}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("a",{href:"https://github.com/ronb12/DreamBuild",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 px-4 py-3 border border-border rounded-lg hover:bg-muted transition-colors",children:[c.jsx(js,{className:"h-4 w-4"}),c.jsx("span",{children:"GitHub"})]}),c.jsxs("a",{href:"#",className:"flex items-center gap-3 px-4 py-3 border border-border rounded-lg hover:bg-muted transition-colors",children:[c.jsx(Ij,{className:"h-4 w-4"}),c.jsx("span",{children:"Twitter"})]}),c.jsxs("a",{href:"#",className:"flex items-center gap-3 px-4 py-3 border border-border rounded-lg hover:bg-muted transition-colors",children:[c.jsx(wj,{className:"h-4 w-4"}),c.jsx("span",{children:"Newsletter"})]})]})]}),c.jsxs("div",{className:"bg-primary/5 border border-primary/20 rounded-xl p-6",children:[c.jsx("h3",{className:"font-semibold text-foreground mb-4",children:"Community Guidelines"}),c.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground",children:[c.jsx("li",{children:"• Be respectful and inclusive"}),c.jsx("li",{children:"• Share helpful and relevant content"}),c.jsx("li",{children:"• Follow our code of conduct"}),c.jsx("li",{children:"• Help others learn and grow"})]})]})]})]})]})})},GJ=()=>c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:[c.jsx("div",{className:"text-center mb-16",children:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[c.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg",children:c.jsx("span",{className:"text-white font-bold text-3xl",children:"D"})}),c.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-slate-800 dark:text-white mb-6",children:["About ",c.jsx("span",{className:"text-blue-600",children:"DreamBuild"})]}),c.jsx("p",{className:"text-xl text-slate-600 dark:text-slate-400 max-w-2xl mx-auto leading-relaxed",children:"DreamBuild is a revolutionary AI-powered development platform that transforms your ideas into code. Simply describe what you want to build, and watch as DreamBuild generates complete applications for you."})]})}),c.jsx("div",{className:"mb-16",children:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl p-8 shadow-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 text-center",children:"What We Do"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-3",children:"AI-Powered Development"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Transform your ideas into code using cutting-edge AI models. Simply describe what you want to build, and DreamBuild generates complete, working applications for you."})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-3",children:"Multi-Language Support"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Build applications in popular programming languages including React, Vue, Python, JavaScript, HTML/CSS, and many more. Choose your preferred technology stack."})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-3",children:"Instant Deployment"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Deploy your applications instantly to Firebase Hosting and GitHub Pages. No complex configuration required - just click and deploy."})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-800 dark:text-white mb-3",children:"Local AI Integration"}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Use local AI models for complete privacy and control. No external API keys required - run everything on your own machine for maximum security."})]})]})]})}),c.jsx("div",{className:"mb-16",children:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl p-8 shadow-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 text-center",children:"Our Mission"}),c.jsx("p",{className:"text-lg text-slate-600 dark:text-slate-400 text-center leading-relaxed",children:"To democratize software development by making AI-powered coding tools accessible to everyone. Whether you're an experienced developer or just getting started, DreamBuild empowers you to turn your ideas into reality with the power of artificial intelligence."})]})}),c.jsx("div",{className:"mb-16",children:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"bg-white/90 dark:bg-slate-800/90 backdrop-blur-xl border border-slate-200/50 dark:border-slate-700/50 rounded-2xl p-8 shadow-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white mb-6 text-center",children:"About Bradley Virtual Solutions"}),c.jsxs("div",{className:"text-center",children:[c.jsxs("p",{className:"text-slate-600 dark:text-slate-400 mb-4",children:["DreamBuild is developed by ",c.jsx("strong",{className:"text-slate-800 dark:text-white",children:"Bradley Virtual Solutions, LLC"}),", a company dedicated to creating innovative AI-powered development tools."]}),c.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"Founded by Ronell Bradley, a full-stack developer passionate about AI and web development, we're committed to making advanced development tools accessible to everyone."})]})]})}),c.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center",children:c.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 shadow-xl",children:[c.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Ready to Start Building?"}),c.jsx("p",{className:"text-blue-100 mb-6 max-w-xl mx-auto",children:"Start your journey with DreamBuild today and experience the future of AI-powered development."}),c.jsxs(ge.a,{href:"/ai-builder",whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-blue-600 rounded-xl font-semibold hover:bg-blue-50 transition-colors shadow-lg",children:[c.jsx(Rt,{className:"h-5 w-5"}),"Start Building Now",c.jsx(np,{className:"h-4 w-4"})]})]})})]})}),WJ=()=>{const[n,e]=A.useState(""),[t,r]=A.useState("all"),s=[{id:"all",name:"All Posts",count:24},{id:"tutorials",name:"Tutorials",count:8},{id:"ai",name:"AI & ML",count:6},{id:"development",name:"Development",count:5},{id:"company",name:"Company",count:5}],i={title:"Getting Started with Local AI Development: A Complete Guide",excerpt:"Learn how to set up Ollama, integrate local AI models, and build your first AI-powered application with DreamBuild.",author:"Ronell Bradley",authorAvatar:"https://via.placeholder.com/40x40/2563eb/ffffff?text=RB",publishDate:"2024-01-20",readTime:"8 min read",category:"tutorials",tags:["ai","ollama","tutorial","getting-started"],image:"https://via.placeholder.com/600x300/2563eb/ffffff?text=Local+AI+Guide",likes:156,comments:23},u=[{id:2,title:"Building a React Native App with AI Code Generation",excerpt:"Discover how to leverage DreamBuild's AI capabilities to create a mobile app from scratch.",author:"Sarah Chen",authorAvatar:"https://via.placeholder.com/40x40/10b981/ffffff?text=SC",publishDate:"2024-01-18",readTime:"6 min read",category:"tutorials",tags:["react-native","mobile","ai"],featured:!1,image:"https://via.placeholder.com/400x250/10b981/ffffff?text=React+Native",likes:89,comments:12,views:1523},{id:3,title:"The Future of AI-Powered Development Tools",excerpt:"Exploring emerging trends and technologies that will shape the future of software development.",author:"Marcus Rodriguez",authorAvatar:"https://via.placeholder.com/40x40/f59e0b/ffffff?text=MR",publishDate:"2024-01-15",readTime:"10 min read",category:"ai",tags:["ai","future","technology","trends"],featured:!1,image:"https://via.placeholder.com/400x250/f59e0b/ffffff?text=Future+AI",likes:234,comments:34,views:4567},{id:4,title:"DreamBuild 2.0: What's New and Exciting",excerpt:"Announcing the latest features and improvements in DreamBuild 2.0, including enhanced AI capabilities.",author:"Ronell Bradley",authorAvatar:"https://via.placeholder.com/40x40/2563eb/ffffff?text=RB",publishDate:"2024-01-12",readTime:"5 min read",category:"company",tags:["release","features","announcement"],featured:!1,image:"https://via.placeholder.com/400x250/8b5cf6/ffffff?text=DreamBuild+2.0",likes:167,comments:28,views:3421},{id:5,title:"Best Practices for AI Code Generation",excerpt:"Learn how to write effective prompts and get the best results from AI code generation tools.",author:"Sarah Chen",authorAvatar:"https://via.placeholder.com/40x40/10b981/ffffff?text=SC",publishDate:"2024-01-10",readTime:"7 min read",category:"development",tags:["best-practices","prompts","ai","tips"],featured:!1,image:"https://via.placeholder.com/400x250/06b6d4/ffffff?text=Best+Practices",likes:145,comments:19,views:2890},{id:6,title:"Setting Up Your Development Environment for AI",excerpt:"A comprehensive guide to configuring your development environment for optimal AI-assisted coding.",author:"Marcus Rodriguez",authorAvatar:"https://via.placeholder.com/40x40/f59e0b/ffffff?text=MR",publishDate:"2024-01-08",readTime:"9 min read",category:"tutorials",tags:["setup","environment","development","tools"],featured:!1,image:"https://via.placeholder.com/400x250/ec4899/ffffff?text=Dev+Environment",likes:98,comments:15,views:1876},{id:7,title:"Community Spotlight: Amazing Projects Built with DreamBuild",excerpt:"Highlighting some of the incredible projects our community has created using DreamBuild.",author:"Community Team",authorAvatar:"https://via.placeholder.com/40x40/ef4444/ffffff?text=CT",publishDate:"2024-01-05",readTime:"6 min read",category:"company",tags:["community","showcase","projects","spotlight"],featured:!1,image:"https://via.placeholder.com/400x250/84cc16/ffffff?text=Community+Projects",likes:203,comments:41,views:5234}].filter(f=>{const y=f.title.toLowerCase().includes(n.toLowerCase())||f.excerpt.toLowerCase().includes(n.toLowerCase())||f.tags.some(S=>S.toLowerCase().includes(n.toLowerCase())),x=t==="all"||f.category===t;return y&&x}),d=f=>{switch(f){case"tutorials":return Rt;case"ai":return Jr;case"development":return Rs;case"company":return Dw;default:return eh}},p=f=>{switch(f){case"tutorials":return"bg-blue-100 text-blue-800 border-blue-200";case"ai":return"bg-purple-100 text-purple-800 border-purple-200";case"development":return"bg-green-100 text-green-800 border-green-200";case"company":return"bg-orange-100 text-orange-800 border-orange-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}};return c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center",children:c.jsx(eh,{className:"h-6 w-6 text-primary"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Blog"}),c.jsx("p",{className:"text-muted-foreground",children:"Insights, tutorials, and updates from the DreamBuild team"})]})]}),c.jsx("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:c.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[c.jsxs("div",{className:"relative max-w-md",children:[c.jsx(Kr,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx("input",{type:"text",placeholder:"Search blog posts...",value:n,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(vj,{className:"h-4 w-4 text-muted-foreground"}),c.jsx("select",{value:t,onChange:f=>r(f.target.value),className:"px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:s.map(f=>c.jsxs("option",{value:f.id,children:[f.name," (",f.count,")"]},f.id))})]})]})})]}),c.jsx(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12",children:c.jsx("div",{className:"bg-card border border-border rounded-xl overflow-hidden hover:shadow-lg transition-all duration-200",children:c.jsxs("div",{className:"md:flex",children:[c.jsx("div",{className:"md:w-1/2",children:c.jsx("img",{src:i.image,alt:i.title,className:"w-full h-64 md:h-full object-cover"})}),c.jsxs("div",{className:"md:w-1/2 p-8",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"px-3 py-1 bg-primary text-primary-foreground rounded-full text-sm font-medium",children:"Featured"}),c.jsx("span",{className:`px-3 py-1 text-sm font-medium rounded-full border ${p(i.category)}`,children:i.category})]}),c.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-foreground mb-4 hover:text-primary transition-colors cursor-pointer",children:i.title}),c.jsx("p",{className:"text-muted-foreground mb-6 leading-relaxed",children:i.excerpt}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("img",{src:i.authorAvatar,alt:i.author,className:"w-6 h-6 rounded-full"}),c.jsx("span",{children:i.author})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Cc,{className:"h-4 w-4"}),c.jsx("span",{children:i.publishDate})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Eu,{className:"h-4 w-4"}),c.jsx("span",{children:i.readTime})]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("div",{className:"flex gap-1",children:i.tags.map(f=>c.jsxs("span",{className:"px-2 py-1 text-xs bg-muted text-muted-foreground rounded-md",children:["#",f]},f))}),c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[c.jsx(Wf,{className:"h-4 w-4"}),c.jsx("span",{children:i.likes})]}),c.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[c.jsx(Sb,{className:"h-4 w-4"}),c.jsx("span",{children:i.comments})]})]})]})]})]})})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map((f,y)=>{const x=d(f.category);return c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:y*.1},className:"bg-card border border-border rounded-xl overflow-hidden hover:shadow-lg transition-all duration-200 group",children:[c.jsxs("div",{className:"relative h-48 bg-muted/50",children:[c.jsx("img",{src:f.image,alt:f.title,className:"w-full h-full object-cover"}),c.jsx("div",{className:"absolute top-3 right-3",children:c.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${p(f.category)}`,children:f.category})})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[c.jsx(x,{className:"h-4 w-4 text-primary"}),c.jsx("span",{className:"text-sm text-primary font-medium",children:f.category})]}),c.jsx("h3",{className:"font-semibold text-foreground group-hover:text-primary transition-colors cursor-pointer mb-3 line-clamp-2",children:f.title}),c.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-3",children:f.excerpt}),c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx("img",{src:f.authorAvatar,alt:f.author,className:"w-8 h-8 rounded-full"}),c.jsxs("div",{className:"flex-1",children:[c.jsx("p",{className:"text-sm font-medium text-foreground",children:f.author}),c.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[c.jsx("span",{children:f.publishDate}),c.jsx("span",{children:"•"}),c.jsx("span",{children:f.readTime})]})]})]}),c.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:f.tags.map(S=>c.jsxs("span",{className:"px-2 py-1 text-xs bg-muted text-muted-foreground rounded-md",children:["#",S]},S))}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Wf,{className:"h-4 w-4"}),c.jsx("span",{children:f.likes})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(Sb,{className:"h-4 w-4"}),c.jsx("span",{children:f.comments})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors",children:c.jsx(bb,{className:"h-4 w-4"})}),c.jsx("button",{className:"p-2 hover:bg-muted rounded-lg transition-colors",children:c.jsx(Ej,{className:"h-4 w-4"})}),c.jsxs("button",{className:"flex items-center gap-1 text-primary hover:text-primary-dark transition-colors",children:[c.jsx("span",{className:"text-sm font-medium",children:"Read"}),c.jsx(np,{className:"h-4 w-4"})]})]})]})]})]},f.id)})}),u.length===0&&c.jsxs("div",{className:"text-center py-16",children:[c.jsx("div",{className:"w-24 h-24 bg-muted/50 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx(eh,{className:"h-12 w-12 text-muted-foreground"})}),c.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No posts found"}),c.jsx("p",{className:"text-muted-foreground mb-6",children:"Try adjusting your search or filter criteria"}),c.jsx("button",{onClick:()=>{e(""),r("all")},className:"px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Clear Filters"})]}),c.jsxs("div",{className:"mt-16 bg-primary/5 border border-primary/20 rounded-xl p-8 text-center",children:[c.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Stay Updated"}),c.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Subscribe to our newsletter for the latest tutorials, updates, and insights from the DreamBuild team."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[c.jsx("input",{type:"email",placeholder:"Enter your email",className:"flex-1 px-4 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),c.jsx("button",{className:"px-6 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Subscribe"})]})]})]})})},KJ=()=>{const[n,e]=A.useState({name:"",email:"",subject:"",message:""}),[t,r]=A.useState(!1),[s,i]=A.useState(null),o=[{icon:wj,title:"Email Us",description:"Send us an email and we'll respond within 24 hours",value:"hello@dreambuild.dev",action:"mailto:hello@dreambuild.dev"},{icon:_b,title:"Live Chat",description:"Chat with our support team in real-time",value:"Available 9 AM - 6 PM EST",action:"#"},{icon:J$,title:"Call Us",description:"Speak directly with our team",value:"+1 (555) 123-4567",action:"tel:+15551234567"},{icon:z$,title:"Visit Us",description:"Our headquarters location",value:"San Francisco, CA",action:"#"}],u=[{icon:js,href:"https://github.com/ronb12/DreamBuild",label:"GitHub"},{icon:Ij,href:"#",label:"Twitter"},{icon:$$,href:"#",label:"LinkedIn"},{icon:Rs,href:"#",label:"Website"}],d=[{question:"How do I get started with DreamBuild?",answer:"Simply visit our documentation page for a complete getting started guide. You can also try our AI Builder without any setup required."},{question:"Do you offer technical support?",answer:"Yes! We provide comprehensive technical support through email, live chat, and our community forum. Premium users get priority support."},{question:"Can I use DreamBuild for commercial projects?",answer:"Absolutely! DreamBuild is designed for both personal and commercial use. Check our pricing page for details on different plans."},{question:"How does the AI code generation work?",answer:"DreamBuild uses advanced AI models to generate code based on your prompts. You can use our cloud AI services or set up local AI with Ollama for complete privacy."}],p=y=>{const{name:x,value:S}=y.target;e(E=>({...E,[x]:S}))},f=async y=>{y.preventDefault(),r(!0),await new Promise(x=>setTimeout(x,2e3)),r(!1),i("success"),e({name:"",email:"",subject:"",message:""}),setTimeout(()=>i(null),5e3)};return c.jsx("div",{className:"min-h-screen bg-background",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"text-center mb-12",children:c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[c.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-foreground mb-6",children:["Get in ",c.jsx("span",{className:"text-primary",children:"Touch"})]}),c.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Have questions about DreamBuild? Need help getting started? Want to share feedback? We'd love to hear from you."})]})}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[c.jsx("div",{className:"lg:col-span-2",children:c.jsxs(ge.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"bg-card border border-border rounded-xl p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Send us a Message"}),c.jsx("p",{className:"text-muted-foreground",children:"Fill out the form below and we'll get back to you as soon as possible."})]}),c.jsxs("form",{onSubmit:f,className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-foreground mb-2",children:"Name *"}),c.jsx("input",{type:"text",id:"name",name:"name",value:n.name,onChange:p,required:!0,className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"Your full name"})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-foreground mb-2",children:"Email *"}),c.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:p,required:!0,className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",placeholder:"your@email.com"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"subject",className:"block text-sm font-medium text-foreground mb-2",children:"Subject *"}),c.jsxs("select",{id:"subject",name:"subject",value:n.subject,onChange:p,required:!0,className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[c.jsx("option",{value:"",children:"Select a subject"}),c.jsx("option",{value:"general",children:"General Inquiry"}),c.jsx("option",{value:"support",children:"Technical Support"}),c.jsx("option",{value:"sales",children:"Sales Question"}),c.jsx("option",{value:"feedback",children:"Feedback"}),c.jsx("option",{value:"partnership",children:"Partnership"}),c.jsx("option",{value:"bug",children:"Bug Report"})]})]}),c.jsxs("div",{children:[c.jsx("label",{htmlFor:"message",className:"block text-sm font-medium text-foreground mb-2",children:"Message *"}),c.jsx("textarea",{id:"message",name:"message",value:n.message,onChange:p,required:!0,rows:6,className:"w-full px-4 py-3 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent resize-none",placeholder:"Tell us how we can help you..."})]}),s==="success"&&c.jsxs(ge.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center gap-2 p-4 bg-green-50 border border-green-200 rounded-lg",children:[c.jsx(Ja,{className:"h-5 w-5 text-green-600"}),c.jsx("span",{className:"text-green-800",children:"Message sent successfully! We'll get back to you soon."})]}),c.jsx("button",{type:"submit",disabled:t,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Q$,{className:"h-5 w-5"}),"Send Message"]})})]})]})}),c.jsxs("div",{className:"space-y-8",children:[c.jsxs(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"bg-card border border-border rounded-xl p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Other Ways to Reach Us"}),c.jsx("div",{className:"space-y-4",children:o.map((y,x)=>{const S=y.icon;return c.jsxs("a",{href:y.action,className:"flex items-start gap-4 p-4 border border-border rounded-lg hover:bg-muted transition-colors group",children:[c.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center group-hover:bg-primary/20 transition-colors",children:c.jsx(S,{className:"h-5 w-5 text-primary"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h4",{className:"font-semibold text-foreground group-hover:text-primary transition-colors",children:y.title}),c.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:y.description}),c.jsx("p",{className:"text-sm font-medium text-primary",children:y.value})]})]},y.title)})})]}),c.jsxs(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},className:"bg-card border border-border rounded-xl p-6",children:[c.jsx("h3",{className:"text-xl font-bold text-foreground mb-6",children:"Follow Us"}),c.jsx("div",{className:"grid grid-cols-2 gap-3",children:u.map(y=>{const x=y.icon;return c.jsxs("a",{href:y.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 border border-border rounded-lg hover:bg-muted transition-colors group",children:[c.jsx(x,{className:"h-5 w-5 text-muted-foreground group-hover:text-primary transition-colors"}),c.jsx("span",{className:"text-sm font-medium text-foreground group-hover:text-primary transition-colors",children:y.label})]},y.label)})})]}),c.jsxs(ge.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"bg-primary/5 border border-primary/20 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[c.jsx(Eu,{className:"h-6 w-6 text-primary"}),c.jsx("h3",{className:"text-xl font-bold text-foreground",children:"Business Hours"})]}),c.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Monday - Friday"}),c.jsx("span",{children:"9:00 AM - 6:00 PM EST"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Saturday"}),c.jsx("span",{children:"10:00 AM - 4:00 PM EST"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{children:"Sunday"}),c.jsx("span",{children:"Closed"})]})]}),c.jsx("p",{className:"text-xs text-muted-foreground mt-4",children:"Emergency support available 24/7 for premium users."})]})]})]}),c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mt-16",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Frequently Asked Questions"}),c.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Quick answers to common questions about DreamBuild and our services."})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:d.map((y,x)=>c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4+x*.1},className:"bg-card border border-border rounded-xl p-6",children:[c.jsx("h3",{className:"font-semibold text-foreground mb-3",children:y.question}),c.jsx("p",{className:"text-sm text-muted-foreground",children:y.answer})]},y.question))})]}),c.jsxs(ge.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},className:"mt-16 bg-primary/5 border border-primary/20 rounded-xl p-8 text-center",children:[c.jsx("h3",{className:"text-2xl font-bold text-foreground mb-4",children:"Ready to Get Started?"}),c.jsx("p",{className:"text-muted-foreground mb-6 max-w-2xl mx-auto",children:"Join thousands of developers who are already building amazing applications with DreamBuild."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[c.jsx("button",{className:"px-6 py-3 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors",children:"Try DreamBuild Free"}),c.jsx("button",{className:"px-6 py-3 border border-border rounded-lg hover:bg-muted transition-colors",children:"View Documentation"})]})]})]})})};function JJ(){const n=fl();return["/ai-builder"].includes(n.pathname)?null:c.jsx(tz,{})}function QJ({children:n}){const e=fl();return["/ai-builder"].includes(e.pathname)?c.jsx("main",{children:n}):c.jsx("main",{className:"pt-16",children:n})}function YJ(){return c.jsx(X4,{children:c.jsx(A$,{children:c.jsx(j$,{children:c.jsx(o4,{children:c.jsxs("div",{className:"min-h-screen bg-background",children:[c.jsx(ez,{}),c.jsx(QJ,{children:c.jsxs(ZO,{children:[c.jsx(Fn,{path:"/",element:c.jsx(vq,{})}),c.jsx(Fn,{path:"/ai-builder",element:c.jsx(LJ,{})}),c.jsx(Fn,{path:"/dashboard",element:c.jsx(FJ,{})}),c.jsx(Fn,{path:"/login",element:c.jsx(VJ,{})}),c.jsx(Fn,{path:"/signup",element:c.jsx(BJ,{})}),c.jsx(Fn,{path:"/projects",element:c.jsx(UJ,{})}),c.jsx(Fn,{path:"/settings",element:c.jsx($J,{})}),c.jsx(Fn,{path:"/documentation",element:c.jsx(zJ,{})}),c.jsx(Fn,{path:"/examples",element:c.jsx(HJ,{})}),c.jsx(Fn,{path:"/community",element:c.jsx(qJ,{})}),c.jsx(Fn,{path:"/about",element:c.jsx(GJ,{})}),c.jsx(Fn,{path:"/blog",element:c.jsx(WJ,{})}),c.jsx(Fn,{path:"/contact",element:c.jsx(KJ,{})})]})}),c.jsx(JJ,{}),c.jsx(Y4,{position:"top-right",toastOptions:{duration:4e3,style:{background:"var(--card)",color:"var(--card-foreground)",border:"1px solid var(--border)"}}})]})})})})})}lO.createRoot(document.getElementById("root")).render(c.jsx(A.StrictMode,{children:c.jsx(YJ,{})}));
//# sourceMappingURL=index-CEiu3Ww0.js.map
