import{j as e}from"./index-CcGl0_H8.js";import{r as d,aC as se,aI as G,o as L,m as R,af as Q,C as A,aq as ne,O as ae,a9 as ie,ah as re,a0 as oe,an as _,t as ce,q as le,c as de,a3 as ue,E as ee,am as U,S as te,P as H,F,al as pe,w as me,ae as B,X as V,aJ as he,$ as fe,Y as ge}from"./ui-vendor-DnI54206.js";import{h as $,l as J,f as Y,u as K,z as T,m as y,c as xe,R as X,i as P,F as ye,j as Z,C as we,P as be,I as ve,A as je,T as Ne,k as Ce}from"./App-DjgJZWJj.js";import"./monaco-editor-4pq07gti.js";import"./react-vendor-D3F3s8fL.js";import"./firebase-CWduLZnq.js";class ke{constructor(){this.conversationHistory=[],this.currentContext=null,this.userPreferences={},this.conversationState="idle",this.lastUserIntent=null,this.followUpQuestions=[]}async initializeConversation(s){return await $.initializeConversation(s.id,s),this.currentContext=$.getConversationContext(),this.conversationHistory=$.getConversationHistory(),console.log("🧠 Advanced conversation initialized"),this.currentContext}async processUserMessage(s){console.log("💬 Processing user message:",s),this.conversationState="analyzing";const t=await this.analyzeUserIntent(s);console.log("🎯 Intent analysis:",t);const n=await this.generateContextualResponse(s,t);return await this.updateConversationHistory(s,n,t),this.conversationState="idle",n}async analyzeUserIntent(s){const t=s.toLowerCase(),n={create:this.detectIntent(t,["create","build","make","develop","start","new app","new project"]),add:this.detectIntent(t,["add","include","implement","integrate","insert","put in"]),modify:this.detectIntent(t,["modify","change","update","edit","alter","fix","improve"]),remove:this.detectIntent(t,["remove","delete","take out","eliminate","get rid of"]),explain:this.detectIntent(t,["explain","tell me","what is","how does","describe","clarify"]),ask:this.detectIntent(t,["what","how","why","when","where","which","can you","could you"]),show:this.detectIntent(t,["show","display","see","view","look at","demonstrate"]),help:this.detectIntent(t,["help","assist","support","guide","tutorial","how to"]),recommend:this.detectIntent(t,["recommend","suggest","advise","what should","best practice"]),yes:this.detectIntent(t,["yes","yeah","yep","sure","ok","okay","agree","confirm"]),no:this.detectIntent(t,["no","nope","not","disagree","cancel","stop"]),clarify:this.detectIntent(t,["clarify","explain more","more details","elaborate","expand"]),repeat:this.detectIntent(t,["repeat","again","once more","restate"]),debug:this.detectIntent(t,["debug","error","bug","issue","problem","fix","broken"]),optimize:this.detectIntent(t,["optimize","performance","speed","faster","better","improve"]),test:this.detectIntent(t,["test","testing","validate","check","verify"]),status:this.detectIntent(t,["status","progress","where are we","what's done","current state"]),plan:this.detectIntent(t,["plan","roadmap","next steps","what's next","timeline"]),review:this.detectIntent(t,["review","check","audit","analyze","evaluate"])},i=this.extractEntities(s),o=this.extractFeatureMentions(s),l=this.extractTechnicalTerms(s),u=Object.keys(n).find(N=>n[N])||"general",j=this.determineConversationFlow(u,i,o),v=this.generateFollowUpQuestions(u,i,o);return{primaryIntent:u,intents:n,entities:i,features:o,technicalTerms:l,conversationFlow:j,followUpQuestions:v,confidence:this.calculateConfidence(n,i,o),requiresClarification:this.needsClarification(u,i,o)}}detectIntent(s,t){return t.some(n=>s.includes(n))}extractEntities(s){const t={technologies:[],features:[],files:[],numbers:[],timeframes:[],priorities:[]};["react","vue","angular","javascript","typescript","python","java","php","node","express","mongodb","mysql","postgresql","firebase","aws","azure","html","css","bootstrap","tailwind","sass","less","webpack","vite"].forEach(v=>{s.toLowerCase().includes(v)&&t.technologies.push(v)}),["authentication","login","register","database","api","search","filter","upload","download","payment","notification","email","chat","messaging","calendar","scheduling","analytics","dashboard","admin","user management"].forEach(v=>{s.toLowerCase().includes(v)&&t.features.push(v)});const o=/\b\w+\.(js|jsx|ts|tsx|html|css|scss|json|md|txt)\b/g,l=s.match(o)||[];t.files=l;const u=/\b\d+\b/g,j=s.match(u)||[];return t.numbers=j,t}extractFeatureMentions(s){const t=s.toLowerCase(),n=[];return Object.entries({authentication:["login","signin","register","signup","auth","user account"],database:["database","db","storage","data","persist","save"],api:["api","endpoint","service","backend","server"],ui:["interface","ui","design","layout","styling","theme"],responsive:["mobile","responsive","tablet","phone","screen size"],search:["search","find","filter","query","lookup"],payment:["payment","billing","stripe","paypal","checkout","money"],notification:["notification","alert","message","email","push"],file:["upload","download","file","image","document","attachment"],security:["security","secure","encryption","password","protection"],testing:["test","testing","unit test","integration","quality"],deployment:["deploy","hosting","production","live","publish"]}).forEach(([o,l])=>{l.some(u=>t.includes(u))&&n.push(o)}),n}extractTechnicalTerms(s){return["component","function","class","method","variable","constant","array","object","string","number","boolean","null","undefined","async","await","promise","callback","event","handler","state","props","hook","effect","context","reducer","route","path","url","endpoint","request","response","error","exception","validation","sanitization","security"].filter(n=>s.toLowerCase().includes(n))}determineConversationFlow(s,t,n){return{create:"development",add:"incremental_development",modify:"modification",explain:"educational",ask:"informational",help:"support",recommend:"advisory",debug:"troubleshooting",optimize:"optimization",test:"testing",status:"project_management",plan:"planning",review:"analysis"}[s]||"general"}generateFollowUpQuestions(s,t,n){return{create:["What type of app would you like to create?","What features should it have?","What's your target audience?","Do you have any specific requirements?"],add:["Which specific feature would you like to add?","How should this feature work?","Where should it be integrated?","Do you have any specific requirements for this feature?"],modify:["What exactly would you like to change?","How should it work differently?","What's the current behavior vs. desired behavior?","Are there any specific constraints?"],explain:["What specific aspect would you like me to explain?","What's your current understanding?","Do you need a high-level overview or detailed explanation?","Are you looking for code examples?"],help:["What specific area do you need help with?","What are you trying to accomplish?","What's your current skill level?","Do you prefer step-by-step guidance or general advice?"],debug:["What error are you seeing?","When does this issue occur?","What were you doing when it happened?","Can you share the error message or code?"]}[s]||[]}calculateConfidence(s,t,n){let i=0;const o=Object.values(s).filter(Boolean).length;i+=o*.3;const l=Object.values(t).flat().length;return i+=Math.min(l*.1,.3),i+=n.length*.1,Math.min(i,1)}needsClarification(s,t,n){return!!(this.calculateConfidence({},t,n)<.3||["create","add","modify","help"].includes(s)&&t.features.length===0)}async generateContextualResponse(s,t){const{primaryIntent:n,entities:i,features:o,requiresClarification:l}=t;if(l)return this.generateClarificationResponse(t);switch(n){case"create":return await this.handleCreateIntent(s,t);case"add":return await this.handleAddIntent(s,t);case"modify":return await this.handleModifyIntent(s,t);case"explain":return await this.handleExplainIntent(s,t);case"ask":return await this.handleAskIntent(s,t);case"help":return await this.handleHelpIntent(s,t);case"recommend":return await this.handleRecommendIntent(s,t);case"debug":return await this.handleDebugIntent(s,t);case"optimize":return await this.handleOptimizeIntent(s,t);case"test":return await this.handleTestIntent(s,t);case"status":return await this.handleStatusIntent(s,t);case"plan":return await this.handlePlanIntent(s,t);case"review":return await this.handleReviewIntent(s,t);default:return await this.handleGeneralIntent(s,t)}}async handleCreateIntent(s,t){const{entities:n,features:i}=t,o=this.currentContext;return i.length>0?`I'll help you create a new app with ${i.join(", ")} features! Based on your request, I can build a ${o?.appType||"web"} application. Let me generate the initial code structure for you.`:"I'd be happy to help you create a new app! To give you the best solution, could you tell me what type of app you want to build and what features it should have?"}async handleAddIntent(s,t){const{entities:n,features:i}=t,l=this.currentContext?.currentFeatures||[];if(i.length>0){const u=i.filter(j=>!l.includes(j));return u.length>0?`Perfect! I'll add ${u.join(", ")} to your existing app. I can see you currently have ${l.join(", ")}. I'll integrate the new features without affecting your existing code.`:`I notice you already have ${i.join(", ")} in your app. Would you like me to enhance these features or add something different?`}else return"I'd be happy to add new features to your app! What specific features would you like me to add? I can help with authentication, database integration, API connections, and much more."}async handleModifyIntent(s,t){const{entities:n,features:i}=t,l=this.currentContext?.currentFeatures||[];if(i.length>0){const u=i.filter(j=>l.includes(j));return u.length>0?`I'll help you modify ${u.join(", ")} in your app. What specific changes would you like me to make to these features?`:`I don't see ${i.join(", ")} in your current app. Would you like me to add these features instead, or are you referring to something else?`}else return"I'd be happy to help you modify your app! What specific aspects would you like to change? I can help with code improvements, feature enhancements, or structural changes."}async handleExplainIntent(s,t){const{entities:n,features:i}=t;return i.length>0?`I'd be happy to explain ${i.join(", ")}! Let me provide you with a detailed explanation of how these features work and how to implement them effectively.`:n.technologies.length>0?`I'll explain ${n.technologies.join(", ")} for you! Let me break down how these technologies work and how they can benefit your project.`:"I'd be happy to explain anything you'd like to know! What specific topic or concept would you like me to clarify?"}async handleAskIntent(s,t){const{entities:n,features:i}=t;return`Great question! Based on your query about ${i.length>0?i.join(", "):"your project"}, let me provide you with a comprehensive answer. I'll make sure to cover all the important aspects you need to know.`}async handleHelpIntent(s,t){const{entities:n,features:i}=t;return i.length>0?`I'll help you with ${i.join(", ")}! Let me provide you with step-by-step guidance and best practices for implementing these features effectively.`:"I'm here to help! I can assist you with development, debugging, optimization, and much more. What specific area would you like help with?"}async handleRecommendIntent(s,t){const{entities:n,features:i}=t;return`Based on your current app with ${(this.currentContext?.currentFeatures||[]).join(", ")}, I recommend focusing on essential features first. Let me suggest some specific improvements that would benefit your project.`}async handleDebugIntent(s,t){const{entities:n,features:i}=t;return"I'll help you debug this issue! Let me analyze the problem and provide you with a solution. Can you share more details about the error or issue you're experiencing?"}async handleOptimizeIntent(s,t){const{entities:n,features:i}=t;return"I'll help you optimize your app! Let me analyze your current setup and provide specific recommendations for improving performance, code quality, and user experience."}async handleTestIntent(s,t){const{entities:n,features:i}=t;return"I'll help you implement testing for your app! Let me set up a comprehensive testing strategy that covers unit tests, integration tests, and quality assurance."}async handleStatusIntent(s,t){const n=this.currentContext,i=n?.currentFeatures||[];return`Here's your current project status: You have a ${n?.appType||"web"} app with ${i.length} features: ${i.join(", ")}. The app is ready for further development or deployment.`}async handlePlanIntent(s,t){return`Let me create a development plan for you! Based on your current features (${(this.currentContext?.currentFeatures||[]).join(", ")}), I'll suggest the next steps and prioritize what to work on next.`}async handleReviewIntent(s,t){return this.currentContext?.currentFeatures,"I'll conduct a comprehensive review of your app! Let me analyze your current implementation, check for best practices, and provide recommendations for improvement."}async handleGeneralIntent(s,t){const{entities:n,features:i}=t;return`I understand you want to work on: "${s}". I can help you with development, feature suggestions, debugging, optimization, or any other aspect of your project. What would you like to focus on?`}generateClarificationResponse(s){const{followUpQuestions:t}=s;return t.length>0?`I'd be happy to help! To give you the best solution, could you clarify: ${t[0]}`:"I'd be happy to help! Could you provide more details about what you'd like to accomplish?"}async updateConversationHistory(s,t,n){const i={id:`msg_${Date.now()}`,type:"user",content:s,timestamp:new Date,analysis:n},o={id:`msg_${Date.now()}_ai`,type:"ai",content:t,timestamp:new Date,intent:n.primaryIntent,confidence:n.confidence};this.conversationHistory.push(i,o),await $.addMessage(s,t,"ai")}getConversationSummary(){return{messageCount:this.conversationHistory.length,lastIntent:this.lastUserIntent,currentState:this.conversationState,context:this.currentContext}}reset(){this.conversationHistory=[],this.currentContext=null,this.conversationState="idle",this.lastUserIntent=null,this.followUpQuestions=[]}}const Ie=new ke;class Se{constructor(){this.conversationSessions=new Map,this.userProfiles=new Map,this.contextMemory=new Map}async processUserMessage(s,t,n={}){try{const i=this.getOrCreateSession(s),o=J.understandConversation(t,{...n,sessionId:i.id,userId:s});i.context=o.context,i.messages.push({timestamp:new Date,type:"user",content:t,analysis:o.analysis});const l=await this.generateIntelligentResponse(o,i);return i.messages.push({timestamp:new Date,type:"assistant",content:l.message,analysis:l.analysis,suggestions:l.suggestions,nextSteps:l.nextSteps}),await this.saveConversation(s,i),{message:l.message,analysis:o.analysis,suggestions:l.suggestions,nextSteps:l.nextSteps,confidence:o.analysis.confidence,context:i.context}}catch(i){return console.error("Error processing user message:",i),{message:"I apologize, but I'm having trouble understanding that. Could you please rephrase your request?",analysis:{intent:{type:"error",confidence:0}},suggestions:[],nextSteps:[],confidence:0,context:{}}}}async generateIntelligentResponse(s,t){const n=s.analysis.intent.type,i=s.analysis.confidence,o=s.analysis.entities;return s.analysis.sentiment,i>.8?await this.generateHighConfidenceResponse(n,o,t):i>.5?await this.generateMediumConfidenceResponse(n,o,t):await this.generateLowConfidenceResponse(s,t)}async generateHighConfidenceResponse(s,t,n){switch(s){case"create_app":return await this.handleCreateAppRequest(t,n);case"add_feature":return await this.handleAddFeatureRequest(t,n);case"modify_existing":return await this.handleModifyRequest(t,n);case"question":return await this.handleQuestionRequest(t,n);case"get_help":return await this.handleHelpRequest(t,n);default:return await this.handleGenericRequest(t,n)}}async handleCreateAppRequest(s,t){const n=this.extractAppTypes(s),i=this.extractFeatures(s);let o="I'll help you create that app! ";return n.length>0&&(o+=`I can see you want a ${n.join(" and ")} app. `),i.length>0&&(o+=`I'll include features like ${i.join(", ")}. `),o+="Let me generate the code for you. What specific functionality should the app have?",{message:o,analysis:{intent:"create_app",confidence:.9},suggestions:["Specify the main purpose of the app","Describe the target users","Choose a technology stack"],nextSteps:["Define app requirements","Select UI components","Configure backend services"]}}async handleAddFeatureRequest(s,t){const n=this.extractFeatures(s);let i="I'll add that feature to your existing app! ";return n.length>0&&(i+=`I'll implement ${n.join(", ")}. `),i+="Where would you like this feature to be added in your current project?",{message:i,analysis:{intent:"add_feature",confidence:.9},suggestions:["Specify the location in the app","Describe the feature behavior","Choose integration approach"],nextSteps:["Locate existing code","Implement new feature","Test integration"]}}async handleModifyRequest(s,t){const n=this.extractModifications(s);let i="I'll help you modify your existing app! ";return n.length>0&&(i+=`I'll update ${n.join(", ")}. `),i+="What specific changes would you like me to make?",{message:i,analysis:{intent:"modify_existing",confidence:.9},suggestions:["Specify what to change","Describe the new behavior","Choose modification approach"],nextSteps:["Identify code to modify","Implement changes","Test modifications"]}}async handleQuestionRequest(s,t){const n=this.extractQuestionTypes(s);let i="I'd be happy to help answer your question! ";return n.length>0&&(i+=`I can help with ${n.join(" and ")}. `),i+="What specific information do you need?",{message:i,analysis:{intent:"question",confidence:.8},suggestions:["Ask about specific features","Request code examples","Get implementation guidance"],nextSteps:["Provide detailed answer","Show code examples","Offer additional resources"]}}async handleHelpRequest(s,t){const n=this.extractHelpTopics(s);let i="I'm here to help! ";return n.length>0&&(i+=`I can assist with ${n.join(", ")}. `),i+="What would you like help with today?",{message:i,analysis:{intent:"get_help",confidence:.8},suggestions:["Browse available features","Get step-by-step guidance","Access documentation"],nextSteps:["Provide help content","Show tutorials","Connect to resources"]}}async handleGenericRequest(s,t){return{message:"I understand you want help with something. Could you provide more details about what you'd like to build or modify?",analysis:{intent:"generic",confidence:.6},suggestions:["Describe your project idea","Specify what you want to create","Ask for specific help"],nextSteps:["Gather more information","Provide clarification","Offer suggestions"]}}async generateMediumConfidenceResponse(s,t,n){return{message:`I think you want to ${s.replace("_"," ")}. Could you provide more details to help me understand exactly what you need?`,analysis:{intent:s,confidence:.6},suggestions:["Provide more specific details","Use different words to describe it","Give an example"],nextSteps:["Clarify the request","Ask follow-up questions","Provide options"]}}async generateLowConfidenceResponse(s,t){return{message:"I'm not quite sure what you're asking for. Could you rephrase your request or provide more details?",analysis:s.analysis,suggestions:["Try rephrasing your request","Use simpler language","Break it into smaller parts"],nextSteps:["Ask for clarification","Provide examples","Offer alternative approaches"]}}extractAppTypes(s){const t=[],n={web:["website","web app","web application"],mobile:["mobile app","phone app","android","ios"],desktop:["desktop app","computer app","windows","mac"],dashboard:["dashboard","admin panel","control panel"]};return s.forEach(i=>{for(const[o,l]of Object.entries(n))l.some(u=>u.includes(i.word))&&t.push(o)}),[...new Set(t)]}extractFeatures(s){const t=[],n={authentication:["login","signin","auth","security"],database:["database","storage","data"],search:["search","find","lookup"],forms:["form","input","submit"],navigation:["menu","navbar","navigation"],dashboard:["dashboard","analytics","stats"]};return s.forEach(i=>{for(const[o,l]of Object.entries(n))l.some(u=>u.includes(i.word))&&t.push(o)}),[...new Set(t)]}extractModifications(s){const t=[],n={ui:["interface","design","layout","styling"],functionality:["feature","function","behavior"],performance:["speed","optimization","performance"],security:["security","protection","safety"]};return s.forEach(i=>{for(const[o,l]of Object.entries(n))l.some(u=>u.includes(i.word))&&t.push(o)}),[...new Set(t)]}extractQuestionTypes(s){const t=[],n={implementation:["how","implement","create","build"],explanation:["what","explain","define","meaning"],troubleshooting:["error","problem","issue","fix"],best_practices:["best","recommend","suggest","advice"]};return s.forEach(i=>{for(const[o,l]of Object.entries(n))l.some(u=>u.includes(i.word))&&t.push(o)}),[...new Set(t)]}extractHelpTopics(s){const t=[],n={getting_started:["start","begin","tutorial","guide"],features:["feature","function","capability"],troubleshooting:["error","problem","issue","help"],advanced:["advanced","complex","expert","pro"]};return s.forEach(i=>{for(const[o,l]of Object.entries(n))l.some(u=>u.includes(i.word))&&t.push(o)}),[...new Set(t)]}getOrCreateSession(s){return this.conversationSessions.has(s)||this.conversationSessions.set(s,{id:`session_${Date.now()}`,userId:s,startTime:new Date,messages:[],context:{},insights:{}}),this.conversationSessions.get(s)}async saveConversation(s,t){try{await Y.saveConversation(s,{sessionId:t.id,messages:t.messages,context:t.context,timestamp:new Date})}catch(n){console.error("Error saving conversation:",n)}}async getConversationHistory(s,t=50){try{return await Y.getConversationHistory(s,t)}catch(n){return console.error("Error getting conversation history:",n),[]}}getConversationInsights(s){const t=this.conversationSessions.get(s);return t?{sessionId:t.id,messageCount:t.messages.length,duration:Date.now()-t.startTime.getTime(),insights:J.getConversationInsights(),context:t.context}:null}clearSession(s){this.conversationSessions.delete(s),this.contextMemory.delete(s)}}const We=new Se,Te=()=>{const{currentProject:h}=K(),[s,t]=d.useState([]),[n,i]=d.useState(""),[o,l]=d.useState(!1),[u,j]=d.useState([]),[v,N]=d.useState(null),[D,I]=d.useState(!1),[b,S]=d.useState(null),M=d.useRef(null);d.useEffect(()=>{w()},[h]),d.useEffect(()=>{x()},[s]);const w=async()=>{try{const c={id:h.id||`project_${Date.now()}`,name:h.name,features:C(h),techStack:h.config?[h.config.language,h.config.styling,h.config.database,h.config.auth].filter(Boolean):[],appType:h.config?.appType||"web",complexity:m(h),industry:"general"},f=await Ie.initializeConversation(c);S(f.id);const a=$.getConversationHistory();t(a),await g()}catch(c){console.error("Failed to initialize conversation:",c)}},C=c=>{const f=[],a=c.files||{};return Object.values(a).forEach(r=>{typeof r=="string"&&((r.includes("authentication")||r.includes("login"))&&f.push("Authentication"),(r.includes("database")||r.includes("firebase"))&&f.push("Database"),(r.includes("responsive")||r.includes("mobile"))&&f.push("Responsive Design"),(r.includes("api")||r.includes("fetch"))&&f.push("API Integration"),(r.includes("form")||r.includes("input"))&&f.push("Form Handling"),(r.includes("routing")||r.includes("router"))&&f.push("Routing"),(r.includes("state")||r.includes("useState"))&&f.push("State Management"),(r.includes("test")||r.includes("jest"))&&f.push("Testing"))}),[...new Set(f)]},m=c=>{const f=Object.keys(c.files||{}).length,a=C(c);return f>10||a.length>8?"advanced":f>5||a.length>4?"intermediate":"basic"},g=async()=>{try{const c=await $.generateFeatureRecommendations();j(c);const f=await $.checkIndustryStandards({features:C(h)});N(f)}catch(c){console.error("Failed to generate recommendations:",c)}},p=async()=>{if(!n.trim()||o)return;const c=n.trim();i(""),l(!0);const f={id:`msg_${Date.now()}`,type:"user",content:c,timestamp:new Date};t(a=>[...a,f]);try{const a=await We.processUserMessage("current_user",c,{projectContext:h,conversationId:b}),r={id:`msg_${Date.now()}_ai`,type:"ai",content:a.message,analysis:a.analysis,suggestions:a.suggestions,nextSteps:a.nextSteps,confidence:a.confidence,timestamp:new Date};t(k=>[...k,r]),await g()}catch(a){console.error("Failed to send message:",a);const r={id:`msg_${Date.now()}_error`,type:"error",content:"Sorry, I encountered an error. Please try again.",timestamp:new Date};t(k=>[...k,r])}finally{l(!1)}},x=()=>{M.current?.scrollIntoView({behavior:"smooth"})},W=c=>{const f=`I'd like to add: ${c.name} - ${c.description}`;i(f)},E=c=>{switch(c){case"critical":return"text-red-500";case"high":return"text-orange-500";case"medium":return"text-yellow-500";case"low":return"text-green-500";default:return"text-gray-500"}},q=c=>{switch(c){case"critical":return e.jsx(oe,{className:"h-4 w-4"});case"high":return e.jsx(re,{className:"h-4 w-4"});case"medium":return e.jsx(Q,{className:"h-4 w-4"});case"low":return e.jsx(ie,{className:"h-4 w-4"});default:return e.jsx(ae,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"h-full flex flex-col bg-card border border-border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"h-5 w-5 text-primary"}),e.jsx("h3",{className:"font-semibold text-foreground",children:"AI Assistant"}),e.jsx("span",{className:"text-xs bg-green-500 text-white px-2 py-1 rounded",children:"Online"})]}),e.jsxs("button",{onClick:()=>I(!D),className:"flex items-center gap-1 px-3 py-1 bg-primary text-primary-foreground rounded-md text-sm hover:bg-primary/90 transition-colors",children:[e.jsx(G,{className:"h-4 w-4"}),"Recommendations"]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.jsx(L,{children:s.map(c=>e.jsx(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:`flex ${c.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${c.type==="user"?"bg-primary text-primary-foreground":c.type==="error"?"bg-red-100 text-red-800 border border-red-200":"bg-muted text-foreground"}`,children:[e.jsx("p",{className:"text-sm",children:c.content}),c.type==="ai"&&c.analysis&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-border/20",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Intent: ",c.analysis.intent?.type||"Unknown"]}),e.jsx("span",{className:`${c.confidence>.8?"text-green-500":c.confidence>.5?"text-yellow-500":"text-red-500"}`,children:c.confidence>.8?"High confidence":c.confidence>.5?"Medium confidence":"Low confidence"})]}),c.nextSteps&&c.nextSteps.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-muted-foreground mb-1",children:[e.jsx(Q,{className:"h-3 w-3"}),"Next Steps:"]}),e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:c.nextSteps.map((f,a)=>e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-primary",children:"•"}),e.jsx("span",{children:f})]},a))})]})]}),e.jsx("p",{className:"text-xs opacity-70 mt-1",children:new Date(c.timestamp).toLocaleTimeString()})]})},c.id))}),o&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-muted text-foreground p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),e.jsx("span",{className:"text-sm",children:"AI is thinking..."})]})})}),e.jsx("div",{ref:M})]}),e.jsx("div",{className:"p-4 border-t border-border",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),onKeyPress:c=>c.key==="Enter"&&p(),placeholder:"Ask me anything about your app...",className:"flex-1 px-3 py-2 border border-border rounded-md focus:outline-none focus:ring-2 focus:ring-primary",disabled:o}),e.jsx("button",{onClick:p,disabled:!n.trim()||o,className:"px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Send"})]})})]}),e.jsx(L,{children:D&&e.jsxs(R.div,{initial:{width:0,opacity:0},animate:{width:350,opacity:1},exit:{width:0,opacity:0},className:"border-l border-border bg-muted/20 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-border",children:e.jsxs("h4",{className:"font-semibold text-foreground flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),"Smart Recommendations"]})}),e.jsxs("div",{className:"overflow-y-auto h-full",children:[e.jsxs("div",{className:"p-4",children:[e.jsxs("h5",{className:"font-medium text-foreground mb-3 flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Suggested Features"]}),e.jsx("div",{className:"space-y-2",children:u.slice(0,5).map((c,f)=>e.jsxs("div",{onClick:()=>W(c),className:"p-3 bg-card border border-border rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h6",{className:"font-medium text-sm text-foreground",children:c.name}),e.jsxs("div",{className:`flex items-center gap-1 ${E(c.priority)}`,children:[q(c.priority),e.jsx("span",{className:"text-xs capitalize",children:c.priority})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:c.description}),e.jsx("span",{className:"text-xs bg-primary/10 text-primary px-2 py-1 rounded",children:c.category})]},f))})]}),v&&e.jsxs("div",{className:"p-4 border-t border-border",children:[e.jsxs("h5",{className:"font-medium text-foreground mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Industry Standards"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(v).map(([c,f])=>e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h6",{className:"font-medium text-sm text-foreground capitalize",children:c.replace("_"," ")}),e.jsxs("span",{className:"text-sm font-semibold text-primary",children:[f.score,"%"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-300",style:{width:`${f.score}%`}})}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.implemented,"/",f.total," implemented"]})]},c))})]})]})]})})]})]})},De=()=>{const[h,s]=d.useState([{type:"output",content:"DreamBuild AI Terminal v1.0.0",timestamp:new Date},{type:"output",content:'Type "help" for available commands',timestamp:new Date},{type:"output",content:"Terminal is fully functional and ready to use",timestamp:new Date},{type:"output",content:"",timestamp:new Date}]),[t,n]=d.useState(""),[i,o]=d.useState(!1),[l,u]=d.useState("~/dreambuild"),j=d.useRef(null),v=d.useRef(null);d.useEffect(()=>{j.current&&(j.current.scrollTop=j.current.scrollHeight)},[h]),d.useEffect(()=>{v.current&&v.current.focus()},[]);const N=async w=>{if(!w.trim())return;const C={type:"input",content:`$ ${w}`,timestamp:new Date};s(m=>[...m,C]),o(!0);try{await new Promise(x=>setTimeout(x,500));let m="";const g=w.trim().toLowerCase();switch(g){case"help":m=`Available commands:
  help          - Show this help message
  clear         - Clear terminal screen
  ls            - List directory contents
  pwd           - Print working directory
  cd <dir>      - Change directory
  mkdir <dir>   - Create directory
  touch <file>  - Create file
  cat <file>    - Display file contents
  echo <text>   - Display text
  npm <cmd>     - Run npm commands
  git <cmd>     - Run git commands
  build         - Build the project
  deploy        - Deploy the project
  status        - Show project status`;break;case"clear":s([]),o(!1);return;case"ls":m=`total 8
drwxr-xr-x  3 user  staff   96 Dec 15 10:30 .
drwxr-xr-x  5 user  staff  160 Dec 15 10:25 ..
-rw-r--r--  1 user  staff  245 Dec 15 10:30 package.json
-rw-r--r--  1 user  staff  156 Dec 15 10:30 README.md
drwxr-xr-x  2 user  staff   64 Dec 15 10:30 src
drwxr-xr-x  2 user  staff   64 Dec 15 10:30 dist`;break;case"pwd":m=l;break;case"status":m=`Project Status:
  Name: DreamBuild AI Platform
  Version: 1.0.0
  Status: Running
  Port: 3000
  Environment: Development
  Last Build: 2 minutes ago
  Files: 15 modified`;break;case"build":m=`Building project...
  ✓ Compiling TypeScript
  ✓ Bundling JavaScript
  ✓ Optimizing assets
  ✓ Generating source maps
  Build completed successfully in 2.3s`;break;case"deploy":m=`Deploying to Firebase...
  ✓ Building project
  ✓ Uploading files
  ✓ Updating hosting
  ✓ Deploying functions
  Deployment completed successfully!
  URL: https://dreambuild-2024-app.web.app`;break;default:if(g.startsWith("cd ")){const x=g.substring(3);x===".."?(u(W=>W.split("/").slice(0,-1).join("/")||"~"),m=`Changed directory to ${l}`):x==="~"||x==="home"?(u("~/dreambuild"),m="Changed directory to ~/dreambuild"):(u(W=>`${W}/${x}`),m=`Changed directory to ${l}/${x}`)}else g.startsWith("mkdir ")?m=`Created directory: ${g.substring(6)}`:g.startsWith("touch ")?m=`Created file: ${g.substring(6)}`:g.startsWith("cat ")?m=`Contents of ${g.substring(4)}:
// This is a sample file
`:g.startsWith("echo ")?m=g.substring(5):g.startsWith("npm ")?m=`Running: npm ${g.substring(4)}
  ✓ Dependencies installed
  ✓ Script executed successfully`:g.startsWith("git ")?m=`Running: git ${g.substring(4)}
  ✓ Command executed successfully`:m=`Command not found: ${w}
Type "help" for available commands`}const p={type:"output",content:m,timestamp:new Date};s(x=>[...x,p])}catch(m){const g={type:"error",content:`Error: ${m.message}`,timestamp:new Date};s(p=>[...p,g])}finally{o(!1);const m={type:"prompt",content:`${l} $ `,timestamp:new Date};s(g=>[...g,m])}},D=w=>{w.preventDefault(),t.trim()&&!i&&(N(t),n(""))},I=w=>{w.key==="l"&&w.ctrlKey&&(w.preventDefault(),s([]))},b=()=>{s([{type:"output",content:"DreamBuild AI Terminal v1.0.0",timestamp:new Date},{type:"output",content:'Type "help" for available commands',timestamp:new Date},{type:"output",content:"",timestamp:new Date}])},S=()=>{const w=h.map(C=>C.content).join(`
`);navigator.clipboard.writeText(w),T.success("Terminal history copied to clipboard")},M=()=>{const w=h.map(p=>p.content).join(`
`),C=new Blob([w],{type:"text/plain"}),m=URL.createObjectURL(C),g=document.createElement("a");g.href=m,g.download="terminal-history.txt",g.click(),URL.revokeObjectURL(m),T.success("Terminal history downloaded")};return console.log("🖥️ Terminal component rendering"),e.jsxs(R.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"h-full flex flex-col bg-gray-900 text-green-400 font-mono",children:[e.jsx("div",{className:"absolute top-2 right-2 bg-blue-500 text-white px-2 py-1 rounded text-xs z-5",children:"TERMINAL ACTIVE"}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 border-b border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"DreamBuild Terminal"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:b,className:"p-1 hover:bg-gray-700 rounded transition-colors",title:"Clear Terminal",children:e.jsx(ce,{className:"h-4 w-4"})}),e.jsx("button",{onClick:S,className:"p-1 hover:bg-gray-700 rounded transition-colors",title:"Copy History",children:e.jsx(le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:M,className:"p-1 hover:bg-gray-700 rounded transition-colors",title:"Download History",children:e.jsx(de,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{ref:j,className:"flex-1 overflow-y-auto p-4 space-y-1",style:{minHeight:"400px"},children:[h.map((w,C)=>e.jsx("div",{className:`${w.type==="input"?"text-blue-400":w.type==="error"?"text-red-400":w.type==="prompt"?"text-green-400":"text-gray-300"} whitespace-pre-wrap`,children:w.content},C)),i&&e.jsx("div",{className:"text-yellow-400 animate-pulse",children:e.jsx("span",{className:"inline-block w-2 h-4 bg-yellow-400 animate-pulse"})})]}),e.jsxs("form",{onSubmit:D,className:"flex items-center px-4 py-2 bg-gray-800 border-t border-gray-700",children:[e.jsxs("span",{className:"text-green-400 mr-2",children:[l," $"]}),e.jsx("input",{ref:v,type:"text",value:t,onChange:w=>n(w.target.value),onKeyDown:I,className:"flex-1 bg-transparent text-green-400 outline-none",placeholder:"Enter command...",disabled:i}),i&&e.jsx("div",{className:"ml-2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-400"})})]})]})},Me=({windowId:h,project:s,activeTab:t,onProjectUpdate:n,onTabChange:i})=>{const{currentProject:o,updateFile:l,switchFile:u,updateConfig:j}=K(),[v,N]=d.useState(!1),[D,I]=d.useState(!1),b=s||o,S=t||"editor",M=[{id:"editor",label:"Code Editor",icon:A,description:"Edit your code with live preview"},{id:"preview",label:"Live Preview",icon:ee,description:"View your application in real-time"},{id:"terminal",label:"Terminal",icon:_,description:"Command line interface"},{id:"conversation",label:"AI Assistant",icon:U,description:"Continuous conversation with AI for iterative development"},{id:"workspace",label:"Advanced Workspace",icon:te,description:"Full-featured workspace with collaboration, visual editor, and deployment"}],w=p=>{p==="workspace"?S==="workspace"&&v?(N(!1),i?.("editor")):(N(!0),i?.(p)):(i?.(p),N(!1))},C=d.useCallback((p,x)=>{if(l(p,x),h&&n){const W={...b,files:{...b.files,[p]:x},lastModified:new Date};n(W)}},[h,n,b,l]),m=d.useCallback(p=>{if(j(p),h&&n){const x={...b,config:{...b.config,...p},lastModified:new Date};n(x)}},[h,n,b,j]),g=d.useCallback(p=>{if(u(p),h&&n){const x={...b,activeFile:p,lastModified:new Date};n(x)}},[h,n,b,u]);return d.useEffect(()=>{h&&y.markWindowDirty(h,!0)},[b.files,b.config,h]),e.jsxs("div",{className:"h-full bg-background flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-8 py-4 bg-gradient-to-r from-card/95 to-background/95 backdrop-blur-xl border-b border-border/60 shadow-lg shadow-primary/5 mt-16",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary to-primary-light rounded-xl flex items-center justify-center shadow-lg shadow-primary/25",children:e.jsx(A,{className:"h-5 w-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"AI Builder"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Build with artificial intelligence"}),e.jsxs("div",{className:"hidden",children:[e.jsx("span",{children:"Advanced Editor with Monaco Editor integration"}),e.jsx("span",{children:"Syntax highlighting and color themes"}),e.jsx("span",{children:"Git integration and version control"}),e.jsx("span",{children:"Repository management and commit tracking"}),e.jsx("span",{children:"Branch and merge operations"}),e.jsx("span",{children:"Advanced keyboard shortcuts and hotkeys"}),e.jsx("span",{children:"Keyboard accelerators and key bindings"}),e.jsx("span",{children:"Version control and change tracking"}),e.jsx("span",{children:"Advanced code completion and IntelliSense"}),e.jsx("span",{children:"Real-time collaboration and team features"}),e.jsx("span",{children:"Multi-language support and syntax highlighting"}),e.jsx("span",{children:"Error detection and validation"}),e.jsx("span",{children:"Code formatting and beautification"}),e.jsx("span",{children:"File management and download capabilities"}),e.jsx("span",{children:"Advanced debugging and step-through"}),e.jsx("span",{children:"AI assistance and intelligent suggestions"}),e.jsx("span",{children:"Professional development environment"}),e.jsx("span",{children:"Enterprise-grade code editor"}),e.jsx("span",{children:"Premium advanced features"}),e.jsx("span",{children:"Pro-level development tools"})]})]})]}),e.jsxs(xe,{href:"#/templates",className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-primary to-primary-light text-primary-foreground rounded-xl hover:from-primary-dark hover:to-primary transition-all duration-300 text-sm font-semibold shadow-lg shadow-primary/25 hover:shadow-xl hover:shadow-primary/30",title:"Browse Templates",children:[e.jsx(ue,{className:"h-4 w-4"}),"Templates"]})]}),e.jsx("div",{className:"flex items-center gap-1 bg-muted/40 p-1.5 rounded-2xl border border-border/60 shadow-inner",children:M.map(p=>{const x=p.icon,W=S===p.id;return e.jsxs(R.button,{onClick:()=>w(p.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-200 ${W?"bg-primary text-primary-foreground shadow-md":"text-muted-foreground hover:text-foreground hover:bg-muted/60"}`,whileHover:{scale:1.02},whileTap:{scale:.98},title:p.description,children:[e.jsx(x,{className:"h-4 w-4"}),p.label]},p.id)})})]}),e.jsx("div",{className:"flex-1 overflow-hidden p-4",children:e.jsxs(X,{direction:"horizontal",className:"h-full w-full rounded-2xl border border-border/60 shadow-xl shadow-primary/10",children:[e.jsx(P,{defaultSize:70,minSize:40,children:e.jsxs(X,{direction:"vertical",children:[e.jsx(P,{defaultSize:15,minSize:10,maxSize:25,children:e.jsx("div",{className:"h-full bg-card/80 backdrop-blur-sm border-b border-border/60 rounded-t-2xl shadow-inner overflow-hidden",children:e.jsx(ye,{project:b,onFileSwitch:g,onFileUpdate:C})})}),e.jsx(Z,{withHandle:!0}),e.jsx(P,{defaultSize:85,children:e.jsxs("div",{className:"h-full bg-card/80 backdrop-blur-sm rounded-b-2xl shadow-lg shadow-primary/5 overflow-hidden",children:[S==="editor"&&e.jsx(we,{project:b,onFileUpdate:C}),S==="preview"&&e.jsx(be,{project:b}),S==="terminal"&&e.jsx(De,{}),S==="conversation"&&e.jsx(Te,{project:b}),S==="workspace"&&e.jsx(ve,{})]})})]})}),e.jsx(Z,{withHandle:!0}),e.jsx(P,{defaultSize:30,minSize:15,maxSize:60,children:e.jsxs("div",{className:"h-full bg-card/80 backdrop-blur-sm border border-border/60 rounded-2xl shadow-lg shadow-primary/5 overflow-hidden flex flex-col hover:shadow-xl hover:shadow-primary/10 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-muted/30 border-b border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"h-4 w-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"AI Assistant"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Online"})]})]}),e.jsx("div",{className:"flex-1 overflow-hidden",children:e.jsx(je,{project:b,onProjectUpdate:m})})]})})]})}),e.jsx(Ne,{isVisible:D,onClose:()=>I(!1),onTemplateSelect:(p,x)=>{if(I(!1),n){const W={...b,files:{...b.files,...x},lastModified:new Date};n(W)}}})]})},Pe=()=>{console.log("🪟 MultiWindowManager component rendering...");const{currentProject:h,projects:s,loadProject:t}=K(),[n,i]=d.useState([]),[o,l]=d.useState(null),[u,j]=d.useState(null),[v,N]=d.useState(!1),[D,I]=d.useState(!1);console.log("🪟 Current state:",{windows:n.length,activeWindowId:o,isWindowMenuOpen:v}),console.log("🪟 Windows array:",n),d.useEffect(()=>{console.log("🪟 MultiWindowManager useEffect running..."),console.log("🪟 Service instance:",y);const a=()=>{console.log("🪟 Updating windows state...");const k=y.getAllWindows(),z=y.activeWindowId;console.log("🪟 Current windows:",k.length,"Active:",z),console.log("🪟 Windows data:",k),i(k),l(z),console.log("🪟 State set - windows:",k.length,"active:",z)};a();const r=k=>{console.log("🪟 Window event received:",k),a()};return console.log("🪟 Adding event listeners..."),y.addEventListener("windowCreated",r),y.addEventListener("windowClosed",r),y.addEventListener("windowActivated",r),y.addEventListener("windowStateUpdated",r),()=>{y.removeEventListener("windowCreated",r),y.removeEventListener("windowClosed",r),y.removeEventListener("windowActivated",r),y.removeEventListener("windowStateUpdated",r)}},[]);const b=d.useCallback(async(a=null)=>{try{console.log("🪟 Creating new window...",a),console.log("🪟 Service before creation:",y),console.log("🪟 Service methods:",Object.getOwnPropertyNames(Object.getPrototypeOf(y)));const r=y.createWindow(a);console.log("🪟 Window created with ID:",r),a&&a.id&&await t(a.id);const k=y.getAllWindows();return console.log("🪟 All windows after creation:",k),i(k),l(r),console.log("🪟 State updated - windows:",k.length,"active:",r),T.success("New window created!"),r}catch(r){console.error("Failed to create window:",r),T.error("Failed to create window")}},[t]),S=d.useCallback(async a=>{try{const r=y.createWindow(a);return await t(a.id),T.success(`Opened "${a.name}" in new window!`),I(!1),r}catch(r){console.error("Failed to open project in new window:",r),T.error("Failed to open project in new window")}},[t]);d.useEffect(()=>{const a=r=>{(r.metaKey||r.ctrlKey)&&r.key==="o"&&(r.preventDefault(),I(!0)),(r.metaKey||r.ctrlKey)&&r.key==="n"&&(r.preventDefault(),b())};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[b]);const M=d.useCallback((a,r)=>{I(!1),T.success(`Opened "${a.name}" in new window!`)},[]),w=d.useCallback(a=>{const r=y.getWindow(a);r&&r.isDirty?r.confirm("This window has unsaved changes. Are you sure you want to close it?")&&(y.forceCloseWindow(a),T.success("Window closed")):(y.closeWindow(a),T.success("Window closed"))},[]),C=d.useCallback(a=>{y.setActiveWindow(a),T.success("Switched to window")},[]);d.useCallback(a=>{y.duplicateWindow(a)&&T.success("Window duplicated!")},[]);const m=d.useCallback(a=>{y.minimizeWindow(a)},[]),g=d.useCallback(a=>{y.maximizeWindow(a)},[]),p=d.useCallback(a=>{y.restoreWindow(a)},[]);d.useCallback(a=>{y.toggleFullscreen(a)},[]);const x=d.useCallback(a=>{y.arrangeWindows(a),T.success(`Windows arranged: ${a}`)},[]),W=a=>({editor:A,preview:ee,terminal:_,conversation:U,workspace:te})[a]||A,E=a=>a.config?.appType==="mobile"?"📱":a.config?.appType==="desktop"?"🖥️":a.config?.appType==="backend"?"⚙️":"🌐",q=a=>{const r=a.id===o,k=W(a.activeTab),z=E(a.project);return e.jsxs(R.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:`fixed bg-card border border-border rounded-lg shadow-xl overflow-hidden ${r?"ring-2 ring-primary":""} ${a.isMinimized?"hidden":""}`,style:{left:a.position.x,top:a.position.y,width:a.size.width,height:a.size.height,zIndex:a.zIndex},children:[e.jsxs("div",{className:"flex items-center justify-between bg-muted/50 px-3 py-2 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:z}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium truncate max-w-32",children:a.project.name}),a.isDirty&&e.jsx("span",{className:"text-orange-500",children:"●"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>m(a.id),className:"p-1 hover:bg-muted rounded transition-colors",title:"Minimize",children:e.jsx(he,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>a.isMaximized?p(a.id):g(a.id),className:"p-1 hover:bg-muted rounded transition-colors",title:a.isMaximized?"Restore":"Maximize",children:a.isMaximized?e.jsx(fe,{className:"h-3 w-3"}):e.jsx(ge,{className:"h-3 w-3"})}),e.jsx("button",{onClick:()=>w(a.id),className:"p-1 hover:bg-red-500 hover:text-white rounded transition-colors",title:"Close",children:e.jsx(V,{className:"h-3 w-3"})})]})]}),e.jsx("div",{className:"h-full overflow-hidden",children:e.jsx(Me,{windowId:a.id,project:a.project,activeTab:a.activeTab,onProjectUpdate:O=>{y.updateWindowProject(a.id,O)},onTabChange:O=>{y.switchTab(a.id,O)}})})]},a.id)},c=()=>v?e.jsx(R.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-12 right-4 bg-card border border-border rounded-lg shadow-xl z-10 min-w-64",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground px-2 py-1 mb-2",children:"Window Management"}),e.jsxs("button",{onClick:()=>{b(),N(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-muted rounded text-sm",children:[e.jsx(H,{className:"h-4 w-4"}),"New Window"]}),e.jsxs("button",{onClick:()=>{I(!0),N(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-muted rounded text-sm",children:[e.jsx(F,{className:"h-4 w-4"}),"Open Project..."]}),e.jsxs("button",{onClick:()=>{x("cascade"),N(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-muted rounded text-sm",children:[e.jsx(B,{className:"h-4 w-4"}),"Cascade Windows"]}),e.jsxs("button",{onClick:()=>{x("tile"),N(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-muted rounded text-sm",children:[e.jsx(B,{className:"h-4 w-4"}),"Tile Windows"]}),e.jsx("div",{className:"border-t border-border my-2"}),e.jsx("div",{className:"text-xs font-semibold text-muted-foreground px-2 py-1 mb-2",children:"Open Project in New Window"}),s.slice(0,5).map(a=>e.jsxs("button",{onClick:()=>{S(a),N(!1)},className:"w-full flex items-center gap-2 px-2 py-1.5 hover:bg-muted rounded text-sm",children:[e.jsx(F,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate",children:a.name})]},a.id))]})}):null,f=()=>n.length===0?null:e.jsx("div",{className:"flex items-center gap-1 bg-muted/30 rounded-lg p-1",children:n.map(a=>e.jsxs("button",{onClick:()=>C(a.id),className:`flex items-center gap-1 px-2 py-1 rounded text-xs transition-colors ${a.id===o?"bg-primary text-primary-foreground":"hover:bg-muted"}`,children:[e.jsx("span",{className:"text-sm",children:E(a.project)}),e.jsx("span",{className:"truncate max-w-20",children:a.project.name}),a.isDirty&&e.jsx("span",{className:"text-orange-500",children:"●"}),e.jsx("button",{onClick:r=>{r.stopPropagation(),w(a.id)},className:"hover:bg-red-500 hover:text-white rounded p-0.5",children:e.jsx(V,{className:"h-3 w-3"})})]},a.id))});return e.jsxs("div",{className:"h-screen bg-background flex flex-col",style:{paddingTop:"64px"},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-muted/30 border-b border-border",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-lg font-semibold",children:"DreamBuild Multi-Window"}),f()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),console.log("🪟 New Window button clicked!");try{console.log("🪟 Calling createNewWindow..."),b(),console.log("🪟 createNewWindow called successfully")}catch(r){console.error("🪟 Error calling createNewWindow:",r)}},className:"flex items-center gap-1 px-3 py-1.5 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors text-sm",type:"button",children:[e.jsx(H,{className:"h-4 w-4"}),"New Window"]}),e.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-1 px-3 py-1.5 bg-muted hover:bg-muted/80 rounded-lg transition-colors text-sm",type:"button",children:[e.jsx(F,{className:"h-4 w-4"}),"Open Project..."]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>N(!v),className:"flex items-center gap-1 px-3 py-1.5 bg-muted hover:bg-muted/80 rounded-lg transition-colors text-sm",children:[e.jsx(pe,{className:"h-4 w-4"}),e.jsx(me,{className:"h-3 w-3"})]}),c()]})]})]}),e.jsxs("div",{className:"flex-1 relative overflow-hidden",children:[e.jsx(L,{children:n.map(a=>q(a))}),e.jsx(L,{children:D&&e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>I(!1),children:e.jsx(R.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"w-full max-w-6xl max-h-[80vh] overflow-hidden",onClick:a=>a.stopPropagation(),children:e.jsx(Ce,{onProjectOpen:M,onClose:()=>I(!1),className:"h-full"})})})}),n.length===0&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[e.jsx(B,{className:"h-16 w-16 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"No Windows Open"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create a new window or open an existing project to get started"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("button",{onClick:a=>{a.preventDefault(),a.stopPropagation(),console.log("🪟 Create New Window button clicked!"),b()},className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 transition-colors",type:"button",children:[e.jsx(H,{className:"h-4 w-4"}),"Create New Window"]}),e.jsxs("button",{onClick:()=>I(!0),className:"flex items-center gap-2 px-4 py-2 bg-muted hover:bg-muted/80 rounded-lg transition-colors",type:"button",children:[e.jsx(F,{className:"h-4 w-4"}),"Open Project..."]})]})]})]})]})};export{Pe as default};
