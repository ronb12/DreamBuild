import{u as q,j as r,a as t,z as m}from"./index-c34648c9.js";import{r as n}from"./react-vendor-84e09ada.js";import{o as h,aa as C,C as k,N as g,a9 as y,m as l,P as T,n as L,_ as U,al as V,v as Y,am as J,an as S,p as K,f as Q,s as X,u as Z}from"./ui-vendor-4e0271b3.js";import"https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";import"./monaco-editor-bb996daf.js";import"./router-vendor-e414a864.js";import"./firebase-24a1fa17.js";const de=()=>{const{currentProject:ee,createNewProject:te,projects:w,switchProject:j,saveProject:D,deleteProject:M}=q(),[c,z]=n.useState(""),[i,A]=n.useState("all"),[I,d]=n.useState(!1),[u,v]=n.useState(""),[p,N]=n.useState("web"),[b,x]=n.useState(null);console.log("Projects page rendering, projects:",w);const s=w.map(e=>({id:e.id,name:e.name,type:e.config?.appType||"web",description:e.description||"No description available",status:e.status||"active",lastModified:e.lastModified?new Date(e.lastModified).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],files:Object.keys(e.files||{}).length,size:F(e),tags:H(e),preview:E(e),source:e.source||"dreambuild",githubData:e.githubData})),F=e=>{const a=e.files||{};return`${(Object.values(a).reduce((R,W)=>R+(W?.length||0),0)/1024/1024).toFixed(1)} MB`},H=e=>{const a=[];return e.config?.language&&a.push(e.config.language),e.config?.styling&&a.push(e.config.styling),e.config?.database&&e.config.database!=="none"&&a.push(e.config.database),e.config?.auth&&e.config.auth!=="none"&&a.push(e.config.auth),e.githubData?.language&&a.push(e.githubData.language),[...new Set(a)].slice(0,4)},E=e=>e.githubData?.owner?.avatar_url?e.githubData.owner.avatar_url:`https://via.placeholder.com/300x200/${{web:"007acc",mobile:"ffc107",api:"17a2b8",dashboard:"6f42c1",ecommerce:"28a745"}[e.config?.appType]||"6c757d"}/ffffff?text=${encodeURIComponent(e.name)}`,O=[{id:"all",name:"All",icon:h,count:s.length},{id:"web",name:"Web Apps",icon:C,count:s.filter(e=>e.type==="web").length},{id:"mobile",name:"Mobile",icon:k,count:s.filter(e=>e.type==="mobile").length},{id:"dashboard",name:"Dashboards",icon:g,count:s.filter(e=>e.type==="dashboard").length},{id:"api",name:"APIs",icon:g,count:s.filter(e=>e.type==="api").length},{id:"game",name:"Games",icon:y,count:s.filter(e=>e.type==="game").length},{id:"ecommerce",name:"E-commerce",icon:g,count:s.filter(e=>e.type==="ecommerce").length},{id:"completed",name:"Completed",icon:y,count:s.filter(e=>e.status==="completed").length}],P=s.filter(e=>{const a=c===""||e.name===c,o=i==="all"||e.type===i||e.status===i;return a&&o}),$=async()=>{if(!u.trim()){m.error("Please enter a project name");return}try{const e={id:null,name:u,files:{"index.html":"","style.css":"","script.js":""},activeFile:"index.html",config:{appType:p,language:"javascript",styling:"tailwind",database:"none",auth:"none"},lastModified:new Date,description:`New ${p} project`,status:"active",source:"dreambuild"};await D(u),v(""),N("web"),d(!1),m.success("Project created successfully!")}catch(e){console.error("Failed to create project:",e),m.error("Failed to create project. Please try again.")}},G=async e=>{try{await M(e),x(null),m.success("Project deleted successfully!")}catch(a){console.error("Failed to delete project:",a),m.error("Failed to delete project. Please try again.")}},B=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"development":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-white/10 text-white border-white/20";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_=e=>{switch(e){case"web":return C;case"mobile":return k;case"dashboard":return g;default:return h}};try{return r("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",style:{paddingTop:"100px"},"data-testid":"projects",children:[r("div",{className:"w-full px-1 sm:px-2 lg:px-3 py-8",children:[r("div",{className:"flex flex-col items-center text-center mb-8",children:[r("div",{className:"space-y-3 max-w-4xl",children:[t("h1",{className:"text-5xl font-bold text-gray-900",children:"Projects"}),t("p",{className:"text-lg text-gray-600",children:"Manage and organize your AI-generated projects"}),r("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm",children:[r("span",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg border border-blue-200",children:[t(h,{className:"h-4 w-4"}),s.length," Total Projects"]}),r("span",{className:"flex items-center gap-2 px-3 py-1.5 bg-purple-50 text-purple-700 rounded-lg border border-purple-200",children:[t(y,{className:"h-4 w-4"}),s.filter(e=>e.source==="github").length," GitHub"]})]})]}),t("div",{className:"mt-6",children:r(l.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>d(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:shadow-xl hover:shadow-primary/30 transition-all duration-200 font-semibold text-sm border border-primary/20",children:[t(T,{className:"h-4 w-4"}),"Create New Project"]})})]}),t("div",{className:"flex flex-wrap items-center justify-end gap-2 bg-white/80 backdrop-blur-sm border border-gray-200 p-2 rounded-2xl mb-8 shadow-sm overflow-x-auto ml-auto mr-4",children:O.map(e=>{const a=e.icon,o=i===e.id;return r(l.button,{whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},onClick:()=>A(e.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 whitespace-nowrap ${o?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/25 border border-primary/20":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 border border-transparent hover:border-gray-200"}`,children:[t(a,{className:"h-4 w-4 flex-shrink-0"}),t("span",{className:"text-sm font-medium",children:e.name}),t("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${o?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:e.count})]},e.id)})}),r("div",{className:"flex items-center justify-center gap-3 mb-8 w-full",children:[r("select",{value:c,onChange:e=>z(e.target.value),className:"w-full pl-4 pr-4 py-4 border border-gray-200 rounded-xl bg-white/90 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/50 transition-all duration-200 text-gray-900 text-base shadow-sm hover:shadow-md focus:shadow-lg appearance-none cursor-pointer",children:[r("option",{value:"",children:["All Projects (",s.length,")"]}),s.map(e=>r("option",{value:e.name,children:[e.name," - ",e.type," - ",e.status]},e.id))]}),t(L,{className:"h-6 w-6 text-gray-400 flex-shrink-0"})]}),t("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:P.map((e,a)=>{const o=_(e.type);return r(l.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:a*.1,duration:.3},whileHover:{y:-4,scale:1.02},className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6 hover:shadow-lg hover:shadow-primary/10 transition-all duration-300 group relative overflow-hidden project-item","data-testid":"project-item",children:[t("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r("div",{className:"relative z-10",children:[r("div",{className:"flex items-start justify-between mb-4",children:[r("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r("div",{className:"flex-1 min-w-0",children:[t("h3",{className:"font-semibold text-lg text-foreground truncate group-hover:text-primary transition-colors duration-200",children:e.name}),r("div",{className:"flex items-center gap-2 mt-1",children:[r("span",{className:"text-xs text-gray-500 font-medium capitalize",children:[e.type," Project"]}),t("span",{className:`inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full border ${B(e.status)}`,children:e.status})]})]}),t("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-50 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0 border border-blue-200",children:t(o,{className:"h-6 w-6 text-blue-600"})})]}),r("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[r(l.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-semibold rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",onClick:()=>j(e.id),title:"Open Project",children:[t(U,{className:"h-3.5 w-3.5"}),"Open Project"]}),r("button",{onClick:()=>x(b===e.id?null:e.id),className:"flex items-center gap-1.5 px-3 py-2 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200 hover:border-gray-300 text-gray-600 hover:text-gray-800",title:"More Options",children:[t(V,{className:"h-4 w-4"}),t("span",{className:"text-xs font-medium",children:"Menu"})]})]})]}),t("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2 leading-relaxed",children:e.description}),r("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[e.tags.slice(0,3).map(f=>t("span",{className:"px-2.5 py-1 text-xs bg-muted/50 text-muted-foreground rounded-lg border border-border/50",children:f},f)),e.tags.length>3&&r("span",{className:"px-2.5 py-1 text-xs bg-muted/50 text-muted-foreground rounded-lg border border-border/50",children:["+",e.tags.length-3]})]}),r("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[r("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[r("span",{className:"flex items-center gap-1.5",children:[t(Y,{className:"h-3.5 w-3.5"}),e.files," files"]}),r("span",{className:"flex items-center gap-1.5",children:[t(J,{className:"h-3.5 w-3.5"}),e.lastModified]})]}),t("div",{className:"text-xs text-muted-foreground font-medium",children:e.size})]})]}),t(S,{children:b===e.id&&t(l.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-2 top-14 bg-card/95 backdrop-blur-sm border border-border/50 rounded-xl shadow-xl z-20 min-w-[180px] overflow-hidden",children:r("div",{className:"p-1",children:[r("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-blue-50 rounded-lg transition-colors text-gray-700 hover:text-blue-700",children:[t(K,{className:"h-4 w-4 text-blue-500"}),"Edit Details"]}),r("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-green-50 rounded-lg transition-colors text-gray-700 hover:text-green-700",children:[t(Q,{className:"h-4 w-4 text-green-500"}),"Download"]}),r("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-purple-50 rounded-lg transition-colors text-gray-700 hover:text-purple-700",children:[t(X,{className:"h-4 w-4 text-purple-500"}),"Share Project"]}),t("div",{className:"h-px bg-gray-200 my-2 mx-2"}),r("button",{onClick:()=>G(e.id),className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors hover:text-red-700",children:[t(Z,{className:"h-4 w-4"}),"Delete Project"]})]})})})]},e.id)})}),P.length===0&&r(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[t("div",{className:"w-24 h-24 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl flex items-center justify-center mx-auto mb-6",children:t(h,{className:"h-12 w-12 text-primary"})}),t("h3",{className:"text-2xl font-bold text-foreground mb-3",children:c||i!=="all"?"No projects found":"No projects yet"}),t("p",{className:"text-lg text-muted-foreground mb-8 max-w-md mx-auto",children:c||i!=="all"?"Try adjusting your search or filter criteria to find what you're looking for.":"Start building amazing projects with AI-powered code generation!"}),r(l.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>d(!0),className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:shadow-xl hover:shadow-primary/30 transition-all duration-200 font-semibold text-base border border-primary/20",children:[t(T,{className:"h-5 w-5"}),"Get Started - Create Your First Project"]})]})]}),t(S,{children:I&&t(l.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-10 p-4",onClick:()=>d(!1),children:r(l.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg p-6 w-full max-w-md mx-4",onClick:e=>e.stopPropagation(),children:[t("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Create New Project"}),r("div",{className:"space-y-4",children:[r("div",{children:[t("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Project Name"}),t("input",{type:"text",value:u,onChange:e=>v(e.target.value),placeholder:"Enter project name...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",autoFocus:!0})]}),r("div",{children:[t("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Project Type"}),r("select",{value:p,onChange:e=>N(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[t("option",{value:"web",children:"Web Application"}),t("option",{value:"mobile",children:"Mobile Application"}),t("option",{value:"dashboard",children:"Dashboard"})]})]})]}),r("div",{className:"flex gap-3 mt-6",children:[t(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>d(!1),className:"flex-1 px-4 py-2.5 border border-border rounded-lg text-foreground hover:bg-muted transition-colors text-sm font-medium",children:"Cancel"}),t(l.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:$,className:"flex-1 px-4 py-2.5 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors text-sm font-medium",children:"Create"})]})]})})}),b&&t("div",{className:"fixed inset-0 z-10",onClick:()=>x(null)})]})}catch(e){return console.error("Error in Projects component:",e),t("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",style:{paddingTop:"100px"},children:t("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r("div",{className:"text-center",children:[t("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Projects"}),t("p",{className:"text-gray-600 mb-4",children:"There was an error loading the projects page."}),r("p",{className:"text-sm text-gray-500",children:["Error: ",e.message]})]})})})}};export{de as default};
