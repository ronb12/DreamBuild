import{d as n,j as e}from"./index-pPVRwmfn.js";import{r as a}from"./react-vendor-ChHrLFfk.js";import{p as j,v as N,x as m,j as x}from"./firebase-D3YEaW0R.js";import"https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";import"https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js";import"./monaco-editor-CKIEnvzl.js";import"./router-vendor-BWBiukp8.js";import"./ui-vendor-DbqPAH06.js";const S=()=>{const[r,g]=a.useState([]),[h,u]=a.useState(!0),[i,d]=a.useState(!1),[b,c]=a.useState(0);a.useEffect(()=>{l()},[]);const l=async()=>{try{const t=j(n,"apps"),o=(await N(t)).docs.map(p=>({id:p.id,...p.data()}));g(o)}catch(t){console.error("❌ Error loading apps:",t)}finally{u(!1)}},y=async()=>{if(confirm("Are you sure you want to delete ALL apps? This cannot be undone!")){d(!0),c(0);try{for(const t of r)try{await m(x(n,"apps",t.id)),console.log(`✅ Deleted app: ${t.name||"Unknown"} (${t.id})`),c(s=>s+1)}catch(s){console.error(`❌ Failed to delete app ${t.id}:`,s)}await l()}catch(t){console.error("❌ Error deleting apps:",t)}finally{d(!1)}}},f=async(t,s)=>{if(confirm(`Are you sure you want to delete "${s||"Unknown"}"?`))try{await m(x(n,"apps",t)),console.log(`✅ Deleted app: ${s} (${t})`),await l()}catch(o){console.error(`❌ Failed to delete app ${t}:`,o)}};return h?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading apps..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Delete Apps"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:["Found ",r.length," apps in the gallery. You can delete individual apps or all apps at once."]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:y,disabled:i||r.length===0,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:i?`Deleting... (${b}/${r.length})`:"Delete All Apps"}),e.jsx("button",{onClick:l,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors",children:"Refresh List"})]})]}),r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🎉"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"All apps deleted!"}),e.jsx("p",{className:"text-gray-600",children:"The gallery is now empty."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(t=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:t.name||"Untitled Project"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["ID: ",t.id]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Created: ",t.createdAt?new Date(t.createdAt.seconds*1e3).toLocaleDateString():"Unknown"]}),e.jsx("button",{onClick:()=>f(t.id,t.name),className:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition-colors text-sm",children:"Delete"})]},t.id))})]})})})};export{S as default};
