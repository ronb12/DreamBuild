import{j as t}from"./index-AdaOBUtq.js";import{r as i,o as x,ad as N,C as P,ah as u,ag as f,p as s,P as C,m as W,av as _,as as L,z as U,aD as V,N as k,q as Y,c as J,u as K,w as Q}from"./ui-vendor-QtYWuEup.js";import{u as X,z as d}from"./App-CKp6_Vgh.js";import"./monaco-editor-4pq07gti.js";import"./react-vendor-D3F3s8fL.js";import"./firebase-C4KlH9TP.js";const ie=()=>{const{currentProject:Z,createNewProject:ee,projects:y,switchProject:T,saveProject:S,deleteProject:D}=X(),[n,M]=i.useState(""),[o,z]=i.useState("all"),[A,c]=i.useState(!1),[m,w]=i.useState(""),[h,j]=i.useState("web"),[g,p]=i.useState(null);console.log("Projects page rendering, projects:",y);const a=y.map(e=>({id:e.id,name:e.name,type:e.config?.appType||"web",description:e.description||"No description available",status:e.status||"active",lastModified:e.lastModified?new Date(e.lastModified).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],files:Object.keys(e.files||{}).length,size:I(e),tags:F(e),preview:E(e),source:e.source||"dreambuild",githubData:e.githubData})),I=e=>{const r=e.files||{};return`${(Object.values(r).reduce((R,q)=>R+(q?.length||0),0)/1024/1024).toFixed(1)} MB`},F=e=>{const r=[];return e.config?.language&&r.push(e.config.language),e.config?.styling&&r.push(e.config.styling),e.config?.database&&e.config.database!=="none"&&r.push(e.config.database),e.config?.auth&&e.config.auth!=="none"&&r.push(e.config.auth),e.githubData?.language&&r.push(e.githubData.language),[...new Set(r)].slice(0,4)},E=e=>e.githubData?.owner?.avatar_url?e.githubData.owner.avatar_url:`https://via.placeholder.com/300x200/${{web:"007acc",mobile:"ffc107",api:"17a2b8",dashboard:"6f42c1",ecommerce:"28a745"}[e.config?.appType]||"6c757d"}/ffffff?text=${encodeURIComponent(e.name)}`,H=[{id:"all",name:"All",icon:x,count:a.length},{id:"web",name:"Web Apps",icon:N,count:a.filter(e=>e.type==="web").length},{id:"mobile",name:"Mobile",icon:P,count:a.filter(e=>e.type==="mobile").length},{id:"dashboard",name:"Dashboards",icon:u,count:a.filter(e=>e.type==="dashboard").length},{id:"api",name:"APIs",icon:u,count:a.filter(e=>e.type==="api").length},{id:"game",name:"Games",icon:f,count:a.filter(e=>e.type==="game").length},{id:"ecommerce",name:"E-commerce",icon:u,count:a.filter(e=>e.type==="ecommerce").length},{id:"completed",name:"Completed",icon:f,count:a.filter(e=>e.status==="completed").length}],v=a.filter(e=>{const r=n===""||e.name===n,l=o==="all"||e.type===o||e.status===o;return r&&l}),O=async()=>{if(!m.trim()){d.error("Please enter a project name");return}try{const e={id:null,name:m,files:{"index.html":"","style.css":"","script.js":""},activeFile:"index.html",config:{appType:h,language:"javascript",styling:"tailwind",database:"none",auth:"none"},lastModified:new Date,description:`New ${h} project`,status:"active",source:"dreambuild"};await S(m),w(""),j("web"),c(!1),d.success("Project created successfully!")}catch(e){console.error("Failed to create project:",e),d.error("Failed to create project. Please try again.")}},$=async e=>{try{await D(e),p(null),d.success("Project deleted successfully!")}catch(r){console.error("Failed to delete project:",r),d.error("Failed to delete project. Please try again.")}},G=e=>{switch(e){case"active":return"bg-green-100 text-green-800 border-green-200";case"development":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-white/10 text-white border-white/20";default:return"bg-gray-100 text-gray-800 border-gray-200"}},B=e=>{switch(e){case"web":return N;case"mobile":return P;case"dashboard":return u;default:return x}};try{return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",style:{paddingTop:"100px"},"data-testid":"projects",children:[t.jsxs("div",{className:"w-full px-1 sm:px-2 lg:px-3 py-8",children:[t.jsxs("div",{className:"flex flex-col items-center text-center mb-8",children:[t.jsxs("div",{className:"space-y-3 max-w-4xl",children:[t.jsx("h1",{className:"text-5xl font-bold text-gray-900",children:"Projects"}),t.jsx("p",{className:"text-lg text-gray-600",children:"Manage and organize your AI-generated projects"}),t.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm",children:[t.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-50 text-blue-700 rounded-lg border border-blue-200",children:[t.jsx(x,{className:"h-4 w-4"}),a.length," Total Projects"]}),t.jsxs("span",{className:"flex items-center gap-2 px-3 py-1.5 bg-purple-50 text-purple-700 rounded-lg border border-purple-200",children:[t.jsx(f,{className:"h-4 w-4"}),a.filter(e=>e.source==="github").length," GitHub"]})]})]}),t.jsx("div",{className:"mt-6",children:t.jsxs(s.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>c(!0),className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:shadow-xl hover:shadow-primary/30 transition-all duration-200 font-semibold text-sm border border-primary/20",children:[t.jsx(C,{className:"h-4 w-4"}),"Create New Project"]})})]}),t.jsx("div",{className:"flex flex-wrap items-center justify-end gap-2 bg-white/80 backdrop-blur-sm border border-gray-200 p-2 rounded-2xl mb-8 shadow-sm overflow-x-auto ml-auto mr-4",children:H.map(e=>{const r=e.icon,l=o===e.id;return t.jsxs(s.button,{whileHover:{scale:1.02,y:-1},whileTap:{scale:.98},onClick:()=>z(e.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 whitespace-nowrap ${l?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/25 border border-primary/20":"text-gray-600 hover:text-gray-900 hover:bg-gray-100 border border-transparent hover:border-gray-200"}`,children:[t.jsx(r,{className:"h-4 w-4 flex-shrink-0"}),t.jsx("span",{className:"text-sm font-medium",children:e.name}),t.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-semibold ${l?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:e.count})]},e.id)})}),t.jsxs("div",{className:"flex items-center justify-center gap-3 mb-8 w-full",children:[t.jsxs("select",{value:n,onChange:e=>M(e.target.value),className:"w-full pl-4 pr-4 py-4 border border-gray-200 rounded-xl bg-white/90 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary/50 transition-all duration-200 text-gray-900 text-base shadow-sm hover:shadow-md focus:shadow-lg appearance-none cursor-pointer",children:[t.jsxs("option",{value:"",children:["All Projects (",a.length,")"]}),a.map(e=>t.jsxs("option",{value:e.name,children:[e.name," - ",e.type," - ",e.status]},e.id))]}),t.jsx(W,{className:"h-6 w-6 text-gray-400 flex-shrink-0"})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4 lg:gap-6",children:v.map((e,r)=>{const l=B(e.type);return t.jsxs(s.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:r*.1,duration:.3},whileHover:{y:-4,scale:1.02},className:"bg-card/50 backdrop-blur-sm border border-border/50 rounded-xl p-6 hover:shadow-lg hover:shadow-primary/10 transition-all duration-300 group relative overflow-hidden project-item","data-testid":"project-item",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),t.jsxs("div",{className:"relative z-10",children:[t.jsxs("div",{className:"flex items-start justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-lg text-foreground truncate group-hover:text-primary transition-colors duration-200",children:e.name}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsxs("span",{className:"text-xs text-gray-500 font-medium capitalize",children:[e.type," Project"]}),t.jsx("span",{className:`inline-flex items-center px-2.5 py-1 text-xs font-medium rounded-full border ${G(e.status)}`,children:e.status})]})]}),t.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-blue-50 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300 flex-shrink-0 border border-blue-200",children:t.jsx(l,{className:"h-6 w-6 text-blue-600"})})]}),t.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[t.jsxs(s.button,{whileHover:{scale:1.05,y:-1},whileTap:{scale:.95},className:"flex items-center gap-1.5 px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white text-sm font-semibold rounded-lg transition-all duration-200 shadow-sm hover:shadow-md",onClick:()=>T(e.id),title:"Open Project",children:[t.jsx(_,{className:"h-3.5 w-3.5"}),"Open Project"]}),t.jsxs("button",{onClick:()=>p(g===e.id?null:e.id),className:"flex items-center gap-1.5 px-3 py-2 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200 hover:border-gray-300 text-gray-600 hover:text-gray-800",title:"More Options",children:[t.jsx(L,{className:"h-4 w-4"}),t.jsx("span",{className:"text-xs font-medium",children:"Menu"})]})]})]}),t.jsx("p",{className:"text-sm text-muted-foreground mb-4 line-clamp-2 leading-relaxed",children:e.description}),t.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[e.tags.slice(0,3).map(b=>t.jsx("span",{className:"px-2.5 py-1 text-xs bg-muted/50 text-muted-foreground rounded-lg border border-border/50",children:b},b)),e.tags.length>3&&t.jsxs("span",{className:"px-2.5 py-1 text-xs bg-muted/50 text-muted-foreground rounded-lg border border-border/50",children:["+",e.tags.length-3]})]}),t.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border/50",children:[t.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(U,{className:"h-3.5 w-3.5"}),e.files," files"]}),t.jsxs("span",{className:"flex items-center gap-1.5",children:[t.jsx(V,{className:"h-3.5 w-3.5"}),e.lastModified]})]}),t.jsx("div",{className:"text-xs text-muted-foreground font-medium",children:e.size})]})]}),t.jsx(k,{children:g===e.id&&t.jsx(s.div,{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},className:"absolute right-2 top-14 bg-card/95 backdrop-blur-sm border border-border/50 rounded-xl shadow-xl z-20 min-w-[180px] overflow-hidden",children:t.jsxs("div",{className:"p-1",children:[t.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-blue-50 rounded-lg transition-colors text-gray-700 hover:text-blue-700",children:[t.jsx(Y,{className:"h-4 w-4 text-blue-500"}),"Edit Details"]}),t.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-green-50 rounded-lg transition-colors text-gray-700 hover:text-green-700",children:[t.jsx(J,{className:"h-4 w-4 text-green-500"}),"Download"]}),t.jsxs("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-purple-50 rounded-lg transition-colors text-gray-700 hover:text-purple-700",children:[t.jsx(K,{className:"h-4 w-4 text-purple-500"}),"Share Project"]}),t.jsx("div",{className:"h-px bg-gray-200 my-2 mx-2"}),t.jsxs("button",{onClick:()=>$(e.id),className:"w-full flex items-center gap-3 px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors hover:text-red-700",children:[t.jsx(Q,{className:"h-4 w-4"}),"Delete Project"]})]})})})]},e.id)})}),v.length===0&&t.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[t.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-primary/20 to-primary/10 rounded-2xl flex items-center justify-center mx-auto mb-6",children:t.jsx(x,{className:"h-12 w-12 text-primary"})}),t.jsx("h3",{className:"text-2xl font-bold text-foreground mb-3",children:n||o!=="all"?"No projects found":"No projects yet"}),t.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-md mx-auto",children:n||o!=="all"?"Try adjusting your search or filter criteria to find what you're looking for.":"Start building amazing projects with AI-powered code generation!"}),t.jsxs(s.button,{whileHover:{scale:1.05,y:-2},whileTap:{scale:.95},onClick:()=>c(!0),className:"inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl hover:shadow-xl hover:shadow-primary/30 transition-all duration-200 font-semibold text-base border border-primary/20",children:[t.jsx(C,{className:"h-5 w-5"}),"Get Started - Create Your First Project"]})]})]}),t.jsx(k,{children:A&&t.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center z-10 p-4",onClick:()=>c(!1),children:t.jsxs(s.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-card border border-border rounded-lg p-6 w-full max-w-md mx-4",onClick:e=>e.stopPropagation(),children:[t.jsx("h2",{className:"text-xl font-semibold text-foreground mb-4",children:"Create New Project"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Project Name"}),t.jsx("input",{type:"text",value:m,onChange:e=>w(e.target.value),placeholder:"Enter project name...",className:"w-full px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",autoFocus:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Project Type"}),t.jsxs("select",{value:h,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-border rounded-lg bg-background focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent",children:[t.jsx("option",{value:"web",children:"Web Application"}),t.jsx("option",{value:"mobile",children:"Mobile Application"}),t.jsx("option",{value:"dashboard",children:"Dashboard"})]})]})]}),t.jsxs("div",{className:"flex gap-3 mt-6",children:[t.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>c(!1),className:"flex-1 px-4 py-2.5 border border-border rounded-lg text-foreground hover:bg-muted transition-colors text-sm font-medium",children:"Cancel"}),t.jsx(s.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:O,className:"flex-1 px-4 py-2.5 bg-primary text-primary-foreground rounded-lg hover:bg-primary-dark transition-colors text-sm font-medium",children:"Create"})]})]})})}),g&&t.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>p(null)})]})}catch(e){return console.error("Error in Projects component:",e),t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100",style:{paddingTop:"100px"},children:t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error Loading Projects"}),t.jsx("p",{className:"text-gray-600 mb-4",children:"There was an error loading the projects page."}),t.jsxs("p",{className:"text-sm text-gray-500",children:["Error: ",e.message]})]})})})}};export{ie as default};
